<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>APM:Libraries: libraries/AP_NavEKF3/AP_NavEKF3.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">APM:Libraries
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_bc0718b08fb2015b8e59c47b2805f60c.html">libraries</a></li><li class="navelem"><a class="el" href="dir_be7d8c815974726f2830f0fa14d80621.html">AP_NavEKF3</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle"><div class="title">AP_NavEKF3.cpp</div></div>
</div><!--header-->
<div class="contents">
<a href="AP__NavEKF3_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="preprocessor">#include &lt;<a class="code" href="AP__HAL_8h.html">AP_HAL/AP_HAL.h</a>&gt;</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span> </div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="preprocessor">#include &quot;<a class="code" href="AP__NavEKF3__core_8h.html">AP_NavEKF3_core.h</a>&quot;</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="preprocessor">#include &lt;<a class="code" href="GCS_8h.html">GCS_MAVLink/GCS.h</a>&gt;</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="preprocessor">#include &lt;<a class="code" href="AP__Logger_8h.html">AP_Logger/AP_Logger.h</a>&gt;</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="preprocessor">#include &lt;<a class="code" href="AP__Vehicle__Type_8h.html">AP_Vehicle/AP_Vehicle_Type.h</a>&gt;</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="preprocessor">#include &lt;<a class="code" href="AP__BoardConfig_8h.html">AP_BoardConfig/AP_BoardConfig.h</a>&gt;</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span> </div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="preprocessor">#include &quot;<a class="code" href="AP__DAL_8h.html">AP_DAL/AP_DAL.h</a>&quot;</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span> </div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="preprocessor">#include &lt;new&gt;</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span> </div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="comment">/*</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="comment">  parameter defaults for different types of vehicle. The</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="comment">  APM_BUILD_DIRECTORY is taken from the main vehicle directory name</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="comment">  where the code is built.</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="comment"> */</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="preprocessor">#if APM_BUILD_COPTER_OR_HELI || APM_BUILD_TYPE(APM_BUILD_Replay)</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="comment">// copter defaults</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="preprocessor">#define VELNE_M_NSE_DEFAULT     0.3f</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span><span class="preprocessor">#define VELD_M_NSE_DEFAULT      0.5f</span></div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span><span class="preprocessor">#define POSNE_M_NSE_DEFAULT     0.5f</span></div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span><span class="preprocessor">#define ALT_M_NSE_DEFAULT       2.0f</span></div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span><span class="preprocessor">#define MAG_M_NSE_DEFAULT       0.05f</span></div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span><span class="preprocessor">#define GYRO_P_NSE_DEFAULT      1.5E-02f</span></div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span><span class="preprocessor">#define ACC_P_NSE_DEFAULT       3.5E-01f</span></div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span><span class="preprocessor">#define GBIAS_P_NSE_DEFAULT     1.0E-03f</span></div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span><span class="preprocessor">#define ABIAS_P_NSE_DEFAULT     2.0E-02f</span></div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span><span class="preprocessor">#define MAGB_P_NSE_DEFAULT      1.0E-04f</span></div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span><span class="preprocessor">#define MAGE_P_NSE_DEFAULT      1.0E-03f</span></div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span><span class="preprocessor">#define VEL_I_GATE_DEFAULT      500</span></div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span><span class="preprocessor">#define POS_I_GATE_DEFAULT      500</span></div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span><span class="preprocessor">#define HGT_I_GATE_DEFAULT      500</span></div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span><span class="preprocessor">#define MAG_I_GATE_DEFAULT      300</span></div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span><span class="preprocessor">#define MAG_CAL_DEFAULT         3</span></div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span><span class="preprocessor">#define GLITCH_RADIUS_DEFAULT   25</span></div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span><span class="preprocessor">#define FLOW_MEAS_DELAY         10</span></div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span><span class="preprocessor">#define FLOW_M_NSE_DEFAULT      0.25f</span></div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span><span class="preprocessor">#define FLOW_I_GATE_DEFAULT     300</span></div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span><span class="preprocessor">#define CHECK_SCALER_DEFAULT    100</span></div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span><span class="preprocessor">#define FLOW_USE_DEFAULT        1</span></div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span><span class="preprocessor">#define WIND_P_NSE_DEFAULT      0.2</span></div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span> </div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span><span class="preprocessor">#elif APM_BUILD_TYPE(APM_BUILD_Rover)</span></div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span><span class="comment">// rover defaults</span></div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span><span class="preprocessor">#define VELNE_M_NSE_DEFAULT     0.5f</span></div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span><span class="preprocessor">#define VELD_M_NSE_DEFAULT      0.7f</span></div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span><span class="preprocessor">#define POSNE_M_NSE_DEFAULT     0.5f</span></div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span><span class="preprocessor">#define ALT_M_NSE_DEFAULT       2.0f</span></div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span><span class="preprocessor">#define MAG_M_NSE_DEFAULT       0.05f</span></div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span><span class="preprocessor">#define GYRO_P_NSE_DEFAULT      1.5E-02f</span></div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span><span class="preprocessor">#define ACC_P_NSE_DEFAULT       3.5E-01f</span></div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span><span class="preprocessor">#define GBIAS_P_NSE_DEFAULT     1.0E-03f</span></div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span><span class="preprocessor">#define ABIAS_P_NSE_DEFAULT     2.0E-02f</span></div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span><span class="preprocessor">#define MAGB_P_NSE_DEFAULT      1.0E-04f</span></div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span><span class="preprocessor">#define MAGE_P_NSE_DEFAULT      1.0E-03f</span></div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span><span class="preprocessor">#define VEL_I_GATE_DEFAULT      500</span></div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span><span class="preprocessor">#define POS_I_GATE_DEFAULT      500</span></div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span><span class="preprocessor">#define HGT_I_GATE_DEFAULT      500</span></div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span><span class="preprocessor">#define MAG_I_GATE_DEFAULT      300</span></div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span><span class="preprocessor">#define MAG_CAL_DEFAULT         2</span></div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span><span class="preprocessor">#define GLITCH_RADIUS_DEFAULT   25</span></div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span><span class="preprocessor">#define FLOW_MEAS_DELAY         10</span></div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span><span class="preprocessor">#define FLOW_M_NSE_DEFAULT      0.25f</span></div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span><span class="preprocessor">#define FLOW_I_GATE_DEFAULT     300</span></div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span><span class="preprocessor">#define CHECK_SCALER_DEFAULT    100</span></div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span><span class="preprocessor">#define FLOW_USE_DEFAULT        1</span></div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span><span class="preprocessor">#define WIND_P_NSE_DEFAULT      0.1</span></div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span> </div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span><span class="preprocessor">#elif APM_BUILD_TYPE(APM_BUILD_ArduPlane)</span></div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span><span class="comment">// plane defaults</span></div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span><span class="preprocessor">#define VELNE_M_NSE_DEFAULT     0.5f</span></div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span><span class="preprocessor">#define VELD_M_NSE_DEFAULT      0.7f</span></div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span><span class="preprocessor">#define POSNE_M_NSE_DEFAULT     0.5f</span></div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span><span class="preprocessor">#define ALT_M_NSE_DEFAULT       3.0f</span></div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span><span class="preprocessor">#define MAG_M_NSE_DEFAULT       0.05f</span></div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span><span class="preprocessor">#define GYRO_P_NSE_DEFAULT      1.5E-02f</span></div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span><span class="preprocessor">#define ACC_P_NSE_DEFAULT       3.5E-01f</span></div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span><span class="preprocessor">#define GBIAS_P_NSE_DEFAULT     1.0E-03f</span></div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span><span class="preprocessor">#define ABIAS_P_NSE_DEFAULT     2.0E-02f</span></div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span><span class="preprocessor">#define MAGB_P_NSE_DEFAULT      1.0E-04f</span></div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span><span class="preprocessor">#define MAGE_P_NSE_DEFAULT      1.0E-03f</span></div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span><span class="preprocessor">#define VEL_I_GATE_DEFAULT      500</span></div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span><span class="preprocessor">#define POS_I_GATE_DEFAULT      500</span></div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span><span class="preprocessor">#define HGT_I_GATE_DEFAULT      500</span></div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span><span class="preprocessor">#define MAG_I_GATE_DEFAULT      300</span></div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span><span class="preprocessor">#define MAG_CAL_DEFAULT         0</span></div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span><span class="preprocessor">#define GLITCH_RADIUS_DEFAULT   25</span></div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span><span class="preprocessor">#define FLOW_MEAS_DELAY         10</span></div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span><span class="preprocessor">#define FLOW_M_NSE_DEFAULT      0.15f</span></div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span><span class="preprocessor">#define FLOW_I_GATE_DEFAULT     500</span></div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span><span class="preprocessor">#define CHECK_SCALER_DEFAULT    150</span></div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span><span class="preprocessor">#define FLOW_USE_DEFAULT        2</span></div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span><span class="preprocessor">#define WIND_P_NSE_DEFAULT      0.1</span></div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span> </div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span><span class="comment">// build type not specified, use copter defaults</span></div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno"><a class="line" href="AP__NavEKF3_8cpp.html#a5787c5cb966d78a182a7528d28417335">   98</a></span><span class="preprocessor">#define VELNE_M_NSE_DEFAULT     0.5f</span></div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno"><a class="line" href="AP__NavEKF3_8cpp.html#a25d3d690fd4e2da6c94c55465925a989">   99</a></span><span class="preprocessor">#define VELD_M_NSE_DEFAULT      0.7f</span></div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno"><a class="line" href="AP__NavEKF3_8cpp.html#a481acf2aef902a504828b5a681fbd77b">  100</a></span><span class="preprocessor">#define POSNE_M_NSE_DEFAULT     0.5f</span></div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno"><a class="line" href="AP__NavEKF3_8cpp.html#a7f4e48f294410ef7f81e55b30ed9f3e6">  101</a></span><span class="preprocessor">#define ALT_M_NSE_DEFAULT       2.0f</span></div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno"><a class="line" href="AP__NavEKF3_8cpp.html#a4099e8f389936d32081a68dbaf39863a">  102</a></span><span class="preprocessor">#define MAG_M_NSE_DEFAULT       0.05f</span></div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno"><a class="line" href="AP__NavEKF3_8cpp.html#a12817bbcd248827ccde9f151ab0feeeb">  103</a></span><span class="preprocessor">#define GYRO_P_NSE_DEFAULT      1.5E-02f</span></div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno"><a class="line" href="AP__NavEKF3_8cpp.html#a6c9f7d13f1966f31202304ff643e970e">  104</a></span><span class="preprocessor">#define ACC_P_NSE_DEFAULT       3.5E-01f</span></div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno"><a class="line" href="AP__NavEKF3_8cpp.html#a731c9b8648315eb61d495d836dcf3fd8">  105</a></span><span class="preprocessor">#define GBIAS_P_NSE_DEFAULT     1.0E-03f</span></div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno"><a class="line" href="AP__NavEKF3_8cpp.html#a76847a9da1855d42fdc239abceb89a2b">  106</a></span><span class="preprocessor">#define ABIAS_P_NSE_DEFAULT     2.0E-02f</span></div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno"><a class="line" href="AP__NavEKF3_8cpp.html#afa9f6cd370c5c72529c024833ece4347">  107</a></span><span class="preprocessor">#define MAGB_P_NSE_DEFAULT      1.0E-04f</span></div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno"><a class="line" href="AP__NavEKF3_8cpp.html#ad81dedd819aa64ee95f4582c30798935">  108</a></span><span class="preprocessor">#define MAGE_P_NSE_DEFAULT      1.0E-03f</span></div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno"><a class="line" href="AP__NavEKF3_8cpp.html#ade9ffc70f4a31cae4beb030c97adbbca">  109</a></span><span class="preprocessor">#define VEL_I_GATE_DEFAULT      500</span></div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno"><a class="line" href="AP__NavEKF3_8cpp.html#a18492f186be402b29b5ceef77a262082">  110</a></span><span class="preprocessor">#define POS_I_GATE_DEFAULT      500</span></div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno"><a class="line" href="AP__NavEKF3_8cpp.html#af34b4040dd7d9248e49c10916103a3d9">  111</a></span><span class="preprocessor">#define HGT_I_GATE_DEFAULT      500</span></div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno"><a class="line" href="AP__NavEKF3_8cpp.html#a669dc127386b7966e170e496a279b023">  112</a></span><span class="preprocessor">#define MAG_I_GATE_DEFAULT      300</span></div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno"><a class="line" href="AP__NavEKF3_8cpp.html#a5acc5924c4a1100f963d8002eeb282a2">  113</a></span><span class="preprocessor">#define MAG_CAL_DEFAULT         3</span></div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno"><a class="line" href="AP__NavEKF3_8cpp.html#a70736687012cc7bdcfb1c3c861da9d37">  114</a></span><span class="preprocessor">#define GLITCH_RADIUS_DEFAULT   25</span></div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno"><a class="line" href="AP__NavEKF3_8cpp.html#a81e13a370d69eb740c8e4d60ba00652b">  115</a></span><span class="preprocessor">#define FLOW_MEAS_DELAY         10</span></div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno"><a class="line" href="AP__NavEKF3_8cpp.html#a8e61f809f20c44f5534feaa5f8732c52">  116</a></span><span class="preprocessor">#define FLOW_M_NSE_DEFAULT      0.25f</span></div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno"><a class="line" href="AP__NavEKF3_8cpp.html#ad1c4fe1428be4f0ac4f261eac4f5462c">  117</a></span><span class="preprocessor">#define FLOW_I_GATE_DEFAULT     300</span></div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno"><a class="line" href="AP__NavEKF3_8cpp.html#ad8a63b0d97bdb05acfcfa54793790631">  118</a></span><span class="preprocessor">#define CHECK_SCALER_DEFAULT    100</span></div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno"><a class="line" href="AP__NavEKF3_8cpp.html#a8bacddbf386491ce7be4956637ecca7a">  119</a></span><span class="preprocessor">#define FLOW_USE_DEFAULT        1</span></div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno"><a class="line" href="AP__NavEKF3_8cpp.html#a415eac335726e25966055dbbaa178ab2">  120</a></span><span class="preprocessor">#define WIND_P_NSE_DEFAULT      0.1</span></div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span> </div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span><span class="preprocessor">#endif </span><span class="comment">// APM_BUILD_DIRECTORY</span></div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span> </div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span><span class="preprocessor">#ifndef EK3_PRIMARY_DEFAULT</span></div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno"><a class="line" href="AP__NavEKF3_8cpp.html#aac39cb1a6a9eec23e6241bb24bb89f30">  125</a></span><span class="preprocessor">#define EK3_PRIMARY_DEFAULT 0</span></div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span> </div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span><span class="comment">// This allows boards to default to using a specified number of IMUs and EKF lanes</span></div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span><span class="preprocessor">#ifndef HAL_EKF_IMU_MASK_DEFAULT</span></div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno"><a class="line" href="AP__NavEKF3_8cpp.html#a563328e54e49af8309dd738c0d2b6c16">  130</a></span><span class="preprocessor">#define HAL_EKF_IMU_MASK_DEFAULT 3       </span><span class="comment">// Default to using two IMUs</span></div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span> </div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span><span class="comment">// Define tuning parameters</span></div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span><span class="keyword">const</span> <a class="code hl_struct" href="structAP__Param_1_1GroupInfo.html">AP_Param::GroupInfo</a> <a class="code hl_variable" href="classNavEKF3.html#a33aeb19292f207e5351e2e51c11c5641">NavEKF3::var_info</a>[] = {</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span> </div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>    <span class="comment">// @Param: ENABLE</span></div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>    <span class="comment">// @DisplayName: Enable EKF3</span></div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>    <span class="comment">// @Description: This enables EKF3. Enabling EKF3 only makes the maths run, it does not mean it will be used for flight control. To use it for flight control set AHRS_EKF_TYPE=3. A reboot or restart will need to be performed after changing the value of EK3_ENABLE for it to take effect.</span></div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>    <span class="comment">// @Values: 0:Disabled, 1:Enabled</span></div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>    <span class="comment">// @RebootRequired: True</span></div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>    <a class="code hl_define" href="AP__Param_8h.html#ac24e2eb16c2194e975d27e47ddcb7f1c">AP_GROUPINFO_FLAGS</a>(<span class="stringliteral">&quot;ENABLE&quot;</span>, 0, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _enable, 1, <a class="code hl_define" href="AP__Param_8h.html#ae25c1c7495435989f8be5781c86be078">AP_PARAM_FLAG_ENABLE</a>),</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span> </div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>    <span class="comment">// GPS measurement parameters</span></div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span> </div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>    <span class="comment">// 1 was GPS_TYPE</span></div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span> </div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>    <span class="comment">// @Param: VELNE_M_NSE</span></div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>    <span class="comment">// @DisplayName: GPS horizontal velocity measurement noise (m/s)</span></div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>    <span class="comment">// @Description: This sets a lower limit on the speed accuracy reported by the GPS receiver that is used to set horizontal velocity observation noise. If the model of receiver used does not provide a speed accurcy estimate, then the parameter value will be used. Increasing it reduces the weighting of the GPS horizontal velocity measurements.</span></div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>    <span class="comment">// @Range: 0.05 5.0</span></div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>    <span class="comment">// @Increment: 0.05</span></div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>    <span class="comment">// @Units: m/s</span></div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;VELNE_M_NSE&quot;</span>, 2, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _gpsHorizVelNoise, <a class="code hl_define" href="AP__NavEKF3_8cpp.html#a5787c5cb966d78a182a7528d28417335">VELNE_M_NSE_DEFAULT</a>),</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span> </div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>    <span class="comment">// @Param: VELD_M_NSE</span></div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>    <span class="comment">// @DisplayName: GPS vertical velocity measurement noise (m/s)</span></div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>    <span class="comment">// @Description: This sets a lower limit on the speed accuracy reported by the GPS receiver that is used to set vertical velocity observation noise. If the model of receiver used does not provide a speed accurcy estimate, then the parameter value will be used. Increasing it reduces the weighting of the GPS vertical velocity measurements.</span></div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>    <span class="comment">// @Range: 0.05 5.0</span></div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>    <span class="comment">// @Increment: 0.05</span></div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>    <span class="comment">// @Units: m/s</span></div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;VELD_M_NSE&quot;</span>, 3, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _gpsVertVelNoise, <a class="code hl_define" href="AP__NavEKF3_8cpp.html#a25d3d690fd4e2da6c94c55465925a989">VELD_M_NSE_DEFAULT</a>),</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span> </div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>    <span class="comment">// @Param: VEL_I_GATE</span></div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>    <span class="comment">// @DisplayName: GPS velocity innovation gate size</span></div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>    <span class="comment">// @Description: This sets the percentage number of standard deviations applied to the GPS velocity measurement innovation consistency check. Decreasing it makes it more likely that good measurements will be rejected. Increasing it makes it more likely that bad measurements will be accepted. If EK3_GLITCH_RAD set to 0 the velocity innovations will be clipped instead of rejected if they exceed the gate size and a smaller value of EK3_VEL_I_GATE not exceeding 300 is recommended to limit the effect of GPS transient errors.</span></div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>    <span class="comment">// @Range: 100 1000</span></div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>    <span class="comment">// @Increment: 25</span></div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;VEL_I_GATE&quot;</span>, 4, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _gpsVelInnovGate, <a class="code hl_define" href="AP__NavEKF3_8cpp.html#ade9ffc70f4a31cae4beb030c97adbbca">VEL_I_GATE_DEFAULT</a>),</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span> </div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>    <span class="comment">// @Param: POSNE_M_NSE</span></div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>    <span class="comment">// @DisplayName: GPS horizontal position measurement noise (m)</span></div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>    <span class="comment">// @Description: This sets the GPS horizontal position observation noise. Increasing it reduces the weighting of GPS horizontal position measurements.</span></div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>    <span class="comment">// @Range: 0.1 10.0</span></div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>    <span class="comment">// @Increment: 0.1</span></div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>    <span class="comment">// @Units: m</span></div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;POSNE_M_NSE&quot;</span>, 5, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _gpsHorizPosNoise, <a class="code hl_define" href="AP__NavEKF3_8cpp.html#a481acf2aef902a504828b5a681fbd77b">POSNE_M_NSE_DEFAULT</a>),</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span> </div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>    <span class="comment">// @Param: POS_I_GATE</span></div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>    <span class="comment">// @DisplayName: GPS position measurement gate size</span></div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>    <span class="comment">// @Description: This sets the percentage number of standard deviations applied to the GPS position measurement innovation consistency check. Decreasing it makes it more likely that good measurements will be rejected. Increasing it makes it more likely that bad measurements will be accepted. If EK3_GLITCH_RAD has been set to 0 the horizontal position innovations will be clipped instead of rejected if they exceed the gate size so a smaller value of EK3_POS_I_GATE not exceeding 300 is recommended to limit the effect of GPS transient errors.</span></div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>    <span class="comment">// @Range: 100 1000</span></div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>    <span class="comment">// @Increment: 25</span></div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;POS_I_GATE&quot;</span>, 6, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _gpsPosInnovGate, <a class="code hl_define" href="AP__NavEKF3_8cpp.html#a18492f186be402b29b5ceef77a262082">POS_I_GATE_DEFAULT</a>),</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span> </div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>    <span class="comment">// @Param: GLITCH_RAD</span></div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>    <span class="comment">// @DisplayName: GPS glitch radius gate size (m)</span></div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>    <span class="comment">// @Description: This controls the maximum radial uncertainty in position between the value predicted by the filter and the value measured by the GPS before the filter position and velocity states are reset to the GPS. Making this value larger allows the filter to ignore larger GPS glitches but also means that non-GPS errors such as IMU and compass can create a larger error in position before the filter is forced back to the GPS position. If EK3_GLITCH_RAD set to 0 the GPS innovations will be clipped instead of rejected if they exceed the gate size set by EK3_VEL_I_GATE and EK3_POS_I_GATE which can be useful if poor quality sensor data is causing GPS rejection and loss of navigation but does make the EKF more susceptible to GPS glitches. If setting EK3_GLITCH_RAD to 0 it is recommended to reduce EK3_VEL_I_GATE and EK3_POS_I_GATE to 300.</span></div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>    <span class="comment">// @Range: 10 100</span></div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>    <span class="comment">// @Increment: 5</span></div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>    <span class="comment">// @Units: m</span></div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;GLITCH_RAD&quot;</span>, 7, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _gpsGlitchRadiusMax, <a class="code hl_define" href="AP__NavEKF3_8cpp.html#a70736687012cc7bdcfb1c3c861da9d37">GLITCH_RADIUS_DEFAULT</a>),</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span> </div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>    <span class="comment">// 8 previously used for EKF3_GPS_DELAY parameter that has been deprecated.</span></div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>    <span class="comment">// The EKF now takes its GPS delay form the GPS library with the default delays</span></div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>    <span class="comment">// specified by the GPS_DELAY and GPS_DELAY2 parameters.</span></div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span> </div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>    <span class="comment">// Height measurement parameters</span></div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span> </div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>    <span class="comment">// 9 was ALT_SOURCE</span></div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span> </div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>    <span class="comment">// @Param: ALT_M_NSE</span></div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>    <span class="comment">// @DisplayName: Altitude measurement noise (m)</span></div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>    <span class="comment">// @Description: This is the RMS value of noise in the altitude measurement. Increasing it reduces the weighting of the baro measurement and will make the filter respond more slowly to baro measurement errors, but will make it more sensitive to GPS and accelerometer errors. A larger value for EK3_ALT_M_NSE may be required when operating with EK3_SRCx_POSZ = 0. This parameter also sets the noise for the &#39;synthetic&#39; zero height measurement that is used when EK3_SRCx_POSZ = 0.</span></div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span>    <span class="comment">// @Range: 0.1 100.0</span></div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>    <span class="comment">// @Increment: 0.1</span></div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>    <span class="comment">// @Units: m</span></div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;ALT_M_NSE&quot;</span>, 10, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _baroAltNoise, <a class="code hl_define" href="AP__NavEKF3_8cpp.html#a7f4e48f294410ef7f81e55b30ed9f3e6">ALT_M_NSE_DEFAULT</a>),</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span> </div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>    <span class="comment">// @Param: HGT_I_GATE</span></div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>    <span class="comment">// @DisplayName: Height measurement gate size</span></div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>    <span class="comment">// @Description: This sets the percentage number of standard deviations applied to the height measurement innovation consistency check. Decreasing it makes it more likely that good measurements will be rejected. Increasing it makes it more likely that bad measurements will be accepted.  If EK3_GLITCH_RAD set to 0 the vertical position innovations will be clipped instead of rejected if they exceed the gate size and a smaller value of EK3_HGT_I_GATE not exceeding 300 is recommended to limit the effect of height sensor transient errors.</span></div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>    <span class="comment">// @Range: 100 1000</span></div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>    <span class="comment">// @Increment: 25</span></div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;HGT_I_GATE&quot;</span>, 11, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _hgtInnovGate, <a class="code hl_define" href="AP__NavEKF3_8cpp.html#af34b4040dd7d9248e49c10916103a3d9">HGT_I_GATE_DEFAULT</a>),</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span> </div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>    <span class="comment">// @Param: HGT_DELAY</span></div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>    <span class="comment">// @DisplayName: Height measurement delay (msec)</span></div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>    <span class="comment">// @Description: This is the number of msec that the Height measurements lag behind the inertial measurements.</span></div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>    <span class="comment">// @Range: 0 250</span></div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>    <span class="comment">// @Increment: 10</span></div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>    <span class="comment">// @Units: ms</span></div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>    <span class="comment">// @RebootRequired: True</span></div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;HGT_DELAY&quot;</span>, 12, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _hgtDelay_ms, 60),</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span> </div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>    <span class="comment">// Magnetometer measurement parameters</span></div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span> </div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>    <span class="comment">// @Param: MAG_M_NSE</span></div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>    <span class="comment">// @DisplayName: Magnetometer measurement noise (Gauss)</span></div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>    <span class="comment">// @Description: This is the RMS value of noise in magnetometer measurements. Increasing it reduces the weighting on these measurements.</span></div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>    <span class="comment">// @Range: 0.01 0.5</span></div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>    <span class="comment">// @Increment: 0.01</span></div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>    <span class="comment">// @Units: Gauss</span></div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;MAG_M_NSE&quot;</span>, 13, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _magNoise, <a class="code hl_define" href="AP__NavEKF3_8cpp.html#a4099e8f389936d32081a68dbaf39863a">MAG_M_NSE_DEFAULT</a>),</div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span> </div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>    <span class="comment">// @Param: MAG_CAL</span></div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>    <span class="comment">// @DisplayName: Magnetometer default fusion mode</span></div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>    <span class="comment">// @Description: This determines when the filter will use the 3-axis magnetometer fusion model that estimates both earth and body fixed magnetic field states and when it will use a simpler magnetic heading fusion model that does not use magnetic field states. The 3-axis magnetometer fusion is only suitable for use when the external magnetic field environment is stable. EK3_MAG_CAL = 0 uses heading fusion on ground, 3-axis fusion in-flight, and is the default setting for Plane users. EK3_MAG_CAL = 1 uses 3-axis fusion only when manoeuvring. EK3_MAG_CAL = 2 uses heading fusion at all times, is recommended if the external magnetic field is varying and is the default for rovers. EK3_MAG_CAL = 3 uses heading fusion on the ground and 3-axis fusion after the first in-air field and yaw reset has completed, and is the default for copters. EK3_MAG_CAL = 4 uses 3-axis fusion at all times. EK3_MAG_CAL = 5 uses an external yaw sensor with simple heading fusion. NOTE : Use of simple heading magnetometer fusion makes vehicle compass calibration and alignment errors harder for the EKF to detect which reduces the sensitivity of the Copter EKF failsafe algorithm. NOTE: The fusion mode can be forced to 2 for specific EKF cores using the EK3_MAG_MASK parameter. EK3_MAG_CAL = 6 uses an external yaw sensor with fallback to compass when the external sensor is not available if we are flying. NOTE: The fusion mode can be forced to 2 for specific EKF cores using the EK3_MAG_MASK parameter. NOTE: limited operation without a magnetometer or any other yaw sensor is possible by setting all COMPASS_USE, COMPASS_USE2, COMPASS_USE3, etc parameters to 0 and setting COMPASS_ENABLE to 0. If this is done, the EK3_GSF_RUN and EK3_GSF_USE masks must be set to the same as EK3_IMU_MASK. A yaw angle derived from IMU and GPS velocity data using a Gaussian Sum Filter (GSF) will then be used to align the yaw when flight commences and there is sufficient movement.</span></div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>    <span class="comment">// @Values: 0:When flying,1:When manoeuvring,2:Never,3:After first climb yaw reset,4:Always,5:Use external yaw sensor (Deprecated in 4.1+ see EK3_SRCn_YAW),6:External yaw sensor with compass fallback (Deprecated in 4.1+ see EK3_SRCn_YAW)</span></div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>    <span class="comment">// @RebootRequired: True</span></div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;MAG_CAL&quot;</span>, 14, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _magCal, <a class="code hl_define" href="AP__NavEKF3_8cpp.html#a5acc5924c4a1100f963d8002eeb282a2">MAG_CAL_DEFAULT</a>),</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span> </div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span>    <span class="comment">// @Param: MAG_I_GATE</span></div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>    <span class="comment">// @DisplayName: Magnetometer measurement gate size</span></div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>    <span class="comment">// @Description: This sets the percentage number of standard deviations applied to the magnetometer measurement innovation consistency check. Decreasing it makes it more likely that good measurements will be rejected. Increasing it makes it more likely that bad measurements will be accepted.</span></div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>    <span class="comment">// @Range: 100 1000</span></div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>    <span class="comment">// @Increment: 25</span></div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;MAG_I_GATE&quot;</span>, 15, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _magInnovGate, <a class="code hl_define" href="AP__NavEKF3_8cpp.html#a669dc127386b7966e170e496a279b023">MAG_I_GATE_DEFAULT</a>),</div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span> </div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>    <span class="comment">// Airspeed measurement parameters</span></div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span> </div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>    <span class="comment">// @Param: EAS_M_NSE</span></div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>    <span class="comment">// @DisplayName: Equivalent airspeed measurement noise (m/s)</span></div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>    <span class="comment">// @Description: This is the RMS value of noise in equivalent airspeed measurements used by planes. Increasing it reduces the weighting of airspeed measurements and will make wind speed estimates less noisy and slower to converge. Increasing also increases navigation errors when dead-reckoning without GPS measurements.</span></div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>    <span class="comment">// @Range: 0.5 5.0</span></div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>    <span class="comment">// @Increment: 0.1</span></div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>    <span class="comment">// @Units: m/s</span></div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;EAS_M_NSE&quot;</span>, 16, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _easNoise, 1.4f),</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span> </div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>    <span class="comment">// @Param: EAS_I_GATE</span></div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>    <span class="comment">// @DisplayName: Airspeed measurement gate size</span></div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span>    <span class="comment">// @Description: This sets the percentage number of standard deviations applied to the airspeed measurement innovation consistency check. Decreasing it makes it more likely that good measurements will be rejected. Increasing it makes it more likely that bad measurements will be accepted.</span></div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>    <span class="comment">// @Range: 100 1000</span></div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>    <span class="comment">// @Increment: 25</span></div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;EAS_I_GATE&quot;</span>, 17, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _tasInnovGate, 400),</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span> </div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span>    <span class="comment">// Rangefinder measurement parameters</span></div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span> </div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span>    <span class="comment">// @Param: RNG_M_NSE</span></div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span>    <span class="comment">// @DisplayName: Range finder measurement noise (m)</span></div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>    <span class="comment">// @Description: This is the RMS value of noise in the range finder measurement. Increasing it reduces the weighting on this measurement.</span></div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span>    <span class="comment">// @Range: 0.1 10.0</span></div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>    <span class="comment">// @Increment: 0.1</span></div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>    <span class="comment">// @Units: m</span></div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;RNG_M_NSE&quot;</span>, 18, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _rngNoise, 0.5f),</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span> </div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>    <span class="comment">// @Param: RNG_I_GATE</span></div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>    <span class="comment">// @DisplayName: Range finder measurement gate size</span></div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>    <span class="comment">// @Description: This sets the percentage number of standard deviations applied to the range finder innovation consistency check. Decreasing it makes it more likely that good measurements will be rejected. Increasing it makes it more likely that bad measurements will be accepted.</span></div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>    <span class="comment">// @Range: 100 1000</span></div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>    <span class="comment">// @Increment: 25</span></div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;RNG_I_GATE&quot;</span>, 19, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _rngInnovGate, 500),</div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span> </div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>    <span class="comment">// Optical flow measurement parameters</span></div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span> </div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>    <span class="comment">// @Param: MAX_FLOW</span></div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>    <span class="comment">// @DisplayName: Maximum valid optical flow rate</span></div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>    <span class="comment">// @Description: This sets the magnitude maximum optical flow rate in rad/sec that will be accepted by the filter</span></div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>    <span class="comment">// @Range: 1.0 4.0</span></div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>    <span class="comment">// @Increment: 0.1</span></div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span>    <span class="comment">// @Units: rad/s</span></div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;MAX_FLOW&quot;</span>, 20, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _maxFlowRate, 2.5f),</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span> </div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>    <span class="comment">// @Param: FLOW_M_NSE</span></div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>    <span class="comment">// @DisplayName: Optical flow measurement noise (rad/s)</span></div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>    <span class="comment">// @Description: This is the RMS value of noise and errors in optical flow measurements. Increasing it reduces the weighting on these measurements.</span></div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>    <span class="comment">// @Range: 0.05 1.0</span></div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>    <span class="comment">// @Increment: 0.05</span></div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>    <span class="comment">// @Units: rad/s</span></div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;FLOW_M_NSE&quot;</span>, 21, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _flowNoise, <a class="code hl_define" href="AP__NavEKF3_8cpp.html#a8e61f809f20c44f5534feaa5f8732c52">FLOW_M_NSE_DEFAULT</a>),</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span> </div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>    <span class="comment">// @Param: FLOW_I_GATE</span></div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span>    <span class="comment">// @DisplayName: Optical Flow measurement gate size</span></div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>    <span class="comment">// @Description: This sets the percentage number of standard deviations applied to the optical flow innovation consistency check. Decreasing it makes it more likely that good measurements will be rejected. Increasing it makes it more likely that bad measurements will be accepted.</span></div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span>    <span class="comment">// @Range: 100 1000</span></div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>    <span class="comment">// @Increment: 25</span></div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;FLOW_I_GATE&quot;</span>, 22, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _flowInnovGate, <a class="code hl_define" href="AP__NavEKF3_8cpp.html#ad1c4fe1428be4f0ac4f261eac4f5462c">FLOW_I_GATE_DEFAULT</a>),</div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span> </div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>    <span class="comment">// @Param: FLOW_DELAY</span></div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>    <span class="comment">// @DisplayName: Optical Flow measurement delay (msec)</span></div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>    <span class="comment">// @Description: This is the number of msec that the optical flow measurements lag behind the inertial measurements. It is the time from the end of the optical flow averaging period and does not include the time delay due to the 100msec of averaging within the flow sensor.</span></div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>    <span class="comment">// @Range: 0 250</span></div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>    <span class="comment">// @Increment: 10</span></div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>    <span class="comment">// @Units: ms</span></div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span>    <span class="comment">// @RebootRequired: True</span></div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;FLOW_DELAY&quot;</span>, 23, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _flowDelay_ms, <a class="code hl_define" href="AP__NavEKF3_8cpp.html#a81e13a370d69eb740c8e4d60ba00652b">FLOW_MEAS_DELAY</a>),</div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span> </div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>    <span class="comment">// State and Covariance Predition Parameters</span></div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span> </div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>    <span class="comment">// @Param: GYRO_P_NSE</span></div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>    <span class="comment">// @DisplayName: Rate gyro noise (rad/s)</span></div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>    <span class="comment">// @Description: This control disturbance noise controls the growth of estimated error due to gyro measurement errors excluding bias. Increasing it makes the flter trust the gyro measurements less and other measurements more.</span></div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>    <span class="comment">// @Range: 0.0001 0.1</span></div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>    <span class="comment">// @Increment: 0.0001</span></div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>    <span class="comment">// @Units: rad/s</span></div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;GYRO_P_NSE&quot;</span>, 24, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _gyrNoise, <a class="code hl_define" href="AP__NavEKF3_8cpp.html#a12817bbcd248827ccde9f151ab0feeeb">GYRO_P_NSE_DEFAULT</a>),</div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span> </div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>    <span class="comment">// @Param: ACC_P_NSE</span></div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span>    <span class="comment">// @DisplayName: Accelerometer noise (m/s^2)</span></div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span>    <span class="comment">// @Description: This control disturbance noise controls the growth of estimated error due to accelerometer measurement errors excluding bias. Increasing it makes the flter trust the accelerometer measurements less and other measurements more.</span></div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span>    <span class="comment">// @Range: 0.01 1.0</span></div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span>    <span class="comment">// @Increment: 0.01</span></div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span>    <span class="comment">// @Units: m/s/s</span></div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;ACC_P_NSE&quot;</span>, 25, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _accNoise, <a class="code hl_define" href="AP__NavEKF3_8cpp.html#a6c9f7d13f1966f31202304ff643e970e">ACC_P_NSE_DEFAULT</a>),</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span> </div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span>    <span class="comment">// @Param: GBIAS_P_NSE</span></div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>    <span class="comment">// @DisplayName: Rate gyro bias stability (rad/s/s)</span></div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span>    <span class="comment">// @Description: This state  process noise controls growth of the gyro delta angle bias state error estimate. Increasing it makes rate gyro bias estimation faster and noisier.</span></div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span>    <span class="comment">// @Range: 0.00001 0.001</span></div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span>    <span class="comment">// @Units: rad/s/s</span></div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;GBIAS_P_NSE&quot;</span>, 26, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _gyroBiasProcessNoise, <a class="code hl_define" href="AP__NavEKF3_8cpp.html#a731c9b8648315eb61d495d836dcf3fd8">GBIAS_P_NSE_DEFAULT</a>),</div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span> </div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>    <span class="comment">// 27 previously used for EK2_GSCL_P_NSE parameter that has been removed</span></div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span> </div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span>    <span class="comment">// @Param: ABIAS_P_NSE</span></div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span>    <span class="comment">// @DisplayName: Accelerometer bias stability (m/s^3)</span></div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>    <span class="comment">// @Description: This noise controls the growth of the vertical accelerometer delta velocity bias state error estimate. Increasing it makes accelerometer bias estimation faster and noisier.</span></div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span>    <span class="comment">// @Range: 0.00001 0.02</span></div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>    <span class="comment">// @Units: m/s/s/s</span></div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;ABIAS_P_NSE&quot;</span>, 28, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _accelBiasProcessNoise, <a class="code hl_define" href="AP__NavEKF3_8cpp.html#a76847a9da1855d42fdc239abceb89a2b">ABIAS_P_NSE_DEFAULT</a>),</div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span> </div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>    <span class="comment">// 29 previously used for EK2_MAG_P_NSE parameter that has been replaced with EK3_MAGE_P_NSE and EK3_MAGB_P_NSE</span></div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span> </div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>    <span class="comment">// @Param: WIND_P_NSE</span></div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>    <span class="comment">// @DisplayName: Wind velocity process noise (m/s^2)</span></div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>    <span class="comment">// @Description: This state process noise controls the growth of wind state error estimates. Increasing it makes wind estimation faster and noisier.</span></div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span>    <span class="comment">// @Range: 0.01 2.0</span></div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span>    <span class="comment">// @Increment: 0.1</span></div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span>    <span class="comment">// @Units: m/s/s</span></div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;WIND_P_NSE&quot;</span>, 30, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _windVelProcessNoise, <a class="code hl_define" href="AP__NavEKF3_8cpp.html#a415eac335726e25966055dbbaa178ab2">WIND_P_NSE_DEFAULT</a>),</div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span> </div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span>    <span class="comment">// @Param: WIND_PSCALE</span></div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span>    <span class="comment">// @DisplayName: Height rate to wind process noise scaler</span></div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span>    <span class="comment">// @Description: This controls how much the process noise on the wind states is increased when gaining or losing altitude to take into account changes in wind speed and direction with altitude. Increasing this parameter increases how rapidly the wind states adapt when changing altitude, but does make wind velocity estimation noiser.</span></div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span>    <span class="comment">// @Range: 0.0 2.0</span></div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span>    <span class="comment">// @Increment: 0.1</span></div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;WIND_PSCALE&quot;</span>, 31, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _wndVarHgtRateScale, 1.0f),</div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span> </div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span>    <span class="comment">// @Param: GPS_CHECK</span></div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span>    <span class="comment">// @DisplayName: GPS preflight check</span></div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span>    <span class="comment">// @Description: This is a 1 byte bitmap controlling which GPS preflight checks are performed. Set to 0 to bypass all checks. Set to 255 perform all checks. Set to 3 to check just the number of satellites and HDoP. Set to 31 for the most rigorous checks that will still allow checks to pass when the copter is moving, eg launch from a boat.</span></div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span>    <span class="comment">// @Bitmask: 0:NSats,1:HDoP,2:speed error,3:position error,4:yaw error,5:pos drift,6:vert speed,7:horiz speed</span></div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;GPS_CHECK&quot;</span>,    32, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _gpsCheck, 31),</div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span> </div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span>    <span class="comment">// @Param: IMU_MASK</span></div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span>    <span class="comment">// @DisplayName: Bitmask of active IMUs</span></div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span>    <span class="comment">// @Description: 1 byte bitmap of IMUs to use in EKF3. A separate instance of EKF3 will be started for each IMU selected. Set to 1 to use the first IMU only (default), set to 2 to use the second IMU only, set to 3 to use the first and second IMU. Additional IMU&#39;s can be used up to a maximum of 6 if memory and processing resources permit. There may be insufficient memory and processing resources to run multiple instances. If this occurs EKF3 will fail to start.</span></div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span>    <span class="comment">// @Bitmask: 0:FirstIMU,1:SecondIMU,2:ThirdIMU,3:FourthIMU,4:FifthIMU,5:SixthIMU</span></div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span>    <span class="comment">// @RebootRequired: True</span></div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;IMU_MASK&quot;</span>,     33, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _imuMask, <a class="code hl_define" href="AP__NavEKF3_8cpp.html#a563328e54e49af8309dd738c0d2b6c16">HAL_EKF_IMU_MASK_DEFAULT</a>),</div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span>    </div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span>    <span class="comment">// @Param: CHECK_SCALE</span></div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span>    <span class="comment">// @DisplayName: GPS accuracy check scaler (%)</span></div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span>    <span class="comment">// @Description: This scales the thresholds that are used to check GPS accuracy before it is used by the EKF. A value of 100 is the default. Values greater than 100 increase and values less than 100 reduce the maximum GPS error the EKF will accept. A value of 200 will double the allowable GPS error.</span></div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>    <span class="comment">// @Range: 50 200</span></div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span>    <span class="comment">// @Units: %</span></div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;CHECK_SCALE&quot;</span>, 34, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _gpsCheckScaler, <a class="code hl_define" href="AP__NavEKF3_8cpp.html#ad8a63b0d97bdb05acfcfa54793790631">CHECK_SCALER_DEFAULT</a>),</div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span> </div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span>    <span class="comment">// @Param: NOAID_M_NSE</span></div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span>    <span class="comment">// @DisplayName: Non-GPS operation position uncertainty (m)</span></div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span>    <span class="comment">// @Description: This sets the amount of position variation that the EKF allows for when operating without external measurements (eg GPS or optical flow). Increasing this parameter makes the EKF attitude estimate less sensitive to vehicle manoeuvres but more sensitive to IMU errors.</span></div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span>    <span class="comment">// @Range: 0.5 50.0</span></div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span>    <span class="comment">// @Units: m</span></div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;NOAID_M_NSE&quot;</span>, 35, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _noaidHorizNoise, 10.0f),</div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span> </div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span>    <span class="comment">// @Param: BETA_MASK</span></div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span>    <span class="comment">// @DisplayName: Bitmask controlling sidelip angle fusion</span></div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span>    <span class="comment">// @Description: 1 byte bitmap controlling use of sideslip angle fusion for estimation of non wind states during operation of &#39;fly forward&#39; vehicle types such as fixed wing planes. By assuming that the angle of sideslip is small, the wind velocity state estimates are corrected  whenever the EKF is not dead reckoning (e.g. has an independent velocity or position sensor such as GPS). This behaviour is on by default and cannot be disabled. When the EKF is dead reckoning, the wind states are used as a reference, enabling use of the small angle of sideslip assumption to correct non wind velocity states (eg attitude, velocity, position, etc) and improve navigation accuracy. This behaviour is on by default and cannot be disabled. The behaviour controlled by this parameter is the use of the small angle of sideslip assumption to correct non wind velocity states when the EKF is NOT dead reckoning. This is primarily of benefit to reduce the buildup of yaw angle errors during straight and level flight without a yaw sensor (e.g. magnetometer or dual antenna GPS yaw) provided aerobatic flight maneuvers with large sideslip angles are not performed. The &#39;always&#39; option might be used where the yaw sensor is intentionally not fitted or disabled. The &#39;WhenNoYawSensor&#39; option might be used if a yaw sensor is fitted, but protection against in-flight failure and continual rejection by the EKF is desired. For vehicles operated within visual range of the operator performing frequent turning maneuvers, setting this parameter is unnecessary.</span></div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span>    <span class="comment">// @Bitmask: 0:Always,1:WhenNoYawSensor</span></div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span>    <span class="comment">// @RebootRequired: True</span></div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno">  432</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;BETA_MASK&quot;</span>, 36, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _betaMask, 0),</div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span> </div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span>    <span class="comment">// control of magnetic yaw angle fusion</span></div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span> </div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span>    <span class="comment">// @Param: YAW_M_NSE</span></div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span>    <span class="comment">// @DisplayName: Yaw measurement noise (rad)</span></div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span>    <span class="comment">// @Description: This is the RMS value of noise in yaw measurements from the magnetometer. Increasing it reduces the weighting on these measurements.</span></div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span>    <span class="comment">// @Range: 0.05 1.0</span></div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span>    <span class="comment">// @Increment: 0.05</span></div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span>    <span class="comment">// @Units: rad</span></div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;YAW_M_NSE&quot;</span>, 37, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _yawNoise, 0.5f),</div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span> </div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span>    <span class="comment">// @Param: YAW_I_GATE</span></div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span>    <span class="comment">// @DisplayName: Yaw measurement gate size</span></div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span>    <span class="comment">// @Description: This sets the percentage number of standard deviations applied to the magnetometer yaw measurement innovation consistency check. Decreasing it makes it more likely that good measurements will be rejected. Increasing it makes it more likely that bad measurements will be accepted.</span></div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span>    <span class="comment">// @Range: 100 1000</span></div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span>    <span class="comment">// @Increment: 25</span></div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;YAW_I_GATE&quot;</span>, 38, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _yawInnovGate, 300),</div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span> </div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span>    <span class="comment">// @Param: TAU_OUTPUT</span></div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span>    <span class="comment">// @DisplayName: Output complementary filter time constant (centi-sec)</span></div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span>    <span class="comment">// @Description: Sets the time constant of the output complementary filter/predictor in centi-seconds.</span></div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span>    <span class="comment">// @Range: 10 50</span></div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span>    <span class="comment">// @Increment: 5</span></div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span>    <span class="comment">// @Units: cs</span></div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno">  460</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;TAU_OUTPUT&quot;</span>, 39, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _tauVelPosOutput, 25),</div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span> </div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span>    <span class="comment">// @Param: MAGE_P_NSE</span></div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span>    <span class="comment">// @DisplayName: Earth magnetic field process noise (gauss/s)</span></div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span>    <span class="comment">// @Description: This state process noise controls the growth of earth magnetic field state error estimates. Increasing it makes earth magnetic field estimation faster and noisier.</span></div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span>    <span class="comment">// @Range: 0.00001 0.01</span></div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span>    <span class="comment">// @Units: Gauss/s</span></div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;MAGE_P_NSE&quot;</span>, 40, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _magEarthProcessNoise, <a class="code hl_define" href="AP__NavEKF3_8cpp.html#ad81dedd819aa64ee95f4582c30798935">MAGE_P_NSE_DEFAULT</a>),</div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span> </div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span>    <span class="comment">// @Param: MAGB_P_NSE</span></div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span>    <span class="comment">// @DisplayName: Body magnetic field process noise (gauss/s)</span></div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span>    <span class="comment">// @Description: This state process noise controls the growth of body magnetic field state error estimates. Increasing it makes magnetometer bias error estimation faster and noisier.</span></div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span>    <span class="comment">// @Range: 0.00001 0.01</span></div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span>    <span class="comment">// @Units: Gauss/s</span></div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;MAGB_P_NSE&quot;</span>, 41, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _magBodyProcessNoise, <a class="code hl_define" href="AP__NavEKF3_8cpp.html#afa9f6cd370c5c72529c024833ece4347">MAGB_P_NSE_DEFAULT</a>),</div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span> </div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span>    <span class="comment">// @Param: RNG_USE_HGT</span></div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span>    <span class="comment">// @DisplayName: Range finder switch height percentage</span></div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span>    <span class="comment">// @Description: Range finder can be used as the primary height source when below this percentage of its maximum range (see RNGFNDx_MAX_CM) and the primary height source is Baro or GPS (see EK3_SRCx_POSZ).  This feature should not be used for terrain following as it is designed for vertical takeoff and landing with climb above the range finder use height before commencing the mission, and with horizontal position changes below that height being limited to a flat region around the takeoff and landing point.</span></div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span>    <span class="comment">// @Range: -1 70</span></div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span>    <span class="comment">// @Increment: 1</span></div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span>    <span class="comment">// @Units: %</span></div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;RNG_USE_HGT&quot;</span>, 42, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _useRngSwHgt, -1),</div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span> </div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span>    <span class="comment">// @Param: TERR_GRAD</span></div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span>    <span class="comment">// @DisplayName: Maximum terrain gradient</span></div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span>    <span class="comment">// @Description: Specifies the maximum gradient of the terrain below the vehicle when it is using range finder as a height reference</span></div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno">  490</span>    <span class="comment">// @Range: 0 0.2</span></div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno">  491</span>    <span class="comment">// @Increment: 0.01</span></div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno">  492</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;TERR_GRAD&quot;</span>, 43, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _terrGradMax, 0.1f),</div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span> </div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span>    <span class="comment">// @Param: BCN_M_NSE</span></div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno">  496</span>    <span class="comment">// @DisplayName: Range beacon measurement noise (m)</span></div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span>    <span class="comment">// @Description: This is the RMS value of noise in the range beacon measurement. Increasing it reduces the weighting on this measurement.</span></div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno">  498</span>    <span class="comment">// @Range: 0.1 10.0</span></div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span>    <span class="comment">// @Increment: 0.1</span></div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span>    <span class="comment">// @Units: m</span></div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;BCN_M_NSE&quot;</span>, 44, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _rngBcnNoise, 1.0f),</div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno">  503</span> </div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno">  504</span>    <span class="comment">// @Param: BCN_I_GTE</span></div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span>    <span class="comment">// @DisplayName: Range beacon measurement gate size</span></div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span>    <span class="comment">// @Description: This sets the percentage number of standard deviations applied to the range beacon measurement innovation consistency check. Decreasing it makes it more likely that good measurements will be rejected. Increasing it makes it more likely that bad measurements will be accepted.</span></div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span>    <span class="comment">// @Range: 100 1000</span></div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span>    <span class="comment">// @Increment: 25</span></div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno">  510</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;BCN_I_GTE&quot;</span>, 45, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _rngBcnInnovGate, 500),</div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span> </div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span>    <span class="comment">// @Param: BCN_DELAY</span></div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span>    <span class="comment">// @DisplayName: Range beacon measurement delay (msec)</span></div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span>    <span class="comment">// @Description: This is the number of msec that the range beacon measurements lag behind the inertial measurements.</span></div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span>    <span class="comment">// @Range: 0 250</span></div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno">  516</span>    <span class="comment">// @Increment: 10</span></div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span>    <span class="comment">// @Units: ms</span></div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno">  519</span>    <span class="comment">// @RebootRequired: True</span></div>
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno">  520</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;BCN_DELAY&quot;</span>, 46, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _rngBcnDelay_ms, 50),</div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno">  521</span> </div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno">  522</span>    <span class="comment">// @Param: RNG_USE_SPD</span></div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span>    <span class="comment">// @DisplayName: Range finder max ground speed</span></div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno">  524</span>    <span class="comment">// @Description: The range finder will not be used as the primary height source when the horizontal ground speed is greater than this value.</span></div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno">  525</span>    <span class="comment">// @Range: 2.0 6.0</span></div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno">  526</span>    <span class="comment">// @Increment: 0.5</span></div>
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno">  527</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno">  528</span>    <span class="comment">// @Units: m/s</span></div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno">  529</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;RNG_USE_SPD&quot;</span>, 47, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _useRngSwSpd, 2.0f),</div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno">  530</span> </div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span>    <span class="comment">// @Param: ACC_BIAS_LIM</span></div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span>    <span class="comment">// @DisplayName: Accelerometer bias limit</span></div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span>    <span class="comment">// @Description: The accelerometer bias state will be limited to +- this value</span></div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno">  534</span>    <span class="comment">// @Range: 0.5 2.5</span></div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span>    <span class="comment">// @Increment: 0.1</span></div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno">  537</span>    <span class="comment">// @Units: m/s/s</span></div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno">  538</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;ACC_BIAS_LIM&quot;</span>, 48, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _accBiasLim, 1.0f),</div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span> </div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno">  540</span>    <span class="comment">// @Param: MAG_MASK</span></div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span>    <span class="comment">// @DisplayName: Bitmask of active EKF cores that will always use heading fusion</span></div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span>    <span class="comment">// @Description: 1 byte bitmap of EKF cores that will disable magnetic field states and use simple magnetic heading fusion at all times. This parameter enables specified cores to be used as a backup for flight into an environment with high levels of external magnetic interference which may degrade the EKF attitude estimate when using 3-axis magnetometer fusion. NOTE : Use of a different magnetometer fusion algorithm on different cores makes unwanted EKF core switches due to magnetometer errors more likely.</span></div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span>    <span class="comment">// @Bitmask: 0:FirstEKF,1:SecondEKF,2:ThirdEKF,3:FourthEKF,4:FifthEKF,5:SixthEKF</span></div>
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno">  544</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00545" name="l00545"></a><span class="lineno">  545</span>    <span class="comment">// @RebootRequired: True</span></div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno">  546</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;MAG_MASK&quot;</span>, 49, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _magMask, 0),</div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span> </div>
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span>    <span class="comment">// @Param: OGN_HGT_MASK</span></div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span>    <span class="comment">// @DisplayName: Bitmask control of EKF reference height correction</span></div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span>    <span class="comment">// @Description: When a height sensor other than GPS is used as the primary height source by the EKF, the position of the zero height datum is defined by that sensor and its frame of reference. If a GPS height measurement is also available, then the height of the WGS-84 height datum used by the EKF can be corrected so that the height returned by the getLLH() function is compensated for primary height sensor drift and change in datum over time. The first two bit positions control when the height datum will be corrected. Correction is performed using a Bayes filter and only operates when GPS quality permits. The third bit position controls where the corrections to the GPS reference datum are applied. Corrections can be applied to the local vertical position or to the reported EKF origin height (default).</span></div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span>    <span class="comment">// @Bitmask: 0:Correct when using Baro height,1:Correct when using range finder height,2:Apply corrections to local position</span></div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno">  552</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span>    <span class="comment">// @RebootRequired: True</span></div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno">  554</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;OGN_HGT_MASK&quot;</span>, 50, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _originHgtMode, 0),</div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span> </div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span>    <span class="comment">// @Param: VIS_VERR_MIN</span></div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span>    <span class="comment">// @DisplayName: Visual odometry minimum velocity error</span></div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span>    <span class="comment">// @Description: This is the 1-STD odometry velocity observation error that will be assumed when maximum quality is reported by the sensor. When quality is between max and min, the error will be calculated using linear interpolation between VIS_VERR_MIN and VIS_VERR_MAX.</span></div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span>    <span class="comment">// @Range: 0.05 0.5</span></div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span>    <span class="comment">// @Increment: 0.05</span></div>
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno">  561</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00562" name="l00562"></a><span class="lineno">  562</span>    <span class="comment">// @Units: m/s</span></div>
<div class="line"><a id="l00563" name="l00563"></a><span class="lineno">  563</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;VIS_VERR_MIN&quot;</span>, 51, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _visOdmVelErrMin, 0.1f),</div>
<div class="line"><a id="l00564" name="l00564"></a><span class="lineno">  564</span> </div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span>    <span class="comment">// @Param: VIS_VERR_MAX</span></div>
<div class="line"><a id="l00566" name="l00566"></a><span class="lineno">  566</span>    <span class="comment">// @DisplayName: Visual odometry maximum velocity error</span></div>
<div class="line"><a id="l00567" name="l00567"></a><span class="lineno">  567</span>    <span class="comment">// @Description: This is the 1-STD odometry velocity observation error that will be assumed when minimum quality is reported by the sensor. When quality is between max and min, the error will be calculated using linear interpolation between VIS_VERR_MIN and VIS_VERR_MAX.</span></div>
<div class="line"><a id="l00568" name="l00568"></a><span class="lineno">  568</span>    <span class="comment">// @Range: 0.5 5.0</span></div>
<div class="line"><a id="l00569" name="l00569"></a><span class="lineno">  569</span>    <span class="comment">// @Increment: 0.1</span></div>
<div class="line"><a id="l00570" name="l00570"></a><span class="lineno">  570</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno">  571</span>    <span class="comment">// @Units: m/s</span></div>
<div class="line"><a id="l00572" name="l00572"></a><span class="lineno">  572</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;VIS_VERR_MAX&quot;</span>, 52, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _visOdmVelErrMax, 0.9f),</div>
<div class="line"><a id="l00573" name="l00573"></a><span class="lineno">  573</span> </div>
<div class="line"><a id="l00574" name="l00574"></a><span class="lineno">  574</span>    <span class="comment">// @Param: WENC_VERR</span></div>
<div class="line"><a id="l00575" name="l00575"></a><span class="lineno">  575</span>    <span class="comment">// @DisplayName: Wheel odometry velocity error</span></div>
<div class="line"><a id="l00576" name="l00576"></a><span class="lineno">  576</span>    <span class="comment">// @Description: This is the 1-STD odometry velocity observation error that will be assumed when wheel encoder data is being fused.</span></div>
<div class="line"><a id="l00577" name="l00577"></a><span class="lineno">  577</span>    <span class="comment">// @Range: 0.01 1.0</span></div>
<div class="line"><a id="l00578" name="l00578"></a><span class="lineno">  578</span>    <span class="comment">// @Increment: 0.1</span></div>
<div class="line"><a id="l00579" name="l00579"></a><span class="lineno">  579</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00580" name="l00580"></a><span class="lineno">  580</span>    <span class="comment">// @Units: m/s</span></div>
<div class="line"><a id="l00581" name="l00581"></a><span class="lineno">  581</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;WENC_VERR&quot;</span>, 53, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _wencOdmVelErr, 0.1f),</div>
<div class="line"><a id="l00582" name="l00582"></a><span class="lineno">  582</span> </div>
<div class="line"><a id="l00583" name="l00583"></a><span class="lineno">  583</span>    <span class="comment">// @Param: FLOW_USE</span></div>
<div class="line"><a id="l00584" name="l00584"></a><span class="lineno">  584</span>    <span class="comment">// @DisplayName: Optical flow use bitmask</span></div>
<div class="line"><a id="l00585" name="l00585"></a><span class="lineno">  585</span>    <span class="comment">// @Description: Controls if the optical flow data is fused into the 24-state navigation estimator OR the 1-state terrain height estimator.</span></div>
<div class="line"><a id="l00586" name="l00586"></a><span class="lineno">  586</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00587" name="l00587"></a><span class="lineno">  587</span>    <span class="comment">// @Values: 0:None,1:Navigation,2:Terrain</span></div>
<div class="line"><a id="l00588" name="l00588"></a><span class="lineno">  588</span>    <span class="comment">// @RebootRequired: True</span></div>
<div class="line"><a id="l00589" name="l00589"></a><span class="lineno">  589</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;FLOW_USE&quot;</span>, 54, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _flowUse, <a class="code hl_define" href="AP__NavEKF3_8cpp.html#a8bacddbf386491ce7be4956637ecca7a">FLOW_USE_DEFAULT</a>),</div>
<div class="line"><a id="l00590" name="l00590"></a><span class="lineno">  590</span> </div>
<div class="line"><a id="l00591" name="l00591"></a><span class="lineno">  591</span>    <span class="comment">// @Param: HRT_FILT</span></div>
<div class="line"><a id="l00592" name="l00592"></a><span class="lineno">  592</span>    <span class="comment">// @DisplayName: Height rate filter crossover frequency</span></div>
<div class="line"><a id="l00593" name="l00593"></a><span class="lineno">  593</span>    <span class="comment">// @Description: Specifies the crossover frequency of the complementary filter used to calculate the output predictor height rate derivative.</span></div>
<div class="line"><a id="l00594" name="l00594"></a><span class="lineno">  594</span>    <span class="comment">// @Range: 0.1 30.0</span></div>
<div class="line"><a id="l00595" name="l00595"></a><span class="lineno">  595</span>    <span class="comment">// @Units: Hz</span></div>
<div class="line"><a id="l00596" name="l00596"></a><span class="lineno">  596</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;HRT_FILT&quot;</span>, 55, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _hrt_filt_freq, 2.0f),</div>
<div class="line"><a id="l00597" name="l00597"></a><span class="lineno">  597</span> </div>
<div class="line"><a id="l00598" name="l00598"></a><span class="lineno">  598</span>    <span class="comment">// @Param: MAG_EF_LIM</span></div>
<div class="line"><a id="l00599" name="l00599"></a><span class="lineno">  599</span>    <span class="comment">// @DisplayName: EarthField error limit</span></div>
<div class="line"><a id="l00600" name="l00600"></a><span class="lineno">  600</span>    <span class="comment">// @Description: This limits the difference between the learned earth magnetic field and the earth field from the world magnetic model tables. A value of zero means to disable the use of the WMM tables.</span></div>
<div class="line"><a id="l00601" name="l00601"></a><span class="lineno">  601</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00602" name="l00602"></a><span class="lineno">  602</span>    <span class="comment">// @Range: 0 500</span></div>
<div class="line"><a id="l00603" name="l00603"></a><span class="lineno">  603</span>    <span class="comment">// @Units: mGauss</span></div>
<div class="line"><a id="l00604" name="l00604"></a><span class="lineno">  604</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;MAG_EF_LIM&quot;</span>, 56, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _mag_ef_limit, 50),</div>
<div class="line"><a id="l00605" name="l00605"></a><span class="lineno">  605</span> </div>
<div class="line"><a id="l00606" name="l00606"></a><span class="lineno">  606</span>    <span class="comment">// @Param: GSF_RUN_MASK</span></div>
<div class="line"><a id="l00607" name="l00607"></a><span class="lineno">  607</span>    <span class="comment">// @DisplayName: Bitmask of which EKF-GSF yaw estimators run</span></div>
<div class="line"><a id="l00608" name="l00608"></a><span class="lineno">  608</span>    <span class="comment">// @Description: 1 byte bitmap of which EKF3 instances run an independant EKF-GSF yaw estimator to provide a backup yaw estimate that doesn&#39;t rely on magnetometer data. This estimator uses IMU, GPS and, if available, airspeed data. EKF-GSF yaw estimator data for the primary EKF3 instance will be logged as GSF0 and GSF1 messages. Use of the yaw estimate generated by this algorithm is controlled by the EK3_GSF_USE_MASK and EK3_GSF_RST_MAX parameters. To run the EKF-GSF yaw estimator in ride-along and logging only, set EK3_GSF_USE to 0. </span></div>
<div class="line"><a id="l00609" name="l00609"></a><span class="lineno">  609</span>    <span class="comment">// @Bitmask: 0:FirstEKF,1:SecondEKF,2:ThirdEKF,3:FourthEKF,4:FifthEKF,5:SixthEKF</span></div>
<div class="line"><a id="l00610" name="l00610"></a><span class="lineno">  610</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00611" name="l00611"></a><span class="lineno">  611</span>    <span class="comment">// @RebootRequired: True</span></div>
<div class="line"><a id="l00612" name="l00612"></a><span class="lineno">  612</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;GSF_RUN_MASK&quot;</span>, 57, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _gsfRunMask, 3),</div>
<div class="line"><a id="l00613" name="l00613"></a><span class="lineno">  613</span> </div>
<div class="line"><a id="l00614" name="l00614"></a><span class="lineno">  614</span>    <span class="comment">// @Param: GSF_USE_MASK</span></div>
<div class="line"><a id="l00615" name="l00615"></a><span class="lineno">  615</span>    <span class="comment">// @DisplayName: Bitmask of which EKF-GSF yaw estimators are used</span></div>
<div class="line"><a id="l00616" name="l00616"></a><span class="lineno">  616</span>    <span class="comment">// @Description: A bitmask of which EKF3 instances will use the output from the EKF-GSF yaw estimator that has been turned on by the EK3_GSF_RUN_MASK parameter. If the inertial navigation calculation stops following the GPS, then the vehicle code can request EKF3 to attempt to resolve the issue, either by performing a yaw reset if enabled by this parameter by switching to another EKF3 instance.</span></div>
<div class="line"><a id="l00617" name="l00617"></a><span class="lineno">  617</span>    <span class="comment">// @Bitmask: 0:FirstEKF,1:SecondEKF,2:ThirdEKF,3:FourthEKF,4:FifthEKF,5:SixthEKF</span></div>
<div class="line"><a id="l00618" name="l00618"></a><span class="lineno">  618</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00619" name="l00619"></a><span class="lineno">  619</span>    <span class="comment">// @RebootRequired: True</span></div>
<div class="line"><a id="l00620" name="l00620"></a><span class="lineno">  620</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;GSF_USE_MASK&quot;</span>, 58, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _gsfUseMask, 3),</div>
<div class="line"><a id="l00621" name="l00621"></a><span class="lineno">  621</span> </div>
<div class="line"><a id="l00622" name="l00622"></a><span class="lineno">  622</span>    <span class="comment">// 59 was GSF_DELAY which was never released in a stable version</span></div>
<div class="line"><a id="l00623" name="l00623"></a><span class="lineno">  623</span> </div>
<div class="line"><a id="l00624" name="l00624"></a><span class="lineno">  624</span>    <span class="comment">// @Param: GSF_RST_MAX</span></div>
<div class="line"><a id="l00625" name="l00625"></a><span class="lineno">  625</span>    <span class="comment">// @DisplayName: Maximum number of resets to the EKF-GSF yaw estimate allowed</span></div>
<div class="line"><a id="l00626" name="l00626"></a><span class="lineno">  626</span>    <span class="comment">// @Description: Sets the maximum number of times the EKF3 will be allowed to reset its yaw to the estimate from the EKF-GSF yaw estimator. No resets will be allowed unless the use of the EKF-GSF yaw estimate is enabled via the EK3_GSF_USE_MASK parameter.</span></div>
<div class="line"><a id="l00627" name="l00627"></a><span class="lineno">  627</span>    <span class="comment">// @Range: 1 10</span></div>
<div class="line"><a id="l00628" name="l00628"></a><span class="lineno">  628</span>    <span class="comment">// @Increment: 1</span></div>
<div class="line"><a id="l00629" name="l00629"></a><span class="lineno">  629</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00630" name="l00630"></a><span class="lineno">  630</span>    <span class="comment">// @RebootRequired: True</span></div>
<div class="line"><a id="l00631" name="l00631"></a><span class="lineno">  631</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;GSF_RST_MAX&quot;</span>, 60, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _gsfResetMaxCount, 2),</div>
<div class="line"><a id="l00632" name="l00632"></a><span class="lineno">  632</span> </div>
<div class="line"><a id="l00633" name="l00633"></a><span class="lineno">  633</span>    <span class="comment">// @Param: ERR_THRESH</span></div>
<div class="line"><a id="l00634" name="l00634"></a><span class="lineno">  634</span>    <span class="comment">// @DisplayName: EKF3 Lane Relative Error Sensitivity Threshold</span></div>
<div class="line"><a id="l00635" name="l00635"></a><span class="lineno">  635</span>    <span class="comment">// @Description: lanes have to be consistently better than the primary by at least this threshold to reduce their overall relativeCoreError, lowering this makes lane switching more sensitive to smaller error differences</span></div>
<div class="line"><a id="l00636" name="l00636"></a><span class="lineno">  636</span>    <span class="comment">// @Range: 0.05 1</span></div>
<div class="line"><a id="l00637" name="l00637"></a><span class="lineno">  637</span>    <span class="comment">// @Increment: 0.05</span></div>
<div class="line"><a id="l00638" name="l00638"></a><span class="lineno">  638</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00639" name="l00639"></a><span class="lineno">  639</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;ERR_THRESH&quot;</span>, 61, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _err_thresh, 0.2),</div>
<div class="line"><a id="l00640" name="l00640"></a><span class="lineno">  640</span> </div>
<div class="line"><a id="l00641" name="l00641"></a><span class="lineno">  641</span>    <span class="comment">// @Param: AFFINITY</span></div>
<div class="line"><a id="l00642" name="l00642"></a><span class="lineno">  642</span>    <span class="comment">// @DisplayName: EKF3 Sensor Affinity Options</span></div>
<div class="line"><a id="l00643" name="l00643"></a><span class="lineno">  643</span>    <span class="comment">// @Description: These options control the affinity between sensor instances and EKF cores</span></div>
<div class="line"><a id="l00644" name="l00644"></a><span class="lineno">  644</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00645" name="l00645"></a><span class="lineno">  645</span>    <span class="comment">// @Bitmask: 0:EnableGPSAffinity,1:EnableBaroAffinity,2:EnableCompassAffinity,3:EnableAirspeedAffinity</span></div>
<div class="line"><a id="l00646" name="l00646"></a><span class="lineno">  646</span>    <span class="comment">// @RebootRequired: True</span></div>
<div class="line"><a id="l00647" name="l00647"></a><span class="lineno">  647</span> </div>
<div class="line"><a id="l00648" name="l00648"></a><span class="lineno">  648</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;AFFINITY&quot;</span>, 62, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _affinity, 0),</div>
<div class="line"><a id="l00649" name="l00649"></a><span class="lineno">  649</span> </div>
<div class="line"><a id="l00650" name="l00650"></a><span class="lineno">  650</span>    <a class="code hl_define" href="AP__Param_8h.html#a1fc3014cf5831692db5dfaf5000c327e">AP_SUBGROUPEXTENSION</a>(<span class="stringliteral">&quot;&quot;</span>, 63, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, var_info2),</div>
<div class="line"><a id="l00651" name="l00651"></a><span class="lineno">  651</span> </div>
<div class="line"><a id="l00652" name="l00652"></a><span class="lineno">  652</span>    <a class="code hl_define" href="AP__Param_8h.html#a0f9acb038a5283b964b862aea8cc5051">AP_GROUPEND</a></div>
<div class="line"><a id="l00653" name="l00653"></a><span class="lineno">  653</span>};</div>
<div class="line"><a id="l00654" name="l00654"></a><span class="lineno">  654</span> </div>
<div class="line"><a id="l00655" name="l00655"></a><span class="lineno">  655</span><span class="comment">// second table of parameters. allows us to go beyond the 64 parameter limit</span></div>
<div class="line"><a id="l00656" name="l00656"></a><span class="lineno">  656</span><span class="keyword">const</span> <a class="code hl_struct" href="structAP__Param_1_1GroupInfo.html">AP_Param::GroupInfo</a> <a class="code hl_variable" href="classNavEKF3.html#aed3d9992910acab18c7ac321973ed6ab">NavEKF3::var_info2</a>[] = {</div>
<div class="line"><a id="l00657" name="l00657"></a><span class="lineno">  657</span> </div>
<div class="line"><a id="l00658" name="l00658"></a><span class="lineno">  658</span>    <span class="comment">// @Group: SRC</span></div>
<div class="line"><a id="l00659" name="l00659"></a><span class="lineno">  659</span>    <span class="comment">// @Path: ../AP_NavEKF/AP_NavEKF_Source.cpp</span></div>
<div class="line"><a id="l00660" name="l00660"></a><span class="lineno">  660</span>    <a class="code hl_define" href="AP__Param_8h.html#a16c360358c5d6a08d34f60921fd916a9">AP_SUBGROUPINFO</a>(sources, <span class="stringliteral">&quot;SRC&quot;</span>, 1, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, <a class="code hl_class" href="classAP__NavEKF__Source.html">AP_NavEKF_Source</a>),</div>
<div class="line"><a id="l00661" name="l00661"></a><span class="lineno">  661</span> </div>
<div class="line"><a id="l00662" name="l00662"></a><span class="lineno">  662</span>    <span class="comment">// @Param: DRAG_BCOEF_X</span></div>
<div class="line"><a id="l00663" name="l00663"></a><span class="lineno">  663</span>    <span class="comment">// @DisplayName: Ballistic coefficient for X axis drag</span></div>
<div class="line"><a id="l00664" name="l00664"></a><span class="lineno">  664</span>    <span class="comment">// @Description: Ratio of mass to drag coefficient measured along the X body axis. This parameter enables estimation of wind drift for vehicles with bluff bodies and without propulsion forces in the X and Y direction (eg multicopters). The drag produced by this effect scales with speed squared.  Set to a postive value &gt; 1.0 to enable. A starting value is the mass in Kg divided by the frontal area. The predicted drag from the rotors is specified separately by the EK3_DRAG_MCOEF parameter.</span></div>
<div class="line"><a id="l00665" name="l00665"></a><span class="lineno">  665</span>    <span class="comment">// @Range: 0.0 1000.0</span></div>
<div class="line"><a id="l00666" name="l00666"></a><span class="lineno">  666</span>    <span class="comment">// @Units: kg/m/m</span></div>
<div class="line"><a id="l00667" name="l00667"></a><span class="lineno">  667</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00668" name="l00668"></a><span class="lineno">  668</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;DRAG_BCOEF_X&quot;</span>, 2, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _ballisticCoef_x, 0.0f),</div>
<div class="line"><a id="l00669" name="l00669"></a><span class="lineno">  669</span> </div>
<div class="line"><a id="l00670" name="l00670"></a><span class="lineno">  670</span>    <span class="comment">// @Param: DRAG_BCOEF_Y</span></div>
<div class="line"><a id="l00671" name="l00671"></a><span class="lineno">  671</span>    <span class="comment">// @DisplayName: Ballistic coefficient for Y axis drag</span></div>
<div class="line"><a id="l00672" name="l00672"></a><span class="lineno">  672</span>    <span class="comment">// @Description: Ratio of mass to drag coefficient measured along the Y body axis. This parameter enables estimation of wind drift for vehicles with bluff bodies and without propulsion forces in the X and Y direction (eg multicopters). The drag produced by this effect scales with speed squared.  Set to a postive value &gt; 1.0 to enable. A starting value is the mass in Kg divided by the side area. The predicted drag from the rotors is specified separately by the EK3_DRAG_MCOEF parameter.</span></div>
<div class="line"><a id="l00673" name="l00673"></a><span class="lineno">  673</span>    <span class="comment">// @Range: 50.0 1000.0</span></div>
<div class="line"><a id="l00674" name="l00674"></a><span class="lineno">  674</span>    <span class="comment">// @Units: kg/m/m</span></div>
<div class="line"><a id="l00675" name="l00675"></a><span class="lineno">  675</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00676" name="l00676"></a><span class="lineno">  676</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;DRAG_BCOEF_Y&quot;</span>, 3, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _ballisticCoef_y, 0.0f),</div>
<div class="line"><a id="l00677" name="l00677"></a><span class="lineno">  677</span> </div>
<div class="line"><a id="l00678" name="l00678"></a><span class="lineno">  678</span>    <span class="comment">// @Param: DRAG_M_NSE</span></div>
<div class="line"><a id="l00679" name="l00679"></a><span class="lineno">  679</span>    <span class="comment">// @DisplayName: Observation noise for drag acceleration</span></div>
<div class="line"><a id="l00680" name="l00680"></a><span class="lineno">  680</span>    <span class="comment">// @Description: This sets the amount of noise used when fusing X and Y acceleration as an observation that enables esitmation of wind velocity for multi-rotor vehicles. This feature is enabled by the EK3_DRAG_BCOEF_X and EK3_DRAG_BCOEF_Y parameters</span></div>
<div class="line"><a id="l00681" name="l00681"></a><span class="lineno">  681</span>    <span class="comment">// @Range: 0.1 2.0</span></div>
<div class="line"><a id="l00682" name="l00682"></a><span class="lineno">  682</span>    <span class="comment">// @Increment: 0.1</span></div>
<div class="line"><a id="l00683" name="l00683"></a><span class="lineno">  683</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00684" name="l00684"></a><span class="lineno">  684</span>    <span class="comment">// @Units: m/s/s</span></div>
<div class="line"><a id="l00685" name="l00685"></a><span class="lineno">  685</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;DRAG_M_NSE&quot;</span>, 4, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _dragObsNoise, 0.5f),</div>
<div class="line"><a id="l00686" name="l00686"></a><span class="lineno">  686</span> </div>
<div class="line"><a id="l00687" name="l00687"></a><span class="lineno">  687</span>    <span class="comment">// @Param: DRAG_MCOEF</span></div>
<div class="line"><a id="l00688" name="l00688"></a><span class="lineno">  688</span>    <span class="comment">// @DisplayName: Momentum coefficient for propeller drag</span></div>
<div class="line"><a id="l00689" name="l00689"></a><span class="lineno">  689</span>    <span class="comment">// @Description: This parameter is used to predict the drag produced by the rotors when flying a multi-copter, enabling estimation of wind drift. The drag produced by this effect scales with speed not speed squared and is produced because some of the air velocity normal to the rotors axis of rotation is lost when passing through the rotor disc which changes the momentum of the airflow causing drag. For unducted rotors the effect is roughly proportional to the area of the propeller blades when viewed side on and changes with different propellers. It is higher for ducted rotors. For example if flying at 15 m/s at sea level conditions produces a rotor induced drag acceleration of 1.5 m/s/s, then EK3_DRAG_MCOEF would be set to 0.1 = (1.5/15.0). Set EK3_MCOEF to a postive value to enable wind estimation using this drag effect. To account for the drag produced by the body which scales with speed squared, see documentation for the EK3_DRAG_BCOEF_X and EK3_DRAG_BCOEF_Y parameters.</span></div>
<div class="line"><a id="l00690" name="l00690"></a><span class="lineno">  690</span>    <span class="comment">// @Range: 0.0 1.0</span></div>
<div class="line"><a id="l00691" name="l00691"></a><span class="lineno">  691</span>    <span class="comment">// @Increment: 0.01</span></div>
<div class="line"><a id="l00692" name="l00692"></a><span class="lineno">  692</span>    <span class="comment">// @Units: 1/s</span></div>
<div class="line"><a id="l00693" name="l00693"></a><span class="lineno">  693</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00694" name="l00694"></a><span class="lineno">  694</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;DRAG_MCOEF&quot;</span>, 5, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _momentumDragCoef, 0.0f),</div>
<div class="line"><a id="l00695" name="l00695"></a><span class="lineno">  695</span> </div>
<div class="line"><a id="l00696" name="l00696"></a><span class="lineno">  696</span>    <span class="comment">// @Param: OGNM_TEST_SF</span></div>
<div class="line"><a id="l00697" name="l00697"></a><span class="lineno">  697</span>    <span class="comment">// @DisplayName: On ground not moving test scale factor</span></div>
<div class="line"><a id="l00698" name="l00698"></a><span class="lineno">  698</span>    <span class="comment">// @Description: This parameter is adjust the sensitivity of the on ground not moving test which is used to assist with learning the yaw gyro bias and stopping yaw drift before flight when operating without a yaw sensor. Bigger values allow the detection of a not moving condition with noiser IMU data. Check the XKFM data logged when the vehicle is on ground not moving and adjust the value of OGNM_TEST_SF to be slightly higher than the maximum value of the XKFM.ADR, XKFM.ALR, XKFM.GDR and XKFM.GLR test levels.</span></div>
<div class="line"><a id="l00699" name="l00699"></a><span class="lineno">  699</span>    <span class="comment">// @Range: 1.0 10.0</span></div>
<div class="line"><a id="l00700" name="l00700"></a><span class="lineno">  700</span>    <span class="comment">// @Increment: 0.5</span></div>
<div class="line"><a id="l00701" name="l00701"></a><span class="lineno">  701</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00702" name="l00702"></a><span class="lineno">  702</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;OGNM_TEST_SF&quot;</span>, 6, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _ognmTestScaleFactor, 2.0f),</div>
<div class="line"><a id="l00703" name="l00703"></a><span class="lineno">  703</span> </div>
<div class="line"><a id="l00704" name="l00704"></a><span class="lineno">  704</span>    <span class="comment">// @Param: GND_EFF_DZ</span></div>
<div class="line"><a id="l00705" name="l00705"></a><span class="lineno">  705</span>    <span class="comment">// @DisplayName: Baro height ground effect dead zone</span></div>
<div class="line"><a id="l00706" name="l00706"></a><span class="lineno">  706</span>    <span class="comment">// @Description: This parameter sets the size of the dead zone that is applied to negative baro height spikes that can occur when taking off or landing when a vehicle with lift rotors is operating in ground effect ground effect. Set to about 0.5m less than the amount of negative offset in baro height that occurs just prior to takeoff when lift motors are spooling up. Set to 0 if no ground effect is present.</span></div>
<div class="line"><a id="l00707" name="l00707"></a><span class="lineno">  707</span>    <span class="comment">// @Range: 0.0 10.0</span></div>
<div class="line"><a id="l00708" name="l00708"></a><span class="lineno">  708</span>    <span class="comment">// @Increment: 0.5</span></div>
<div class="line"><a id="l00709" name="l00709"></a><span class="lineno">  709</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00710" name="l00710"></a><span class="lineno">  710</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;GND_EFF_DZ&quot;</span>, 7, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _baroGndEffectDeadZone, 4.0f),</div>
<div class="line"><a id="l00711" name="l00711"></a><span class="lineno">  711</span> </div>
<div class="line"><a id="l00712" name="l00712"></a><span class="lineno">  712</span>    <span class="comment">// @Param: PRIMARY</span></div>
<div class="line"><a id="l00713" name="l00713"></a><span class="lineno">  713</span>    <span class="comment">// @DisplayName: Primary core number</span></div>
<div class="line"><a id="l00714" name="l00714"></a><span class="lineno">  714</span>    <span class="comment">// @Description: The core number (index in IMU mask) that will be used as the primary EKF core on startup. While disarmed the EKF will force the use of this core. A value of 0 corresponds to the first IMU in EK3_IMU_MASK.</span></div>
<div class="line"><a id="l00715" name="l00715"></a><span class="lineno">  715</span>    <span class="comment">// @Range: 0 2</span></div>
<div class="line"><a id="l00716" name="l00716"></a><span class="lineno">  716</span>    <span class="comment">// @Increment: 1</span></div>
<div class="line"><a id="l00717" name="l00717"></a><span class="lineno">  717</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00718" name="l00718"></a><span class="lineno">  718</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;PRIMARY&quot;</span>, 8, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _primary_core, <a class="code hl_define" href="AP__NavEKF3_8cpp.html#aac39cb1a6a9eec23e6241bb24bb89f30">EK3_PRIMARY_DEFAULT</a>),</div>
<div class="line"><a id="l00719" name="l00719"></a><span class="lineno">  719</span> </div>
<div class="line"><a id="l00720" name="l00720"></a><span class="lineno">  720</span>    <span class="comment">// @Param: LOG_LEVEL</span></div>
<div class="line"><a id="l00721" name="l00721"></a><span class="lineno">  721</span>    <span class="comment">// @DisplayName: Logging Level</span></div>
<div class="line"><a id="l00722" name="l00722"></a><span class="lineno">  722</span>    <span class="comment">// @Description: Determines how verbose the EKF3 streaming logging is. A value of 0 provides full logging(default), a value of 1 only XKF4 scaled innovations are logged, a value of 2 both XKF4 and GSF are logged, and a value of 3 disables all streaming logging of EKF3.</span></div>
<div class="line"><a id="l00723" name="l00723"></a><span class="lineno">  723</span>    <span class="comment">// @Range: 0 3</span></div>
<div class="line"><a id="l00724" name="l00724"></a><span class="lineno">  724</span>    <span class="comment">// @Increment: 1</span></div>
<div class="line"><a id="l00725" name="l00725"></a><span class="lineno">  725</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00726" name="l00726"></a><span class="lineno">  726</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;LOG_LEVEL&quot;</span>, 9, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _log_level, 0),</div>
<div class="line"><a id="l00727" name="l00727"></a><span class="lineno">  727</span>    </div>
<div class="line"><a id="l00728" name="l00728"></a><span class="lineno">  728</span>    <span class="comment">// @Param: GPS_VACC_MAX</span></div>
<div class="line"><a id="l00729" name="l00729"></a><span class="lineno">  729</span>    <span class="comment">// @DisplayName: GPS vertical accuracy threshold</span></div>
<div class="line"><a id="l00730" name="l00730"></a><span class="lineno">  730</span>    <span class="comment">// @Description: Vertical accuracy threshold for GPS as the altitude source. The GPS will not be used as an altitude source if the reported vertical accuracy of the GPS is larger than this threshold, falling back to baro instead. Set to zero to deactivate the threshold check.</span></div>
<div class="line"><a id="l00731" name="l00731"></a><span class="lineno">  731</span>    <span class="comment">// @Range: 0.0 10.0</span></div>
<div class="line"><a id="l00732" name="l00732"></a><span class="lineno">  732</span>    <span class="comment">// @Increment: 0.1</span></div>
<div class="line"><a id="l00733" name="l00733"></a><span class="lineno">  733</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00734" name="l00734"></a><span class="lineno">  734</span>    <span class="comment">// @Units: m</span></div>
<div class="line"><a id="l00735" name="l00735"></a><span class="lineno">  735</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;GPS_VACC_MAX&quot;</span>, 10, <a class="code hl_class" href="classNavEKF3.html">NavEKF3</a>, _gpsVAccThreshold, 0.0f),</div>
<div class="line"><a id="l00736" name="l00736"></a><span class="lineno">  736</span> </div>
<div class="line"><a id="l00737" name="l00737"></a><span class="lineno">  737</span>    <a class="code hl_define" href="AP__Param_8h.html#a0f9acb038a5283b964b862aea8cc5051">AP_GROUPEND</a></div>
<div class="line"><a id="l00738" name="l00738"></a><span class="lineno">  738</span>};</div>
<div class="line"><a id="l00739" name="l00739"></a><span class="lineno">  739</span> </div>
<div class="foldopen" id="foldopen00740" data-start="{" data-end="}">
<div class="line"><a id="l00740" name="l00740"></a><span class="lineno"><a class="line" href="classNavEKF3.html#a00749e276d885afc56a81151b7202041">  740</a></span><a class="code hl_function" href="classNavEKF3.html#a00749e276d885afc56a81151b7202041">NavEKF3::NavEKF3</a>()</div>
<div class="line"><a id="l00741" name="l00741"></a><span class="lineno">  741</span>{</div>
<div class="line"><a id="l00742" name="l00742"></a><span class="lineno">  742</span>    <a class="code hl_function" href="classAP__Param.html#a5f6dcfce1c0a79cf5bd81283e22f3201">AP_Param::setup_object_defaults</a>(<span class="keyword">this</span>, var_info);</div>
<div class="line"><a id="l00743" name="l00743"></a><span class="lineno">  743</span>    <a class="code hl_function" href="classAP__Param.html#a5f6dcfce1c0a79cf5bd81283e22f3201">AP_Param::setup_object_defaults</a>(<span class="keyword">this</span>, <a class="code hl_variable" href="classNavEKF3.html#aed3d9992910acab18c7ac321973ed6ab">var_info2</a>);</div>
<div class="line"><a id="l00744" name="l00744"></a><span class="lineno">  744</span>}</div>
</div>
<div class="line"><a id="l00745" name="l00745"></a><span class="lineno">  745</span> </div>
<div class="line"><a id="l00746" name="l00746"></a><span class="lineno">  746</span> </div>
<div class="line"><a id="l00747" name="l00747"></a><span class="lineno">  747</span><span class="comment">// Initialise the filter</span></div>
<div class="foldopen" id="foldopen00748" data-start="{" data-end="}">
<div class="line"><a id="l00748" name="l00748"></a><span class="lineno"><a class="line" href="classNavEKF3.html#a07f064fa513fbb6e7188141904f3b5b5">  748</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classNavEKF3.html#a07f064fa513fbb6e7188141904f3b5b5">NavEKF3::InitialiseFilter</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l00749" name="l00749"></a><span class="lineno">  749</span>{</div>
<div class="line"><a id="l00750" name="l00750"></a><span class="lineno">  750</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classNavEKF3.html#ab5ced206a72463a4c078febcba91a755">_enable</a> == 0 || <a class="code hl_variable" href="classNavEKF3.html#a2880515772d5ab1544caf7679f8634e8">_imuMask</a> == 0) {</div>
<div class="line"><a id="l00751" name="l00751"></a><span class="lineno">  751</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00752" name="l00752"></a><span class="lineno">  752</span>    }</div>
<div class="line"><a id="l00753" name="l00753"></a><span class="lineno">  753</span>    <span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code hl_variable" href="ReplayGyroFFT_8cpp.html#a4b91d1711c0d031f33f581540503bc54">ins</a> = <a class="code hl_function" href="namespaceAP.html#a72bac6dee7ddc414f93cbf7cad325f55">AP::dal</a>().<a class="code hl_function" href="classAP__DAL.html#a8e93e5727707c0b0c8a41d74ae4b34f1">ins</a>();</div>
<div class="line"><a id="l00754" name="l00754"></a><span class="lineno">  754</span> </div>
<div class="line"><a id="l00755" name="l00755"></a><span class="lineno">  755</span>    <a class="code hl_function" href="namespaceAP.html#a72bac6dee7ddc414f93cbf7cad325f55">AP::dal</a>().<a class="code hl_function" href="classAP__DAL.html#aacd3492110784dce84ac67e3442cfee6">start_frame</a>(<a class="code hl_enumvalue" href="classAP__DAL.html#a122c59f982f0bf61155e70e5975e4938a43a5d0e1dd9af707cc1c15f5016bb802">AP_DAL::FrameType::InitialiseFilterEKF3</a>);</div>
<div class="line"><a id="l00756" name="l00756"></a><span class="lineno">  756</span> </div>
<div class="line"><a id="l00757" name="l00757"></a><span class="lineno">  757</span>    <a class="code hl_variable" href="classNavEKF3.html#abc8f4be833ed62ad269ae9a2110c3e76">imuSampleTime_us</a> = <a class="code hl_function" href="namespaceAP.html#a72bac6dee7ddc414f93cbf7cad325f55">AP::dal</a>().<a class="code hl_function" href="classAP__DAL.html#af71c3019a210e9d9b42f9ecafec1b6a9">micros64</a>();</div>
<div class="line"><a id="l00758" name="l00758"></a><span class="lineno">  758</span> </div>
<div class="line"><a id="l00759" name="l00759"></a><span class="lineno">  759</span>    <span class="comment">// remember expected frame time</span></div>
<div class="line"><a id="l00760" name="l00760"></a><span class="lineno">  760</span>    <span class="keyword">const</span> <span class="keywordtype">float</span> loop_rate = <a class="code hl_variable" href="ReplayGyroFFT_8cpp.html#a4b91d1711c0d031f33f581540503bc54">ins</a>.<a class="code hl_function" href="classAP__InertialSensor.html#a4807bcb7a752455c5752250d2e665981">get_loop_rate_hz</a>();</div>
<div class="line"><a id="l00761" name="l00761"></a><span class="lineno">  761</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="AP__Math_8h.html#a4e3ae698e8f99cec214348ad233e3c41">is_positive</a>(loop_rate)) {</div>
<div class="line"><a id="l00762" name="l00762"></a><span class="lineno">  762</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00763" name="l00763"></a><span class="lineno">  763</span>    }</div>
<div class="line"><a id="l00764" name="l00764"></a><span class="lineno">  764</span>    <a class="code hl_variable" href="classNavEKF3.html#a7bcc91eb0caffd2056ba6c8944cc499b">_frameTimeUsec</a> = 1e6 / loop_rate;</div>
<div class="line"><a id="l00765" name="l00765"></a><span class="lineno">  765</span> </div>
<div class="line"><a id="l00766" name="l00766"></a><span class="lineno">  766</span>    <span class="comment">// expected number of IMU frames per prediction</span></div>
<div class="line"><a id="l00767" name="l00767"></a><span class="lineno">  767</span>    <a class="code hl_variable" href="classNavEKF3.html#a298b7e8499d3c512475aadeb75c2074a">_framesPerPrediction</a> = uint8_t((<a class="code hl_define" href="AP__NavEKF2__core_8h.html#a3a3babe7af69ce986963c5162af1caeb">EKF_TARGET_DT</a> / (<a class="code hl_variable" href="classNavEKF3.html#a7bcc91eb0caffd2056ba6c8944cc499b">_frameTimeUsec</a> * 1.0e-6) + 0.5));</div>
<div class="line"><a id="l00768" name="l00768"></a><span class="lineno">  768</span> </div>
<div class="line"><a id="l00769" name="l00769"></a><span class="lineno">  769</span><span class="preprocessor">#if !APM_BUILD_TYPE(APM_BUILD_AP_DAL_Standalone)</span></div>
<div class="line"><a id="l00770" name="l00770"></a><span class="lineno">  770</span>    <span class="comment">// convert parameters if necessary</span></div>
<div class="line"><a id="l00771" name="l00771"></a><span class="lineno">  771</span>    <a class="code hl_function" href="classNavEKF3.html#ae1973b73315a3cc633c6d350b4a92359">convert_parameters</a>();</div>
<div class="line"><a id="l00772" name="l00772"></a><span class="lineno">  772</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00773" name="l00773"></a><span class="lineno">  773</span> </div>
<div class="line"><a id="l00774" name="l00774"></a><span class="lineno">  774</span><span class="preprocessor">#if APM_BUILD_TYPE(APM_BUILD_Replay)</span></div>
<div class="line"><a id="l00775" name="l00775"></a><span class="lineno">  775</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="ReplayGyroFFT_8cpp.html#a4b91d1711c0d031f33f581540503bc54">ins</a>.<a class="code hl_function" href="classAP__InertialSensor.html#a8ca2cbf528de2276d1be01c00243db0d">get_accel_count</a>() == 0) {</div>
<div class="line"><a id="l00776" name="l00776"></a><span class="lineno">  776</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00777" name="l00777"></a><span class="lineno">  777</span>    }</div>
<div class="line"><a id="l00778" name="l00778"></a><span class="lineno">  778</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00779" name="l00779"></a><span class="lineno">  779</span> </div>
<div class="line"><a id="l00780" name="l00780"></a><span class="lineno">  780</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a> == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a id="l00781" name="l00781"></a><span class="lineno">  781</span> </div>
<div class="line"><a id="l00782" name="l00782"></a><span class="lineno">  782</span>        <span class="comment">// don&#39;t run multiple filters for 1 IMU</span></div>
<div class="line"><a id="l00783" name="l00783"></a><span class="lineno">  783</span>        uint8_t mask = (1U&lt;&lt;<a class="code hl_variable" href="ReplayGyroFFT_8cpp.html#a4b91d1711c0d031f33f581540503bc54">ins</a>.<a class="code hl_function" href="classAP__InertialSensor.html#a8ca2cbf528de2276d1be01c00243db0d">get_accel_count</a>())-1;</div>
<div class="line"><a id="l00784" name="l00784"></a><span class="lineno">  784</span>        <a class="code hl_variable" href="classNavEKF3.html#a2880515772d5ab1544caf7679f8634e8">_imuMask</a>.set(<a class="code hl_variable" href="classNavEKF3.html#a2880515772d5ab1544caf7679f8634e8">_imuMask</a>.get() &amp; mask);</div>
<div class="line"><a id="l00785" name="l00785"></a><span class="lineno">  785</span>        </div>
<div class="line"><a id="l00786" name="l00786"></a><span class="lineno">  786</span>        <span class="comment">// initialise the setup variables</span></div>
<div class="line"><a id="l00787" name="l00787"></a><span class="lineno">  787</span>        <span class="keywordflow">for</span> (uint8_t i=0; i&lt;<a class="code hl_define" href="AP__NavEKF3_8h.html#ac55e8345c74b4472c571ca425dc16132">MAX_EKF_CORES</a>; i++) {</div>
<div class="line"><a id="l00788" name="l00788"></a><span class="lineno">  788</span>            <a class="code hl_variable" href="classNavEKF3.html#ad8afa9c7a33458a26edbbf9e4b2cace6">coreSetupRequired</a>[i] = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00789" name="l00789"></a><span class="lineno">  789</span>            <a class="code hl_variable" href="classNavEKF3.html#a2194f287cbfe1a153da81af4f1394c9e">coreImuIndex</a>[i] = 0;</div>
<div class="line"><a id="l00790" name="l00790"></a><span class="lineno">  790</span>        }</div>
<div class="line"><a id="l00791" name="l00791"></a><span class="lineno">  791</span>        <a class="code hl_variable" href="classNavEKF3.html#a1146c4b7293610f34b6ecfd7ccc5bbb1">num_cores</a> = 0;</div>
<div class="line"><a id="l00792" name="l00792"></a><span class="lineno">  792</span> </div>
<div class="line"><a id="l00793" name="l00793"></a><span class="lineno">  793</span>        <span class="comment">// count IMUs from mask</span></div>
<div class="line"><a id="l00794" name="l00794"></a><span class="lineno">  794</span>        <span class="keywordflow">for</span> (uint8_t i=0; i&lt;<a class="code hl_define" href="AP__InertialSensor__config_8h.html#a2247b51f4c9a78d7d1f06d7dda78a82e">INS_MAX_INSTANCES</a>; i++) {</div>
<div class="line"><a id="l00795" name="l00795"></a><span class="lineno">  795</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="classNavEKF3.html#a2880515772d5ab1544caf7679f8634e8">_imuMask</a> &amp; (1U&lt;&lt;i)) {</div>
<div class="line"><a id="l00796" name="l00796"></a><span class="lineno">  796</span>                <a class="code hl_variable" href="classNavEKF3.html#ad8afa9c7a33458a26edbbf9e4b2cace6">coreSetupRequired</a>[<a class="code hl_variable" href="classNavEKF3.html#a1146c4b7293610f34b6ecfd7ccc5bbb1">num_cores</a>] = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00797" name="l00797"></a><span class="lineno">  797</span>                <a class="code hl_variable" href="classNavEKF3.html#a2194f287cbfe1a153da81af4f1394c9e">coreImuIndex</a>[<a class="code hl_variable" href="classNavEKF3.html#a1146c4b7293610f34b6ecfd7ccc5bbb1">num_cores</a>] = i;</div>
<div class="line"><a id="l00798" name="l00798"></a><span class="lineno">  798</span>                <a class="code hl_variable" href="classNavEKF3.html#a1146c4b7293610f34b6ecfd7ccc5bbb1">num_cores</a>++;</div>
<div class="line"><a id="l00799" name="l00799"></a><span class="lineno">  799</span>            }</div>
<div class="line"><a id="l00800" name="l00800"></a><span class="lineno">  800</span>        }</div>
<div class="line"><a id="l00801" name="l00801"></a><span class="lineno">  801</span> </div>
<div class="line"><a id="l00802" name="l00802"></a><span class="lineno">  802</span>        <span class="comment">// check if there is enough memory to create the EKF cores</span></div>
<div class="line"><a id="l00803" name="l00803"></a><span class="lineno">  803</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="namespaceAP.html#a72bac6dee7ddc414f93cbf7cad325f55">AP::dal</a>().<a class="code hl_function" href="classAP__DAL.html#a6942be2fc29e5691dfa3f862ad897b53">available_memory</a>() &lt; <span class="keyword">sizeof</span>(<a class="code hl_friend" href="classNavEKF3.html#aabbd92a90484f88b6885cff14c3cfbdf">NavEKF3_core</a>)*<a class="code hl_variable" href="classNavEKF3.html#a1146c4b7293610f34b6ecfd7ccc5bbb1">num_cores</a> + 4096) {</div>
<div class="line"><a id="l00804" name="l00804"></a><span class="lineno">  804</span>            <a class="code hl_define" href="GCS_8h.html#a266bfe8eda675e1092f045e93932b4a6">GCS_SEND_TEXT</a>(MAV_SEVERITY_CRITICAL, <span class="stringliteral">&quot;EKF3 not enough memory&quot;</span>);</div>
<div class="line"><a id="l00805" name="l00805"></a><span class="lineno">  805</span>            <a class="code hl_variable" href="classNavEKF3.html#ab5ced206a72463a4c078febcba91a755">_enable</a>.set(0);</div>
<div class="line"><a id="l00806" name="l00806"></a><span class="lineno">  806</span>            <a class="code hl_variable" href="classNavEKF3.html#a1146c4b7293610f34b6ecfd7ccc5bbb1">num_cores</a> = 0;</div>
<div class="line"><a id="l00807" name="l00807"></a><span class="lineno">  807</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00808" name="l00808"></a><span class="lineno">  808</span>        }</div>
<div class="line"><a id="l00809" name="l00809"></a><span class="lineno">  809</span> </div>
<div class="line"><a id="l00810" name="l00810"></a><span class="lineno">  810</span>        <span class="comment">//try to allocate from CCM RAM, fallback to Normal RAM if not available or full</span></div>
<div class="line"><a id="l00811" name="l00811"></a><span class="lineno">  811</span>        <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a> = (<a class="code hl_class" href="classNavEKF3__core.html">NavEKF3_core</a>*)<a class="code hl_function" href="namespaceAP.html#a72bac6dee7ddc414f93cbf7cad325f55">AP::dal</a>().<a class="code hl_function" href="classAP__DAL.html#af59be9a791f80ecdb6127906be93d1da">malloc_type</a>(<span class="keyword">sizeof</span>(<a class="code hl_class" href="classNavEKF3__core.html">NavEKF3_core</a>)*<a class="code hl_variable" href="classNavEKF3.html#a1146c4b7293610f34b6ecfd7ccc5bbb1">num_cores</a>, <a class="code hl_function" href="namespaceAP.html#a72bac6dee7ddc414f93cbf7cad325f55">AP::dal</a>().<a class="code hl_enumvalue" href="classAP__DAL.html#abe2e7f628098bcd4d1df4121ce03f92eaae9953a8fbbb13931f91eadd4ff027a2">MEM_FAST</a>);</div>
<div class="line"><a id="l00812" name="l00812"></a><span class="lineno">  812</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a> == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a id="l00813" name="l00813"></a><span class="lineno">  813</span>            <a class="code hl_variable" href="classNavEKF3.html#ab5ced206a72463a4c078febcba91a755">_enable</a>.set(0);</div>
<div class="line"><a id="l00814" name="l00814"></a><span class="lineno">  814</span>            <a class="code hl_variable" href="classNavEKF3.html#a1146c4b7293610f34b6ecfd7ccc5bbb1">num_cores</a> = 0;</div>
<div class="line"><a id="l00815" name="l00815"></a><span class="lineno">  815</span>            <a class="code hl_define" href="GCS_8h.html#a266bfe8eda675e1092f045e93932b4a6">GCS_SEND_TEXT</a>(MAV_SEVERITY_CRITICAL, <span class="stringliteral">&quot;EKF3 allocation failed&quot;</span>);</div>
<div class="line"><a id="l00816" name="l00816"></a><span class="lineno">  816</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00817" name="l00817"></a><span class="lineno">  817</span>        }</div>
<div class="line"><a id="l00818" name="l00818"></a><span class="lineno">  818</span> </div>
<div class="line"><a id="l00819" name="l00819"></a><span class="lineno">  819</span>        <span class="comment">// Call constructors on all cores</span></div>
<div class="line"><a id="l00820" name="l00820"></a><span class="lineno">  820</span>        <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; <a class="code hl_variable" href="classNavEKF3.html#a1146c4b7293610f34b6ecfd7ccc5bbb1">num_cores</a>; i++) {</div>
<div class="line"><a id="l00821" name="l00821"></a><span class="lineno">  821</span>            <span class="keyword">new</span> (&amp;<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[i]) <a class="code hl_friend" href="classNavEKF3.html#aabbd92a90484f88b6885cff14c3cfbdf">NavEKF3_core</a>(<span class="keyword">this</span>);</div>
<div class="line"><a id="l00822" name="l00822"></a><span class="lineno">  822</span>        }</div>
<div class="line"><a id="l00823" name="l00823"></a><span class="lineno">  823</span>    }</div>
<div class="line"><a id="l00824" name="l00824"></a><span class="lineno">  824</span> </div>
<div class="line"><a id="l00825" name="l00825"></a><span class="lineno">  825</span>    <span class="comment">// Set up any cores that have been created</span></div>
<div class="line"><a id="l00826" name="l00826"></a><span class="lineno">  826</span>    <span class="comment">// This specifies the IMU to be used and creates the data buffers</span></div>
<div class="line"><a id="l00827" name="l00827"></a><span class="lineno">  827</span>    <span class="comment">// If we are unable to set up a core, return false and try again next time the function is called</span></div>
<div class="line"><a id="l00828" name="l00828"></a><span class="lineno">  828</span>    <span class="keywordtype">bool</span> core_setup_success = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00829" name="l00829"></a><span class="lineno">  829</span>    <span class="keywordflow">for</span> (uint8_t core_index=0; core_index&lt;<a class="code hl_variable" href="classNavEKF3.html#a1146c4b7293610f34b6ecfd7ccc5bbb1">num_cores</a>; core_index++) {</div>
<div class="line"><a id="l00830" name="l00830"></a><span class="lineno">  830</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classNavEKF3.html#ad8afa9c7a33458a26edbbf9e4b2cace6">coreSetupRequired</a>[core_index]) {</div>
<div class="line"><a id="l00831" name="l00831"></a><span class="lineno">  831</span>            <a class="code hl_variable" href="classNavEKF3.html#ad8afa9c7a33458a26edbbf9e4b2cace6">coreSetupRequired</a>[core_index] = !<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[core_index].<a class="code hl_function" href="classNavEKF3__core.html#ad9b81c98e3f482698806e02884ee2a31">setup_core</a>(<a class="code hl_variable" href="classNavEKF3.html#a2194f287cbfe1a153da81af4f1394c9e">coreImuIndex</a>[core_index], core_index);</div>
<div class="line"><a id="l00832" name="l00832"></a><span class="lineno">  832</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="classNavEKF3.html#ad8afa9c7a33458a26edbbf9e4b2cace6">coreSetupRequired</a>[core_index]) {</div>
<div class="line"><a id="l00833" name="l00833"></a><span class="lineno">  833</span>                core_setup_success = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00834" name="l00834"></a><span class="lineno">  834</span>            }</div>
<div class="line"><a id="l00835" name="l00835"></a><span class="lineno">  835</span>        }</div>
<div class="line"><a id="l00836" name="l00836"></a><span class="lineno">  836</span>    }</div>
<div class="line"><a id="l00837" name="l00837"></a><span class="lineno">  837</span>    <span class="comment">// exit with failure if any cores could not be setup</span></div>
<div class="line"><a id="l00838" name="l00838"></a><span class="lineno">  838</span>    <span class="keywordflow">if</span> (!core_setup_success) {</div>
<div class="line"><a id="l00839" name="l00839"></a><span class="lineno">  839</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00840" name="l00840"></a><span class="lineno">  840</span>    }</div>
<div class="line"><a id="l00841" name="l00841"></a><span class="lineno">  841</span> </div>
<div class="line"><a id="l00842" name="l00842"></a><span class="lineno">  842</span>    <span class="comment">// set relative error scores for all cores to 0</span></div>
<div class="line"><a id="l00843" name="l00843"></a><span class="lineno">  843</span>    <a class="code hl_function" href="classNavEKF3.html#afd51ab0da032456d39f8b2b3a9db50c7">resetCoreErrors</a>();</div>
<div class="line"><a id="l00844" name="l00844"></a><span class="lineno">  844</span> </div>
<div class="line"><a id="l00845" name="l00845"></a><span class="lineno">  845</span>    <span class="comment">// Set the primary initially to be users selected primary</span></div>
<div class="line"><a id="l00846" name="l00846"></a><span class="lineno">  846</span>    <a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a> = uint8_t(<a class="code hl_variable" href="classNavEKF3.html#a6df1d265b67a07f0cd79b001624729ba">_primary_core</a>) &lt; <a class="code hl_variable" href="classNavEKF3.html#a1146c4b7293610f34b6ecfd7ccc5bbb1">num_cores</a>? <a class="code hl_variable" href="classNavEKF3.html#a6df1d265b67a07f0cd79b001624729ba">_primary_core</a> : 0;</div>
<div class="line"><a id="l00847" name="l00847"></a><span class="lineno">  847</span> </div>
<div class="line"><a id="l00848" name="l00848"></a><span class="lineno">  848</span>    <span class="comment">// invalidate shared origin</span></div>
<div class="line"><a id="l00849" name="l00849"></a><span class="lineno">  849</span>    <a class="code hl_variable" href="classNavEKF3.html#a850fafc5f4cb73ab3916b5ecfb871b1e">common_origin_valid</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00850" name="l00850"></a><span class="lineno">  850</span> </div>
<div class="line"><a id="l00851" name="l00851"></a><span class="lineno">  851</span>    <span class="comment">// initialise the cores. We return success only if all cores</span></div>
<div class="line"><a id="l00852" name="l00852"></a><span class="lineno">  852</span>    <span class="comment">// initialise successfully</span></div>
<div class="line"><a id="l00853" name="l00853"></a><span class="lineno">  853</span>    <span class="keywordtype">bool</span> ret = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00854" name="l00854"></a><span class="lineno">  854</span>    <span class="keywordflow">for</span> (uint8_t i=0; i&lt;<a class="code hl_variable" href="classNavEKF3.html#a1146c4b7293610f34b6ecfd7ccc5bbb1">num_cores</a>; i++) {</div>
<div class="line"><a id="l00855" name="l00855"></a><span class="lineno">  855</span>        ret &amp;= <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[i].<a class="code hl_function" href="classNavEKF3__core.html#aae18ada44b1b7be0d45af03391ef961a">InitialiseFilterBootstrap</a>();</div>
<div class="line"><a id="l00856" name="l00856"></a><span class="lineno">  856</span>    }</div>
<div class="line"><a id="l00857" name="l00857"></a><span class="lineno">  857</span> </div>
<div class="line"><a id="l00858" name="l00858"></a><span class="lineno">  858</span>    <span class="comment">// set last time the cores were primary to 0</span></div>
<div class="line"><a id="l00859" name="l00859"></a><span class="lineno">  859</span>    memset(<a class="code hl_variable" href="classNavEKF3.html#a7503cae247bbec2967b4225d77822d82">coreLastTimePrimary_us</a>, 0, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="classNavEKF3.html#a7503cae247bbec2967b4225d77822d82">coreLastTimePrimary_us</a>));</div>
<div class="line"><a id="l00860" name="l00860"></a><span class="lineno">  860</span> </div>
<div class="line"><a id="l00861" name="l00861"></a><span class="lineno">  861</span>    <span class="comment">// zero the structs used capture reset events</span></div>
<div class="line"><a id="l00862" name="l00862"></a><span class="lineno">  862</span>    memset(&amp;<a class="code hl_variable" href="classNavEKF3.html#a2e737c2728f9e9a4ac197496f2b97746">yaw_reset_data</a>, 0, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="classNavEKF3.html#a2e737c2728f9e9a4ac197496f2b97746">yaw_reset_data</a>));</div>
<div class="line"><a id="l00863" name="l00863"></a><span class="lineno">  863</span>    memset((<span class="keywordtype">void</span> *)&amp;<a class="code hl_variable" href="classNavEKF3.html#aa5976f864942fc0e32388caca1121074">pos_reset_data</a>, 0, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="classNavEKF3.html#aa5976f864942fc0e32388caca1121074">pos_reset_data</a>));</div>
<div class="line"><a id="l00864" name="l00864"></a><span class="lineno">  864</span>    memset(&amp;<a class="code hl_variable" href="classNavEKF3.html#a9ca2cda81fb2f1db83f9dca905465a2a">pos_down_reset_data</a>, 0, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="classNavEKF3.html#a9ca2cda81fb2f1db83f9dca905465a2a">pos_down_reset_data</a>));</div>
<div class="line"><a id="l00865" name="l00865"></a><span class="lineno">  865</span> </div>
<div class="line"><a id="l00866" name="l00866"></a><span class="lineno">  866</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l00867" name="l00867"></a><span class="lineno">  867</span>}</div>
</div>
<div class="line"><a id="l00868" name="l00868"></a><span class="lineno">  868</span> </div>
<div class="line"><a id="l00869" name="l00869"></a><span class="lineno">  869</span><span class="comment">/*</span></div>
<div class="line"><a id="l00870" name="l00870"></a><span class="lineno">  870</span><span class="comment">  return true if a new core index has a better score than the current</span></div>
<div class="line"><a id="l00871" name="l00871"></a><span class="lineno">  871</span><span class="comment">  core</span></div>
<div class="line"><a id="l00872" name="l00872"></a><span class="lineno">  872</span><span class="comment"> */</span></div>
<div class="foldopen" id="foldopen00873" data-start="{" data-end="}">
<div class="line"><a id="l00873" name="l00873"></a><span class="lineno"><a class="line" href="classNavEKF3.html#a1cbab8bb4dd6f14121771bfa048c6a0f">  873</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classNavEKF3.html#a1cbab8bb4dd6f14121771bfa048c6a0f">NavEKF3::coreBetterScore</a>(uint8_t new_core, uint8_t current_core)<span class="keyword"> const</span></div>
<div class="line"><a id="l00874" name="l00874"></a><span class="lineno">  874</span><span class="keyword"></span>{</div>
<div class="line"><a id="l00875" name="l00875"></a><span class="lineno">  875</span>    <span class="keyword">const</span> <a class="code hl_class" href="classNavEKF3__core.html">NavEKF3_core</a> &amp;oldCore = <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[current_core];</div>
<div class="line"><a id="l00876" name="l00876"></a><span class="lineno">  876</span>    <span class="keyword">const</span> <a class="code hl_class" href="classNavEKF3__core.html">NavEKF3_core</a> &amp;newCore = <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[new_core];</div>
<div class="line"><a id="l00877" name="l00877"></a><span class="lineno">  877</span>    <span class="keywordflow">if</span> (!newCore.<a class="code hl_function" href="classNavEKF3__core.html#a1084d1fe66f563415bf1f0bc9cd2ca6e">healthy</a>()) {</div>
<div class="line"><a id="l00878" name="l00878"></a><span class="lineno">  878</span>        <span class="comment">// never consider a new core that isn&#39;t healthy</span></div>
<div class="line"><a id="l00879" name="l00879"></a><span class="lineno">  879</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00880" name="l00880"></a><span class="lineno">  880</span>    }</div>
<div class="line"><a id="l00881" name="l00881"></a><span class="lineno">  881</span>    <span class="keywordflow">if</span> (newCore.<a class="code hl_function" href="classNavEKF3__core.html#ae839fe7b5fbec7da01fe063bba905ebb">have_aligned_tilt</a>() != oldCore.<a class="code hl_function" href="classNavEKF3__core.html#ae839fe7b5fbec7da01fe063bba905ebb">have_aligned_tilt</a>()) {</div>
<div class="line"><a id="l00882" name="l00882"></a><span class="lineno">  882</span>        <span class="comment">// tilt alignment is most critical, if one is tilt aligned and</span></div>
<div class="line"><a id="l00883" name="l00883"></a><span class="lineno">  883</span>        <span class="comment">// the other isn&#39;t then use the tilt aligned lane</span></div>
<div class="line"><a id="l00884" name="l00884"></a><span class="lineno">  884</span>        <span class="keywordflow">return</span> newCore.<a class="code hl_function" href="classNavEKF3__core.html#ae839fe7b5fbec7da01fe063bba905ebb">have_aligned_tilt</a>();</div>
<div class="line"><a id="l00885" name="l00885"></a><span class="lineno">  885</span>    }</div>
<div class="line"><a id="l00886" name="l00886"></a><span class="lineno">  886</span>    <span class="keywordflow">if</span> (newCore.<a class="code hl_function" href="classNavEKF3__core.html#a0b2dfa8c5d29f74c757f8075b9945eb7">have_aligned_yaw</a>() != oldCore.<a class="code hl_function" href="classNavEKF3__core.html#a0b2dfa8c5d29f74c757f8075b9945eb7">have_aligned_yaw</a>()) {</div>
<div class="line"><a id="l00887" name="l00887"></a><span class="lineno">  887</span>        <span class="comment">// yaw alignment is next most critical, if one is yaw aligned</span></div>
<div class="line"><a id="l00888" name="l00888"></a><span class="lineno">  888</span>        <span class="comment">// and the other isn&#39;t then use the yaw aligned lane</span></div>
<div class="line"><a id="l00889" name="l00889"></a><span class="lineno">  889</span>        <span class="keywordflow">return</span> newCore.<a class="code hl_function" href="classNavEKF3__core.html#a0b2dfa8c5d29f74c757f8075b9945eb7">have_aligned_yaw</a>();</div>
<div class="line"><a id="l00890" name="l00890"></a><span class="lineno">  890</span>    }</div>
<div class="line"><a id="l00891" name="l00891"></a><span class="lineno">  891</span>    <span class="comment">// if both cores are aligned then look at relative error scores</span></div>
<div class="line"><a id="l00892" name="l00892"></a><span class="lineno">  892</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classNavEKF3.html#ad1243f01f1a8d2aeaabac969549e120f">coreRelativeErrors</a>[new_core] &lt; <a class="code hl_variable" href="classNavEKF3.html#ad1243f01f1a8d2aeaabac969549e120f">coreRelativeErrors</a>[current_core];</div>
<div class="line"><a id="l00893" name="l00893"></a><span class="lineno">  893</span>}</div>
</div>
<div class="line"><a id="l00894" name="l00894"></a><span class="lineno">  894</span> </div>
<div class="line"><a id="l00895" name="l00895"></a><span class="lineno">  895</span><span class="comment">/* </span></div>
<div class="line"><a id="l00896" name="l00896"></a><span class="lineno">  896</span><span class="comment">  Update Filter States - this should be called whenever new IMU data is available</span></div>
<div class="line"><a id="l00897" name="l00897"></a><span class="lineno">  897</span><span class="comment">  Execution speed governed by SCHED_LOOP_RATE</span></div>
<div class="line"><a id="l00898" name="l00898"></a><span class="lineno">  898</span><span class="comment">*/</span></div>
<div class="foldopen" id="foldopen00899" data-start="{" data-end="}">
<div class="line"><a id="l00899" name="l00899"></a><span class="lineno"><a class="line" href="classNavEKF3.html#a477020fcf29376e0c2205dbf79728104">  899</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classNavEKF3.html#a477020fcf29376e0c2205dbf79728104">NavEKF3::UpdateFilter</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l00900" name="l00900"></a><span class="lineno">  900</span>{</div>
<div class="line"><a id="l00901" name="l00901"></a><span class="lineno">  901</span>    <a class="code hl_function" href="namespaceAP.html#a72bac6dee7ddc414f93cbf7cad325f55">AP::dal</a>().<a class="code hl_function" href="classAP__DAL.html#aacd3492110784dce84ac67e3442cfee6">start_frame</a>(<a class="code hl_enumvalue" href="classAP__DAL.html#a122c59f982f0bf61155e70e5975e4938a4f099937c19adcbfb32aabbfb558bbb9">AP_DAL::FrameType::UpdateFilterEKF3</a>);</div>
<div class="line"><a id="l00902" name="l00902"></a><span class="lineno">  902</span> </div>
<div class="line"><a id="l00903" name="l00903"></a><span class="lineno">  903</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>) {</div>
<div class="line"><a id="l00904" name="l00904"></a><span class="lineno">  904</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00905" name="l00905"></a><span class="lineno">  905</span>    }</div>
<div class="line"><a id="l00906" name="l00906"></a><span class="lineno">  906</span> </div>
<div class="line"><a id="l00907" name="l00907"></a><span class="lineno">  907</span>    <a class="code hl_variable" href="classNavEKF3.html#abc8f4be833ed62ad269ae9a2110c3e76">imuSampleTime_us</a> = <a class="code hl_function" href="namespaceAP.html#a72bac6dee7ddc414f93cbf7cad325f55">AP::dal</a>().<a class="code hl_function" href="classAP__DAL.html#af71c3019a210e9d9b42f9ecafec1b6a9">micros64</a>();</div>
<div class="line"><a id="l00908" name="l00908"></a><span class="lineno">  908</span> </div>
<div class="line"><a id="l00909" name="l00909"></a><span class="lineno">  909</span>    <span class="keywordflow">for</span> (uint8_t i=0; i&lt;<a class="code hl_variable" href="classNavEKF3.html#a1146c4b7293610f34b6ecfd7ccc5bbb1">num_cores</a>; i++) {</div>
<div class="line"><a id="l00910" name="l00910"></a><span class="lineno">  910</span>        <span class="comment">// if we have not overrun by more than 3 IMU frames, and we</span></div>
<div class="line"><a id="l00911" name="l00911"></a><span class="lineno">  911</span>        <span class="comment">// have already used more than 1/3 of the CPU budget for this</span></div>
<div class="line"><a id="l00912" name="l00912"></a><span class="lineno">  912</span>        <span class="comment">// loop then suppress the prediction step. This allows</span></div>
<div class="line"><a id="l00913" name="l00913"></a><span class="lineno">  913</span>        <span class="comment">// multiple EKF instances to cooperate on scheduling</span></div>
<div class="line"><a id="l00914" name="l00914"></a><span class="lineno">  914</span>        <span class="keywordtype">bool</span> allow_state_prediction = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00915" name="l00915"></a><span class="lineno">  915</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[i].getFramesSincePredict() &lt; (<a class="code hl_variable" href="classNavEKF3.html#a298b7e8499d3c512475aadeb75c2074a">_framesPerPrediction</a>+3) &amp;&amp;</div>
<div class="line"><a id="l00916" name="l00916"></a><span class="lineno">  916</span>            <a class="code hl_function" href="namespaceAP.html#a72bac6dee7ddc414f93cbf7cad325f55">AP::dal</a>().ekf_low_time_remaining(<a class="code hl_enumvalue" href="classAP__DAL.html#af4f9b2694a134a87d5a6e50f2df9b420a8213dc971b8858fb00d67c41dff0617c">AP_DAL::EKFType::EKF3</a>, i)) {</div>
<div class="line"><a id="l00917" name="l00917"></a><span class="lineno">  917</span>            allow_state_prediction = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00918" name="l00918"></a><span class="lineno">  918</span>        }</div>
<div class="line"><a id="l00919" name="l00919"></a><span class="lineno">  919</span>        <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[i].<a class="code hl_function" href="classNavEKF3__core.html#a2a7fae9e0bf2ce6fc2f9b3918dc168d3">UpdateFilter</a>(allow_state_prediction);</div>
<div class="line"><a id="l00920" name="l00920"></a><span class="lineno">  920</span>    }</div>
<div class="line"><a id="l00921" name="l00921"></a><span class="lineno">  921</span> </div>
<div class="line"><a id="l00922" name="l00922"></a><span class="lineno">  922</span>    <span class="comment">// If the current core selected has a bad error score or is unhealthy, switch to a healthy core with the lowest fault score</span></div>
<div class="line"><a id="l00923" name="l00923"></a><span class="lineno">  923</span>    <span class="comment">// Don&#39;t start running the check until the primary core has started returned healthy for at least 10 seconds to avoid switching</span></div>
<div class="line"><a id="l00924" name="l00924"></a><span class="lineno">  924</span>    <span class="comment">// due to initial alignment fluctuations and race conditions</span></div>
<div class="line"><a id="l00925" name="l00925"></a><span class="lineno">  925</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classNavEKF3.html#ae0b45576371faad6d7e5c021d3053ef9">runCoreSelection</a>) {</div>
<div class="line"><a id="l00926" name="l00926"></a><span class="lineno">  926</span>        <span class="keyword">static</span> uint64_t lastUnhealthyTime_us = 0;</div>
<div class="line"><a id="l00927" name="l00927"></a><span class="lineno">  927</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[<a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>].<a class="code hl_function" href="classNavEKF3.html#a789658732d8d736866067a7871e4c447">healthy</a>() || lastUnhealthyTime_us == 0) {</div>
<div class="line"><a id="l00928" name="l00928"></a><span class="lineno">  928</span>            lastUnhealthyTime_us = <a class="code hl_variable" href="classNavEKF3.html#abc8f4be833ed62ad269ae9a2110c3e76">imuSampleTime_us</a>;</div>
<div class="line"><a id="l00929" name="l00929"></a><span class="lineno">  929</span>        }</div>
<div class="line"><a id="l00930" name="l00930"></a><span class="lineno">  930</span>        <a class="code hl_variable" href="classNavEKF3.html#ae0b45576371faad6d7e5c021d3053ef9">runCoreSelection</a> = (<a class="code hl_variable" href="classNavEKF3.html#abc8f4be833ed62ad269ae9a2110c3e76">imuSampleTime_us</a> - lastUnhealthyTime_us) &gt; 1E7;</div>
<div class="line"><a id="l00931" name="l00931"></a><span class="lineno">  931</span>    }</div>
<div class="line"><a id="l00932" name="l00932"></a><span class="lineno">  932</span> </div>
<div class="line"><a id="l00933" name="l00933"></a><span class="lineno">  933</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> armed  = <a class="code hl_function" href="namespaceAP.html#a72bac6dee7ddc414f93cbf7cad325f55">AP::dal</a>().<a class="code hl_function" href="classAP__DAL.html#ac3234bd198e0f2ab1f21fd34fd3751b8">get_armed</a>();</div>
<div class="line"><a id="l00934" name="l00934"></a><span class="lineno">  934</span> </div>
<div class="line"><a id="l00935" name="l00935"></a><span class="lineno">  935</span>    <span class="comment">// core selection is only available after the vehicle is armed, else forced to lane 0 if its healthy</span></div>
<div class="line"><a id="l00936" name="l00936"></a><span class="lineno">  936</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classNavEKF3.html#ae0b45576371faad6d7e5c021d3053ef9">runCoreSelection</a> &amp;&amp; armed) {</div>
<div class="line"><a id="l00937" name="l00937"></a><span class="lineno">  937</span>        <span class="comment">// update this instance&#39;s error scores for all active cores and get the primary core&#39;s error score</span></div>
<div class="line"><a id="l00938" name="l00938"></a><span class="lineno">  938</span>        <span class="keywordtype">float</span> primaryErrorScore = <a class="code hl_function" href="classNavEKF3.html#accf1f8c7ab44482eb0b032d6e0d2dd95">updateCoreErrorScores</a>();</div>
<div class="line"><a id="l00939" name="l00939"></a><span class="lineno">  939</span> </div>
<div class="line"><a id="l00940" name="l00940"></a><span class="lineno">  940</span>        <span class="comment">// update the accumulated relative error scores for all active cores</span></div>
<div class="line"><a id="l00941" name="l00941"></a><span class="lineno">  941</span>        <a class="code hl_function" href="classNavEKF3.html#a69972010905c46bef11f4c49c3f8996b">updateCoreRelativeErrors</a>();</div>
<div class="line"><a id="l00942" name="l00942"></a><span class="lineno">  942</span> </div>
<div class="line"><a id="l00943" name="l00943"></a><span class="lineno">  943</span>        <span class="keywordtype">bool</span> betterCore = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00944" name="l00944"></a><span class="lineno">  944</span>        <span class="keywordtype">bool</span> altCoreAvailable = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00945" name="l00945"></a><span class="lineno">  945</span>        uint8_t newPrimaryIndex = <a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>;</div>
<div class="line"><a id="l00946" name="l00946"></a><span class="lineno">  946</span> </div>
<div class="line"><a id="l00947" name="l00947"></a><span class="lineno">  947</span>        <span class="comment">// loop through all available cores to find if an alternative core is available</span></div>
<div class="line"><a id="l00948" name="l00948"></a><span class="lineno">  948</span>        <span class="keywordflow">for</span> (uint8_t coreIndex=0; coreIndex&lt;<a class="code hl_variable" href="classNavEKF3.html#a1146c4b7293610f34b6ecfd7ccc5bbb1">num_cores</a>; coreIndex++) {</div>
<div class="line"><a id="l00949" name="l00949"></a><span class="lineno">  949</span>            <span class="keywordflow">if</span> (coreIndex != <a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>) {</div>
<div class="line"><a id="l00950" name="l00950"></a><span class="lineno">  950</span>                <span class="keywordtype">float</span> altCoreError = <a class="code hl_variable" href="classNavEKF3.html#ad1243f01f1a8d2aeaabac969549e120f">coreRelativeErrors</a>[coreIndex];</div>
<div class="line"><a id="l00951" name="l00951"></a><span class="lineno">  951</span> </div>
<div class="line"><a id="l00952" name="l00952"></a><span class="lineno">  952</span>                <span class="comment">// an alternative core is available for selection based on 2 conditions -</span></div>
<div class="line"><a id="l00953" name="l00953"></a><span class="lineno">  953</span>                <span class="comment">// 1. healthy and states have been updated on this time step</span></div>
<div class="line"><a id="l00954" name="l00954"></a><span class="lineno">  954</span>                <span class="comment">// 2. has relative error less than primary core error</span></div>
<div class="line"><a id="l00955" name="l00955"></a><span class="lineno">  955</span>                <span class="comment">// 3. not been the primary core for at least 10 seconds</span></div>
<div class="line"><a id="l00956" name="l00956"></a><span class="lineno">  956</span>                altCoreAvailable = <a class="code hl_function" href="classNavEKF3.html#a1cbab8bb4dd6f14121771bfa048c6a0f">coreBetterScore</a>(coreIndex, newPrimaryIndex) &amp;&amp;</div>
<div class="line"><a id="l00957" name="l00957"></a><span class="lineno">  957</span>                    <a class="code hl_variable" href="classNavEKF3.html#abc8f4be833ed62ad269ae9a2110c3e76">imuSampleTime_us</a> - <a class="code hl_variable" href="classNavEKF3.html#a7503cae247bbec2967b4225d77822d82">coreLastTimePrimary_us</a>[coreIndex] &gt; 1E7;</div>
<div class="line"><a id="l00958" name="l00958"></a><span class="lineno">  958</span> </div>
<div class="line"><a id="l00959" name="l00959"></a><span class="lineno">  959</span>                <span class="keywordflow">if</span> (altCoreAvailable) {</div>
<div class="line"><a id="l00960" name="l00960"></a><span class="lineno">  960</span>                    <span class="comment">// if this core has a significantly lower relative error to the active primary, we consider it as a </span></div>
<div class="line"><a id="l00961" name="l00961"></a><span class="lineno">  961</span>                    <span class="comment">// better core and would like to switch to it even if the current primary is healthy</span></div>
<div class="line"><a id="l00962" name="l00962"></a><span class="lineno">  962</span>                    betterCore = altCoreError &lt;= -<a class="code hl_define" href="AP__NavEKF3_8h.html#ad3676f4407f320e72578cf9beb2fccbb">BETTER_THRESH</a>; <span class="comment">// a better core if its relative error is below a substantial level than the primary&#39;s</span></div>
<div class="line"><a id="l00963" name="l00963"></a><span class="lineno">  963</span>                    <span class="comment">// handle the case where the secondary core is faster to complete yaw alignment which can happen</span></div>
<div class="line"><a id="l00964" name="l00964"></a><span class="lineno">  964</span>                    <span class="comment">// in flight when oeprating without a magnetomer</span></div>
<div class="line"><a id="l00965" name="l00965"></a><span class="lineno">  965</span>                    <span class="keyword">const</span> <a class="code hl_class" href="classNavEKF3__core.html">NavEKF3_core</a> &amp;newCore = <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[coreIndex];</div>
<div class="line"><a id="l00966" name="l00966"></a><span class="lineno">  966</span>                    <span class="keyword">const</span> <a class="code hl_class" href="classNavEKF3__core.html">NavEKF3_core</a> &amp;oldCore = <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[<a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>];</div>
<div class="line"><a id="l00967" name="l00967"></a><span class="lineno">  967</span>                    betterCore |= newCore.<a class="code hl_function" href="classNavEKF3__core.html#a0b2dfa8c5d29f74c757f8075b9945eb7">have_aligned_yaw</a>() &amp;&amp; !oldCore.<a class="code hl_function" href="classNavEKF3__core.html#a0b2dfa8c5d29f74c757f8075b9945eb7">have_aligned_yaw</a>();</div>
<div class="line"><a id="l00968" name="l00968"></a><span class="lineno">  968</span>                    newPrimaryIndex = coreIndex;</div>
<div class="line"><a id="l00969" name="l00969"></a><span class="lineno">  969</span>                }</div>
<div class="line"><a id="l00970" name="l00970"></a><span class="lineno">  970</span>            }</div>
<div class="line"><a id="l00971" name="l00971"></a><span class="lineno">  971</span>        }</div>
<div class="line"><a id="l00972" name="l00972"></a><span class="lineno">  972</span>        altCoreAvailable = newPrimaryIndex != <a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>;</div>
<div class="line"><a id="l00973" name="l00973"></a><span class="lineno">  973</span> </div>
<div class="line"><a id="l00974" name="l00974"></a><span class="lineno">  974</span>        <span class="comment">// Switch cores if another core is available and the active primary core meets one of the following conditions - </span></div>
<div class="line"><a id="l00975" name="l00975"></a><span class="lineno">  975</span>        <span class="comment">// 1. has a bad error score</span></div>
<div class="line"><a id="l00976" name="l00976"></a><span class="lineno">  976</span>        <span class="comment">// 2. is unhealthy</span></div>
<div class="line"><a id="l00977" name="l00977"></a><span class="lineno">  977</span>        <span class="comment">// 3. is healthy, but a better core is available</span></div>
<div class="line"><a id="l00978" name="l00978"></a><span class="lineno">  978</span>        <span class="comment">// also update the yaw and position reset data to capture changes due to the lane switch</span></div>
<div class="line"><a id="l00979" name="l00979"></a><span class="lineno">  979</span>        <span class="keywordflow">if</span> (altCoreAvailable &amp;&amp; (primaryErrorScore &gt; 1.0f || !<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[<a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>].<a class="code hl_function" href="classNavEKF3.html#a789658732d8d736866067a7871e4c447">healthy</a>() || betterCore)) {</div>
<div class="line"><a id="l00980" name="l00980"></a><span class="lineno">  980</span>            <a class="code hl_function" href="classNavEKF3.html#ab670249257282baefc2bafb3d5513995">updateLaneSwitchYawResetData</a>(newPrimaryIndex, <a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>);</div>
<div class="line"><a id="l00981" name="l00981"></a><span class="lineno">  981</span>            <a class="code hl_function" href="classNavEKF3.html#a5271b02c055d6e3ce43fd0c8f945e652">updateLaneSwitchPosResetData</a>(newPrimaryIndex, <a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>);</div>
<div class="line"><a id="l00982" name="l00982"></a><span class="lineno">  982</span>            <a class="code hl_function" href="classNavEKF3.html#a596ddb5682513eba0ca4c608012fa0ee">updateLaneSwitchPosDownResetData</a>(newPrimaryIndex, <a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>);</div>
<div class="line"><a id="l00983" name="l00983"></a><span class="lineno">  983</span>            <a class="code hl_function" href="classNavEKF3.html#afd51ab0da032456d39f8b2b3a9db50c7">resetCoreErrors</a>();</div>
<div class="line"><a id="l00984" name="l00984"></a><span class="lineno">  984</span>            <a class="code hl_variable" href="classNavEKF3.html#a7503cae247bbec2967b4225d77822d82">coreLastTimePrimary_us</a>[<a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>] = <a class="code hl_variable" href="classNavEKF3.html#abc8f4be833ed62ad269ae9a2110c3e76">imuSampleTime_us</a>;</div>
<div class="line"><a id="l00985" name="l00985"></a><span class="lineno">  985</span>            <a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a> = newPrimaryIndex;</div>
<div class="line"><a id="l00986" name="l00986"></a><span class="lineno">  986</span>            <a class="code hl_variable" href="classNavEKF3.html#aea2ab008287dea01634a96a7eac4e107">lastLaneSwitch_ms</a> = <a class="code hl_function" href="namespaceAP.html#a72bac6dee7ddc414f93cbf7cad325f55">AP::dal</a>().<a class="code hl_function" href="classAP__DAL.html#a43fba707a1a197c1cf57d6282a828b9b">millis</a>();</div>
<div class="line"><a id="l00987" name="l00987"></a><span class="lineno">  987</span>            <a class="code hl_define" href="GCS_8h.html#a266bfe8eda675e1092f045e93932b4a6">GCS_SEND_TEXT</a>(MAV_SEVERITY_CRITICAL, <span class="stringliteral">&quot;EKF3 lane switch %u&quot;</span>, <a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>);</div>
<div class="line"><a id="l00988" name="l00988"></a><span class="lineno">  988</span>        }       </div>
<div class="line"><a id="l00989" name="l00989"></a><span class="lineno">  989</span>    }</div>
<div class="line"><a id="l00990" name="l00990"></a><span class="lineno">  990</span> </div>
<div class="line"><a id="l00991" name="l00991"></a><span class="lineno">  991</span>    <span class="keyword">const</span> uint8_t user_primary = uint8_t(<a class="code hl_variable" href="classNavEKF3.html#a6df1d265b67a07f0cd79b001624729ba">_primary_core</a>) &lt; <a class="code hl_variable" href="classNavEKF3.html#a1146c4b7293610f34b6ecfd7ccc5bbb1">num_cores</a>? <a class="code hl_variable" href="classNavEKF3.html#a6df1d265b67a07f0cd79b001624729ba">_primary_core</a> : 0;</div>
<div class="line"><a id="l00992" name="l00992"></a><span class="lineno">  992</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a> != user_primary &amp;&amp; <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[user_primary].<a class="code hl_function" href="classNavEKF3.html#a789658732d8d736866067a7871e4c447">healthy</a>() &amp;&amp; !armed) {</div>
<div class="line"><a id="l00993" name="l00993"></a><span class="lineno">  993</span>        <span class="comment">// when on the ground and disarmed force the selected primary</span></div>
<div class="line"><a id="l00994" name="l00994"></a><span class="lineno">  994</span>        <span class="comment">// core. This avoids us ending with with a lottery for which</span></div>
<div class="line"><a id="l00995" name="l00995"></a><span class="lineno">  995</span>        <span class="comment">// IMU is used in each flight. Otherwise the alignment of the</span></div>
<div class="line"><a id="l00996" name="l00996"></a><span class="lineno">  996</span>        <span class="comment">// timing of the core selection updates with the timing of GPS</span></div>
<div class="line"><a id="l00997" name="l00997"></a><span class="lineno">  997</span>        <span class="comment">// updates can lead to a core other than the first one being</span></div>
<div class="line"><a id="l00998" name="l00998"></a><span class="lineno">  998</span>        <span class="comment">// used as primary for some flights. As different IMUs may</span></div>
<div class="line"><a id="l00999" name="l00999"></a><span class="lineno">  999</span>        <span class="comment">// have quite different noise characteristics this leads to</span></div>
<div class="line"><a id="l01000" name="l01000"></a><span class="lineno"> 1000</span>        <span class="comment">// inconsistent performance</span></div>
<div class="line"><a id="l01001" name="l01001"></a><span class="lineno"> 1001</span>        <a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a> = user_primary;</div>
<div class="line"><a id="l01002" name="l01002"></a><span class="lineno"> 1002</span>    }</div>
<div class="line"><a id="l01003" name="l01003"></a><span class="lineno"> 1003</span> </div>
<div class="line"><a id="l01004" name="l01004"></a><span class="lineno"> 1004</span>    <span class="comment">// align position of inactive sources to ahrs</span></div>
<div class="line"><a id="l01005" name="l01005"></a><span class="lineno"> 1005</span>    <a class="code hl_variable" href="classNavEKF3.html#aaae77db7a65077fa51e3bbb89b9e8b18">sources</a>.<a class="code hl_function" href="classAP__NavEKF__Source.html#a17d5e8c0aef9358cb583818843738a9a">align_inactive_sources</a>();</div>
<div class="line"><a id="l01006" name="l01006"></a><span class="lineno"> 1006</span>}</div>
</div>
<div class="line"><a id="l01007" name="l01007"></a><span class="lineno"> 1007</span> </div>
<div class="line"><a id="l01008" name="l01008"></a><span class="lineno"> 1008</span><span class="comment">/*</span></div>
<div class="line"><a id="l01009" name="l01009"></a><span class="lineno"> 1009</span><span class="comment">  check if switching lanes will reduce the normalised</span></div>
<div class="line"><a id="l01010" name="l01010"></a><span class="lineno"> 1010</span><span class="comment">  innovations. This is called when the vehicle code is about to</span></div>
<div class="line"><a id="l01011" name="l01011"></a><span class="lineno"> 1011</span><span class="comment">  trigger an EKF failsafe, and it would like to avoid that by</span></div>
<div class="line"><a id="l01012" name="l01012"></a><span class="lineno"> 1012</span><span class="comment">  using a different EKF lane</span></div>
<div class="line"><a id="l01013" name="l01013"></a><span class="lineno"> 1013</span><span class="comment">*/</span></div>
<div class="foldopen" id="foldopen01014" data-start="{" data-end="}">
<div class="line"><a id="l01014" name="l01014"></a><span class="lineno"><a class="line" href="classNavEKF3.html#a3d065ec0f57eb7e0d25d6c31c743c5ff"> 1014</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classNavEKF3.html#a3d065ec0f57eb7e0d25d6c31c743c5ff">NavEKF3::checkLaneSwitch</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l01015" name="l01015"></a><span class="lineno"> 1015</span>{</div>
<div class="line"><a id="l01016" name="l01016"></a><span class="lineno"> 1016</span>    <a class="code hl_function" href="namespaceAP.html#a72bac6dee7ddc414f93cbf7cad325f55">AP::dal</a>().<a class="code hl_function" href="classAP__DAL.html#aa41c9b00116bc5c6efc7eb3c6b915ed3">log_event3</a>(<a class="code hl_enumvalue" href="classAP__DAL.html#a30e37092f6f4f89e6f6fc1824737b2aeab374ab0e06d0494a97acd4457271203b">AP_DAL::Event::checkLaneSwitch</a>);</div>
<div class="line"><a id="l01017" name="l01017"></a><span class="lineno"> 1017</span> </div>
<div class="line"><a id="l01018" name="l01018"></a><span class="lineno"> 1018</span>    uint32_t now = <a class="code hl_function" href="namespaceAP.html#a72bac6dee7ddc414f93cbf7cad325f55">AP::dal</a>().<a class="code hl_function" href="classAP__DAL.html#a43fba707a1a197c1cf57d6282a828b9b">millis</a>();</div>
<div class="line"><a id="l01019" name="l01019"></a><span class="lineno"> 1019</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classNavEKF3.html#aea2ab008287dea01634a96a7eac4e107">lastLaneSwitch_ms</a> != 0 &amp;&amp; now - <a class="code hl_variable" href="classNavEKF3.html#aea2ab008287dea01634a96a7eac4e107">lastLaneSwitch_ms</a> &lt; 5000) {</div>
<div class="line"><a id="l01020" name="l01020"></a><span class="lineno"> 1020</span>        <span class="comment">// don&#39;t switch twice in 5 seconds</span></div>
<div class="line"><a id="l01021" name="l01021"></a><span class="lineno"> 1021</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01022" name="l01022"></a><span class="lineno"> 1022</span>    }</div>
<div class="line"><a id="l01023" name="l01023"></a><span class="lineno"> 1023</span> </div>
<div class="line"><a id="l01024" name="l01024"></a><span class="lineno"> 1024</span>    <span class="keywordtype">float</span> primaryErrorScore = <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[<a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>].<a class="code hl_function" href="classNavEKF3__core.html#a7fcb0ee81e8b10edfcb4ee7fc39a7bbd">errorScore</a>();</div>
<div class="line"><a id="l01025" name="l01025"></a><span class="lineno"> 1025</span>    <span class="keywordtype">float</span> lowestErrorScore = primaryErrorScore;</div>
<div class="line"><a id="l01026" name="l01026"></a><span class="lineno"> 1026</span>    uint8_t newPrimaryIndex = <a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>;</div>
<div class="line"><a id="l01027" name="l01027"></a><span class="lineno"> 1027</span>    <span class="keywordflow">for</span> (uint8_t coreIndex=0; coreIndex&lt;<a class="code hl_variable" href="classNavEKF3.html#a1146c4b7293610f34b6ecfd7ccc5bbb1">num_cores</a>; coreIndex++) {</div>
<div class="line"><a id="l01028" name="l01028"></a><span class="lineno"> 1028</span>        <span class="keywordflow">if</span> (coreIndex != <a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>) {</div>
<div class="line"><a id="l01029" name="l01029"></a><span class="lineno"> 1029</span>            <span class="keyword">const</span> <a class="code hl_class" href="classNavEKF3__core.html">NavEKF3_core</a> &amp;newCore = <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[coreIndex];</div>
<div class="line"><a id="l01030" name="l01030"></a><span class="lineno"> 1030</span>            <span class="comment">// an alternative core is available for selection only if healthy and if states have been updated on this time step</span></div>
<div class="line"><a id="l01031" name="l01031"></a><span class="lineno"> 1031</span>            <span class="keywordtype">bool</span> altCoreAvailable = newCore.<a class="code hl_function" href="classNavEKF3__core.html#a1084d1fe66f563415bf1f0bc9cd2ca6e">healthy</a>() &amp;&amp; newCore.<a class="code hl_function" href="classNavEKF3__core.html#a0b2dfa8c5d29f74c757f8075b9945eb7">have_aligned_yaw</a>() &amp;&amp; newCore.<a class="code hl_function" href="classNavEKF3__core.html#ae839fe7b5fbec7da01fe063bba905ebb">have_aligned_tilt</a>();</div>
<div class="line"><a id="l01032" name="l01032"></a><span class="lineno"> 1032</span>            <span class="keywordtype">float</span> altErrorScore = newCore.<a class="code hl_function" href="classNavEKF3__core.html#a7fcb0ee81e8b10edfcb4ee7fc39a7bbd">errorScore</a>();</div>
<div class="line"><a id="l01033" name="l01033"></a><span class="lineno"> 1033</span>            <span class="keywordflow">if</span> (altCoreAvailable &amp;&amp; altErrorScore &lt; lowestErrorScore &amp;&amp; altErrorScore &lt; 0.9) {</div>
<div class="line"><a id="l01034" name="l01034"></a><span class="lineno"> 1034</span>                newPrimaryIndex = coreIndex;</div>
<div class="line"><a id="l01035" name="l01035"></a><span class="lineno"> 1035</span>                lowestErrorScore = altErrorScore;</div>
<div class="line"><a id="l01036" name="l01036"></a><span class="lineno"> 1036</span>            }</div>
<div class="line"><a id="l01037" name="l01037"></a><span class="lineno"> 1037</span>        }</div>
<div class="line"><a id="l01038" name="l01038"></a><span class="lineno"> 1038</span>    }</div>
<div class="line"><a id="l01039" name="l01039"></a><span class="lineno"> 1039</span> </div>
<div class="line"><a id="l01040" name="l01040"></a><span class="lineno"> 1040</span>    <span class="comment">// update the yaw and position reset data to capture changes due to the lane switch</span></div>
<div class="line"><a id="l01041" name="l01041"></a><span class="lineno"> 1041</span>    <span class="keywordflow">if</span> (newPrimaryIndex != <a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>) {</div>
<div class="line"><a id="l01042" name="l01042"></a><span class="lineno"> 1042</span>        <a class="code hl_function" href="classNavEKF3.html#ab670249257282baefc2bafb3d5513995">updateLaneSwitchYawResetData</a>(newPrimaryIndex, <a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>);</div>
<div class="line"><a id="l01043" name="l01043"></a><span class="lineno"> 1043</span>        <a class="code hl_function" href="classNavEKF3.html#a5271b02c055d6e3ce43fd0c8f945e652">updateLaneSwitchPosResetData</a>(newPrimaryIndex, <a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>);</div>
<div class="line"><a id="l01044" name="l01044"></a><span class="lineno"> 1044</span>        <a class="code hl_function" href="classNavEKF3.html#a596ddb5682513eba0ca4c608012fa0ee">updateLaneSwitchPosDownResetData</a>(newPrimaryIndex, <a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>);</div>
<div class="line"><a id="l01045" name="l01045"></a><span class="lineno"> 1045</span>        <a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a> = newPrimaryIndex;</div>
<div class="line"><a id="l01046" name="l01046"></a><span class="lineno"> 1046</span>        <a class="code hl_variable" href="classNavEKF3.html#aea2ab008287dea01634a96a7eac4e107">lastLaneSwitch_ms</a> = now;</div>
<div class="line"><a id="l01047" name="l01047"></a><span class="lineno"> 1047</span>        <a class="code hl_define" href="GCS_8h.html#a266bfe8eda675e1092f045e93932b4a6">GCS_SEND_TEXT</a>(MAV_SEVERITY_CRITICAL, <span class="stringliteral">&quot;EKF3 lane switch %u&quot;</span>, <a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>);</div>
<div class="line"><a id="l01048" name="l01048"></a><span class="lineno"> 1048</span>    }</div>
<div class="line"><a id="l01049" name="l01049"></a><span class="lineno"> 1049</span>}</div>
</div>
<div class="line"><a id="l01050" name="l01050"></a><span class="lineno"> 1050</span> </div>
<div class="foldopen" id="foldopen01051" data-start="{" data-end="}">
<div class="line"><a id="l01051" name="l01051"></a><span class="lineno"><a class="line" href="classNavEKF3.html#a16ae950c9e6b7c057a57cf6a2f0dd21c"> 1051</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classNavEKF3.html#a16ae950c9e6b7c057a57cf6a2f0dd21c">NavEKF3::requestYawReset</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l01052" name="l01052"></a><span class="lineno"> 1052</span>{</div>
<div class="line"><a id="l01053" name="l01053"></a><span class="lineno"> 1053</span>    <a class="code hl_function" href="namespaceAP.html#a72bac6dee7ddc414f93cbf7cad325f55">AP::dal</a>().<a class="code hl_function" href="classAP__DAL.html#aa41c9b00116bc5c6efc7eb3c6b915ed3">log_event3</a>(<a class="code hl_enumvalue" href="classAP__DAL.html#a30e37092f6f4f89e6f6fc1824737b2aeab7578cc46457a891fbbad868e3c05e90">AP_DAL::Event::requestYawReset</a>);</div>
<div class="line"><a id="l01054" name="l01054"></a><span class="lineno"> 1054</span> </div>
<div class="line"><a id="l01055" name="l01055"></a><span class="lineno"> 1055</span>    <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; <a class="code hl_variable" href="classNavEKF3.html#a1146c4b7293610f34b6ecfd7ccc5bbb1">num_cores</a>; i++) {</div>
<div class="line"><a id="l01056" name="l01056"></a><span class="lineno"> 1056</span>        <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[i].<a class="code hl_function" href="classNavEKF3__core.html#af731b830636f1740f0f7f85e23fb7400">EKFGSF_requestYawReset</a>();</div>
<div class="line"><a id="l01057" name="l01057"></a><span class="lineno"> 1057</span>    }</div>
<div class="line"><a id="l01058" name="l01058"></a><span class="lineno"> 1058</span>}</div>
</div>
<div class="line"><a id="l01059" name="l01059"></a><span class="lineno"> 1059</span> </div>
<div class="line"><a id="l01060" name="l01060"></a><span class="lineno"> 1060</span><span class="comment">/*</span></div>
<div class="line"><a id="l01061" name="l01061"></a><span class="lineno"> 1061</span><span class="comment">  Update this instance error score value for all active cores</span></div>
<div class="line"><a id="l01062" name="l01062"></a><span class="lineno"> 1062</span><span class="comment">*/</span></div>
<div class="foldopen" id="foldopen01063" data-start="{" data-end="}">
<div class="line"><a id="l01063" name="l01063"></a><span class="lineno"><a class="line" href="classNavEKF3.html#accf1f8c7ab44482eb0b032d6e0d2dd95"> 1063</a></span><span class="keywordtype">float</span> <a class="code hl_function" href="classNavEKF3.html#accf1f8c7ab44482eb0b032d6e0d2dd95">NavEKF3::updateCoreErrorScores</a>()</div>
<div class="line"><a id="l01064" name="l01064"></a><span class="lineno"> 1064</span>{</div>
<div class="line"><a id="l01065" name="l01065"></a><span class="lineno"> 1065</span>    <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; <a class="code hl_variable" href="classNavEKF3.html#a1146c4b7293610f34b6ecfd7ccc5bbb1">num_cores</a>; i++) {</div>
<div class="line"><a id="l01066" name="l01066"></a><span class="lineno"> 1066</span>        <a class="code hl_variable" href="classNavEKF3.html#a1336a87bbc3e1dba9eaf335309f1380f">coreErrorScores</a>[i] = <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[i].<a class="code hl_function" href="classNavEKF3__core.html#a7fcb0ee81e8b10edfcb4ee7fc39a7bbd">errorScore</a>();</div>
<div class="line"><a id="l01067" name="l01067"></a><span class="lineno"> 1067</span>    }</div>
<div class="line"><a id="l01068" name="l01068"></a><span class="lineno"> 1068</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classNavEKF3.html#a1336a87bbc3e1dba9eaf335309f1380f">coreErrorScores</a>[<a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>];</div>
<div class="line"><a id="l01069" name="l01069"></a><span class="lineno"> 1069</span>}</div>
</div>
<div class="line"><a id="l01070" name="l01070"></a><span class="lineno"> 1070</span> </div>
<div class="line"><a id="l01071" name="l01071"></a><span class="lineno"> 1071</span><span class="comment">/*</span></div>
<div class="line"><a id="l01072" name="l01072"></a><span class="lineno"> 1072</span><span class="comment">  Update the relative error for all alternate available cores with respect to primary core&#39;s error.</span></div>
<div class="line"><a id="l01073" name="l01073"></a><span class="lineno"> 1073</span><span class="comment">  A positive relative error for a core means it has been more erroneous than the existing primary.</span></div>
<div class="line"><a id="l01074" name="l01074"></a><span class="lineno"> 1074</span><span class="comment">  A negative relative error indicates a core which can be switched to.</span></div>
<div class="line"><a id="l01075" name="l01075"></a><span class="lineno"> 1075</span><span class="comment">*/</span></div>
<div class="foldopen" id="foldopen01076" data-start="{" data-end="}">
<div class="line"><a id="l01076" name="l01076"></a><span class="lineno"><a class="line" href="classNavEKF3.html#a69972010905c46bef11f4c49c3f8996b"> 1076</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classNavEKF3.html#a69972010905c46bef11f4c49c3f8996b">NavEKF3::updateCoreRelativeErrors</a>()</div>
<div class="line"><a id="l01077" name="l01077"></a><span class="lineno"> 1077</span>{</div>
<div class="line"><a id="l01078" name="l01078"></a><span class="lineno"> 1078</span>    <span class="keywordtype">float</span> <a class="code hl_define" href="AP__ADC__ADS1115_8cpp.html#aa72707fcb3d070ae7967b9a9e6b58013">error</a> = 0;</div>
<div class="line"><a id="l01079" name="l01079"></a><span class="lineno"> 1079</span>    <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; <a class="code hl_variable" href="classNavEKF3.html#a1146c4b7293610f34b6ecfd7ccc5bbb1">num_cores</a>; i++) {</div>
<div class="line"><a id="l01080" name="l01080"></a><span class="lineno"> 1080</span>        <span class="keywordflow">if</span> (i != <a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>) {</div>
<div class="line"><a id="l01081" name="l01081"></a><span class="lineno"> 1081</span>            <a class="code hl_define" href="AP__ADC__ADS1115_8cpp.html#aa72707fcb3d070ae7967b9a9e6b58013">error</a> = <a class="code hl_variable" href="classNavEKF3.html#a1336a87bbc3e1dba9eaf335309f1380f">coreErrorScores</a>[i] - <a class="code hl_variable" href="classNavEKF3.html#a1336a87bbc3e1dba9eaf335309f1380f">coreErrorScores</a>[<a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>];</div>
<div class="line"><a id="l01082" name="l01082"></a><span class="lineno"> 1082</span>            <span class="comment">// reduce error for a core only if its better than the primary lane by at least the Relative Error Threshold, this should prevent unnecessary lane changes</span></div>
<div class="line"><a id="l01083" name="l01083"></a><span class="lineno"> 1083</span>            <span class="keywordflow">if</span> (<a class="code hl_define" href="AP__ADC__ADS1115_8cpp.html#aa72707fcb3d070ae7967b9a9e6b58013">error</a> &gt; 0 || <a class="code hl_define" href="AP__ADC__ADS1115_8cpp.html#aa72707fcb3d070ae7967b9a9e6b58013">error</a> &lt; -<a class="code hl_define" href="monocypher_8cpp.html#afa99ec4acc4ecb2dc3c2d05da15d0e3f">MAX</a>(<a class="code hl_variable" href="classNavEKF3.html#a53c2c82c783a57f738f29fadc3e826ae">_err_thresh</a>, 0.05)) {</div>
<div class="line"><a id="l01084" name="l01084"></a><span class="lineno"> 1084</span>                <a class="code hl_variable" href="classNavEKF3.html#ad1243f01f1a8d2aeaabac969549e120f">coreRelativeErrors</a>[i] += <a class="code hl_define" href="AP__ADC__ADS1115_8cpp.html#aa72707fcb3d070ae7967b9a9e6b58013">error</a>;</div>
<div class="line"><a id="l01085" name="l01085"></a><span class="lineno"> 1085</span>                <a class="code hl_variable" href="classNavEKF3.html#ad1243f01f1a8d2aeaabac969549e120f">coreRelativeErrors</a>[i] = <a class="code hl_define" href="AP__Math_8h.html#a7d4a1971dc48d4139da598676c19a993">constrain_ftype</a>(<a class="code hl_variable" href="classNavEKF3.html#ad1243f01f1a8d2aeaabac969549e120f">coreRelativeErrors</a>[i], -<a class="code hl_define" href="AP__NavEKF3_8h.html#a47a55ec8fd8da907204074b432e18efc">CORE_ERR_LIM</a>, <a class="code hl_define" href="AP__NavEKF3_8h.html#a47a55ec8fd8da907204074b432e18efc">CORE_ERR_LIM</a>);</div>
<div class="line"><a id="l01086" name="l01086"></a><span class="lineno"> 1086</span>            }</div>
<div class="line"><a id="l01087" name="l01087"></a><span class="lineno"> 1087</span>        }</div>
<div class="line"><a id="l01088" name="l01088"></a><span class="lineno"> 1088</span>    }</div>
<div class="line"><a id="l01089" name="l01089"></a><span class="lineno"> 1089</span>}</div>
</div>
<div class="line"><a id="l01090" name="l01090"></a><span class="lineno"> 1090</span> </div>
<div class="line"><a id="l01091" name="l01091"></a><span class="lineno"> 1091</span><span class="comment">// Reset the relative error values</span></div>
<div class="foldopen" id="foldopen01092" data-start="{" data-end="}">
<div class="line"><a id="l01092" name="l01092"></a><span class="lineno"><a class="line" href="classNavEKF3.html#afd51ab0da032456d39f8b2b3a9db50c7"> 1092</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classNavEKF3.html#afd51ab0da032456d39f8b2b3a9db50c7">NavEKF3::resetCoreErrors</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l01093" name="l01093"></a><span class="lineno"> 1093</span>{</div>
<div class="line"><a id="l01094" name="l01094"></a><span class="lineno"> 1094</span>    <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; <a class="code hl_variable" href="classNavEKF3.html#a1146c4b7293610f34b6ecfd7ccc5bbb1">num_cores</a>; i++) {</div>
<div class="line"><a id="l01095" name="l01095"></a><span class="lineno"> 1095</span>        <a class="code hl_variable" href="classNavEKF3.html#ad1243f01f1a8d2aeaabac969549e120f">coreRelativeErrors</a>[i] = 0;</div>
<div class="line"><a id="l01096" name="l01096"></a><span class="lineno"> 1096</span>    }</div>
<div class="line"><a id="l01097" name="l01097"></a><span class="lineno"> 1097</span>}</div>
</div>
<div class="line"><a id="l01098" name="l01098"></a><span class="lineno"> 1098</span> </div>
<div class="line"><a id="l01099" name="l01099"></a><span class="lineno"> 1099</span><span class="comment">// set position, velocity and yaw sources to either 0=primary, 1=secondary, 2=tertiary</span></div>
<div class="foldopen" id="foldopen01100" data-start="{" data-end="}">
<div class="line"><a id="l01100" name="l01100"></a><span class="lineno"><a class="line" href="classNavEKF3.html#a4a84c368db652543a845f3972eaf4752"> 1100</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classNavEKF3.html#a4a84c368db652543a845f3972eaf4752">NavEKF3::setPosVelYawSourceSet</a>(uint8_t source_set_idx)</div>
<div class="line"><a id="l01101" name="l01101"></a><span class="lineno"> 1101</span>{</div>
<div class="line"><a id="l01102" name="l01102"></a><span class="lineno"> 1102</span>    <span class="keywordflow">if</span> (source_set_idx &lt; <a class="code hl_define" href="AP__NavEKF__Source_8h.html#a8274920defeb096990d5329472f6915b">AP_NAKEKF_SOURCE_SET_MAX</a>) {</div>
<div class="line"><a id="l01103" name="l01103"></a><span class="lineno"> 1103</span>        <a class="code hl_function" href="namespaceAP.html#a72bac6dee7ddc414f93cbf7cad325f55">AP::dal</a>().<a class="code hl_function" href="classAP__DAL.html#aa41c9b00116bc5c6efc7eb3c6b915ed3">log_event3</a>(<a class="code hl_enumeration" href="classAP__DAL.html#a30e37092f6f4f89e6f6fc1824737b2ae">AP_DAL::Event</a>(uint8_t(<a class="code hl_enumvalue" href="classAP__DAL.html#a30e37092f6f4f89e6f6fc1824737b2aea8ee26806b5c45099cbdabaf500f15271">AP_DAL::Event::setSourceSet0</a>)+source_set_idx));</div>
<div class="line"><a id="l01104" name="l01104"></a><span class="lineno"> 1104</span>    }</div>
<div class="line"><a id="l01105" name="l01105"></a><span class="lineno"> 1105</span>    <a class="code hl_variable" href="classNavEKF3.html#aaae77db7a65077fa51e3bbb89b9e8b18">sources</a>.<a class="code hl_function" href="classAP__NavEKF__Source.html#a1fd577b10a24b01faba472f17c7b3105">setPosVelYawSourceSet</a>(source_set_idx);</div>
<div class="line"><a id="l01106" name="l01106"></a><span class="lineno"> 1106</span>}</div>
</div>
<div class="line"><a id="l01107" name="l01107"></a><span class="lineno"> 1107</span> </div>
<div class="line"><a id="l01108" name="l01108"></a><span class="lineno"> 1108</span><span class="comment">// Check basic filter health metrics and return a consolidated health status</span></div>
<div class="foldopen" id="foldopen01109" data-start="{" data-end="}">
<div class="line"><a id="l01109" name="l01109"></a><span class="lineno"><a class="line" href="classNavEKF3.html#a789658732d8d736866067a7871e4c447"> 1109</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classNavEKF3.html#a789658732d8d736866067a7871e4c447">NavEKF3::healthy</a>(<span class="keywordtype">void</span>)<span class="keyword"> const</span></div>
<div class="line"><a id="l01110" name="l01110"></a><span class="lineno"> 1110</span><span class="keyword"></span>{</div>
<div class="line"><a id="l01111" name="l01111"></a><span class="lineno"> 1111</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>) {</div>
<div class="line"><a id="l01112" name="l01112"></a><span class="lineno"> 1112</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01113" name="l01113"></a><span class="lineno"> 1113</span>    }</div>
<div class="line"><a id="l01114" name="l01114"></a><span class="lineno"> 1114</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[<a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>].<a class="code hl_function" href="classNavEKF3__core.html#a1084d1fe66f563415bf1f0bc9cd2ca6e">healthy</a>();</div>
<div class="line"><a id="l01115" name="l01115"></a><span class="lineno"> 1115</span>}</div>
</div>
<div class="line"><a id="l01116" name="l01116"></a><span class="lineno"> 1116</span> </div>
<div class="line"><a id="l01117" name="l01117"></a><span class="lineno"> 1117</span><span class="comment">// returns false if we fail arming checks, in which case the buffer will be populated with a failure message</span></div>
<div class="line"><a id="l01118" name="l01118"></a><span class="lineno"> 1118</span><span class="comment">// requires_position should be true if horizontal position configuration should be checked</span></div>
<div class="foldopen" id="foldopen01119" data-start="{" data-end="}">
<div class="line"><a id="l01119" name="l01119"></a><span class="lineno"><a class="line" href="classNavEKF3.html#abced70b86b5e3d10e12e8aaeb9e00a77"> 1119</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classNavEKF3.html#abced70b86b5e3d10e12e8aaeb9e00a77">NavEKF3::pre_arm_check</a>(<span class="keywordtype">bool</span> requires_position, <span class="keywordtype">char</span> *failure_msg, uint8_t failure_msg_len)<span class="keyword"> const</span></div>
<div class="line"><a id="l01120" name="l01120"></a><span class="lineno"> 1120</span><span class="keyword"></span>{</div>
<div class="line"><a id="l01121" name="l01121"></a><span class="lineno"> 1121</span>    <span class="comment">// check source configuration</span></div>
<div class="line"><a id="l01122" name="l01122"></a><span class="lineno"> 1122</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classNavEKF3.html#aaae77db7a65077fa51e3bbb89b9e8b18">sources</a>.<a class="code hl_function" href="classAP__NavEKF__Source.html#a4110475fe909979cc621b5c9ae35ac50">pre_arm_check</a>(requires_position, failure_msg, failure_msg_len)) {</div>
<div class="line"><a id="l01123" name="l01123"></a><span class="lineno"> 1123</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01124" name="l01124"></a><span class="lineno"> 1124</span>    }</div>
<div class="line"><a id="l01125" name="l01125"></a><span class="lineno"> 1125</span> </div>
<div class="line"><a id="l01126" name="l01126"></a><span class="lineno"> 1126</span>    <span class="comment">// check if using compass (i.e. EK3_SRCn_YAW) with deprecated MAG_CAL values (5 was EXTERNAL_YAW, 6 was EXTERNAL_YAW_FALLBACK)</span></div>
<div class="line"><a id="l01127" name="l01127"></a><span class="lineno"> 1127</span>    <span class="keyword">const</span> int8_t magCalParamVal = <a class="code hl_variable" href="classNavEKF3.html#aba7c7886dff66142d6eed35e79fca904">_magCal</a>.get();</div>
<div class="line"><a id="l01128" name="l01128"></a><span class="lineno"> 1128</span>    <span class="keyword">const</span> <a class="code hl_enumeration" href="classAP__NavEKF__Source.html#ac1dcc7cc9e9827ba974eeaeccdaa96bd">AP_NavEKF_Source::SourceYaw</a> yaw_source = <a class="code hl_variable" href="classNavEKF3.html#aaae77db7a65077fa51e3bbb89b9e8b18">sources</a>.<a class="code hl_function" href="classAP__NavEKF__Source.html#a8effcb0802778fc240f30d949ae2a4a1">getYawSource</a>();</div>
<div class="line"><a id="l01129" name="l01129"></a><span class="lineno"> 1129</span>    <span class="keywordflow">if</span> (((magCalParamVal == 5) || (magCalParamVal == 6)) &amp;&amp; (yaw_source != <a class="code hl_enumvalue" href="classAP__NavEKF__Source.html#ac1dcc7cc9e9827ba974eeaeccdaa96bda8c578de37278ada488d763ea86c5cf20">AP_NavEKF_Source::SourceYaw::GPS</a>)) {</div>
<div class="line"><a id="l01130" name="l01130"></a><span class="lineno"> 1130</span>        <span class="comment">// yaw source is configured to use compass but MAG_CAL valid is deprecated</span></div>
<div class="line"><a id="l01131" name="l01131"></a><span class="lineno"> 1131</span>        <a class="code hl_function" href="namespaceAP.html#a72bac6dee7ddc414f93cbf7cad325f55">AP::dal</a>().<a class="code hl_function" href="classAP__DAL.html#a379ec175c98b831e31835e9c524f160c">snprintf</a>(failure_msg, failure_msg_len, <span class="stringliteral">&quot;EK3_MAG_CAL and EK3_SRC1_YAW inconsistent&quot;</span>);</div>
<div class="line"><a id="l01132" name="l01132"></a><span class="lineno"> 1132</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01133" name="l01133"></a><span class="lineno"> 1133</span>    }</div>
<div class="line"><a id="l01134" name="l01134"></a><span class="lineno"> 1134</span> </div>
<div class="line"><a id="l01135" name="l01135"></a><span class="lineno"> 1135</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>) {</div>
<div class="line"><a id="l01136" name="l01136"></a><span class="lineno"> 1136</span>        <a class="code hl_function" href="namespaceAP.html#a72bac6dee7ddc414f93cbf7cad325f55">AP::dal</a>().<a class="code hl_function" href="classAP__DAL.html#a379ec175c98b831e31835e9c524f160c">snprintf</a>(failure_msg, failure_msg_len, <span class="stringliteral">&quot;no EKF3 cores&quot;</span>);</div>
<div class="line"><a id="l01137" name="l01137"></a><span class="lineno"> 1137</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01138" name="l01138"></a><span class="lineno"> 1138</span>    }</div>
<div class="line"><a id="l01139" name="l01139"></a><span class="lineno"> 1139</span>    <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; <a class="code hl_variable" href="classNavEKF3.html#a1146c4b7293610f34b6ecfd7ccc5bbb1">num_cores</a>; i++) {</div>
<div class="line"><a id="l01140" name="l01140"></a><span class="lineno"> 1140</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[i].<a class="code hl_function" href="classNavEKF3.html#a789658732d8d736866067a7871e4c447">healthy</a>()) {</div>
<div class="line"><a id="l01141" name="l01141"></a><span class="lineno"> 1141</span>            <span class="keyword">const</span> <span class="keywordtype">char</span> *failure = <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[i].<a class="code hl_function" href="classNavEKF3__core.html#aae08c43b03a3b37ea48df1fbbc989cfc">prearm_failure_reason</a>();</div>
<div class="line"><a id="l01142" name="l01142"></a><span class="lineno"> 1142</span>            <span class="keywordflow">if</span> (failure != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a id="l01143" name="l01143"></a><span class="lineno"> 1143</span>                <a class="code hl_function" href="namespaceAP.html#a72bac6dee7ddc414f93cbf7cad325f55">AP::dal</a>().<a class="code hl_function" href="classAP__DAL.html#a379ec175c98b831e31835e9c524f160c">snprintf</a>(failure_msg, failure_msg_len, failure);</div>
<div class="line"><a id="l01144" name="l01144"></a><span class="lineno"> 1144</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01145" name="l01145"></a><span class="lineno"> 1145</span>                <a class="code hl_function" href="namespaceAP.html#a72bac6dee7ddc414f93cbf7cad325f55">AP::dal</a>().<a class="code hl_function" href="classAP__DAL.html#a379ec175c98b831e31835e9c524f160c">snprintf</a>(failure_msg, failure_msg_len, <span class="stringliteral">&quot;EKF3 core %d unhealthy&quot;</span>, (<span class="keywordtype">int</span>)i);</div>
<div class="line"><a id="l01146" name="l01146"></a><span class="lineno"> 1146</span>            }</div>
<div class="line"><a id="l01147" name="l01147"></a><span class="lineno"> 1147</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01148" name="l01148"></a><span class="lineno"> 1148</span>        }</div>
<div class="line"><a id="l01149" name="l01149"></a><span class="lineno"> 1149</span>    }</div>
<div class="line"><a id="l01150" name="l01150"></a><span class="lineno"> 1150</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01151" name="l01151"></a><span class="lineno"> 1151</span>}</div>
</div>
<div class="line"><a id="l01152" name="l01152"></a><span class="lineno"> 1152</span> </div>
<div class="line"><a id="l01153" name="l01153"></a><span class="lineno"> 1153</span><span class="comment">// returns the index of the primary core</span></div>
<div class="line"><a id="l01154" name="l01154"></a><span class="lineno"> 1154</span><span class="comment">// return -1 if no primary core selected</span></div>
<div class="foldopen" id="foldopen01155" data-start="{" data-end="}">
<div class="line"><a id="l01155" name="l01155"></a><span class="lineno"><a class="line" href="classNavEKF3.html#a04a49878372fe5bf15547f2eabfa2fe1"> 1155</a></span>int8_t <a class="code hl_function" href="classNavEKF3.html#a04a49878372fe5bf15547f2eabfa2fe1">NavEKF3::getPrimaryCoreIndex</a>(<span class="keywordtype">void</span>)<span class="keyword"> const</span></div>
<div class="line"><a id="l01156" name="l01156"></a><span class="lineno"> 1156</span><span class="keyword"></span>{</div>
<div class="line"><a id="l01157" name="l01157"></a><span class="lineno"> 1157</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>) {</div>
<div class="line"><a id="l01158" name="l01158"></a><span class="lineno"> 1158</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l01159" name="l01159"></a><span class="lineno"> 1159</span>    }</div>
<div class="line"><a id="l01160" name="l01160"></a><span class="lineno"> 1160</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>;</div>
<div class="line"><a id="l01161" name="l01161"></a><span class="lineno"> 1161</span>}</div>
</div>
<div class="line"><a id="l01162" name="l01162"></a><span class="lineno"> 1162</span> </div>
<div class="line"><a id="l01163" name="l01163"></a><span class="lineno"> 1163</span><span class="comment">// returns the index of the IMU of the primary core</span></div>
<div class="line"><a id="l01164" name="l01164"></a><span class="lineno"> 1164</span><span class="comment">// return -1 if no primary core selected</span></div>
<div class="foldopen" id="foldopen01165" data-start="{" data-end="}">
<div class="line"><a id="l01165" name="l01165"></a><span class="lineno"><a class="line" href="classNavEKF3.html#a26f372b56234e045c01c07f51e1c8669"> 1165</a></span>int8_t <a class="code hl_function" href="classNavEKF3.html#a26f372b56234e045c01c07f51e1c8669">NavEKF3::getPrimaryCoreIMUIndex</a>(<span class="keywordtype">void</span>)<span class="keyword"> const</span></div>
<div class="line"><a id="l01166" name="l01166"></a><span class="lineno"> 1166</span><span class="keyword"></span>{</div>
<div class="line"><a id="l01167" name="l01167"></a><span class="lineno"> 1167</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>) {</div>
<div class="line"><a id="l01168" name="l01168"></a><span class="lineno"> 1168</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l01169" name="l01169"></a><span class="lineno"> 1169</span>    }</div>
<div class="line"><a id="l01170" name="l01170"></a><span class="lineno"> 1170</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[<a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>].<a class="code hl_function" href="classNavEKF3__core.html#ab21f424d7f8ff9778c0e24494970164b">getIMUIndex</a>();</div>
<div class="line"><a id="l01171" name="l01171"></a><span class="lineno"> 1171</span>}</div>
</div>
<div class="line"><a id="l01172" name="l01172"></a><span class="lineno"> 1172</span> </div>
<div class="line"><a id="l01173" name="l01173"></a><span class="lineno"> 1173</span><span class="comment">// Write the last calculated NE position relative to the reference point (m).</span></div>
<div class="line"><a id="l01174" name="l01174"></a><span class="lineno"> 1174</span><span class="comment">// If a calculated solution is not available, use the best available data and return false</span></div>
<div class="line"><a id="l01175" name="l01175"></a><span class="lineno"> 1175</span><span class="comment">// If false returned, do not use for flight control</span></div>
<div class="foldopen" id="foldopen01176" data-start="{" data-end="}">
<div class="line"><a id="l01176" name="l01176"></a><span class="lineno"><a class="line" href="classNavEKF3.html#a60da6bc22561adcdff5d8ce16c8901c8"> 1176</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classNavEKF3.html#a60da6bc22561adcdff5d8ce16c8901c8">NavEKF3::getPosNE</a>(<a class="code hl_class" href="structVector2.html">Vector2f</a> &amp;posNE)<span class="keyword"> const</span></div>
<div class="line"><a id="l01177" name="l01177"></a><span class="lineno"> 1177</span><span class="keyword"></span>{</div>
<div class="line"><a id="l01178" name="l01178"></a><span class="lineno"> 1178</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>) {</div>
<div class="line"><a id="l01179" name="l01179"></a><span class="lineno"> 1179</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01180" name="l01180"></a><span class="lineno"> 1180</span>    }</div>
<div class="line"><a id="l01181" name="l01181"></a><span class="lineno"> 1181</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[<a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>].<a class="code hl_function" href="classNavEKF3__core.html#af6c3f4076addbac86cceaba98bb38cbd">getPosNE</a>(posNE);</div>
<div class="line"><a id="l01182" name="l01182"></a><span class="lineno"> 1182</span>}</div>
</div>
<div class="line"><a id="l01183" name="l01183"></a><span class="lineno"> 1183</span> </div>
<div class="line"><a id="l01184" name="l01184"></a><span class="lineno"> 1184</span><span class="comment">// Write the last calculated D position relative to the reference point (m).</span></div>
<div class="line"><a id="l01185" name="l01185"></a><span class="lineno"> 1185</span><span class="comment">// If a calculated solution is not available, use the best available data and return false</span></div>
<div class="line"><a id="l01186" name="l01186"></a><span class="lineno"> 1186</span><span class="comment">// If false returned, do not use for flight control</span></div>
<div class="foldopen" id="foldopen01187" data-start="{" data-end="}">
<div class="line"><a id="l01187" name="l01187"></a><span class="lineno"><a class="line" href="classNavEKF3.html#a035a89e3287481ef8e781b74ec257ec1"> 1187</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classNavEKF3.html#a035a89e3287481ef8e781b74ec257ec1">NavEKF3::getPosD</a>(<span class="keywordtype">float</span> &amp;posD)<span class="keyword"> const</span></div>
<div class="line"><a id="l01188" name="l01188"></a><span class="lineno"> 1188</span><span class="keyword"></span>{</div>
<div class="line"><a id="l01189" name="l01189"></a><span class="lineno"> 1189</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>) {</div>
<div class="line"><a id="l01190" name="l01190"></a><span class="lineno"> 1190</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01191" name="l01191"></a><span class="lineno"> 1191</span>    }</div>
<div class="line"><a id="l01192" name="l01192"></a><span class="lineno"> 1192</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[<a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>].<a class="code hl_function" href="classNavEKF3__core.html#a44d9f37a3ad6be9710d583e269743347">getPosD</a>(posD);</div>
<div class="line"><a id="l01193" name="l01193"></a><span class="lineno"> 1193</span>}</div>
</div>
<div class="line"><a id="l01194" name="l01194"></a><span class="lineno"> 1194</span> </div>
<div class="line"><a id="l01195" name="l01195"></a><span class="lineno"> 1195</span><span class="comment">// return NED velocity in m/s</span></div>
<div class="foldopen" id="foldopen01196" data-start="{" data-end="}">
<div class="line"><a id="l01196" name="l01196"></a><span class="lineno"><a class="line" href="classNavEKF3.html#a3cdeb6ee923a1b9831b837328e2dfeeb"> 1196</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classNavEKF3.html#a3cdeb6ee923a1b9831b837328e2dfeeb">NavEKF3::getVelNED</a>(<a class="code hl_class" href="classVector3.html">Vector3f</a> &amp;vel)<span class="keyword"> const</span></div>
<div class="line"><a id="l01197" name="l01197"></a><span class="lineno"> 1197</span><span class="keyword"></span>{</div>
<div class="line"><a id="l01198" name="l01198"></a><span class="lineno"> 1198</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>) {</div>
<div class="line"><a id="l01199" name="l01199"></a><span class="lineno"> 1199</span>        <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[<a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>].<a class="code hl_function" href="classNavEKF3__core.html#a0630cd65430a8082b50c94b4664fdb51">getVelNED</a>(vel);</div>
<div class="line"><a id="l01200" name="l01200"></a><span class="lineno"> 1200</span>    }</div>
<div class="line"><a id="l01201" name="l01201"></a><span class="lineno"> 1201</span>}</div>
</div>
<div class="line"><a id="l01202" name="l01202"></a><span class="lineno"> 1202</span> </div>
<div class="line"><a id="l01203" name="l01203"></a><span class="lineno"> 1203</span><span class="comment">// return estimate of true airspeed vector in body frame in m/s</span></div>
<div class="line"><a id="l01204" name="l01204"></a><span class="lineno"> 1204</span><span class="comment">// returns false if estimate is unavailable</span></div>
<div class="foldopen" id="foldopen01205" data-start="{" data-end="}">
<div class="line"><a id="l01205" name="l01205"></a><span class="lineno"><a class="line" href="classNavEKF3.html#ad64a1d76cda0483376f225df0e2f687f"> 1205</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classNavEKF3.html#ad64a1d76cda0483376f225df0e2f687f">NavEKF3::getAirSpdVec</a>(<a class="code hl_class" href="classVector3.html">Vector3f</a> &amp;vel)<span class="keyword"> const</span></div>
<div class="line"><a id="l01206" name="l01206"></a><span class="lineno"> 1206</span><span class="keyword"></span>{</div>
<div class="line"><a id="l01207" name="l01207"></a><span class="lineno"> 1207</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>) {</div>
<div class="line"><a id="l01208" name="l01208"></a><span class="lineno"> 1208</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[<a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>].<a class="code hl_function" href="classNavEKF3__core.html#afa43abbb98c848a819f29a43995cec41">getAirSpdVec</a>(vel);</div>
<div class="line"><a id="l01209" name="l01209"></a><span class="lineno"> 1209</span>    }</div>
<div class="line"><a id="l01210" name="l01210"></a><span class="lineno"> 1210</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01211" name="l01211"></a><span class="lineno"> 1211</span>}</div>
</div>
<div class="line"><a id="l01212" name="l01212"></a><span class="lineno"> 1212</span> </div>
<div class="line"><a id="l01213" name="l01213"></a><span class="lineno"> 1213</span><span class="comment">// return the innovation in m/s, innovation variance in (m/s)^2 and age in msec of the last TAS measurement processed</span></div>
<div class="foldopen" id="foldopen01214" data-start="{" data-end="}">
<div class="line"><a id="l01214" name="l01214"></a><span class="lineno"><a class="line" href="classNavEKF3.html#a4f03f995de5b61177073d674b606ebc1"> 1214</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classNavEKF3.html#a4f03f995de5b61177073d674b606ebc1">NavEKF3::getAirSpdHealthData</a>(<span class="keywordtype">float</span> &amp;innovation, <span class="keywordtype">float</span> &amp;innovationVariance, uint32_t &amp;age_ms)<span class="keyword"> const</span></div>
<div class="line"><a id="l01215" name="l01215"></a><span class="lineno"> 1215</span><span class="keyword"></span>{</div>
<div class="line"><a id="l01216" name="l01216"></a><span class="lineno"> 1216</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>) {</div>
<div class="line"><a id="l01217" name="l01217"></a><span class="lineno"> 1217</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[<a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>].<a class="code hl_function" href="classNavEKF3__core.html#af7f756f6bdd6c4721ba7634d8c9718dc">getAirSpdHealthData</a>(innovation, innovationVariance, age_ms);</div>
<div class="line"><a id="l01218" name="l01218"></a><span class="lineno"> 1218</span>    }</div>
<div class="line"><a id="l01219" name="l01219"></a><span class="lineno"> 1219</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01220" name="l01220"></a><span class="lineno"> 1220</span>}</div>
</div>
<div class="line"><a id="l01221" name="l01221"></a><span class="lineno"> 1221</span> </div>
<div class="line"><a id="l01222" name="l01222"></a><span class="lineno"> 1222</span><span class="comment">// Return the rate of change of vertical position in the down direction (dPosD/dt) in m/s</span></div>
<div class="foldopen" id="foldopen01223" data-start="{" data-end="}">
<div class="line"><a id="l01223" name="l01223"></a><span class="lineno"><a class="line" href="classNavEKF3.html#ae37f34d5606f48bb6196fec2aa4c8c2d"> 1223</a></span><span class="keywordtype">float</span> <a class="code hl_function" href="classNavEKF3.html#ae37f34d5606f48bb6196fec2aa4c8c2d">NavEKF3::getPosDownDerivative</a>()<span class="keyword"> const</span></div>
<div class="line"><a id="l01224" name="l01224"></a><span class="lineno"> 1224</span><span class="keyword"></span>{</div>
<div class="line"><a id="l01225" name="l01225"></a><span class="lineno"> 1225</span>    <span class="comment">// return the value calculated from a complementary filter applied to the EKF height and vertical acceleration</span></div>
<div class="line"><a id="l01226" name="l01226"></a><span class="lineno"> 1226</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>) {</div>
<div class="line"><a id="l01227" name="l01227"></a><span class="lineno"> 1227</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[<a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>].<a class="code hl_function" href="classNavEKF3__core.html#aa91c6f6836712ce3b7ade2969877ee68">getPosDownDerivative</a>();</div>
<div class="line"><a id="l01228" name="l01228"></a><span class="lineno"> 1228</span>    }</div>
<div class="line"><a id="l01229" name="l01229"></a><span class="lineno"> 1229</span>    <span class="keywordflow">return</span> 0.0f;</div>
<div class="line"><a id="l01230" name="l01230"></a><span class="lineno"> 1230</span>}</div>
</div>
<div class="line"><a id="l01231" name="l01231"></a><span class="lineno"> 1231</span> </div>
<div class="line"><a id="l01232" name="l01232"></a><span class="lineno"> 1232</span><span class="comment">// return body axis gyro bias estimates in rad/sec</span></div>
<div class="foldopen" id="foldopen01233" data-start="{" data-end="}">
<div class="line"><a id="l01233" name="l01233"></a><span class="lineno"><a class="line" href="classNavEKF3.html#a2e557708838ba266e47b6d2ee9fb6165"> 1233</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classNavEKF3.html#a2e557708838ba266e47b6d2ee9fb6165">NavEKF3::getGyroBias</a>(int8_t <a class="code hl_variable" href="AP__InternalError_8cpp.html#a02ad7a50d04e0dbf28c6c90a183a0579">instance</a>, <a class="code hl_class" href="classVector3.html">Vector3f</a> &amp;gyroBias)<span class="keyword"> const</span></div>
<div class="line"><a id="l01234" name="l01234"></a><span class="lineno"> 1234</span><span class="keyword"></span>{</div>
<div class="line"><a id="l01235" name="l01235"></a><span class="lineno"> 1235</span>    <span class="keywordflow">if</span> (instance &lt; 0 || instance &gt;= <a class="code hl_variable" href="classNavEKF3.html#a1146c4b7293610f34b6ecfd7ccc5bbb1">num_cores</a>) <a class="code hl_variable" href="AP__InternalError_8cpp.html#a02ad7a50d04e0dbf28c6c90a183a0579">instance</a> = <a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>;</div>
<div class="line"><a id="l01236" name="l01236"></a><span class="lineno"> 1236</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>) {</div>
<div class="line"><a id="l01237" name="l01237"></a><span class="lineno"> 1237</span>        <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[<a class="code hl_variable" href="AP__InternalError_8cpp.html#a02ad7a50d04e0dbf28c6c90a183a0579">instance</a>].<a class="code hl_function" href="classNavEKF3__core.html#ab96f7bf6ff4966c829aa6d77605f0316">getGyroBias</a>(gyroBias);</div>
<div class="line"><a id="l01238" name="l01238"></a><span class="lineno"> 1238</span>    }</div>
<div class="line"><a id="l01239" name="l01239"></a><span class="lineno"> 1239</span>}</div>
</div>
<div class="line"><a id="l01240" name="l01240"></a><span class="lineno"> 1240</span> </div>
<div class="line"><a id="l01241" name="l01241"></a><span class="lineno"> 1241</span><span class="comment">// return accelerometer bias estimate in m/s/s</span></div>
<div class="foldopen" id="foldopen01242" data-start="{" data-end="}">
<div class="line"><a id="l01242" name="l01242"></a><span class="lineno"><a class="line" href="classNavEKF3.html#a55f65c6a644f83bfd16b7be5d31140b7"> 1242</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classNavEKF3.html#a55f65c6a644f83bfd16b7be5d31140b7">NavEKF3::getAccelBias</a>(int8_t <a class="code hl_variable" href="AP__InternalError_8cpp.html#a02ad7a50d04e0dbf28c6c90a183a0579">instance</a>, <a class="code hl_class" href="classVector3.html">Vector3f</a> &amp;accelBias)<span class="keyword"> const</span></div>
<div class="line"><a id="l01243" name="l01243"></a><span class="lineno"> 1243</span><span class="keyword"></span>{</div>
<div class="line"><a id="l01244" name="l01244"></a><span class="lineno"> 1244</span>    <span class="keywordflow">if</span> (instance &lt; 0 || instance &gt;= <a class="code hl_variable" href="classNavEKF3.html#a1146c4b7293610f34b6ecfd7ccc5bbb1">num_cores</a>) <a class="code hl_variable" href="AP__InternalError_8cpp.html#a02ad7a50d04e0dbf28c6c90a183a0579">instance</a> = <a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>;</div>
<div class="line"><a id="l01245" name="l01245"></a><span class="lineno"> 1245</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>) {</div>
<div class="line"><a id="l01246" name="l01246"></a><span class="lineno"> 1246</span>        <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[<a class="code hl_variable" href="AP__InternalError_8cpp.html#a02ad7a50d04e0dbf28c6c90a183a0579">instance</a>].<a class="code hl_function" href="classNavEKF3__core.html#aa65f297fdf62285256b81a60006ebbf2">getAccelBias</a>(accelBias);</div>
<div class="line"><a id="l01247" name="l01247"></a><span class="lineno"> 1247</span>    }</div>
<div class="line"><a id="l01248" name="l01248"></a><span class="lineno"> 1248</span>}</div>
</div>
<div class="line"><a id="l01249" name="l01249"></a><span class="lineno"> 1249</span> </div>
<div class="line"><a id="l01250" name="l01250"></a><span class="lineno"> 1250</span><span class="comment">// returns active source set used by EKF3</span></div>
<div class="foldopen" id="foldopen01251" data-start="{" data-end="}">
<div class="line"><a id="l01251" name="l01251"></a><span class="lineno"><a class="line" href="classNavEKF3.html#a1ebaff46b3eb9a8737972c30b718693b"> 1251</a></span>uint8_t <a class="code hl_function" href="classNavEKF3.html#a1ebaff46b3eb9a8737972c30b718693b">NavEKF3::get_active_source_set</a>()<span class="keyword"> const</span></div>
<div class="line"><a id="l01252" name="l01252"></a><span class="lineno"> 1252</span><span class="keyword"></span>{</div>
<div class="line"><a id="l01253" name="l01253"></a><span class="lineno"> 1253</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classNavEKF3.html#aaae77db7a65077fa51e3bbb89b9e8b18">sources</a>.<a class="code hl_function" href="classAP__NavEKF__Source.html#a56c45e39c77958e2fc8524bb19154d26">get_active_source_set</a>();</div>
<div class="line"><a id="l01254" name="l01254"></a><span class="lineno"> 1254</span>}</div>
</div>
<div class="line"><a id="l01255" name="l01255"></a><span class="lineno"> 1255</span> </div>
<div class="line"><a id="l01256" name="l01256"></a><span class="lineno"> 1256</span><span class="comment">// reset body axis gyro bias estimates</span></div>
<div class="foldopen" id="foldopen01257" data-start="{" data-end="}">
<div class="line"><a id="l01257" name="l01257"></a><span class="lineno"><a class="line" href="classNavEKF3.html#ac5a00778eabdb63d023daf034eda5fa5"> 1257</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classNavEKF3.html#ac5a00778eabdb63d023daf034eda5fa5">NavEKF3::resetGyroBias</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l01258" name="l01258"></a><span class="lineno"> 1258</span>{</div>
<div class="line"><a id="l01259" name="l01259"></a><span class="lineno"> 1259</span>    <a class="code hl_function" href="namespaceAP.html#a72bac6dee7ddc414f93cbf7cad325f55">AP::dal</a>().<a class="code hl_function" href="classAP__DAL.html#aa41c9b00116bc5c6efc7eb3c6b915ed3">log_event3</a>(<a class="code hl_enumvalue" href="classAP__DAL.html#a30e37092f6f4f89e6f6fc1824737b2aeaf53f323b3768b9c41648ec75084231d9">AP_DAL::Event::resetGyroBias</a>);</div>
<div class="line"><a id="l01260" name="l01260"></a><span class="lineno"> 1260</span> </div>
<div class="line"><a id="l01261" name="l01261"></a><span class="lineno"> 1261</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>) {</div>
<div class="line"><a id="l01262" name="l01262"></a><span class="lineno"> 1262</span>        <span class="keywordflow">for</span> (uint8_t i=0; i&lt;<a class="code hl_variable" href="classNavEKF3.html#a1146c4b7293610f34b6ecfd7ccc5bbb1">num_cores</a>; i++) {</div>
<div class="line"><a id="l01263" name="l01263"></a><span class="lineno"> 1263</span>            <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[i].<a class="code hl_function" href="classNavEKF3__core.html#a994d08ccd30264ebc253083efd20c58d">resetGyroBias</a>();</div>
<div class="line"><a id="l01264" name="l01264"></a><span class="lineno"> 1264</span>        }</div>
<div class="line"><a id="l01265" name="l01265"></a><span class="lineno"> 1265</span>    }</div>
<div class="line"><a id="l01266" name="l01266"></a><span class="lineno"> 1266</span>}</div>
</div>
<div class="line"><a id="l01267" name="l01267"></a><span class="lineno"> 1267</span> </div>
<div class="line"><a id="l01268" name="l01268"></a><span class="lineno"> 1268</span><span class="comment">// Resets the baro so that it reads zero at the current height</span></div>
<div class="line"><a id="l01269" name="l01269"></a><span class="lineno"> 1269</span><span class="comment">// Resets the EKF height to zero</span></div>
<div class="line"><a id="l01270" name="l01270"></a><span class="lineno"> 1270</span><span class="comment">// Adjusts the EKF origin height so that the EKF height + origin height is the same as before</span></div>
<div class="line"><a id="l01271" name="l01271"></a><span class="lineno"> 1271</span><span class="comment">// Returns true if the height datum reset has been performed</span></div>
<div class="line"><a id="l01272" name="l01272"></a><span class="lineno"> 1272</span><span class="comment">// If using a range finder for height no reset is performed and it returns false</span></div>
<div class="foldopen" id="foldopen01273" data-start="{" data-end="}">
<div class="line"><a id="l01273" name="l01273"></a><span class="lineno"><a class="line" href="classNavEKF3.html#aeff588883c2a757adfa1ecb4031d0bb4"> 1273</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classNavEKF3.html#aeff588883c2a757adfa1ecb4031d0bb4">NavEKF3::resetHeightDatum</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l01274" name="l01274"></a><span class="lineno"> 1274</span>{</div>
<div class="line"><a id="l01275" name="l01275"></a><span class="lineno"> 1275</span>    <a class="code hl_function" href="namespaceAP.html#a72bac6dee7ddc414f93cbf7cad325f55">AP::dal</a>().<a class="code hl_function" href="classAP__DAL.html#aa41c9b00116bc5c6efc7eb3c6b915ed3">log_event3</a>(<a class="code hl_enumvalue" href="classAP__DAL.html#a30e37092f6f4f89e6f6fc1824737b2aea2c8fd2ce5d2cb69111494819477944f8">AP_DAL::Event::resetHeightDatum</a>);</div>
<div class="line"><a id="l01276" name="l01276"></a><span class="lineno"> 1276</span> </div>
<div class="line"><a id="l01277" name="l01277"></a><span class="lineno"> 1277</span>    <span class="keywordtype">bool</span> <a class="code hl_variable" href="routing_8cpp.html#acdef7b92239f1e607ef6caa33a16d2ed">status</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01278" name="l01278"></a><span class="lineno"> 1278</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>) {</div>
<div class="line"><a id="l01279" name="l01279"></a><span class="lineno"> 1279</span>        <span class="keywordflow">for</span> (uint8_t i=0; i&lt;<a class="code hl_variable" href="classNavEKF3.html#a1146c4b7293610f34b6ecfd7ccc5bbb1">num_cores</a>; i++) {</div>
<div class="line"><a id="l01280" name="l01280"></a><span class="lineno"> 1280</span>            <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[i].<a class="code hl_function" href="classNavEKF3.html#aeff588883c2a757adfa1ecb4031d0bb4">resetHeightDatum</a>()) {</div>
<div class="line"><a id="l01281" name="l01281"></a><span class="lineno"> 1281</span>                <a class="code hl_variable" href="routing_8cpp.html#acdef7b92239f1e607ef6caa33a16d2ed">status</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01282" name="l01282"></a><span class="lineno"> 1282</span>            }</div>
<div class="line"><a id="l01283" name="l01283"></a><span class="lineno"> 1283</span>        }</div>
<div class="line"><a id="l01284" name="l01284"></a><span class="lineno"> 1284</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01285" name="l01285"></a><span class="lineno"> 1285</span>        <a class="code hl_variable" href="routing_8cpp.html#acdef7b92239f1e607ef6caa33a16d2ed">status</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01286" name="l01286"></a><span class="lineno"> 1286</span>    }</div>
<div class="line"><a id="l01287" name="l01287"></a><span class="lineno"> 1287</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="routing_8cpp.html#acdef7b92239f1e607ef6caa33a16d2ed">status</a>;</div>
<div class="line"><a id="l01288" name="l01288"></a><span class="lineno"> 1288</span>}</div>
</div>
<div class="line"><a id="l01289" name="l01289"></a><span class="lineno"> 1289</span> </div>
<div class="line"><a id="l01290" name="l01290"></a><span class="lineno"> 1290</span><span class="comment">// return the horizontal speed limit in m/s set by optical flow sensor limits</span></div>
<div class="line"><a id="l01291" name="l01291"></a><span class="lineno"> 1291</span><span class="comment">// return the scale factor to be applied to navigation velocity gains to compensate for increase in velocity noise with height when using optical flow</span></div>
<div class="foldopen" id="foldopen01292" data-start="{" data-end="}">
<div class="line"><a id="l01292" name="l01292"></a><span class="lineno"><a class="line" href="classNavEKF3.html#a9ff516d8cf7091cd56ae86737ca404d6"> 1292</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classNavEKF3.html#a9ff516d8cf7091cd56ae86737ca404d6">NavEKF3::getEkfControlLimits</a>(<span class="keywordtype">float</span> &amp;ekfGndSpdLimit, <span class="keywordtype">float</span> &amp;ekfNavVelGainScaler)<span class="keyword"> const</span></div>
<div class="line"><a id="l01293" name="l01293"></a><span class="lineno"> 1293</span><span class="keyword"></span>{</div>
<div class="line"><a id="l01294" name="l01294"></a><span class="lineno"> 1294</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>) {</div>
<div class="line"><a id="l01295" name="l01295"></a><span class="lineno"> 1295</span>        <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[<a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>].<a class="code hl_function" href="classNavEKF3__core.html#a5a9f0e2cd73cf625c7015bf0dbb43393">getEkfControlLimits</a>(ekfGndSpdLimit, ekfNavVelGainScaler);</div>
<div class="line"><a id="l01296" name="l01296"></a><span class="lineno"> 1296</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01297" name="l01297"></a><span class="lineno"> 1297</span>        ekfGndSpdLimit = 400.0f; <span class="comment">//return 80% of max filter speed</span></div>
<div class="line"><a id="l01298" name="l01298"></a><span class="lineno"> 1298</span>        ekfNavVelGainScaler = 1.0f;</div>
<div class="line"><a id="l01299" name="l01299"></a><span class="lineno"> 1299</span>    }</div>
<div class="line"><a id="l01300" name="l01300"></a><span class="lineno"> 1300</span>}</div>
</div>
<div class="line"><a id="l01301" name="l01301"></a><span class="lineno"> 1301</span> </div>
<div class="line"><a id="l01302" name="l01302"></a><span class="lineno"> 1302</span><span class="comment">// return the NED wind speed estimates in m/s (positive is air moving in the direction of the axis)</span></div>
<div class="line"><a id="l01303" name="l01303"></a><span class="lineno"> 1303</span><span class="comment">// returns true if wind state estimation is active</span></div>
<div class="foldopen" id="foldopen01304" data-start="{" data-end="}">
<div class="line"><a id="l01304" name="l01304"></a><span class="lineno"><a class="line" href="classNavEKF3.html#aa40196f4e80a218be8e432a02898992d"> 1304</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classNavEKF3.html#aa40196f4e80a218be8e432a02898992d">NavEKF3::getWind</a>(<a class="code hl_class" href="classVector3.html">Vector3f</a> &amp;<a class="code hl_variable" href="ardupilot__SITL__QUAD_8h.html#ae4ebf6c3b1fa52d71d50bf1064a7eb14">wind</a>)<span class="keyword"> const</span></div>
<div class="line"><a id="l01305" name="l01305"></a><span class="lineno"> 1305</span><span class="keyword"></span>{</div>
<div class="line"><a id="l01306" name="l01306"></a><span class="lineno"> 1306</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a> == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a id="l01307" name="l01307"></a><span class="lineno"> 1307</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01308" name="l01308"></a><span class="lineno"> 1308</span>    }</div>
<div class="line"><a id="l01309" name="l01309"></a><span class="lineno"> 1309</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[<a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>].<a class="code hl_function" href="classNavEKF3__core.html#a45c5ebcb785701dac82a183c3bcf8c8a">getWind</a>(<a class="code hl_variable" href="ardupilot__SITL__QUAD_8h.html#ae4ebf6c3b1fa52d71d50bf1064a7eb14">wind</a>);</div>
<div class="line"><a id="l01310" name="l01310"></a><span class="lineno"> 1310</span>}</div>
</div>
<div class="line"><a id="l01311" name="l01311"></a><span class="lineno"> 1311</span> </div>
<div class="line"><a id="l01312" name="l01312"></a><span class="lineno"> 1312</span><span class="comment">// return earth magnetic field estimates in measurement units / 1000</span></div>
<div class="foldopen" id="foldopen01313" data-start="{" data-end="}">
<div class="line"><a id="l01313" name="l01313"></a><span class="lineno"><a class="line" href="classNavEKF3.html#afb4273bd837e1ae73e8499ec2781be95"> 1313</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classNavEKF3.html#afb4273bd837e1ae73e8499ec2781be95">NavEKF3::getMagNED</a>(<a class="code hl_class" href="classVector3.html">Vector3f</a> &amp;magNED)<span class="keyword"> const</span></div>
<div class="line"><a id="l01314" name="l01314"></a><span class="lineno"> 1314</span><span class="keyword"></span>{</div>
<div class="line"><a id="l01315" name="l01315"></a><span class="lineno"> 1315</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>) {</div>
<div class="line"><a id="l01316" name="l01316"></a><span class="lineno"> 1316</span>        <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[<a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>].<a class="code hl_function" href="classNavEKF3__core.html#aa733c890e57a3595796bbbe898bc4d94">getMagNED</a>(magNED);</div>
<div class="line"><a id="l01317" name="l01317"></a><span class="lineno"> 1317</span>    }</div>
<div class="line"><a id="l01318" name="l01318"></a><span class="lineno"> 1318</span>}</div>
</div>
<div class="line"><a id="l01319" name="l01319"></a><span class="lineno"> 1319</span> </div>
<div class="line"><a id="l01320" name="l01320"></a><span class="lineno"> 1320</span><span class="comment">// return body magnetic field estimates in measurement units / 1000</span></div>
<div class="foldopen" id="foldopen01321" data-start="{" data-end="}">
<div class="line"><a id="l01321" name="l01321"></a><span class="lineno"><a class="line" href="classNavEKF3.html#a25ac14aff0153f44b622cb248510f165"> 1321</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classNavEKF3.html#a25ac14aff0153f44b622cb248510f165">NavEKF3::getMagXYZ</a>(<a class="code hl_class" href="classVector3.html">Vector3f</a> &amp;magXYZ)<span class="keyword"> const</span></div>
<div class="line"><a id="l01322" name="l01322"></a><span class="lineno"> 1322</span><span class="keyword"></span>{</div>
<div class="line"><a id="l01323" name="l01323"></a><span class="lineno"> 1323</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>) {</div>
<div class="line"><a id="l01324" name="l01324"></a><span class="lineno"> 1324</span>        <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[<a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>].<a class="code hl_function" href="classNavEKF3__core.html#abf484e1b5a5ab95a99f4816a1718f713">getMagXYZ</a>(magXYZ);</div>
<div class="line"><a id="l01325" name="l01325"></a><span class="lineno"> 1325</span>    }</div>
<div class="line"><a id="l01326" name="l01326"></a><span class="lineno"> 1326</span>}</div>
</div>
<div class="line"><a id="l01327" name="l01327"></a><span class="lineno"> 1327</span> </div>
<div class="line"><a id="l01328" name="l01328"></a><span class="lineno"> 1328</span><span class="comment">// return the airspeed sensor in use</span></div>
<div class="foldopen" id="foldopen01329" data-start="{" data-end="}">
<div class="line"><a id="l01329" name="l01329"></a><span class="lineno"><a class="line" href="classNavEKF3.html#a6a6c48738c9fadb679c547ae5fd26c9b"> 1329</a></span>uint8_t <a class="code hl_function" href="classNavEKF3.html#a6a6c48738c9fadb679c547ae5fd26c9b">NavEKF3::getActiveAirspeed</a>()<span class="keyword"> const</span></div>
<div class="line"><a id="l01330" name="l01330"></a><span class="lineno"> 1330</span><span class="keyword"></span>{</div>
<div class="line"><a id="l01331" name="l01331"></a><span class="lineno"> 1331</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>) {</div>
<div class="line"><a id="l01332" name="l01332"></a><span class="lineno"> 1332</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[<a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>].<a class="code hl_function" href="classNavEKF3__core.html#aba5e7f644818fb9c52c6c27211d5baec">getActiveAirspeed</a>();</div>
<div class="line"><a id="l01333" name="l01333"></a><span class="lineno"> 1333</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01334" name="l01334"></a><span class="lineno"> 1334</span>        <span class="keywordflow">return</span> 255;</div>
<div class="line"><a id="l01335" name="l01335"></a><span class="lineno"> 1335</span>    }</div>
<div class="line"><a id="l01336" name="l01336"></a><span class="lineno"> 1336</span>}</div>
</div>
<div class="line"><a id="l01337" name="l01337"></a><span class="lineno"> 1337</span> </div>
<div class="line"><a id="l01338" name="l01338"></a><span class="lineno"> 1338</span><span class="comment">// Return estimated magnetometer offsets</span></div>
<div class="line"><a id="l01339" name="l01339"></a><span class="lineno"> 1339</span><span class="comment">// Return true if magnetometer offsets are valid</span></div>
<div class="foldopen" id="foldopen01340" data-start="{" data-end="}">
<div class="line"><a id="l01340" name="l01340"></a><span class="lineno"><a class="line" href="classNavEKF3.html#a5da888b64f34e042cf00c2ef2efdb669"> 1340</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classNavEKF3.html#a5da888b64f34e042cf00c2ef2efdb669">NavEKF3::getMagOffsets</a>(uint8_t mag_idx, <a class="code hl_class" href="classVector3.html">Vector3f</a> &amp;magOffsets)<span class="keyword"> const</span></div>
<div class="line"><a id="l01341" name="l01341"></a><span class="lineno"> 1341</span><span class="keyword"></span>{</div>
<div class="line"><a id="l01342" name="l01342"></a><span class="lineno"> 1342</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>) {</div>
<div class="line"><a id="l01343" name="l01343"></a><span class="lineno"> 1343</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01344" name="l01344"></a><span class="lineno"> 1344</span>    }</div>
<div class="line"><a id="l01345" name="l01345"></a><span class="lineno"> 1345</span>    <span class="comment">// try the primary first, else loop through all of the cores and return when one has offsets for this mag instance</span></div>
<div class="line"><a id="l01346" name="l01346"></a><span class="lineno"> 1346</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[<a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>].<a class="code hl_function" href="classNavEKF3.html#a5da888b64f34e042cf00c2ef2efdb669">getMagOffsets</a>(mag_idx, magOffsets)) {</div>
<div class="line"><a id="l01347" name="l01347"></a><span class="lineno"> 1347</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01348" name="l01348"></a><span class="lineno"> 1348</span>    }</div>
<div class="line"><a id="l01349" name="l01349"></a><span class="lineno"> 1349</span>    <span class="keywordflow">for</span> (uint8_t i=0; i&lt;<a class="code hl_variable" href="classNavEKF3.html#a1146c4b7293610f34b6ecfd7ccc5bbb1">num_cores</a>; i++) {</div>
<div class="line"><a id="l01350" name="l01350"></a><span class="lineno"> 1350</span>        <span class="keywordflow">if</span>(<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[i].<a class="code hl_function" href="classNavEKF3.html#a5da888b64f34e042cf00c2ef2efdb669">getMagOffsets</a>(mag_idx, magOffsets)) {</div>
<div class="line"><a id="l01351" name="l01351"></a><span class="lineno"> 1351</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01352" name="l01352"></a><span class="lineno"> 1352</span>        }</div>
<div class="line"><a id="l01353" name="l01353"></a><span class="lineno"> 1353</span>    }</div>
<div class="line"><a id="l01354" name="l01354"></a><span class="lineno"> 1354</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01355" name="l01355"></a><span class="lineno"> 1355</span>}</div>
</div>
<div class="line"><a id="l01356" name="l01356"></a><span class="lineno"> 1356</span> </div>
<div class="line"><a id="l01357" name="l01357"></a><span class="lineno"> 1357</span><span class="comment">// Return the last calculated latitude, longitude and height in WGS-84</span></div>
<div class="line"><a id="l01358" name="l01358"></a><span class="lineno"> 1358</span><span class="comment">// If a calculated location isn&#39;t available, return a raw GPS measurement</span></div>
<div class="line"><a id="l01359" name="l01359"></a><span class="lineno"> 1359</span><span class="comment">// The status will return true if a calculation or raw measurement is available</span></div>
<div class="line"><a id="l01360" name="l01360"></a><span class="lineno"> 1360</span><span class="comment">// The getFilterStatus() function provides a more detailed description of data health and must be checked if data is to be used for flight control</span></div>
<div class="foldopen" id="foldopen01361" data-start="{" data-end="}">
<div class="line"><a id="l01361" name="l01361"></a><span class="lineno"><a class="line" href="classNavEKF3.html#aa3a2fa3e786069f11d152b40f5f66546"> 1361</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classNavEKF3.html#aa3a2fa3e786069f11d152b40f5f66546">NavEKF3::getLLH</a>(<a class="code hl_class" href="classLocation.html">Location</a> &amp;loc)<span class="keyword"> const</span></div>
<div class="line"><a id="l01362" name="l01362"></a><span class="lineno"> 1362</span><span class="keyword"></span>{</div>
<div class="line"><a id="l01363" name="l01363"></a><span class="lineno"> 1363</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>) {</div>
<div class="line"><a id="l01364" name="l01364"></a><span class="lineno"> 1364</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01365" name="l01365"></a><span class="lineno"> 1365</span>    }</div>
<div class="line"><a id="l01366" name="l01366"></a><span class="lineno"> 1366</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[<a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>].<a class="code hl_function" href="classNavEKF3__core.html#a7e6f5368184ed65123b5a3e64857ec64">getLLH</a>(loc);</div>
<div class="line"><a id="l01367" name="l01367"></a><span class="lineno"> 1367</span>}</div>
</div>
<div class="line"><a id="l01368" name="l01368"></a><span class="lineno"> 1368</span> </div>
<div class="line"><a id="l01369" name="l01369"></a><span class="lineno"> 1369</span><span class="comment">// Return the latitude and longitude and height used to set the NED origin</span></div>
<div class="line"><a id="l01370" name="l01370"></a><span class="lineno"> 1370</span><span class="comment">// All NED positions calculated by the filter are relative to this location</span></div>
<div class="line"><a id="l01371" name="l01371"></a><span class="lineno"> 1371</span><span class="comment">// Returns false if the origin has not been set</span></div>
<div class="foldopen" id="foldopen01372" data-start="{" data-end="}">
<div class="line"><a id="l01372" name="l01372"></a><span class="lineno"><a class="line" href="classNavEKF3.html#a0c83cea59aa26444f97c421441aa0c61"> 1372</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classNavEKF3.html#a0c83cea59aa26444f97c421441aa0c61">NavEKF3::getOriginLLH</a>(<a class="code hl_class" href="classLocation.html">Location</a> &amp;loc)<span class="keyword"> const</span></div>
<div class="line"><a id="l01373" name="l01373"></a><span class="lineno"> 1373</span><span class="keyword"></span>{</div>
<div class="line"><a id="l01374" name="l01374"></a><span class="lineno"> 1374</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>) {</div>
<div class="line"><a id="l01375" name="l01375"></a><span class="lineno"> 1375</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01376" name="l01376"></a><span class="lineno"> 1376</span>    }</div>
<div class="line"><a id="l01377" name="l01377"></a><span class="lineno"> 1377</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classNavEKF3.html#a850fafc5f4cb73ab3916b5ecfb871b1e">common_origin_valid</a>) {</div>
<div class="line"><a id="l01378" name="l01378"></a><span class="lineno"> 1378</span>        loc = <a class="code hl_variable" href="classNavEKF3.html#a8170b94b0fc752e1e6e4e3f383befea4">common_EKF_origin</a>;</div>
<div class="line"><a id="l01379" name="l01379"></a><span class="lineno"> 1379</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01380" name="l01380"></a><span class="lineno"> 1380</span>    }</div>
<div class="line"><a id="l01381" name="l01381"></a><span class="lineno"> 1381</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[<a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>].<a class="code hl_function" href="classNavEKF3__core.html#a18160d7949e6a45af08e8bfbbf9dc240">getOriginLLH</a>(loc);</div>
<div class="line"><a id="l01382" name="l01382"></a><span class="lineno"> 1382</span>}</div>
</div>
<div class="line"><a id="l01383" name="l01383"></a><span class="lineno"> 1383</span> </div>
<div class="line"><a id="l01384" name="l01384"></a><span class="lineno"> 1384</span><span class="comment">// set the latitude and longitude and height used to set the NED origin</span></div>
<div class="line"><a id="l01385" name="l01385"></a><span class="lineno"> 1385</span><span class="comment">// All NED positions calculated by the filter will be relative to this location</span></div>
<div class="line"><a id="l01386" name="l01386"></a><span class="lineno"> 1386</span><span class="comment">// The origin cannot be set if the filter is in a flight mode (eg vehicle armed)</span></div>
<div class="line"><a id="l01387" name="l01387"></a><span class="lineno"> 1387</span><span class="comment">// Returns false if the filter has rejected the attempt to set the origin</span></div>
<div class="foldopen" id="foldopen01388" data-start="{" data-end="}">
<div class="line"><a id="l01388" name="l01388"></a><span class="lineno"><a class="line" href="classNavEKF3.html#a2aeb909b3c8c235eb0e3c71c3adbf2f5"> 1388</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classNavEKF3.html#a2aeb909b3c8c235eb0e3c71c3adbf2f5">NavEKF3::setOriginLLH</a>(<span class="keyword">const</span> <a class="code hl_class" href="classLocation.html">Location</a> &amp;loc)</div>
<div class="line"><a id="l01389" name="l01389"></a><span class="lineno"> 1389</span>{</div>
<div class="line"><a id="l01390" name="l01390"></a><span class="lineno"> 1390</span>    <a class="code hl_function" href="namespaceAP.html#a72bac6dee7ddc414f93cbf7cad325f55">AP::dal</a>().<a class="code hl_function" href="classAP__DAL.html#a782db34b87fa285703b89a30b2ba8727">log_SetOriginLLH3</a>(loc);</div>
<div class="line"><a id="l01391" name="l01391"></a><span class="lineno"> 1391</span> </div>
<div class="line"><a id="l01392" name="l01392"></a><span class="lineno"> 1392</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>) {</div>
<div class="line"><a id="l01393" name="l01393"></a><span class="lineno"> 1393</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01394" name="l01394"></a><span class="lineno"> 1394</span>    }</div>
<div class="line"><a id="l01395" name="l01395"></a><span class="lineno"> 1395</span>    <span class="keywordflow">if</span> ((<a class="code hl_variable" href="classNavEKF3.html#aaae77db7a65077fa51e3bbb89b9e8b18">sources</a>.<a class="code hl_function" href="classAP__NavEKF__Source.html#a9978923579ec2a26a23436d6e25a1a17">getPosXYSource</a>() == <a class="code hl_enumvalue" href="classAP__NavEKF__Source.html#aa463f183bb6c2c7f2b217792b850af46a8c578de37278ada488d763ea86c5cf20">AP_NavEKF_Source::SourceXY::GPS</a>) || <a class="code hl_variable" href="classNavEKF3.html#a850fafc5f4cb73ab3916b5ecfb871b1e">common_origin_valid</a>) {</div>
<div class="line"><a id="l01396" name="l01396"></a><span class="lineno"> 1396</span>        <span class="comment">// we don&#39;t allow setting of the EKF origin if using GPS</span></div>
<div class="line"><a id="l01397" name="l01397"></a><span class="lineno"> 1397</span>        <span class="comment">// or if the EKF origin has already been set.</span></div>
<div class="line"><a id="l01398" name="l01398"></a><span class="lineno"> 1398</span>        <span class="comment">// This is to prevent accidental setting of EKF origin with an</span></div>
<div class="line"><a id="l01399" name="l01399"></a><span class="lineno"> 1399</span>        <span class="comment">// invalid position or height or causing upsets from a shifting origin.</span></div>
<div class="line"><a id="l01400" name="l01400"></a><span class="lineno"> 1400</span>        <a class="code hl_define" href="GCS_8h.html#a266bfe8eda675e1092f045e93932b4a6">GCS_SEND_TEXT</a>(MAV_SEVERITY_WARNING, <span class="stringliteral">&quot;EKF3 refusing set origin&quot;</span>);</div>
<div class="line"><a id="l01401" name="l01401"></a><span class="lineno"> 1401</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01402" name="l01402"></a><span class="lineno"> 1402</span>    }</div>
<div class="line"><a id="l01403" name="l01403"></a><span class="lineno"> 1403</span>    <span class="keywordtype">bool</span> ret = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01404" name="l01404"></a><span class="lineno"> 1404</span>    <span class="keywordflow">for</span> (uint8_t i=0; i&lt;<a class="code hl_variable" href="classNavEKF3.html#a1146c4b7293610f34b6ecfd7ccc5bbb1">num_cores</a>; i++) {</div>
<div class="line"><a id="l01405" name="l01405"></a><span class="lineno"> 1405</span>        ret |= <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[i].<a class="code hl_function" href="classNavEKF3__core.html#a6a3c5ad71ef8b45820c8442ac78ec46e">setOriginLLH</a>(loc);</div>
<div class="line"><a id="l01406" name="l01406"></a><span class="lineno"> 1406</span>    }</div>
<div class="line"><a id="l01407" name="l01407"></a><span class="lineno"> 1407</span>    <span class="comment">// return true if any core accepts the new origin</span></div>
<div class="line"><a id="l01408" name="l01408"></a><span class="lineno"> 1408</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l01409" name="l01409"></a><span class="lineno"> 1409</span>}</div>
</div>
<div class="line"><a id="l01410" name="l01410"></a><span class="lineno"> 1410</span> </div>
<div class="foldopen" id="foldopen01411" data-start="{" data-end="}">
<div class="line"><a id="l01411" name="l01411"></a><span class="lineno"><a class="line" href="classNavEKF3.html#a1e94841407e1c010a35ae50ddb9dc0d1"> 1411</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classNavEKF3.html#a1e94841407e1c010a35ae50ddb9dc0d1">NavEKF3::setLatLng</a>(<span class="keyword">const</span> <a class="code hl_class" href="classLocation.html">Location</a> &amp;loc, <span class="keywordtype">float</span> posAccuracy, uint32_t timestamp_ms)</div>
<div class="line"><a id="l01412" name="l01412"></a><span class="lineno"> 1412</span>{</div>
<div class="line"><a id="l01413" name="l01413"></a><span class="lineno"> 1413</span><span class="preprocessor">#if EK3_FEATURE_POSITION_RESET</span></div>
<div class="line"><a id="l01414" name="l01414"></a><span class="lineno"> 1414</span>    <a class="code hl_function" href="namespaceAP.html#a72bac6dee7ddc414f93cbf7cad325f55">AP::dal</a>().<a class="code hl_function" href="classAP__DAL.html#a17d0e831c8d816f317acd2a208a93aac">log_SetLatLng</a>(loc, posAccuracy, timestamp_ms);</div>
<div class="line"><a id="l01415" name="l01415"></a><span class="lineno"> 1415</span> </div>
<div class="line"><a id="l01416" name="l01416"></a><span class="lineno"> 1416</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>) {</div>
<div class="line"><a id="l01417" name="l01417"></a><span class="lineno"> 1417</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01418" name="l01418"></a><span class="lineno"> 1418</span>    }</div>
<div class="line"><a id="l01419" name="l01419"></a><span class="lineno"> 1419</span>    <span class="keywordtype">bool</span> ret = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01420" name="l01420"></a><span class="lineno"> 1420</span>    <span class="keywordflow">for</span> (uint8_t i=0; i&lt;<a class="code hl_variable" href="classNavEKF3.html#a1146c4b7293610f34b6ecfd7ccc5bbb1">num_cores</a>; i++) {</div>
<div class="line"><a id="l01421" name="l01421"></a><span class="lineno"> 1421</span>        ret |= <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[i].<a class="code hl_function" href="classNavEKF3__core.html#a558826c88490c1c60ef8c48e937138ff">setLatLng</a>(loc, posAccuracy, timestamp_ms);</div>
<div class="line"><a id="l01422" name="l01422"></a><span class="lineno"> 1422</span>    }</div>
<div class="line"><a id="l01423" name="l01423"></a><span class="lineno"> 1423</span>    <span class="comment">// return true if any core accepts the new origin</span></div>
<div class="line"><a id="l01424" name="l01424"></a><span class="lineno"> 1424</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l01425" name="l01425"></a><span class="lineno"> 1425</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l01426" name="l01426"></a><span class="lineno"> 1426</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01427" name="l01427"></a><span class="lineno"> 1427</span><span class="preprocessor">#endif </span><span class="comment">// EK3_FEATURE_POSITION_RESET</span></div>
<div class="line"><a id="l01428" name="l01428"></a><span class="lineno"> 1428</span>}</div>
</div>
<div class="line"><a id="l01429" name="l01429"></a><span class="lineno"> 1429</span> </div>
<div class="line"><a id="l01430" name="l01430"></a><span class="lineno"> 1430</span> </div>
<div class="line"><a id="l01431" name="l01431"></a><span class="lineno"> 1431</span><span class="comment">// return estimated height above ground level</span></div>
<div class="line"><a id="l01432" name="l01432"></a><span class="lineno"> 1432</span><span class="comment">// return false if ground height is not being estimated.</span></div>
<div class="foldopen" id="foldopen01433" data-start="{" data-end="}">
<div class="line"><a id="l01433" name="l01433"></a><span class="lineno"><a class="line" href="classNavEKF3.html#ad5b6175364ba00236a8e22287d82c6f6"> 1433</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classNavEKF3.html#ad5b6175364ba00236a8e22287d82c6f6">NavEKF3::getHAGL</a>(<span class="keywordtype">float</span> &amp;HAGL)<span class="keyword"> const</span></div>
<div class="line"><a id="l01434" name="l01434"></a><span class="lineno"> 1434</span><span class="keyword"></span>{</div>
<div class="line"><a id="l01435" name="l01435"></a><span class="lineno"> 1435</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>) {</div>
<div class="line"><a id="l01436" name="l01436"></a><span class="lineno"> 1436</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01437" name="l01437"></a><span class="lineno"> 1437</span>    }</div>
<div class="line"><a id="l01438" name="l01438"></a><span class="lineno"> 1438</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[<a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>].<a class="code hl_function" href="classNavEKF3__core.html#ab05f51b664969602b6453394e2849cb9">getHAGL</a>(HAGL);</div>
<div class="line"><a id="l01439" name="l01439"></a><span class="lineno"> 1439</span>}</div>
</div>
<div class="line"><a id="l01440" name="l01440"></a><span class="lineno"> 1440</span> </div>
<div class="line"><a id="l01441" name="l01441"></a><span class="lineno"> 1441</span><span class="comment">// return the Euler roll, pitch and yaw angle in radians</span></div>
<div class="foldopen" id="foldopen01442" data-start="{" data-end="}">
<div class="line"><a id="l01442" name="l01442"></a><span class="lineno"><a class="line" href="classNavEKF3.html#ad9b779e49d346aa1b2f57517d0ddfb15"> 1442</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classNavEKF3.html#ad9b779e49d346aa1b2f57517d0ddfb15">NavEKF3::getEulerAngles</a>(<a class="code hl_class" href="classVector3.html">Vector3f</a> &amp;eulers)<span class="keyword"> const</span></div>
<div class="line"><a id="l01443" name="l01443"></a><span class="lineno"> 1443</span><span class="keyword"></span>{</div>
<div class="line"><a id="l01444" name="l01444"></a><span class="lineno"> 1444</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>) {</div>
<div class="line"><a id="l01445" name="l01445"></a><span class="lineno"> 1445</span>        <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[<a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>].<a class="code hl_function" href="classNavEKF3__core.html#a6f8d21f162d7fa8c309a776a561b1f18">getEulerAngles</a>(eulers);</div>
<div class="line"><a id="l01446" name="l01446"></a><span class="lineno"> 1446</span>    }</div>
<div class="line"><a id="l01447" name="l01447"></a><span class="lineno"> 1447</span>}</div>
</div>
<div class="line"><a id="l01448" name="l01448"></a><span class="lineno"> 1448</span> </div>
<div class="line"><a id="l01449" name="l01449"></a><span class="lineno"> 1449</span><span class="comment">// return the transformation matrix from XYZ (body) to NED axes</span></div>
<div class="foldopen" id="foldopen01450" data-start="{" data-end="}">
<div class="line"><a id="l01450" name="l01450"></a><span class="lineno"><a class="line" href="classNavEKF3.html#a2c6a4e02b2ed3af15f3cde86eee2495c"> 1450</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classNavEKF3.html#a2c6a4e02b2ed3af15f3cde86eee2495c">NavEKF3::getRotationBodyToNED</a>(<a class="code hl_class" href="classMatrix3.html">Matrix3f</a> &amp;mat)<span class="keyword"> const</span></div>
<div class="line"><a id="l01451" name="l01451"></a><span class="lineno"> 1451</span><span class="keyword"></span>{</div>
<div class="line"><a id="l01452" name="l01452"></a><span class="lineno"> 1452</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>) {</div>
<div class="line"><a id="l01453" name="l01453"></a><span class="lineno"> 1453</span>        <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[<a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>].<a class="code hl_function" href="classNavEKF3__core.html#a3ebf786bbc226b9f3b2da1e15ec3247d">getRotationBodyToNED</a>(mat);</div>
<div class="line"><a id="l01454" name="l01454"></a><span class="lineno"> 1454</span>    }</div>
<div class="line"><a id="l01455" name="l01455"></a><span class="lineno"> 1455</span>}</div>
</div>
<div class="line"><a id="l01456" name="l01456"></a><span class="lineno"> 1456</span> </div>
<div class="line"><a id="l01457" name="l01457"></a><span class="lineno"> 1457</span><span class="comment">// return the quaternions defining the rotation from XYZ (body) to NED axes</span></div>
<div class="foldopen" id="foldopen01458" data-start="{" data-end="}">
<div class="line"><a id="l01458" name="l01458"></a><span class="lineno"><a class="line" href="classNavEKF3.html#ab2a2ba418967238853115d2f3492ed2d"> 1458</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classNavEKF3.html#ab2a2ba418967238853115d2f3492ed2d">NavEKF3::getQuaternionBodyToNED</a>(int8_t <a class="code hl_variable" href="AP__InternalError_8cpp.html#a02ad7a50d04e0dbf28c6c90a183a0579">instance</a>, <a class="code hl_class" href="classQuaternionT.html">Quaternion</a> &amp;quat)<span class="keyword"> const</span></div>
<div class="line"><a id="l01459" name="l01459"></a><span class="lineno"> 1459</span><span class="keyword"></span>{</div>
<div class="line"><a id="l01460" name="l01460"></a><span class="lineno"> 1460</span>    <span class="keywordflow">if</span> (instance &lt; 0 || instance &gt;= <a class="code hl_variable" href="classNavEKF3.html#a1146c4b7293610f34b6ecfd7ccc5bbb1">num_cores</a>) <a class="code hl_variable" href="AP__InternalError_8cpp.html#a02ad7a50d04e0dbf28c6c90a183a0579">instance</a> = <a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>;</div>
<div class="line"><a id="l01461" name="l01461"></a><span class="lineno"> 1461</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>) {</div>
<div class="line"><a id="l01462" name="l01462"></a><span class="lineno"> 1462</span>        <a class="code hl_class" href="classMatrix3.html">Matrix3f</a> mat;</div>
<div class="line"><a id="l01463" name="l01463"></a><span class="lineno"> 1463</span>        <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[<a class="code hl_variable" href="AP__InternalError_8cpp.html#a02ad7a50d04e0dbf28c6c90a183a0579">instance</a>].<a class="code hl_function" href="classNavEKF3__core.html#a3ebf786bbc226b9f3b2da1e15ec3247d">getRotationBodyToNED</a>(mat);</div>
<div class="line"><a id="l01464" name="l01464"></a><span class="lineno"> 1464</span>        quat.<a class="code hl_function" href="classQuaternionT.html#ab12c50ad4b582277deda302ff9109adf">from_rotation_matrix</a>(mat);</div>
<div class="line"><a id="l01465" name="l01465"></a><span class="lineno"> 1465</span>    }</div>
<div class="line"><a id="l01466" name="l01466"></a><span class="lineno"> 1466</span>}</div>
</div>
<div class="line"><a id="l01467" name="l01467"></a><span class="lineno"> 1467</span> </div>
<div class="line"><a id="l01468" name="l01468"></a><span class="lineno"> 1468</span><span class="comment">// return the quaternions defining the rotation from NED to XYZ (autopilot) axes</span></div>
<div class="foldopen" id="foldopen01469" data-start="{" data-end="}">
<div class="line"><a id="l01469" name="l01469"></a><span class="lineno"><a class="line" href="classNavEKF3.html#a73f352f0f2068062be474efa5fa84514"> 1469</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classNavEKF3.html#a73f352f0f2068062be474efa5fa84514">NavEKF3::getQuaternion</a>(<a class="code hl_class" href="classQuaternionT.html">Quaternion</a> &amp;quat)<span class="keyword"> const</span></div>
<div class="line"><a id="l01470" name="l01470"></a><span class="lineno"> 1470</span><span class="keyword"></span>{</div>
<div class="line"><a id="l01471" name="l01471"></a><span class="lineno"> 1471</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>) {</div>
<div class="line"><a id="l01472" name="l01472"></a><span class="lineno"> 1472</span>        <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[<a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>].<a class="code hl_function" href="classNavEKF3__core.html#a0a3c021b87e1ff291b1c55a1204e7fca">getQuaternion</a>(quat);</div>
<div class="line"><a id="l01473" name="l01473"></a><span class="lineno"> 1473</span>    }</div>
<div class="line"><a id="l01474" name="l01474"></a><span class="lineno"> 1474</span>}</div>
</div>
<div class="line"><a id="l01475" name="l01475"></a><span class="lineno"> 1475</span> </div>
<div class="line"><a id="l01476" name="l01476"></a><span class="lineno"> 1476</span><span class="comment">// return the innovations</span></div>
<div class="foldopen" id="foldopen01477" data-start="{" data-end="}">
<div class="line"><a id="l01477" name="l01477"></a><span class="lineno"><a class="line" href="classNavEKF3.html#a4ad7702179b67ce3ac2fee02d50214a1"> 1477</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classNavEKF3.html#a4ad7702179b67ce3ac2fee02d50214a1">NavEKF3::getInnovations</a>(<a class="code hl_class" href="classVector3.html">Vector3f</a> &amp;velInnov, <a class="code hl_class" href="classVector3.html">Vector3f</a> &amp;posInnov, <a class="code hl_class" href="classVector3.html">Vector3f</a> &amp;magInnov, <span class="keywordtype">float</span> &amp;tasInnov, <span class="keywordtype">float</span> &amp;yawInnov)<span class="keyword"> const</span></div>
<div class="line"><a id="l01478" name="l01478"></a><span class="lineno"> 1478</span><span class="keyword"></span>{</div>
<div class="line"><a id="l01479" name="l01479"></a><span class="lineno"> 1479</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a> == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a id="l01480" name="l01480"></a><span class="lineno"> 1480</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01481" name="l01481"></a><span class="lineno"> 1481</span>    }</div>
<div class="line"><a id="l01482" name="l01482"></a><span class="lineno"> 1482</span> </div>
<div class="line"><a id="l01483" name="l01483"></a><span class="lineno"> 1483</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[<a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>].<a class="code hl_function" href="classNavEKF3__core.html#ad0b5521c00cf78bc9622659c3e24f1e8">getInnovations</a>(velInnov, posInnov, magInnov, tasInnov, yawInnov);</div>
<div class="line"><a id="l01484" name="l01484"></a><span class="lineno"> 1484</span>}</div>
</div>
<div class="line"><a id="l01485" name="l01485"></a><span class="lineno"> 1485</span> </div>
<div class="line"><a id="l01486" name="l01486"></a><span class="lineno"> 1486</span><span class="comment">// return the innovation consistency test ratios for the velocity, position, magnetometer and true airspeed measurements</span></div>
<div class="foldopen" id="foldopen01487" data-start="{" data-end="}">
<div class="line"><a id="l01487" name="l01487"></a><span class="lineno"><a class="line" href="classNavEKF3.html#a2ebb307cbad292e1f1f107d916abbb93"> 1487</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classNavEKF3.html#a2ebb307cbad292e1f1f107d916abbb93">NavEKF3::getVariances</a>(<span class="keywordtype">float</span> &amp;velVar, <span class="keywordtype">float</span> &amp;posVar, <span class="keywordtype">float</span> &amp;hgtVar, <a class="code hl_class" href="classVector3.html">Vector3f</a> &amp;magVar, <span class="keywordtype">float</span> &amp;tasVar, <a class="code hl_class" href="structVector2.html">Vector2f</a> &amp;offset)<span class="keyword"> const</span></div>
<div class="line"><a id="l01488" name="l01488"></a><span class="lineno"> 1488</span><span class="keyword"></span>{</div>
<div class="line"><a id="l01489" name="l01489"></a><span class="lineno"> 1489</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a> == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a id="l01490" name="l01490"></a><span class="lineno"> 1490</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01491" name="l01491"></a><span class="lineno"> 1491</span>    }</div>
<div class="line"><a id="l01492" name="l01492"></a><span class="lineno"> 1492</span> </div>
<div class="line"><a id="l01493" name="l01493"></a><span class="lineno"> 1493</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[<a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>].<a class="code hl_function" href="classNavEKF3__core.html#af6b7a2be6adb12caf10a55a54c820501">getVariances</a>(velVar, posVar, hgtVar, magVar, tasVar, offset);</div>
<div class="line"><a id="l01494" name="l01494"></a><span class="lineno"> 1494</span>}</div>
</div>
<div class="line"><a id="l01495" name="l01495"></a><span class="lineno"> 1495</span> </div>
<div class="line"><a id="l01496" name="l01496"></a><span class="lineno"> 1496</span><span class="comment">// get a source&#39;s velocity innovations</span></div>
<div class="line"><a id="l01497" name="l01497"></a><span class="lineno"> 1497</span><span class="comment">// returns true on success and results are placed in innovations and variances arguments</span></div>
<div class="foldopen" id="foldopen01498" data-start="{" data-end="}">
<div class="line"><a id="l01498" name="l01498"></a><span class="lineno"><a class="line" href="classNavEKF3.html#aa056feabc7a71a63a095831c5fabe6f4"> 1498</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classNavEKF3.html#aa056feabc7a71a63a095831c5fabe6f4">NavEKF3::getVelInnovationsAndVariancesForSource</a>(<a class="code hl_enumeration" href="classAP__NavEKF__Source.html#aa463f183bb6c2c7f2b217792b850af46">AP_NavEKF_Source::SourceXY</a> <a class="code hl_variable" href="AP__Scripting_2generator_2src_2main_8c.html#a0c4aa150664a3347db13aeeb47811829">source</a>, <a class="code hl_class" href="classVector3.html">Vector3f</a> &amp;innovations, <a class="code hl_class" href="classVector3.html">Vector3f</a> &amp;variances)<span class="keyword"> const</span></div>
<div class="line"><a id="l01499" name="l01499"></a><span class="lineno"> 1499</span><span class="keyword"></span>{</div>
<div class="line"><a id="l01500" name="l01500"></a><span class="lineno"> 1500</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>) {</div>
<div class="line"><a id="l01501" name="l01501"></a><span class="lineno"> 1501</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[<a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>].<a class="code hl_function" href="classNavEKF3__core.html#ac25933901b64eab2be59732752774720">getVelInnovationsAndVariancesForSource</a>(<a class="code hl_variable" href="AP__Scripting_2generator_2src_2main_8c.html#a0c4aa150664a3347db13aeeb47811829">source</a>, innovations, variances);</div>
<div class="line"><a id="l01502" name="l01502"></a><span class="lineno"> 1502</span>    }</div>
<div class="line"><a id="l01503" name="l01503"></a><span class="lineno"> 1503</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01504" name="l01504"></a><span class="lineno"> 1504</span>}</div>
</div>
<div class="line"><a id="l01505" name="l01505"></a><span class="lineno"> 1505</span> </div>
<div class="line"><a id="l01506" name="l01506"></a><span class="lineno"> 1506</span><span class="comment">// should we use the compass? This is public so it can be used for</span></div>
<div class="line"><a id="l01507" name="l01507"></a><span class="lineno"> 1507</span><span class="comment">// reporting via ahrs.use_compass()</span></div>
<div class="foldopen" id="foldopen01508" data-start="{" data-end="}">
<div class="line"><a id="l01508" name="l01508"></a><span class="lineno"><a class="line" href="classNavEKF3.html#aceeff801b2a2d6ea9cc9240f02ba0621"> 1508</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classNavEKF3.html#aceeff801b2a2d6ea9cc9240f02ba0621">NavEKF3::use_compass</a>(<span class="keywordtype">void</span>)<span class="keyword"> const</span></div>
<div class="line"><a id="l01509" name="l01509"></a><span class="lineno"> 1509</span><span class="keyword"></span>{</div>
<div class="line"><a id="l01510" name="l01510"></a><span class="lineno"> 1510</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>) {</div>
<div class="line"><a id="l01511" name="l01511"></a><span class="lineno"> 1511</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01512" name="l01512"></a><span class="lineno"> 1512</span>    }</div>
<div class="line"><a id="l01513" name="l01513"></a><span class="lineno"> 1513</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[<a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>].<a class="code hl_function" href="classNavEKF3__core.html#a41309cf6ebc9d6ba6110d3a2c0ee1015">use_compass</a>();</div>
<div class="line"><a id="l01514" name="l01514"></a><span class="lineno"> 1514</span>}</div>
</div>
<div class="line"><a id="l01515" name="l01515"></a><span class="lineno"> 1515</span> </div>
<div class="line"><a id="l01516" name="l01516"></a><span class="lineno"> 1516</span><span class="comment">// are we using (aka fusing) a non-compass yaw?</span></div>
<div class="foldopen" id="foldopen01517" data-start="{" data-end="}">
<div class="line"><a id="l01517" name="l01517"></a><span class="lineno"><a class="line" href="classNavEKF3.html#a6ba0e2b20476552627b074a5629570ad"> 1517</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classNavEKF3.html#a6ba0e2b20476552627b074a5629570ad">NavEKF3::using_noncompass_for_yaw</a>(<span class="keywordtype">void</span>)<span class="keyword"> const</span></div>
<div class="line"><a id="l01518" name="l01518"></a><span class="lineno"> 1518</span><span class="keyword"></span>{</div>
<div class="line"><a id="l01519" name="l01519"></a><span class="lineno"> 1519</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>) {</div>
<div class="line"><a id="l01520" name="l01520"></a><span class="lineno"> 1520</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01521" name="l01521"></a><span class="lineno"> 1521</span>    }</div>
<div class="line"><a id="l01522" name="l01522"></a><span class="lineno"> 1522</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[<a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>].<a class="code hl_function" href="classNavEKF3__core.html#a9cee568bfa2ed120af587a00e9075b48">using_noncompass_for_yaw</a>();</div>
<div class="line"><a id="l01523" name="l01523"></a><span class="lineno"> 1523</span>}</div>
</div>
<div class="line"><a id="l01524" name="l01524"></a><span class="lineno"> 1524</span> </div>
<div class="line"><a id="l01525" name="l01525"></a><span class="lineno"> 1525</span><span class="comment">// are we using (aka fusing) external nav for yaw?</span></div>
<div class="foldopen" id="foldopen01526" data-start="{" data-end="}">
<div class="line"><a id="l01526" name="l01526"></a><span class="lineno"><a class="line" href="classNavEKF3.html#ada4fbb4025ff1d86090afc5e65124f94"> 1526</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classNavEKF3.html#ada4fbb4025ff1d86090afc5e65124f94">NavEKF3::using_extnav_for_yaw</a>()<span class="keyword"> const</span></div>
<div class="line"><a id="l01527" name="l01527"></a><span class="lineno"> 1527</span><span class="keyword"></span>{</div>
<div class="line"><a id="l01528" name="l01528"></a><span class="lineno"> 1528</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>) {</div>
<div class="line"><a id="l01529" name="l01529"></a><span class="lineno"> 1529</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01530" name="l01530"></a><span class="lineno"> 1530</span>    }</div>
<div class="line"><a id="l01531" name="l01531"></a><span class="lineno"> 1531</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[<a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>].<a class="code hl_function" href="classNavEKF3__core.html#a9dc4d3eba1a0797a73ac5ffbf8039239">using_extnav_for_yaw</a>();</div>
<div class="line"><a id="l01532" name="l01532"></a><span class="lineno"> 1532</span>}</div>
</div>
<div class="line"><a id="l01533" name="l01533"></a><span class="lineno"> 1533</span> </div>
<div class="line"><a id="l01534" name="l01534"></a><span class="lineno"> 1534</span><span class="comment">// check if configured to use GPS for horizontal position estimation</span></div>
<div class="foldopen" id="foldopen01535" data-start="{" data-end="}">
<div class="line"><a id="l01535" name="l01535"></a><span class="lineno"><a class="line" href="classNavEKF3.html#aba231648f97d3c7f8c5c4518e7bafa3a"> 1535</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classNavEKF3.html#aba231648f97d3c7f8c5c4518e7bafa3a">NavEKF3::configuredToUseGPSForPosXY</a>(<span class="keywordtype">void</span>)<span class="keyword"> const</span></div>
<div class="line"><a id="l01536" name="l01536"></a><span class="lineno"> 1536</span><span class="keyword"></span>{</div>
<div class="line"><a id="l01537" name="l01537"></a><span class="lineno"> 1537</span>    <span class="comment">// 0 = use 3D velocity, 1 = use 2D velocity, 2 = use no velocity, 3 = do not use GPS</span></div>
<div class="line"><a id="l01538" name="l01538"></a><span class="lineno"> 1538</span>    <span class="keywordflow">return</span>  (<a class="code hl_variable" href="classNavEKF3.html#aaae77db7a65077fa51e3bbb89b9e8b18">sources</a>.<a class="code hl_function" href="classAP__NavEKF__Source.html#a9978923579ec2a26a23436d6e25a1a17">getPosXYSource</a>() == <a class="code hl_enumvalue" href="classAP__NavEKF__Source.html#aa463f183bb6c2c7f2b217792b850af46a8c578de37278ada488d763ea86c5cf20">AP_NavEKF_Source::SourceXY::GPS</a>);</div>
<div class="line"><a id="l01539" name="l01539"></a><span class="lineno"> 1539</span>}</div>
</div>
<div class="line"><a id="l01540" name="l01540"></a><span class="lineno"> 1540</span> </div>
<div class="line"><a id="l01541" name="l01541"></a><span class="lineno"> 1541</span><span class="comment">// write the raw optical flow measurements</span></div>
<div class="line"><a id="l01542" name="l01542"></a><span class="lineno"> 1542</span><span class="comment">// rawFlowQuality is a measured of quality between 0 and 255, with 255 being the best quality</span></div>
<div class="line"><a id="l01543" name="l01543"></a><span class="lineno"> 1543</span><span class="comment">// rawFlowRates are the optical flow rates in rad/sec about the X and Y sensor axes.</span></div>
<div class="line"><a id="l01544" name="l01544"></a><span class="lineno"> 1544</span><span class="comment">// rawGyroRates are the sensor rotation rates in rad/sec measured by the sensors internal gyro</span></div>
<div class="line"><a id="l01545" name="l01545"></a><span class="lineno"> 1545</span><span class="comment">// The sign convention is that a RH physical rotation of the sensor about an axis produces both a positive flow and gyro rate</span></div>
<div class="line"><a id="l01546" name="l01546"></a><span class="lineno"> 1546</span><span class="comment">// msecFlowMeas is the scheduler time in msec when the optical flow data was received from the sensor.</span></div>
<div class="line"><a id="l01547" name="l01547"></a><span class="lineno"> 1547</span><span class="comment">// posOffset is the XYZ flow sensor position in the body frame in m</span></div>
<div class="line"><a id="l01548" name="l01548"></a><span class="lineno"> 1548</span><span class="comment">// heightOverride is the fixed height of the sensor above ground in m, when on rover vehicles. 0 if not used</span></div>
<div class="foldopen" id="foldopen01549" data-start="{" data-end="}">
<div class="line"><a id="l01549" name="l01549"></a><span class="lineno"><a class="line" href="classNavEKF3.html#abbfff219bca13ecd15714afe41e74d06"> 1549</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classNavEKF3.html#abbfff219bca13ecd15714afe41e74d06">NavEKF3::writeOptFlowMeas</a>(<span class="keyword">const</span> uint8_t rawFlowQuality, <span class="keyword">const</span> <a class="code hl_class" href="structVector2.html">Vector2f</a> &amp;rawFlowRates, <span class="keyword">const</span> <a class="code hl_class" href="structVector2.html">Vector2f</a> &amp;rawGyroRates, <span class="keyword">const</span> uint32_t msecFlowMeas, <span class="keyword">const</span> <a class="code hl_class" href="classVector3.html">Vector3f</a> &amp;posOffset, <span class="keywordtype">float</span> heightOverride)</div>
<div class="line"><a id="l01550" name="l01550"></a><span class="lineno"> 1550</span>{</div>
<div class="line"><a id="l01551" name="l01551"></a><span class="lineno"> 1551</span>    <a class="code hl_function" href="namespaceAP.html#a72bac6dee7ddc414f93cbf7cad325f55">AP::dal</a>().<a class="code hl_function" href="classAP__DAL.html#a43811ce43863e6ecf07d93b2e1db97ef">writeOptFlowMeas</a>(rawFlowQuality, rawFlowRates, rawGyroRates, msecFlowMeas, posOffset, heightOverride);</div>
<div class="line"><a id="l01552" name="l01552"></a><span class="lineno"> 1552</span> </div>
<div class="line"><a id="l01553" name="l01553"></a><span class="lineno"> 1553</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>) {</div>
<div class="line"><a id="l01554" name="l01554"></a><span class="lineno"> 1554</span>        <span class="keywordflow">for</span> (uint8_t i=0; i&lt;<a class="code hl_variable" href="classNavEKF3.html#a1146c4b7293610f34b6ecfd7ccc5bbb1">num_cores</a>; i++) {</div>
<div class="line"><a id="l01555" name="l01555"></a><span class="lineno"> 1555</span>            <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[i].<a class="code hl_function" href="classNavEKF3__core.html#aaba64446224961d60c7349327de28b1a">writeOptFlowMeas</a>(rawFlowQuality, rawFlowRates, rawGyroRates, msecFlowMeas, posOffset, heightOverride);</div>
<div class="line"><a id="l01556" name="l01556"></a><span class="lineno"> 1556</span>        }</div>
<div class="line"><a id="l01557" name="l01557"></a><span class="lineno"> 1557</span>    }</div>
<div class="line"><a id="l01558" name="l01558"></a><span class="lineno"> 1558</span>}</div>
</div>
<div class="line"><a id="l01559" name="l01559"></a><span class="lineno"> 1559</span> </div>
<div class="line"><a id="l01560" name="l01560"></a><span class="lineno"> 1560</span><span class="comment">// retrieve latest corrected optical flow samples (used for calibration)</span></div>
<div class="foldopen" id="foldopen01561" data-start="{" data-end="}">
<div class="line"><a id="l01561" name="l01561"></a><span class="lineno"><a class="line" href="classNavEKF3.html#a8ceab35016043bf8a1f9880dd0213839"> 1561</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classNavEKF3.html#a8ceab35016043bf8a1f9880dd0213839">NavEKF3::getOptFlowSample</a>(uint32_t&amp; timeStamp_ms, <a class="code hl_class" href="structVector2.html">Vector2f</a>&amp; flowRate, <a class="code hl_class" href="structVector2.html">Vector2f</a>&amp; bodyRate, <a class="code hl_class" href="structVector2.html">Vector2f</a>&amp; losPred)<span class="keyword"> const</span></div>
<div class="line"><a id="l01562" name="l01562"></a><span class="lineno"> 1562</span><span class="keyword"></span>{</div>
<div class="line"><a id="l01563" name="l01563"></a><span class="lineno"> 1563</span>    <span class="comment">// return optical flow samples from primary core</span></div>
<div class="line"><a id="l01564" name="l01564"></a><span class="lineno"> 1564</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>) {</div>
<div class="line"><a id="l01565" name="l01565"></a><span class="lineno"> 1565</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[<a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>].<a class="code hl_function" href="classNavEKF3__core.html#af41dd3cd7b4d98165245ec8176b86ec6">getOptFlowSample</a>(timeStamp_ms, flowRate, bodyRate, losPred);</div>
<div class="line"><a id="l01566" name="l01566"></a><span class="lineno"> 1566</span>    }</div>
<div class="line"><a id="l01567" name="l01567"></a><span class="lineno"> 1567</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01568" name="l01568"></a><span class="lineno"> 1568</span>}</div>
</div>
<div class="line"><a id="l01569" name="l01569"></a><span class="lineno"> 1569</span> </div>
<div class="line"><a id="l01570" name="l01570"></a><span class="lineno"> 1570</span><span class="comment">// write yaw angle sensor measurements</span></div>
<div class="foldopen" id="foldopen01571" data-start="{" data-end="}">
<div class="line"><a id="l01571" name="l01571"></a><span class="lineno"><a class="line" href="classNavEKF3.html#a5ba740c3b44b020fecd6ab74a806362e"> 1571</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classNavEKF3.html#a5ba740c3b44b020fecd6ab74a806362e">NavEKF3::writeEulerYawAngle</a>(<span class="keywordtype">float</span> yawAngle, <span class="keywordtype">float</span> yawAngleErr, uint32_t timeStamp_ms, uint8_t <a class="code hl_struct" href="structtype.html">type</a>)</div>
<div class="line"><a id="l01572" name="l01572"></a><span class="lineno"> 1572</span>{</div>
<div class="line"><a id="l01573" name="l01573"></a><span class="lineno"> 1573</span>    <a class="code hl_function" href="namespaceAP.html#a72bac6dee7ddc414f93cbf7cad325f55">AP::dal</a>().<a class="code hl_function" href="classAP__DAL.html#ac076a0fb15a7a66d5a2a4d80e14ba900">log_writeEulerYawAngle</a>(yawAngle, yawAngleErr, timeStamp_ms, <a class="code hl_struct" href="structtype.html">type</a>);</div>
<div class="line"><a id="l01574" name="l01574"></a><span class="lineno"> 1574</span> </div>
<div class="line"><a id="l01575" name="l01575"></a><span class="lineno"> 1575</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>) {</div>
<div class="line"><a id="l01576" name="l01576"></a><span class="lineno"> 1576</span>        <span class="keywordflow">for</span> (uint8_t i=0; i&lt;<a class="code hl_variable" href="classNavEKF3.html#a1146c4b7293610f34b6ecfd7ccc5bbb1">num_cores</a>; i++) {</div>
<div class="line"><a id="l01577" name="l01577"></a><span class="lineno"> 1577</span>            <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[i].<a class="code hl_function" href="classNavEKF3__core.html#ac85bec75a60ead6ebb6ea194ca62f52b">writeEulerYawAngle</a>(yawAngle, yawAngleErr, timeStamp_ms, <a class="code hl_struct" href="structtype.html">type</a>);</div>
<div class="line"><a id="l01578" name="l01578"></a><span class="lineno"> 1578</span>        }</div>
<div class="line"><a id="l01579" name="l01579"></a><span class="lineno"> 1579</span>    }</div>
<div class="line"><a id="l01580" name="l01580"></a><span class="lineno"> 1580</span>}</div>
</div>
<div class="line"><a id="l01581" name="l01581"></a><span class="lineno"> 1581</span> </div>
<div class="line"><a id="l01582" name="l01582"></a><span class="lineno"> 1582</span><span class="comment">/*</span></div>
<div class="line"><a id="l01583" name="l01583"></a><span class="lineno"> 1583</span><span class="comment"> * Write position and quaternion data from an external navigation system</span></div>
<div class="line"><a id="l01584" name="l01584"></a><span class="lineno"> 1584</span><span class="comment"> *</span></div>
<div class="line"><a id="l01585" name="l01585"></a><span class="lineno"> 1585</span><span class="comment"> * pos        : XYZ position (m) in a RH navigation frame with the Z axis pointing down and XY axes horizontal. Frame must be aligned with NED if the magnetomer is being used for yaw.</span></div>
<div class="line"><a id="l01586" name="l01586"></a><span class="lineno"> 1586</span><span class="comment"> * quat       : quaternion describing the rotation from navigation frame to body frame</span></div>
<div class="line"><a id="l01587" name="l01587"></a><span class="lineno"> 1587</span><span class="comment"> * posErr     : 1-sigma spherical position error (m)</span></div>
<div class="line"><a id="l01588" name="l01588"></a><span class="lineno"> 1588</span><span class="comment"> * angErr     : 1-sigma spherical angle error (rad)</span></div>
<div class="line"><a id="l01589" name="l01589"></a><span class="lineno"> 1589</span><span class="comment"> * timeStamp_ms : system time the measurement was taken, not the time it was received (mSec)</span></div>
<div class="line"><a id="l01590" name="l01590"></a><span class="lineno"> 1590</span><span class="comment"> * delay_ms   : average delay of external nav system measurements relative to inertial measurements</span></div>
<div class="line"><a id="l01591" name="l01591"></a><span class="lineno"> 1591</span><span class="comment"> * resetTime_ms : system time of the last position reset request (mSec)</span></div>
<div class="line"><a id="l01592" name="l01592"></a><span class="lineno"> 1592</span><span class="comment"> *</span></div>
<div class="line"><a id="l01593" name="l01593"></a><span class="lineno"> 1593</span><span class="comment">*/</span></div>
<div class="foldopen" id="foldopen01594" data-start="{" data-end="}">
<div class="line"><a id="l01594" name="l01594"></a><span class="lineno"><a class="line" href="classNavEKF3.html#a0445676d3c2795b6b0c41f0363a49743"> 1594</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classNavEKF3.html#a0445676d3c2795b6b0c41f0363a49743">NavEKF3::writeExtNavData</a>(<span class="keyword">const</span> <a class="code hl_class" href="classVector3.html">Vector3f</a> &amp;pos, <span class="keyword">const</span> <a class="code hl_class" href="classQuaternionT.html">Quaternion</a> &amp;quat, <span class="keywordtype">float</span> posErr, <span class="keywordtype">float</span> angErr, uint32_t timeStamp_ms, uint16_t <a class="code hl_function" href="RCProtocolTest_8cpp.html#ab59cbd9523fdc9601bf57f555a9f8733">delay_ms</a>, uint32_t resetTime_ms)</div>
<div class="line"><a id="l01595" name="l01595"></a><span class="lineno"> 1595</span>{</div>
<div class="line"><a id="l01596" name="l01596"></a><span class="lineno"> 1596</span>    <a class="code hl_function" href="namespaceAP.html#a72bac6dee7ddc414f93cbf7cad325f55">AP::dal</a>().<a class="code hl_function" href="classAP__DAL.html#af036cd307771df02cf4e3dfc534a175c">writeExtNavData</a>(pos, quat, posErr, angErr, timeStamp_ms, <a class="code hl_function" href="RCProtocolTest_8cpp.html#ab59cbd9523fdc9601bf57f555a9f8733">delay_ms</a>, resetTime_ms);</div>
<div class="line"><a id="l01597" name="l01597"></a><span class="lineno"> 1597</span> </div>
<div class="line"><a id="l01598" name="l01598"></a><span class="lineno"> 1598</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>) {</div>
<div class="line"><a id="l01599" name="l01599"></a><span class="lineno"> 1599</span>        <span class="keywordflow">for</span> (uint8_t i=0; i&lt;<a class="code hl_variable" href="classNavEKF3.html#a1146c4b7293610f34b6ecfd7ccc5bbb1">num_cores</a>; i++) {</div>
<div class="line"><a id="l01600" name="l01600"></a><span class="lineno"> 1600</span>            <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[i].<a class="code hl_function" href="classNavEKF3__core.html#a95cbf578e1001ed755e5817b50512164">writeExtNavData</a>(pos, quat, posErr, angErr, timeStamp_ms, <a class="code hl_function" href="RCProtocolTest_8cpp.html#ab59cbd9523fdc9601bf57f555a9f8733">delay_ms</a>, resetTime_ms);</div>
<div class="line"><a id="l01601" name="l01601"></a><span class="lineno"> 1601</span>        }</div>
<div class="line"><a id="l01602" name="l01602"></a><span class="lineno"> 1602</span>    }</div>
<div class="line"><a id="l01603" name="l01603"></a><span class="lineno"> 1603</span>}</div>
</div>
<div class="line"><a id="l01604" name="l01604"></a><span class="lineno"> 1604</span> </div>
<div class="line"><a id="l01605" name="l01605"></a><span class="lineno"> 1605</span><span class="comment">/* Write velocity data from an external navigation system</span></div>
<div class="line"><a id="l01606" name="l01606"></a><span class="lineno"> 1606</span><span class="comment"> * vel : velocity in NED (m)</span></div>
<div class="line"><a id="l01607" name="l01607"></a><span class="lineno"> 1607</span><span class="comment"> * err : velocity error (m/s)</span></div>
<div class="line"><a id="l01608" name="l01608"></a><span class="lineno"> 1608</span><span class="comment"> * timeStamp_ms : system time the measurement was taken, not the time it was received (mSec)</span></div>
<div class="line"><a id="l01609" name="l01609"></a><span class="lineno"> 1609</span><span class="comment"> * delay_ms : average delay of external nav system measurements relative to inertial measurements</span></div>
<div class="line"><a id="l01610" name="l01610"></a><span class="lineno"> 1610</span><span class="comment">*/</span></div>
<div class="foldopen" id="foldopen01611" data-start="{" data-end="}">
<div class="line"><a id="l01611" name="l01611"></a><span class="lineno"><a class="line" href="classNavEKF3.html#aa9b81b0c96d7feac6e7177fcb235cf23"> 1611</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classNavEKF3.html#aa9b81b0c96d7feac6e7177fcb235cf23">NavEKF3::writeExtNavVelData</a>(<span class="keyword">const</span> <a class="code hl_class" href="classVector3.html">Vector3f</a> &amp;vel, <span class="keywordtype">float</span> err, uint32_t timeStamp_ms, uint16_t <a class="code hl_function" href="RCProtocolTest_8cpp.html#ab59cbd9523fdc9601bf57f555a9f8733">delay_ms</a>)</div>
<div class="line"><a id="l01612" name="l01612"></a><span class="lineno"> 1612</span>{</div>
<div class="line"><a id="l01613" name="l01613"></a><span class="lineno"> 1613</span>    <a class="code hl_function" href="namespaceAP.html#a72bac6dee7ddc414f93cbf7cad325f55">AP::dal</a>().<a class="code hl_function" href="classAP__DAL.html#a268cb9f9573d5b87e679293572cc241e">writeExtNavVelData</a>(vel, err, timeStamp_ms, <a class="code hl_function" href="RCProtocolTest_8cpp.html#ab59cbd9523fdc9601bf57f555a9f8733">delay_ms</a>);</div>
<div class="line"><a id="l01614" name="l01614"></a><span class="lineno"> 1614</span> </div>
<div class="line"><a id="l01615" name="l01615"></a><span class="lineno"> 1615</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>) {</div>
<div class="line"><a id="l01616" name="l01616"></a><span class="lineno"> 1616</span>        <span class="keywordflow">for</span> (uint8_t i=0; i&lt;<a class="code hl_variable" href="classNavEKF3.html#a1146c4b7293610f34b6ecfd7ccc5bbb1">num_cores</a>; i++) {</div>
<div class="line"><a id="l01617" name="l01617"></a><span class="lineno"> 1617</span>            <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[i].<a class="code hl_function" href="classNavEKF3__core.html#a615004e9e54df64123a0cb6afa22f9f2">writeExtNavVelData</a>(vel, err, timeStamp_ms, <a class="code hl_function" href="RCProtocolTest_8cpp.html#ab59cbd9523fdc9601bf57f555a9f8733">delay_ms</a>);</div>
<div class="line"><a id="l01618" name="l01618"></a><span class="lineno"> 1618</span>        }</div>
<div class="line"><a id="l01619" name="l01619"></a><span class="lineno"> 1619</span>    }</div>
<div class="line"><a id="l01620" name="l01620"></a><span class="lineno"> 1620</span>}</div>
</div>
<div class="line"><a id="l01621" name="l01621"></a><span class="lineno"> 1621</span> </div>
<div class="line"><a id="l01622" name="l01622"></a><span class="lineno"> 1622</span><span class="comment">// return data for debugging optical flow fusion</span></div>
<div class="line"><a id="l01623" name="l01623"></a><span class="lineno"> 1623</span><span class="comment">/*</span></div>
<div class="line"><a id="l01624" name="l01624"></a><span class="lineno"> 1624</span><span class="comment"> * Write body frame linear and angular displacement measurements from a visual odometry sensor</span></div>
<div class="line"><a id="l01625" name="l01625"></a><span class="lineno"> 1625</span><span class="comment"> *</span></div>
<div class="line"><a id="l01626" name="l01626"></a><span class="lineno"> 1626</span><span class="comment"> * quality is a normalised confidence value from 0 to 100</span></div>
<div class="line"><a id="l01627" name="l01627"></a><span class="lineno"> 1627</span><span class="comment"> * delPos is the XYZ change in linear position measured in body frame and relative to the inertial reference at timeStamp_ms (m)</span></div>
<div class="line"><a id="l01628" name="l01628"></a><span class="lineno"> 1628</span><span class="comment"> * delAng is the XYZ angular rotation measured in body frame and relative to the inertial reference at timeStamp_ms (rad)</span></div>
<div class="line"><a id="l01629" name="l01629"></a><span class="lineno"> 1629</span><span class="comment"> * delTime is the time interval for the measurement of delPos and delAng (sec)</span></div>
<div class="line"><a id="l01630" name="l01630"></a><span class="lineno"> 1630</span><span class="comment"> * timeStamp_ms is the timestamp of the last image used to calculate delPos and delAng (msec)</span></div>
<div class="line"><a id="l01631" name="l01631"></a><span class="lineno"> 1631</span><span class="comment"> * delay_ms is the average delay of external nav system measurements relative to inertial measurements</span></div>
<div class="line"><a id="l01632" name="l01632"></a><span class="lineno"> 1632</span><span class="comment"> * posOffset is the XYZ body frame position of the camera focal point (m)</span></div>
<div class="line"><a id="l01633" name="l01633"></a><span class="lineno"> 1633</span><span class="comment">*/</span></div>
<div class="foldopen" id="foldopen01634" data-start="{" data-end="}">
<div class="line"><a id="l01634" name="l01634"></a><span class="lineno"><a class="line" href="classNavEKF3.html#aaadcea7282f2afc26000be0fa3d6e6f9"> 1634</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classNavEKF3.html#aaadcea7282f2afc26000be0fa3d6e6f9">NavEKF3::writeBodyFrameOdom</a>(<span class="keywordtype">float</span> quality, <span class="keyword">const</span> <a class="code hl_class" href="classVector3.html">Vector3f</a> &amp;delPos, <span class="keyword">const</span> <a class="code hl_class" href="classVector3.html">Vector3f</a> &amp;delAng, <span class="keywordtype">float</span> delTime, uint32_t timeStamp_ms, uint16_t <a class="code hl_function" href="RCProtocolTest_8cpp.html#ab59cbd9523fdc9601bf57f555a9f8733">delay_ms</a>, <span class="keyword">const</span> <a class="code hl_class" href="classVector3.html">Vector3f</a> &amp;posOffset)</div>
<div class="line"><a id="l01635" name="l01635"></a><span class="lineno"> 1635</span>{</div>
<div class="line"><a id="l01636" name="l01636"></a><span class="lineno"> 1636</span>    <a class="code hl_function" href="namespaceAP.html#a72bac6dee7ddc414f93cbf7cad325f55">AP::dal</a>().<a class="code hl_function" href="classAP__DAL.html#a8af2e09e3df6f96c0b65598df2bd157a">writeBodyFrameOdom</a>(quality, delPos, delAng, delTime, timeStamp_ms, <a class="code hl_function" href="RCProtocolTest_8cpp.html#ab59cbd9523fdc9601bf57f555a9f8733">delay_ms</a>, posOffset);</div>
<div class="line"><a id="l01637" name="l01637"></a><span class="lineno"> 1637</span> </div>
<div class="line"><a id="l01638" name="l01638"></a><span class="lineno"> 1638</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>) {</div>
<div class="line"><a id="l01639" name="l01639"></a><span class="lineno"> 1639</span>        <span class="keywordflow">for</span> (uint8_t i=0; i&lt;<a class="code hl_variable" href="classNavEKF3.html#a1146c4b7293610f34b6ecfd7ccc5bbb1">num_cores</a>; i++) {</div>
<div class="line"><a id="l01640" name="l01640"></a><span class="lineno"> 1640</span>            <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[i].<a class="code hl_function" href="classNavEKF3__core.html#a78e47cc15cbe8fa43353bddc456293ff">writeBodyFrameOdom</a>(quality, delPos, delAng, delTime, timeStamp_ms, <a class="code hl_function" href="RCProtocolTest_8cpp.html#ab59cbd9523fdc9601bf57f555a9f8733">delay_ms</a>, posOffset);</div>
<div class="line"><a id="l01641" name="l01641"></a><span class="lineno"> 1641</span>        }</div>
<div class="line"><a id="l01642" name="l01642"></a><span class="lineno"> 1642</span>    }</div>
<div class="line"><a id="l01643" name="l01643"></a><span class="lineno"> 1643</span>}</div>
</div>
<div class="line"><a id="l01644" name="l01644"></a><span class="lineno"> 1644</span> </div>
<div class="line"><a id="l01645" name="l01645"></a><span class="lineno"> 1645</span><span class="comment">/*</span></div>
<div class="line"><a id="l01646" name="l01646"></a><span class="lineno"> 1646</span><span class="comment"> * Write odometry data from a wheel encoder. The axis of rotation is assumed to be parallel to the vehicle body axis</span></div>
<div class="line"><a id="l01647" name="l01647"></a><span class="lineno"> 1647</span><span class="comment"> *</span></div>
<div class="line"><a id="l01648" name="l01648"></a><span class="lineno"> 1648</span><span class="comment"> * delAng is the measured change in angular position from the previous measurement where a positive rotation is produced by forward motion of the vehicle (rad)</span></div>
<div class="line"><a id="l01649" name="l01649"></a><span class="lineno"> 1649</span><span class="comment"> * delTime is the time interval for the measurement of delAng (sec)</span></div>
<div class="line"><a id="l01650" name="l01650"></a><span class="lineno"> 1650</span><span class="comment"> * timeStamp_ms is the time when the rotation was last measured (msec)</span></div>
<div class="line"><a id="l01651" name="l01651"></a><span class="lineno"> 1651</span><span class="comment"> * posOffset is the XYZ body frame position of the wheel hub (m)</span></div>
<div class="line"><a id="l01652" name="l01652"></a><span class="lineno"> 1652</span><span class="comment">*/</span></div>
<div class="foldopen" id="foldopen01653" data-start="{" data-end="}">
<div class="line"><a id="l01653" name="l01653"></a><span class="lineno"><a class="line" href="classNavEKF3.html#a37c1cacc4d7ceb88a396f4b4ab7260c1"> 1653</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classNavEKF3.html#a37c1cacc4d7ceb88a396f4b4ab7260c1">NavEKF3::writeWheelOdom</a>(<span class="keywordtype">float</span> delAng, <span class="keywordtype">float</span> delTime, uint32_t timeStamp_ms, <span class="keyword">const</span> <a class="code hl_class" href="classVector3.html">Vector3f</a> &amp;posOffset, <span class="keywordtype">float</span> radius)</div>
<div class="line"><a id="l01654" name="l01654"></a><span class="lineno"> 1654</span>{</div>
<div class="line"><a id="l01655" name="l01655"></a><span class="lineno"> 1655</span>    <a class="code hl_function" href="namespaceAP.html#a72bac6dee7ddc414f93cbf7cad325f55">AP::dal</a>().<a class="code hl_function" href="classAP__DAL.html#a339b1248853fa41da787a7e10dd4469b">writeWheelOdom</a>(delAng, delTime, timeStamp_ms, posOffset, radius);</div>
<div class="line"><a id="l01656" name="l01656"></a><span class="lineno"> 1656</span> </div>
<div class="line"><a id="l01657" name="l01657"></a><span class="lineno"> 1657</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>) {</div>
<div class="line"><a id="l01658" name="l01658"></a><span class="lineno"> 1658</span>        <span class="keywordflow">for</span> (uint8_t i=0; i&lt;<a class="code hl_variable" href="classNavEKF3.html#a1146c4b7293610f34b6ecfd7ccc5bbb1">num_cores</a>; i++) {</div>
<div class="line"><a id="l01659" name="l01659"></a><span class="lineno"> 1659</span>            <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[i].<a class="code hl_function" href="classNavEKF3__core.html#ac64b1264894064c1356a16ab3c6e03e0">writeWheelOdom</a>(delAng, delTime, timeStamp_ms, posOffset, radius);</div>
<div class="line"><a id="l01660" name="l01660"></a><span class="lineno"> 1660</span>        }</div>
<div class="line"><a id="l01661" name="l01661"></a><span class="lineno"> 1661</span>    }</div>
<div class="line"><a id="l01662" name="l01662"></a><span class="lineno"> 1662</span>}</div>
</div>
<div class="line"><a id="l01663" name="l01663"></a><span class="lineno"> 1663</span> </div>
<div class="line"><a id="l01664" name="l01664"></a><span class="lineno"> 1664</span><span class="comment">// parameter conversion of EKF3 parameters</span></div>
<div class="foldopen" id="foldopen01665" data-start="{" data-end="}">
<div class="line"><a id="l01665" name="l01665"></a><span class="lineno"><a class="line" href="classNavEKF3.html#ae1973b73315a3cc633c6d350b4a92359"> 1665</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classNavEKF3.html#ae1973b73315a3cc633c6d350b4a92359">NavEKF3::convert_parameters</a>()</div>
<div class="line"><a id="l01666" name="l01666"></a><span class="lineno"> 1666</span>{</div>
<div class="line"><a id="l01667" name="l01667"></a><span class="lineno"> 1667</span>    <span class="comment">// exit immediately if param conversion has been done before</span></div>
<div class="line"><a id="l01668" name="l01668"></a><span class="lineno"> 1668</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classNavEKF3.html#aaae77db7a65077fa51e3bbb89b9e8b18">sources</a>.<a class="code hl_function" href="classAP__NavEKF__Source.html#ada7edb097581d01c0a00a15100287cdf">configured</a>()) {</div>
<div class="line"><a id="l01669" name="l01669"></a><span class="lineno"> 1669</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01670" name="l01670"></a><span class="lineno"> 1670</span>    }</div>
<div class="line"><a id="l01671" name="l01671"></a><span class="lineno"> 1671</span> </div>
<div class="line"><a id="l01672" name="l01672"></a><span class="lineno"> 1672</span>    <span class="comment">// find EKF3&#39;s top level key</span></div>
<div class="line"><a id="l01673" name="l01673"></a><span class="lineno"> 1673</span>    uint16_t k_param_ekf3;</div>
<div class="line"><a id="l01674" name="l01674"></a><span class="lineno"> 1674</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="classAP__Param.html#a97a7b5f898c84c99cb57c76d4ddc870c">AP_Param::find_top_level_key_by_pointer</a>(<span class="keyword">this</span>, k_param_ekf3)) {</div>
<div class="line"><a id="l01675" name="l01675"></a><span class="lineno"> 1675</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01676" name="l01676"></a><span class="lineno"> 1676</span>    }</div>
<div class="line"><a id="l01677" name="l01677"></a><span class="lineno"> 1677</span> </div>
<div class="line"><a id="l01678" name="l01678"></a><span class="lineno"> 1678</span>    <span class="comment">// use EK3_GPS_TYPE to set EK3_SRC1_POSXY, EK3_SRC1_VELXY, EK3_SRC1_VELZ</span></div>
<div class="line"><a id="l01679" name="l01679"></a><span class="lineno"> 1679</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structAP__Param_1_1ConversionInfo.html">AP_Param::ConversionInfo</a> gps_type_info = {k_param_ekf3, 1, <a class="code hl_enumvalue" href="AP__Param_8h.html#ad9ca22a1e508dceea20feda89a344f9aae846a3e359a88214fe754f3862bc9347">AP_PARAM_INT8</a>, <span class="stringliteral">&quot;EK3_GPS_TYPE&quot;</span>};</div>
<div class="line"><a id="l01680" name="l01680"></a><span class="lineno"> 1680</span>    AP_Int8 gps_type_old;</div>
<div class="line"><a id="l01681" name="l01681"></a><span class="lineno"> 1681</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> found_gps_type = <a class="code hl_function" href="classAP__Param.html#a857c14c819b6d550957d0f9c56c379d0">AP_Param::find_old_parameter</a>(&amp;gps_type_info, &amp;gps_type_old);</div>
<div class="line"><a id="l01682" name="l01682"></a><span class="lineno"> 1682</span>    <span class="keywordflow">if</span> (found_gps_type) {</div>
<div class="line"><a id="l01683" name="l01683"></a><span class="lineno"> 1683</span>        <span class="keywordflow">switch</span> (gps_type_old.get()) {</div>
<div class="line"><a id="l01684" name="l01684"></a><span class="lineno"> 1684</span>        <span class="keywordflow">case</span> 0:</div>
<div class="line"><a id="l01685" name="l01685"></a><span class="lineno"> 1685</span>            <span class="comment">// EK3_GPS_TYPE == 0 (GPS 3D Vel and 2D Pos)</span></div>
<div class="line"><a id="l01686" name="l01686"></a><span class="lineno"> 1686</span>            <a class="code hl_function" href="classAP__Param.html#ac821b09bbf13b79a0a6b30c58deaf4a7">AP_Param::set_and_save_by_name</a>(<span class="stringliteral">&quot;EK3_SRC1_POSXY&quot;</span>, (int8_t)<a class="code hl_enumvalue" href="classAP__NavEKF__Source.html#aa463f183bb6c2c7f2b217792b850af46a8c578de37278ada488d763ea86c5cf20">AP_NavEKF_Source::SourceXY::GPS</a>);</div>
<div class="line"><a id="l01687" name="l01687"></a><span class="lineno"> 1687</span>            <a class="code hl_function" href="classAP__Param.html#ac821b09bbf13b79a0a6b30c58deaf4a7">AP_Param::set_and_save_by_name</a>(<span class="stringliteral">&quot;EK3_SRC1_VELXY&quot;</span>, (int8_t)<a class="code hl_enumvalue" href="classAP__NavEKF__Source.html#aa463f183bb6c2c7f2b217792b850af46a8c578de37278ada488d763ea86c5cf20">AP_NavEKF_Source::SourceXY::GPS</a>);</div>
<div class="line"><a id="l01688" name="l01688"></a><span class="lineno"> 1688</span>            <a class="code hl_function" href="classAP__Param.html#ac821b09bbf13b79a0a6b30c58deaf4a7">AP_Param::set_and_save_by_name</a>(<span class="stringliteral">&quot;EK3_SRC1_VELZ&quot;</span>, (int8_t)<a class="code hl_enumvalue" href="classAP__NavEKF__Source.html#a3af9d170046f84985eae7e6ed6b98ad4a8c578de37278ada488d763ea86c5cf20">AP_NavEKF_Source::SourceZ::GPS</a>);</div>
<div class="line"><a id="l01689" name="l01689"></a><span class="lineno"> 1689</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01690" name="l01690"></a><span class="lineno"> 1690</span>        <span class="keywordflow">case</span> 1:</div>
<div class="line"><a id="l01691" name="l01691"></a><span class="lineno"> 1691</span>            <span class="comment">// EK3_GPS_TYPE == 1 (GPS 2D Vel and 2D Pos) then EK3_SRC1_POSXY = GPS(1), EK3_SRC1_VELXY = GPS(1), EK3_SRC1_VELZ = NONE(0)</span></div>
<div class="line"><a id="l01692" name="l01692"></a><span class="lineno"> 1692</span>            <a class="code hl_function" href="classAP__Param.html#ac821b09bbf13b79a0a6b30c58deaf4a7">AP_Param::set_and_save_by_name</a>(<span class="stringliteral">&quot;EK3_SRC1_POSXY&quot;</span>, (int8_t)<a class="code hl_enumvalue" href="classAP__NavEKF__Source.html#aa463f183bb6c2c7f2b217792b850af46a8c578de37278ada488d763ea86c5cf20">AP_NavEKF_Source::SourceXY::GPS</a>);</div>
<div class="line"><a id="l01693" name="l01693"></a><span class="lineno"> 1693</span>            <a class="code hl_function" href="classAP__Param.html#ac821b09bbf13b79a0a6b30c58deaf4a7">AP_Param::set_and_save_by_name</a>(<span class="stringliteral">&quot;EK3_SRC1_VELXY&quot;</span>, (int8_t)<a class="code hl_enumvalue" href="classAP__NavEKF__Source.html#aa463f183bb6c2c7f2b217792b850af46a8c578de37278ada488d763ea86c5cf20">AP_NavEKF_Source::SourceXY::GPS</a>);</div>
<div class="line"><a id="l01694" name="l01694"></a><span class="lineno"> 1694</span>            <a class="code hl_function" href="classAP__Param.html#ac821b09bbf13b79a0a6b30c58deaf4a7">AP_Param::set_and_save_by_name</a>(<span class="stringliteral">&quot;EK3_SRC1_VELZ&quot;</span>, (int8_t)<a class="code hl_enumvalue" href="classAP__NavEKF__Source.html#a3af9d170046f84985eae7e6ed6b98ad4ab50339a10e1de285ac99d4c3990b8693">AP_NavEKF_Source::SourceZ::NONE</a>);</div>
<div class="line"><a id="l01695" name="l01695"></a><span class="lineno"> 1695</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01696" name="l01696"></a><span class="lineno"> 1696</span>        <span class="keywordflow">case</span> 2:</div>
<div class="line"><a id="l01697" name="l01697"></a><span class="lineno"> 1697</span>            <span class="comment">// EK3_GPS_TYPE == 2 (GPS 2D Pos) then EK3_SRC1_POSXY = GPS(1), EK3_SRC1_VELXY = None(0), EK3_SRC1_VELZ = NONE(0)</span></div>
<div class="line"><a id="l01698" name="l01698"></a><span class="lineno"> 1698</span>            <a class="code hl_function" href="classAP__Param.html#ac821b09bbf13b79a0a6b30c58deaf4a7">AP_Param::set_and_save_by_name</a>(<span class="stringliteral">&quot;EK3_SRC1_POSXY&quot;</span>, (int8_t)<a class="code hl_enumvalue" href="classAP__NavEKF__Source.html#aa463f183bb6c2c7f2b217792b850af46a8c578de37278ada488d763ea86c5cf20">AP_NavEKF_Source::SourceXY::GPS</a>);</div>
<div class="line"><a id="l01699" name="l01699"></a><span class="lineno"> 1699</span>            <a class="code hl_function" href="classAP__Param.html#ac821b09bbf13b79a0a6b30c58deaf4a7">AP_Param::set_and_save_by_name</a>(<span class="stringliteral">&quot;EK3_SRC1_VELXY&quot;</span>, (int8_t)<a class="code hl_enumvalue" href="classAP__NavEKF__Source.html#aa463f183bb6c2c7f2b217792b850af46ab50339a10e1de285ac99d4c3990b8693">AP_NavEKF_Source::SourceXY::NONE</a>);</div>
<div class="line"><a id="l01700" name="l01700"></a><span class="lineno"> 1700</span>            <a class="code hl_function" href="classAP__Param.html#ac821b09bbf13b79a0a6b30c58deaf4a7">AP_Param::set_and_save_by_name</a>(<span class="stringliteral">&quot;EK3_SRC1_VELZ&quot;</span>, (int8_t)<a class="code hl_enumvalue" href="classAP__NavEKF__Source.html#a3af9d170046f84985eae7e6ed6b98ad4ab50339a10e1de285ac99d4c3990b8693">AP_NavEKF_Source::SourceZ::NONE</a>);</div>
<div class="line"><a id="l01701" name="l01701"></a><span class="lineno"> 1701</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01702" name="l01702"></a><span class="lineno"> 1702</span>        <span class="keywordflow">case</span> 3:</div>
<div class="line"><a id="l01703" name="l01703"></a><span class="lineno"> 1703</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l01704" name="l01704"></a><span class="lineno"> 1704</span>            <span class="comment">// EK3_GPS_TYPE == 3 (No GPS) we don&#39;t know what to do, could be optical flow, beacon or external nav</span></div>
<div class="line"><a id="l01705" name="l01705"></a><span class="lineno"> 1705</span>            <a class="code hl_variable" href="classNavEKF3.html#aaae77db7a65077fa51e3bbb89b9e8b18">sources</a>.<a class="code hl_function" href="classAP__NavEKF__Source.html#abea913018218a14b824166c4e9392c34">mark_configured</a>();</div>
<div class="line"><a id="l01706" name="l01706"></a><span class="lineno"> 1706</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01707" name="l01707"></a><span class="lineno"> 1707</span>        }</div>
<div class="line"><a id="l01708" name="l01708"></a><span class="lineno"> 1708</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01709" name="l01709"></a><span class="lineno"> 1709</span>        <span class="comment">// mark configured in storage so conversion is only run once</span></div>
<div class="line"><a id="l01710" name="l01710"></a><span class="lineno"> 1710</span>        <a class="code hl_variable" href="classNavEKF3.html#aaae77db7a65077fa51e3bbb89b9e8b18">sources</a>.<a class="code hl_function" href="classAP__NavEKF__Source.html#abea913018218a14b824166c4e9392c34">mark_configured</a>();</div>
<div class="line"><a id="l01711" name="l01711"></a><span class="lineno"> 1711</span>    }</div>
<div class="line"><a id="l01712" name="l01712"></a><span class="lineno"> 1712</span> </div>
<div class="line"><a id="l01713" name="l01713"></a><span class="lineno"> 1713</span>    <span class="comment">// use EK3_ALT_SOURCE to set EK3_SRC1_POSZ</span></div>
<div class="line"><a id="l01714" name="l01714"></a><span class="lineno"> 1714</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structAP__Param_1_1ConversionInfo.html">AP_Param::ConversionInfo</a> alt_source_info = {k_param_ekf3, 9, <a class="code hl_enumvalue" href="AP__Param_8h.html#ad9ca22a1e508dceea20feda89a344f9aae846a3e359a88214fe754f3862bc9347">AP_PARAM_INT8</a>, <span class="stringliteral">&quot;EK3_ALT_SOURCE&quot;</span>};</div>
<div class="line"><a id="l01715" name="l01715"></a><span class="lineno"> 1715</span>    AP_Int8 alt_source_old;</div>
<div class="line"><a id="l01716" name="l01716"></a><span class="lineno"> 1716</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="classAP__Param.html#a857c14c819b6d550957d0f9c56c379d0">AP_Param::find_old_parameter</a>(&amp;alt_source_info, &amp;alt_source_old)) {</div>
<div class="line"><a id="l01717" name="l01717"></a><span class="lineno"> 1717</span>        <span class="keywordflow">switch</span> (alt_source_old.get()) {</div>
<div class="line"><a id="l01718" name="l01718"></a><span class="lineno"> 1718</span>        <span class="keywordflow">case</span> 0:</div>
<div class="line"><a id="l01719" name="l01719"></a><span class="lineno"> 1719</span>            <span class="comment">// EK3_ALT_SOURCE = BARO, the default so do nothing</span></div>
<div class="line"><a id="l01720" name="l01720"></a><span class="lineno"> 1720</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01721" name="l01721"></a><span class="lineno"> 1721</span>        <span class="keywordflow">case</span> 1:</div>
<div class="line"><a id="l01722" name="l01722"></a><span class="lineno"> 1722</span>            <span class="comment">// EK3_ALT_SOURCE == 1 (RangeFinder)</span></div>
<div class="line"><a id="l01723" name="l01723"></a><span class="lineno"> 1723</span>            <a class="code hl_function" href="classAP__Param.html#ac821b09bbf13b79a0a6b30c58deaf4a7">AP_Param::set_and_save_by_name</a>(<span class="stringliteral">&quot;EK3_SRC1_POSZ&quot;</span>, (int8_t)<a class="code hl_enumvalue" href="classAP__NavEKF__Source.html#a3af9d170046f84985eae7e6ed6b98ad4a79f54eff060a61f2f82424bdb8f97eaa">AP_NavEKF_Source::SourceZ::RANGEFINDER</a>);</div>
<div class="line"><a id="l01724" name="l01724"></a><span class="lineno"> 1724</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01725" name="l01725"></a><span class="lineno"> 1725</span>        <span class="keywordflow">case</span> 2:</div>
<div class="line"><a id="l01726" name="l01726"></a><span class="lineno"> 1726</span>            <span class="comment">// EK3_ALT_SOURCE == 2 (GPS)</span></div>
<div class="line"><a id="l01727" name="l01727"></a><span class="lineno"> 1727</span>            <a class="code hl_function" href="classAP__Param.html#ac821b09bbf13b79a0a6b30c58deaf4a7">AP_Param::set_and_save_by_name</a>(<span class="stringliteral">&quot;EK3_SRC1_POSZ&quot;</span>, (int8_t)<a class="code hl_enumvalue" href="classAP__NavEKF__Source.html#a3af9d170046f84985eae7e6ed6b98ad4a8c578de37278ada488d763ea86c5cf20">AP_NavEKF_Source::SourceZ::GPS</a>);</div>
<div class="line"><a id="l01728" name="l01728"></a><span class="lineno"> 1728</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01729" name="l01729"></a><span class="lineno"> 1729</span>        <span class="keywordflow">case</span> 3:</div>
<div class="line"><a id="l01730" name="l01730"></a><span class="lineno"> 1730</span>            <span class="comment">// EK3_ALT_SOURCE == 3 (Beacon)</span></div>
<div class="line"><a id="l01731" name="l01731"></a><span class="lineno"> 1731</span>            <a class="code hl_function" href="classAP__Param.html#ac821b09bbf13b79a0a6b30c58deaf4a7">AP_Param::set_and_save_by_name</a>(<span class="stringliteral">&quot;EK3_SRC1_POSZ&quot;</span>, (int8_t)<a class="code hl_enumvalue" href="classAP__NavEKF__Source.html#a3af9d170046f84985eae7e6ed6b98ad4a4a3fd580504c35a69c1ea7fda0f01fce">AP_NavEKF_Source::SourceZ::BEACON</a>);</div>
<div class="line"><a id="l01732" name="l01732"></a><span class="lineno"> 1732</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01733" name="l01733"></a><span class="lineno"> 1733</span>        <span class="keywordflow">case</span> 4:</div>
<div class="line"><a id="l01734" name="l01734"></a><span class="lineno"> 1734</span>            <span class="comment">// EK3_ALT_SOURCE == 4 (ExtNav)</span></div>
<div class="line"><a id="l01735" name="l01735"></a><span class="lineno"> 1735</span>            <a class="code hl_function" href="classAP__Param.html#ac821b09bbf13b79a0a6b30c58deaf4a7">AP_Param::set_and_save_by_name</a>(<span class="stringliteral">&quot;EK3_SRC1_POSZ&quot;</span>, (int8_t)<a class="code hl_enumvalue" href="classAP__NavEKF__Source.html#a3af9d170046f84985eae7e6ed6b98ad4aeb2e536d157ad22fbb72fb51be8191f7">AP_NavEKF_Source::SourceZ::EXTNAV</a>);</div>
<div class="line"><a id="l01736" name="l01736"></a><span class="lineno"> 1736</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01737" name="l01737"></a><span class="lineno"> 1737</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l01738" name="l01738"></a><span class="lineno"> 1738</span>            <span class="comment">// do nothing</span></div>
<div class="line"><a id="l01739" name="l01739"></a><span class="lineno"> 1739</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01740" name="l01740"></a><span class="lineno"> 1740</span>        }</div>
<div class="line"><a id="l01741" name="l01741"></a><span class="lineno"> 1741</span>    }</div>
<div class="line"><a id="l01742" name="l01742"></a><span class="lineno"> 1742</span> </div>
<div class="line"><a id="l01743" name="l01743"></a><span class="lineno"> 1743</span>    <span class="comment">// use EK3_MAG_CAL to set EK3_SRC1_YAW</span></div>
<div class="line"><a id="l01744" name="l01744"></a><span class="lineno"> 1744</span>    <span class="keywordflow">switch</span> (<a class="code hl_variable" href="classNavEKF3.html#aba7c7886dff66142d6eed35e79fca904">_magCal</a>.get()) {</div>
<div class="line"><a id="l01745" name="l01745"></a><span class="lineno"> 1745</span>    <span class="keywordflow">case</span> 5:</div>
<div class="line"><a id="l01746" name="l01746"></a><span class="lineno"> 1746</span>        <span class="comment">// EK3_MAG_CAL = 5 (External Yaw sensor).  We rely on effective_magCal to interpret old &quot;5&quot; values as &quot;Never&quot;</span></div>
<div class="line"><a id="l01747" name="l01747"></a><span class="lineno"> 1747</span>        <a class="code hl_function" href="classAP__Param.html#ac821b09bbf13b79a0a6b30c58deaf4a7">AP_Param::set_and_save_by_name</a>(<span class="stringliteral">&quot;EK3_SRC1_YAW&quot;</span>, (int8_t)<a class="code hl_enumvalue" href="classAP__NavEKF__Source.html#ac1dcc7cc9e9827ba974eeaeccdaa96bda8c578de37278ada488d763ea86c5cf20">AP_NavEKF_Source::SourceYaw::GPS</a>);</div>
<div class="line"><a id="l01748" name="l01748"></a><span class="lineno"> 1748</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01749" name="l01749"></a><span class="lineno"> 1749</span>    <span class="keywordflow">case</span> 6:</div>
<div class="line"><a id="l01750" name="l01750"></a><span class="lineno"> 1750</span>        <span class="comment">// EK3_MAG_CAL = 6 (ExtYaw with Compass fallback).  We rely on effective_magCal to interpret old &quot;6&quot; values as &quot;When Flying&quot;</span></div>
<div class="line"><a id="l01751" name="l01751"></a><span class="lineno"> 1751</span>        <a class="code hl_function" href="classAP__Param.html#ac821b09bbf13b79a0a6b30c58deaf4a7">AP_Param::set_and_save_by_name</a>(<span class="stringliteral">&quot;EK3_SRC1_YAW&quot;</span>, (int8_t)<a class="code hl_enumvalue" href="classAP__NavEKF__Source.html#ac1dcc7cc9e9827ba974eeaeccdaa96bda63a614587caac5bf9ba9582fcb30ed4c">AP_NavEKF_Source::SourceYaw::GPS_COMPASS_FALLBACK</a>);</div>
<div class="line"><a id="l01752" name="l01752"></a><span class="lineno"> 1752</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01753" name="l01753"></a><span class="lineno"> 1753</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l01754" name="l01754"></a><span class="lineno"> 1754</span>        <span class="comment">// do nothing</span></div>
<div class="line"><a id="l01755" name="l01755"></a><span class="lineno"> 1755</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01756" name="l01756"></a><span class="lineno"> 1756</span>    }</div>
<div class="line"><a id="l01757" name="l01757"></a><span class="lineno"> 1757</span> </div>
<div class="line"><a id="l01758" name="l01758"></a><span class="lineno"> 1758</span>    <span class="comment">// if GPS and optical flow enabled set EK3_SRC2_VELXY to optical flow</span></div>
<div class="line"><a id="l01759" name="l01759"></a><span class="lineno"> 1759</span>    <span class="comment">// EK3_SRC_OPTIONS should default to 1 meaning both GPS and optical flow velocities will be fused</span></div>
<div class="line"><a id="l01760" name="l01760"></a><span class="lineno"> 1760</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="namespaceAP.html#a72bac6dee7ddc414f93cbf7cad325f55">AP::dal</a>().opticalflow_enabled() &amp;&amp; (!found_gps_type || (gps_type_old.get() &lt;= 2))) {</div>
<div class="line"><a id="l01761" name="l01761"></a><span class="lineno"> 1761</span>        <a class="code hl_function" href="classAP__Param.html#ac821b09bbf13b79a0a6b30c58deaf4a7">AP_Param::set_and_save_by_name</a>(<span class="stringliteral">&quot;EK3_SRC2_VELXY&quot;</span>, (int8_t)<a class="code hl_enumvalue" href="classAP__NavEKF__Source.html#aa463f183bb6c2c7f2b217792b850af46a78af6b14ce7ccf280ac26a6adef30488">AP_NavEKF_Source::SourceXY::OPTFLOW</a>);</div>
<div class="line"><a id="l01762" name="l01762"></a><span class="lineno"> 1762</span>    }</div>
<div class="line"><a id="l01763" name="l01763"></a><span class="lineno"> 1763</span>}</div>
</div>
<div class="line"><a id="l01764" name="l01764"></a><span class="lineno"> 1764</span> </div>
<div class="line"><a id="l01765" name="l01765"></a><span class="lineno"> 1765</span><span class="comment">// Set to true if the terrain underneath is stable enough to be used as a height reference</span></div>
<div class="line"><a id="l01766" name="l01766"></a><span class="lineno"> 1766</span><span class="comment">// in combination with a range finder. Set to false if the terrain underneath the vehicle</span></div>
<div class="line"><a id="l01767" name="l01767"></a><span class="lineno"> 1767</span><span class="comment">// cannot be used as a height reference. Use to prevent range finder operation otherwise</span></div>
<div class="line"><a id="l01768" name="l01768"></a><span class="lineno"> 1768</span><span class="comment">// enabled by the combination of EK3_RNG_USE_HGT and EK3_RNG_USE_SPD parameters.</span></div>
<div class="foldopen" id="foldopen01769" data-start="{" data-end="}">
<div class="line"><a id="l01769" name="l01769"></a><span class="lineno"><a class="line" href="classNavEKF3.html#ad3a3ec456aee0f9177f044ae7b3b5376"> 1769</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classNavEKF3.html#ad3a3ec456aee0f9177f044ae7b3b5376">NavEKF3::setTerrainHgtStable</a>(<span class="keywordtype">bool</span> val)</div>
<div class="line"><a id="l01770" name="l01770"></a><span class="lineno"> 1770</span>{</div>
<div class="line"><a id="l01771" name="l01771"></a><span class="lineno"> 1771</span>    <span class="keywordflow">if</span> (val) {</div>
<div class="line"><a id="l01772" name="l01772"></a><span class="lineno"> 1772</span>        <a class="code hl_function" href="namespaceAP.html#a72bac6dee7ddc414f93cbf7cad325f55">AP::dal</a>().<a class="code hl_function" href="classAP__DAL.html#aa41c9b00116bc5c6efc7eb3c6b915ed3">log_event3</a>(<a class="code hl_enumvalue" href="classAP__DAL.html#a30e37092f6f4f89e6f6fc1824737b2aea88c8bd67ae3737ca2d74aab8b6fb6097">AP_DAL::Event::setTerrainHgtStable</a>);</div>
<div class="line"><a id="l01773" name="l01773"></a><span class="lineno"> 1773</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01774" name="l01774"></a><span class="lineno"> 1774</span>        <a class="code hl_function" href="namespaceAP.html#a72bac6dee7ddc414f93cbf7cad325f55">AP::dal</a>().<a class="code hl_function" href="classAP__DAL.html#aa41c9b00116bc5c6efc7eb3c6b915ed3">log_event3</a>(<a class="code hl_enumvalue" href="classAP__DAL.html#a30e37092f6f4f89e6f6fc1824737b2aea6b1c9f2214e9c10dad4571fa4906261b">AP_DAL::Event::unsetTerrainHgtStable</a>);</div>
<div class="line"><a id="l01775" name="l01775"></a><span class="lineno"> 1775</span>    }</div>
<div class="line"><a id="l01776" name="l01776"></a><span class="lineno"> 1776</span> </div>
<div class="line"><a id="l01777" name="l01777"></a><span class="lineno"> 1777</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>) {</div>
<div class="line"><a id="l01778" name="l01778"></a><span class="lineno"> 1778</span>        <span class="keywordflow">for</span> (uint8_t i=0; i&lt;<a class="code hl_variable" href="classNavEKF3.html#a1146c4b7293610f34b6ecfd7ccc5bbb1">num_cores</a>; i++) {</div>
<div class="line"><a id="l01779" name="l01779"></a><span class="lineno"> 1779</span>            <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[i].<a class="code hl_function" href="classNavEKF3__core.html#a1539785d1188622740f6bce08e5edfbd">setTerrainHgtStable</a>(val);</div>
<div class="line"><a id="l01780" name="l01780"></a><span class="lineno"> 1780</span>        }</div>
<div class="line"><a id="l01781" name="l01781"></a><span class="lineno"> 1781</span>    }</div>
<div class="line"><a id="l01782" name="l01782"></a><span class="lineno"> 1782</span> </div>
<div class="line"><a id="l01783" name="l01783"></a><span class="lineno"> 1783</span>}</div>
</div>
<div class="line"><a id="l01784" name="l01784"></a><span class="lineno"> 1784</span> </div>
<div class="line"><a id="l01785" name="l01785"></a><span class="lineno"> 1785</span><span class="comment">/*</span></div>
<div class="line"><a id="l01786" name="l01786"></a><span class="lineno"> 1786</span><span class="comment">  return the filter fault status as a bitmasked integer</span></div>
<div class="line"><a id="l01787" name="l01787"></a><span class="lineno"> 1787</span><span class="comment">  0 = quaternions are NaN</span></div>
<div class="line"><a id="l01788" name="l01788"></a><span class="lineno"> 1788</span><span class="comment">  1 = velocities are NaN</span></div>
<div class="line"><a id="l01789" name="l01789"></a><span class="lineno"> 1789</span><span class="comment">  2 = badly conditioned X magnetometer fusion</span></div>
<div class="line"><a id="l01790" name="l01790"></a><span class="lineno"> 1790</span><span class="comment">  3 = badly conditioned Y magnetometer fusion</span></div>
<div class="line"><a id="l01791" name="l01791"></a><span class="lineno"> 1791</span><span class="comment">  4 = badly conditioned Z magnetometer fusion</span></div>
<div class="line"><a id="l01792" name="l01792"></a><span class="lineno"> 1792</span><span class="comment">  5 = badly conditioned airspeed fusion</span></div>
<div class="line"><a id="l01793" name="l01793"></a><span class="lineno"> 1793</span><span class="comment">  6 = badly conditioned synthetic sideslip fusion</span></div>
<div class="line"><a id="l01794" name="l01794"></a><span class="lineno"> 1794</span><span class="comment">  7 = filter is not initialised</span></div>
<div class="line"><a id="l01795" name="l01795"></a><span class="lineno"> 1795</span><span class="comment">*/</span></div>
<div class="foldopen" id="foldopen01796" data-start="{" data-end="}">
<div class="line"><a id="l01796" name="l01796"></a><span class="lineno"><a class="line" href="classNavEKF3.html#a089a84c0e47cf115075baf4f8c50a472"> 1796</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classNavEKF3.html#a089a84c0e47cf115075baf4f8c50a472">NavEKF3::getFilterFaults</a>(uint16_t &amp;faults)<span class="keyword"> const</span></div>
<div class="line"><a id="l01797" name="l01797"></a><span class="lineno"> 1797</span><span class="keyword"></span>{</div>
<div class="line"><a id="l01798" name="l01798"></a><span class="lineno"> 1798</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>) {</div>
<div class="line"><a id="l01799" name="l01799"></a><span class="lineno"> 1799</span>        <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[<a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>].<a class="code hl_function" href="classNavEKF3__core.html#a93505e1079be2ea93f2e0cac8e3cd5d4">getFilterFaults</a>(faults);</div>
<div class="line"><a id="l01800" name="l01800"></a><span class="lineno"> 1800</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01801" name="l01801"></a><span class="lineno"> 1801</span>        faults = 0;</div>
<div class="line"><a id="l01802" name="l01802"></a><span class="lineno"> 1802</span>    }</div>
<div class="line"><a id="l01803" name="l01803"></a><span class="lineno"> 1803</span>}</div>
</div>
<div class="line"><a id="l01804" name="l01804"></a><span class="lineno"> 1804</span> </div>
<div class="line"><a id="l01805" name="l01805"></a><span class="lineno"> 1805</span><span class="comment">/*</span></div>
<div class="line"><a id="l01806" name="l01806"></a><span class="lineno"> 1806</span><span class="comment">  return filter status flags</span></div>
<div class="line"><a id="l01807" name="l01807"></a><span class="lineno"> 1807</span><span class="comment">*/</span></div>
<div class="foldopen" id="foldopen01808" data-start="{" data-end="}">
<div class="line"><a id="l01808" name="l01808"></a><span class="lineno"><a class="line" href="classNavEKF3.html#a56a3f163c822ed88e43a107442e012a9"> 1808</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classNavEKF3.html#a56a3f163c822ed88e43a107442e012a9">NavEKF3::getFilterStatus</a>(<a class="code hl_union" href="unionnav__filter__status.html">nav_filter_status</a> &amp;<a class="code hl_variable" href="routing_8cpp.html#acdef7b92239f1e607ef6caa33a16d2ed">status</a>)<span class="keyword"> const</span></div>
<div class="line"><a id="l01809" name="l01809"></a><span class="lineno"> 1809</span><span class="keyword"></span>{</div>
<div class="line"><a id="l01810" name="l01810"></a><span class="lineno"> 1810</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>) {</div>
<div class="line"><a id="l01811" name="l01811"></a><span class="lineno"> 1811</span>        <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[<a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>].<a class="code hl_function" href="classNavEKF3__core.html#a0367f32f87569616404164da99b5c83f">getFilterStatus</a>(<a class="code hl_variable" href="routing_8cpp.html#acdef7b92239f1e607ef6caa33a16d2ed">status</a>);</div>
<div class="line"><a id="l01812" name="l01812"></a><span class="lineno"> 1812</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01813" name="l01813"></a><span class="lineno"> 1813</span>        memset(&amp;<a class="code hl_variable" href="routing_8cpp.html#acdef7b92239f1e607ef6caa33a16d2ed">status</a>, 0, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="routing_8cpp.html#acdef7b92239f1e607ef6caa33a16d2ed">status</a>));</div>
<div class="line"><a id="l01814" name="l01814"></a><span class="lineno"> 1814</span>    }</div>
<div class="line"><a id="l01815" name="l01815"></a><span class="lineno"> 1815</span>}</div>
</div>
<div class="line"><a id="l01816" name="l01816"></a><span class="lineno"> 1816</span> </div>
<div class="line"><a id="l01817" name="l01817"></a><span class="lineno"> 1817</span><span class="comment">// send an EKF_STATUS_REPORT message to GCS</span></div>
<div class="foldopen" id="foldopen01818" data-start="{" data-end="}">
<div class="line"><a id="l01818" name="l01818"></a><span class="lineno"><a class="line" href="classNavEKF3.html#a9499f7b52b4e54c6d8f26602ac8f00aa"> 1818</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classNavEKF3.html#a9499f7b52b4e54c6d8f26602ac8f00aa">NavEKF3::send_status_report</a>(<a class="code hl_class" href="classGCS__MAVLINK.html">GCS_MAVLINK</a> &amp;link)<span class="keyword"> const</span></div>
<div class="line"><a id="l01819" name="l01819"></a><span class="lineno"> 1819</span><span class="keyword"></span>{</div>
<div class="line"><a id="l01820" name="l01820"></a><span class="lineno"> 1820</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>) {</div>
<div class="line"><a id="l01821" name="l01821"></a><span class="lineno"> 1821</span>        <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[<a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>].<a class="code hl_function" href="classNavEKF3__core.html#aff3490a1bf2ebe36bbeed39df963f451">send_status_report</a>(link);</div>
<div class="line"><a id="l01822" name="l01822"></a><span class="lineno"> 1822</span>    }</div>
<div class="line"><a id="l01823" name="l01823"></a><span class="lineno"> 1823</span>}</div>
</div>
<div class="line"><a id="l01824" name="l01824"></a><span class="lineno"> 1824</span> </div>
<div class="line"><a id="l01825" name="l01825"></a><span class="lineno"> 1825</span><span class="comment">// provides the height limit to be observed by the control loops</span></div>
<div class="line"><a id="l01826" name="l01826"></a><span class="lineno"> 1826</span><span class="comment">// returns false if no height limiting is required</span></div>
<div class="line"><a id="l01827" name="l01827"></a><span class="lineno"> 1827</span><span class="comment">// this is needed to ensure the vehicle does not fly too high when using optical flow navigation</span></div>
<div class="foldopen" id="foldopen01828" data-start="{" data-end="}">
<div class="line"><a id="l01828" name="l01828"></a><span class="lineno"><a class="line" href="classNavEKF3.html#a1da07a39c9d0a37f4da1b4b9c208338c"> 1828</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classNavEKF3.html#a1da07a39c9d0a37f4da1b4b9c208338c">NavEKF3::getHeightControlLimit</a>(<span class="keywordtype">float</span> &amp;height)<span class="keyword"> const</span></div>
<div class="line"><a id="l01829" name="l01829"></a><span class="lineno"> 1829</span><span class="keyword"></span>{</div>
<div class="line"><a id="l01830" name="l01830"></a><span class="lineno"> 1830</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>) {</div>
<div class="line"><a id="l01831" name="l01831"></a><span class="lineno"> 1831</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01832" name="l01832"></a><span class="lineno"> 1832</span>    }</div>
<div class="line"><a id="l01833" name="l01833"></a><span class="lineno"> 1833</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[<a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>].<a class="code hl_function" href="classNavEKF3__core.html#aaf10db9ffc05b032efdfad3529334fcb">getHeightControlLimit</a>(height);</div>
<div class="line"><a id="l01834" name="l01834"></a><span class="lineno"> 1834</span>}</div>
</div>
<div class="line"><a id="l01835" name="l01835"></a><span class="lineno"> 1835</span> </div>
<div class="line"><a id="l01836" name="l01836"></a><span class="lineno"> 1836</span><span class="comment">// Returns the amount of yaw angle change (in radians) due to the last yaw angle reset or core selection switch</span></div>
<div class="line"><a id="l01837" name="l01837"></a><span class="lineno"> 1837</span><span class="comment">// Returns the time of the last yaw angle reset or 0 if no reset or core switch has ever occurred</span></div>
<div class="line"><a id="l01838" name="l01838"></a><span class="lineno"> 1838</span><span class="comment">// Where there are multiple consumers, they must access this function on the same frame as each other</span></div>
<div class="foldopen" id="foldopen01839" data-start="{" data-end="}">
<div class="line"><a id="l01839" name="l01839"></a><span class="lineno"><a class="line" href="classNavEKF3.html#a0dfa237b7b3cf14f0f99eb91fe539cea"> 1839</a></span>uint32_t <a class="code hl_function" href="classNavEKF3.html#a0dfa237b7b3cf14f0f99eb91fe539cea">NavEKF3::getLastYawResetAngle</a>(<span class="keywordtype">float</span> &amp;yawAngDelta)</div>
<div class="line"><a id="l01840" name="l01840"></a><span class="lineno"> 1840</span>{</div>
<div class="line"><a id="l01841" name="l01841"></a><span class="lineno"> 1841</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>) {</div>
<div class="line"><a id="l01842" name="l01842"></a><span class="lineno"> 1842</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l01843" name="l01843"></a><span class="lineno"> 1843</span>    }</div>
<div class="line"><a id="l01844" name="l01844"></a><span class="lineno"> 1844</span> </div>
<div class="line"><a id="l01845" name="l01845"></a><span class="lineno"> 1845</span>    yawAngDelta = 0.0f;</div>
<div class="line"><a id="l01846" name="l01846"></a><span class="lineno"> 1846</span> </div>
<div class="line"><a id="l01847" name="l01847"></a><span class="lineno"> 1847</span>    <span class="comment">// Do the conversion to msec in one place</span></div>
<div class="line"><a id="l01848" name="l01848"></a><span class="lineno"> 1848</span>    uint32_t now_time_ms = <a class="code hl_variable" href="classNavEKF3.html#abc8f4be833ed62ad269ae9a2110c3e76">imuSampleTime_us</a> / 1000;</div>
<div class="line"><a id="l01849" name="l01849"></a><span class="lineno"> 1849</span> </div>
<div class="line"><a id="l01850" name="l01850"></a><span class="lineno"> 1850</span>    <span class="comment">// The last time we switched to the current primary core is the first reset event</span></div>
<div class="line"><a id="l01851" name="l01851"></a><span class="lineno"> 1851</span>    uint32_t lastYawReset_ms = <a class="code hl_variable" href="classNavEKF3.html#a2e737c2728f9e9a4ac197496f2b97746">yaw_reset_data</a>.last_primary_change;</div>
<div class="line"><a id="l01852" name="l01852"></a><span class="lineno"> 1852</span> </div>
<div class="line"><a id="l01853" name="l01853"></a><span class="lineno"> 1853</span>    <span class="comment">// There has been a change notification in the primary core that the controller has not consumed</span></div>
<div class="line"><a id="l01854" name="l01854"></a><span class="lineno"> 1854</span>    <span class="comment">// or this is a repeated access</span></div>
<div class="line"><a id="l01855" name="l01855"></a><span class="lineno"> 1855</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classNavEKF3.html#a2e737c2728f9e9a4ac197496f2b97746">yaw_reset_data</a>.core_changed || <a class="code hl_variable" href="classNavEKF3.html#a2e737c2728f9e9a4ac197496f2b97746">yaw_reset_data</a>.last_function_call == now_time_ms) {</div>
<div class="line"><a id="l01856" name="l01856"></a><span class="lineno"> 1856</span>        yawAngDelta = <a class="code hl_variable" href="classNavEKF3.html#a2e737c2728f9e9a4ac197496f2b97746">yaw_reset_data</a>.core_delta;</div>
<div class="line"><a id="l01857" name="l01857"></a><span class="lineno"> 1857</span>        <a class="code hl_variable" href="classNavEKF3.html#a2e737c2728f9e9a4ac197496f2b97746">yaw_reset_data</a>.core_changed = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01858" name="l01858"></a><span class="lineno"> 1858</span>    }</div>
<div class="line"><a id="l01859" name="l01859"></a><span class="lineno"> 1859</span> </div>
<div class="line"><a id="l01860" name="l01860"></a><span class="lineno"> 1860</span>    <span class="comment">// Record last time controller got the yaw reset</span></div>
<div class="line"><a id="l01861" name="l01861"></a><span class="lineno"> 1861</span>    <a class="code hl_variable" href="classNavEKF3.html#a2e737c2728f9e9a4ac197496f2b97746">yaw_reset_data</a>.last_function_call = now_time_ms;</div>
<div class="line"><a id="l01862" name="l01862"></a><span class="lineno"> 1862</span> </div>
<div class="line"><a id="l01863" name="l01863"></a><span class="lineno"> 1863</span>    <span class="comment">// There has been a reset inside the core since we switched so update the time and delta</span></div>
<div class="line"><a id="l01864" name="l01864"></a><span class="lineno"> 1864</span>    <span class="keywordtype">float</span> temp_yawAng;</div>
<div class="line"><a id="l01865" name="l01865"></a><span class="lineno"> 1865</span>    uint32_t lastCoreYawReset_ms = <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[<a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>].<a class="code hl_function" href="classNavEKF3__core.html#a48263af5835a86691625db1a0a27364e">getLastYawResetAngle</a>(temp_yawAng);</div>
<div class="line"><a id="l01866" name="l01866"></a><span class="lineno"> 1866</span>    <span class="keywordflow">if</span> (lastCoreYawReset_ms &gt; lastYawReset_ms) {</div>
<div class="line"><a id="l01867" name="l01867"></a><span class="lineno"> 1867</span>        yawAngDelta = <a class="code hl_function" href="AP__Math_8cpp.html#ae77517d032abb1e1b525d2b43ff9a27d">wrap_PI</a>(yawAngDelta + temp_yawAng);</div>
<div class="line"><a id="l01868" name="l01868"></a><span class="lineno"> 1868</span>        lastYawReset_ms = lastCoreYawReset_ms;</div>
<div class="line"><a id="l01869" name="l01869"></a><span class="lineno"> 1869</span>    }</div>
<div class="line"><a id="l01870" name="l01870"></a><span class="lineno"> 1870</span> </div>
<div class="line"><a id="l01871" name="l01871"></a><span class="lineno"> 1871</span>    <span class="keywordflow">return</span> lastYawReset_ms;</div>
<div class="line"><a id="l01872" name="l01872"></a><span class="lineno"> 1872</span>}</div>
</div>
<div class="line"><a id="l01873" name="l01873"></a><span class="lineno"> 1873</span> </div>
<div class="line"><a id="l01874" name="l01874"></a><span class="lineno"> 1874</span><span class="comment">// Returns the amount of NE position change due to the last position reset or core switch in metres</span></div>
<div class="line"><a id="l01875" name="l01875"></a><span class="lineno"> 1875</span><span class="comment">// Returns the time of the last reset or 0 if no reset or core switch has ever occurred</span></div>
<div class="line"><a id="l01876" name="l01876"></a><span class="lineno"> 1876</span><span class="comment">// Where there are multiple consumers, they must access this function on the same frame as each other</span></div>
<div class="foldopen" id="foldopen01877" data-start="{" data-end="}">
<div class="line"><a id="l01877" name="l01877"></a><span class="lineno"><a class="line" href="classNavEKF3.html#a48b06963494d6987aa9b204276f354e3"> 1877</a></span>uint32_t <a class="code hl_function" href="classNavEKF3.html#a48b06963494d6987aa9b204276f354e3">NavEKF3::getLastPosNorthEastReset</a>(<a class="code hl_class" href="structVector2.html">Vector2f</a> &amp;posDelta)</div>
<div class="line"><a id="l01878" name="l01878"></a><span class="lineno"> 1878</span>{</div>
<div class="line"><a id="l01879" name="l01879"></a><span class="lineno"> 1879</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>) {</div>
<div class="line"><a id="l01880" name="l01880"></a><span class="lineno"> 1880</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l01881" name="l01881"></a><span class="lineno"> 1881</span>    }</div>
<div class="line"><a id="l01882" name="l01882"></a><span class="lineno"> 1882</span> </div>
<div class="line"><a id="l01883" name="l01883"></a><span class="lineno"> 1883</span>    posDelta.<a class="code hl_function" href="structVector2.html#a6b537328ae913e3e7267b539e7a4af92">zero</a>();</div>
<div class="line"><a id="l01884" name="l01884"></a><span class="lineno"> 1884</span> </div>
<div class="line"><a id="l01885" name="l01885"></a><span class="lineno"> 1885</span>    <span class="comment">// Do the conversion to msec in one place</span></div>
<div class="line"><a id="l01886" name="l01886"></a><span class="lineno"> 1886</span>    uint32_t now_time_ms = <a class="code hl_variable" href="classNavEKF3.html#abc8f4be833ed62ad269ae9a2110c3e76">imuSampleTime_us</a> / 1000;</div>
<div class="line"><a id="l01887" name="l01887"></a><span class="lineno"> 1887</span> </div>
<div class="line"><a id="l01888" name="l01888"></a><span class="lineno"> 1888</span>    <span class="comment">// The last time we switched to the current primary core is the first reset event</span></div>
<div class="line"><a id="l01889" name="l01889"></a><span class="lineno"> 1889</span>    uint32_t lastPosReset_ms = <a class="code hl_variable" href="classNavEKF3.html#aa5976f864942fc0e32388caca1121074">pos_reset_data</a>.last_primary_change;</div>
<div class="line"><a id="l01890" name="l01890"></a><span class="lineno"> 1890</span> </div>
<div class="line"><a id="l01891" name="l01891"></a><span class="lineno"> 1891</span>    <span class="comment">// There has been a change in the primary core that the controller has not consumed</span></div>
<div class="line"><a id="l01892" name="l01892"></a><span class="lineno"> 1892</span>    <span class="comment">// allow for multiple consumers on the same frame</span></div>
<div class="line"><a id="l01893" name="l01893"></a><span class="lineno"> 1893</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classNavEKF3.html#aa5976f864942fc0e32388caca1121074">pos_reset_data</a>.core_changed || <a class="code hl_variable" href="classNavEKF3.html#aa5976f864942fc0e32388caca1121074">pos_reset_data</a>.last_function_call == now_time_ms) {</div>
<div class="line"><a id="l01894" name="l01894"></a><span class="lineno"> 1894</span>        posDelta = <a class="code hl_variable" href="classNavEKF3.html#aa5976f864942fc0e32388caca1121074">pos_reset_data</a>.core_delta;</div>
<div class="line"><a id="l01895" name="l01895"></a><span class="lineno"> 1895</span>        <a class="code hl_variable" href="classNavEKF3.html#aa5976f864942fc0e32388caca1121074">pos_reset_data</a>.core_changed = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01896" name="l01896"></a><span class="lineno"> 1896</span>    }</div>
<div class="line"><a id="l01897" name="l01897"></a><span class="lineno"> 1897</span> </div>
<div class="line"><a id="l01898" name="l01898"></a><span class="lineno"> 1898</span>    <span class="comment">// Record last time controller got the position reset</span></div>
<div class="line"><a id="l01899" name="l01899"></a><span class="lineno"> 1899</span>    <a class="code hl_variable" href="classNavEKF3.html#aa5976f864942fc0e32388caca1121074">pos_reset_data</a>.last_function_call = now_time_ms;</div>
<div class="line"><a id="l01900" name="l01900"></a><span class="lineno"> 1900</span> </div>
<div class="line"><a id="l01901" name="l01901"></a><span class="lineno"> 1901</span>    <span class="comment">// There has been a reset inside the core since we switched so update the time and delta</span></div>
<div class="line"><a id="l01902" name="l01902"></a><span class="lineno"> 1902</span>    <a class="code hl_class" href="structVector2.html">Vector2f</a> tempPosDelta;</div>
<div class="line"><a id="l01903" name="l01903"></a><span class="lineno"> 1903</span>    uint32_t lastCorePosReset_ms = <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[<a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>].<a class="code hl_function" href="classNavEKF3__core.html#ada44d13b68ddfd4b28337d5e52921ce7">getLastPosNorthEastReset</a>(tempPosDelta);</div>
<div class="line"><a id="l01904" name="l01904"></a><span class="lineno"> 1904</span>    <span class="keywordflow">if</span> (lastCorePosReset_ms &gt; lastPosReset_ms) {</div>
<div class="line"><a id="l01905" name="l01905"></a><span class="lineno"> 1905</span>        posDelta = posDelta + tempPosDelta;</div>
<div class="line"><a id="l01906" name="l01906"></a><span class="lineno"> 1906</span>        lastPosReset_ms = lastCorePosReset_ms;</div>
<div class="line"><a id="l01907" name="l01907"></a><span class="lineno"> 1907</span>    }</div>
<div class="line"><a id="l01908" name="l01908"></a><span class="lineno"> 1908</span> </div>
<div class="line"><a id="l01909" name="l01909"></a><span class="lineno"> 1909</span>    <span class="keywordflow">return</span> lastPosReset_ms;</div>
<div class="line"><a id="l01910" name="l01910"></a><span class="lineno"> 1910</span>}</div>
</div>
<div class="line"><a id="l01911" name="l01911"></a><span class="lineno"> 1911</span> </div>
<div class="line"><a id="l01912" name="l01912"></a><span class="lineno"> 1912</span><span class="comment">// return the amount of NE velocity change due to the last velocity reset in metres/sec</span></div>
<div class="line"><a id="l01913" name="l01913"></a><span class="lineno"> 1913</span><span class="comment">// returns the time of the last reset or 0 if no reset has ever occurred</span></div>
<div class="foldopen" id="foldopen01914" data-start="{" data-end="}">
<div class="line"><a id="l01914" name="l01914"></a><span class="lineno"><a class="line" href="classNavEKF3.html#a2f3077aaa9dd2f1936b1f5ce82463d5d"> 1914</a></span>uint32_t <a class="code hl_function" href="classNavEKF3.html#a2f3077aaa9dd2f1936b1f5ce82463d5d">NavEKF3::getLastVelNorthEastReset</a>(<a class="code hl_class" href="structVector2.html">Vector2f</a> &amp;vel)<span class="keyword"> const</span></div>
<div class="line"><a id="l01915" name="l01915"></a><span class="lineno"> 1915</span><span class="keyword"></span>{</div>
<div class="line"><a id="l01916" name="l01916"></a><span class="lineno"> 1916</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>) {</div>
<div class="line"><a id="l01917" name="l01917"></a><span class="lineno"> 1917</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l01918" name="l01918"></a><span class="lineno"> 1918</span>    }</div>
<div class="line"><a id="l01919" name="l01919"></a><span class="lineno"> 1919</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[<a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>].<a class="code hl_function" href="classNavEKF3__core.html#acd2cb62d0969fba455275cab5fa636c1">getLastVelNorthEastReset</a>(vel);</div>
<div class="line"><a id="l01920" name="l01920"></a><span class="lineno"> 1920</span>}</div>
</div>
<div class="line"><a id="l01921" name="l01921"></a><span class="lineno"> 1921</span> </div>
<div class="line"><a id="l01922" name="l01922"></a><span class="lineno"> 1922</span><span class="comment">// Returns the amount of vertical position change due to the last reset or core switch in metres</span></div>
<div class="line"><a id="l01923" name="l01923"></a><span class="lineno"> 1923</span><span class="comment">// Returns the time of the last reset or 0 if no reset or core switch has ever occurred</span></div>
<div class="line"><a id="l01924" name="l01924"></a><span class="lineno"> 1924</span><span class="comment">// Where there are multiple consumers, they must access this function on the same frame as each other</span></div>
<div class="foldopen" id="foldopen01925" data-start="{" data-end="}">
<div class="line"><a id="l01925" name="l01925"></a><span class="lineno"><a class="line" href="classNavEKF3.html#af8f633712a464fdef83c39ed1baf84cd"> 1925</a></span>uint32_t <a class="code hl_function" href="classNavEKF3.html#af8f633712a464fdef83c39ed1baf84cd">NavEKF3::getLastPosDownReset</a>(<span class="keywordtype">float</span> &amp;posDelta)</div>
<div class="line"><a id="l01926" name="l01926"></a><span class="lineno"> 1926</span>{</div>
<div class="line"><a id="l01927" name="l01927"></a><span class="lineno"> 1927</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>) {</div>
<div class="line"><a id="l01928" name="l01928"></a><span class="lineno"> 1928</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l01929" name="l01929"></a><span class="lineno"> 1929</span>    }</div>
<div class="line"><a id="l01930" name="l01930"></a><span class="lineno"> 1930</span> </div>
<div class="line"><a id="l01931" name="l01931"></a><span class="lineno"> 1931</span>    posDelta = 0.0f;</div>
<div class="line"><a id="l01932" name="l01932"></a><span class="lineno"> 1932</span> </div>
<div class="line"><a id="l01933" name="l01933"></a><span class="lineno"> 1933</span>    <span class="comment">// Do the conversion to msec in one place</span></div>
<div class="line"><a id="l01934" name="l01934"></a><span class="lineno"> 1934</span>    uint32_t now_time_ms = <a class="code hl_variable" href="classNavEKF3.html#abc8f4be833ed62ad269ae9a2110c3e76">imuSampleTime_us</a> / 1000;</div>
<div class="line"><a id="l01935" name="l01935"></a><span class="lineno"> 1935</span> </div>
<div class="line"><a id="l01936" name="l01936"></a><span class="lineno"> 1936</span>    <span class="comment">// The last time we switched to the current primary core is the first reset event</span></div>
<div class="line"><a id="l01937" name="l01937"></a><span class="lineno"> 1937</span>    uint32_t lastPosReset_ms = <a class="code hl_variable" href="classNavEKF3.html#a9ca2cda81fb2f1db83f9dca905465a2a">pos_down_reset_data</a>.last_primary_change;</div>
<div class="line"><a id="l01938" name="l01938"></a><span class="lineno"> 1938</span> </div>
<div class="line"><a id="l01939" name="l01939"></a><span class="lineno"> 1939</span>    <span class="comment">// There has been a change in the primary core that the controller has not consumed</span></div>
<div class="line"><a id="l01940" name="l01940"></a><span class="lineno"> 1940</span>    <span class="comment">// allow for multiple consumers on the same frame</span></div>
<div class="line"><a id="l01941" name="l01941"></a><span class="lineno"> 1941</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classNavEKF3.html#a9ca2cda81fb2f1db83f9dca905465a2a">pos_down_reset_data</a>.core_changed || <a class="code hl_variable" href="classNavEKF3.html#a9ca2cda81fb2f1db83f9dca905465a2a">pos_down_reset_data</a>.last_function_call == now_time_ms) {</div>
<div class="line"><a id="l01942" name="l01942"></a><span class="lineno"> 1942</span>        posDelta = <a class="code hl_variable" href="classNavEKF3.html#a9ca2cda81fb2f1db83f9dca905465a2a">pos_down_reset_data</a>.core_delta;</div>
<div class="line"><a id="l01943" name="l01943"></a><span class="lineno"> 1943</span>        <a class="code hl_variable" href="classNavEKF3.html#a9ca2cda81fb2f1db83f9dca905465a2a">pos_down_reset_data</a>.core_changed = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01944" name="l01944"></a><span class="lineno"> 1944</span>    }</div>
<div class="line"><a id="l01945" name="l01945"></a><span class="lineno"> 1945</span> </div>
<div class="line"><a id="l01946" name="l01946"></a><span class="lineno"> 1946</span>    <span class="comment">// Record last time controller got the position reset</span></div>
<div class="line"><a id="l01947" name="l01947"></a><span class="lineno"> 1947</span>    <a class="code hl_variable" href="classNavEKF3.html#a9ca2cda81fb2f1db83f9dca905465a2a">pos_down_reset_data</a>.last_function_call = now_time_ms;</div>
<div class="line"><a id="l01948" name="l01948"></a><span class="lineno"> 1948</span> </div>
<div class="line"><a id="l01949" name="l01949"></a><span class="lineno"> 1949</span>    <span class="comment">// There has been a reset inside the core since we switched so update the time and delta</span></div>
<div class="line"><a id="l01950" name="l01950"></a><span class="lineno"> 1950</span>    <span class="keywordtype">float</span> tempPosDelta;</div>
<div class="line"><a id="l01951" name="l01951"></a><span class="lineno"> 1951</span>    uint32_t lastCorePosReset_ms = <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[<a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>].<a class="code hl_function" href="classNavEKF3__core.html#ab0b02bd2b13ff0dfde8ab4512d58ee42">getLastPosDownReset</a>(tempPosDelta);</div>
<div class="line"><a id="l01952" name="l01952"></a><span class="lineno"> 1952</span>    <span class="keywordflow">if</span> (lastCorePosReset_ms &gt; lastPosReset_ms) {</div>
<div class="line"><a id="l01953" name="l01953"></a><span class="lineno"> 1953</span>        posDelta += tempPosDelta;</div>
<div class="line"><a id="l01954" name="l01954"></a><span class="lineno"> 1954</span>        lastPosReset_ms = lastCorePosReset_ms;</div>
<div class="line"><a id="l01955" name="l01955"></a><span class="lineno"> 1955</span>    }</div>
<div class="line"><a id="l01956" name="l01956"></a><span class="lineno"> 1956</span> </div>
<div class="line"><a id="l01957" name="l01957"></a><span class="lineno"> 1957</span>    <span class="keywordflow">return</span> lastPosReset_ms;</div>
<div class="line"><a id="l01958" name="l01958"></a><span class="lineno"> 1958</span>}</div>
</div>
<div class="line"><a id="l01959" name="l01959"></a><span class="lineno"> 1959</span> </div>
<div class="line"><a id="l01960" name="l01960"></a><span class="lineno"> 1960</span><span class="comment">// update the yaw reset data to capture changes due to a lane switch</span></div>
<div class="foldopen" id="foldopen01961" data-start="{" data-end="}">
<div class="line"><a id="l01961" name="l01961"></a><span class="lineno"><a class="line" href="classNavEKF3.html#ab670249257282baefc2bafb3d5513995"> 1961</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classNavEKF3.html#ab670249257282baefc2bafb3d5513995">NavEKF3::updateLaneSwitchYawResetData</a>(uint8_t new_primary, uint8_t old_primary)</div>
<div class="line"><a id="l01962" name="l01962"></a><span class="lineno"> 1962</span>{</div>
<div class="line"><a id="l01963" name="l01963"></a><span class="lineno"> 1963</span>    <a class="code hl_class" href="classVector3.html">Vector3f</a> eulers_old_primary, eulers_new_primary;</div>
<div class="line"><a id="l01964" name="l01964"></a><span class="lineno"> 1964</span>    <span class="keywordtype">float</span> old_yaw_delta;</div>
<div class="line"><a id="l01965" name="l01965"></a><span class="lineno"> 1965</span> </div>
<div class="line"><a id="l01966" name="l01966"></a><span class="lineno"> 1966</span>    <span class="comment">// If core yaw reset data has been consumed reset delta to zero</span></div>
<div class="line"><a id="l01967" name="l01967"></a><span class="lineno"> 1967</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classNavEKF3.html#a2e737c2728f9e9a4ac197496f2b97746">yaw_reset_data</a>.core_changed) {</div>
<div class="line"><a id="l01968" name="l01968"></a><span class="lineno"> 1968</span>        <a class="code hl_variable" href="classNavEKF3.html#a2e737c2728f9e9a4ac197496f2b97746">yaw_reset_data</a>.core_delta = 0;</div>
<div class="line"><a id="l01969" name="l01969"></a><span class="lineno"> 1969</span>    }</div>
<div class="line"><a id="l01970" name="l01970"></a><span class="lineno"> 1970</span> </div>
<div class="line"><a id="l01971" name="l01971"></a><span class="lineno"> 1971</span>    <span class="comment">// If current primary has reset yaw after controller got it, add it to the delta</span></div>
<div class="line"><a id="l01972" name="l01972"></a><span class="lineno"> 1972</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[old_primary].<a class="code hl_function" href="classNavEKF3.html#a0dfa237b7b3cf14f0f99eb91fe539cea">getLastYawResetAngle</a>(old_yaw_delta) &gt; <a class="code hl_variable" href="classNavEKF3.html#a2e737c2728f9e9a4ac197496f2b97746">yaw_reset_data</a>.last_function_call) {</div>
<div class="line"><a id="l01973" name="l01973"></a><span class="lineno"> 1973</span>        <a class="code hl_variable" href="classNavEKF3.html#a2e737c2728f9e9a4ac197496f2b97746">yaw_reset_data</a>.core_delta += old_yaw_delta;</div>
<div class="line"><a id="l01974" name="l01974"></a><span class="lineno"> 1974</span>    }</div>
<div class="line"><a id="l01975" name="l01975"></a><span class="lineno"> 1975</span> </div>
<div class="line"><a id="l01976" name="l01976"></a><span class="lineno"> 1976</span>    <span class="comment">// Record the yaw delta between current core and new primary core and the timestamp of the core change</span></div>
<div class="line"><a id="l01977" name="l01977"></a><span class="lineno"> 1977</span>    <span class="comment">// Add current delta in case it hasn&#39;t been consumed yet</span></div>
<div class="line"><a id="l01978" name="l01978"></a><span class="lineno"> 1978</span>    <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[old_primary].<a class="code hl_function" href="classNavEKF3__core.html#a6f8d21f162d7fa8c309a776a561b1f18">getEulerAngles</a>(eulers_old_primary);</div>
<div class="line"><a id="l01979" name="l01979"></a><span class="lineno"> 1979</span>    <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[new_primary].<a class="code hl_function" href="classNavEKF3__core.html#a6f8d21f162d7fa8c309a776a561b1f18">getEulerAngles</a>(eulers_new_primary);</div>
<div class="line"><a id="l01980" name="l01980"></a><span class="lineno"> 1980</span>    <a class="code hl_variable" href="classNavEKF3.html#a2e737c2728f9e9a4ac197496f2b97746">yaw_reset_data</a>.core_delta = <a class="code hl_function" href="AP__Math_8cpp.html#ae77517d032abb1e1b525d2b43ff9a27d">wrap_PI</a>(eulers_new_primary.<a class="code hl_variable" href="classVector3.html#ab3e7f5401dd6e951978bfa746809f74f">z</a> - eulers_old_primary.<a class="code hl_variable" href="classVector3.html#ab3e7f5401dd6e951978bfa746809f74f">z</a> + <a class="code hl_variable" href="classNavEKF3.html#a2e737c2728f9e9a4ac197496f2b97746">yaw_reset_data</a>.core_delta);</div>
<div class="line"><a id="l01981" name="l01981"></a><span class="lineno"> 1981</span>    <a class="code hl_variable" href="classNavEKF3.html#a2e737c2728f9e9a4ac197496f2b97746">yaw_reset_data</a>.last_primary_change = <a class="code hl_variable" href="classNavEKF3.html#abc8f4be833ed62ad269ae9a2110c3e76">imuSampleTime_us</a> / 1000;</div>
<div class="line"><a id="l01982" name="l01982"></a><span class="lineno"> 1982</span>    <a class="code hl_variable" href="classNavEKF3.html#a2e737c2728f9e9a4ac197496f2b97746">yaw_reset_data</a>.core_changed = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01983" name="l01983"></a><span class="lineno"> 1983</span> </div>
<div class="line"><a id="l01984" name="l01984"></a><span class="lineno"> 1984</span>}</div>
</div>
<div class="line"><a id="l01985" name="l01985"></a><span class="lineno"> 1985</span> </div>
<div class="line"><a id="l01986" name="l01986"></a><span class="lineno"> 1986</span><span class="comment">// update the position reset data to capture changes due to a lane switch</span></div>
<div class="foldopen" id="foldopen01987" data-start="{" data-end="}">
<div class="line"><a id="l01987" name="l01987"></a><span class="lineno"><a class="line" href="classNavEKF3.html#a5271b02c055d6e3ce43fd0c8f945e652"> 1987</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classNavEKF3.html#a5271b02c055d6e3ce43fd0c8f945e652">NavEKF3::updateLaneSwitchPosResetData</a>(uint8_t new_primary, uint8_t old_primary)</div>
<div class="line"><a id="l01988" name="l01988"></a><span class="lineno"> 1988</span>{</div>
<div class="line"><a id="l01989" name="l01989"></a><span class="lineno"> 1989</span>    <a class="code hl_class" href="structVector2.html">Vector2f</a> pos_old_primary, pos_new_primary, old_pos_delta;</div>
<div class="line"><a id="l01990" name="l01990"></a><span class="lineno"> 1990</span> </div>
<div class="line"><a id="l01991" name="l01991"></a><span class="lineno"> 1991</span>    <span class="comment">// If core position reset data has been consumed reset delta to zero</span></div>
<div class="line"><a id="l01992" name="l01992"></a><span class="lineno"> 1992</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classNavEKF3.html#aa5976f864942fc0e32388caca1121074">pos_reset_data</a>.core_changed) {</div>
<div class="line"><a id="l01993" name="l01993"></a><span class="lineno"> 1993</span>        <a class="code hl_variable" href="classNavEKF3.html#aa5976f864942fc0e32388caca1121074">pos_reset_data</a>.core_delta.<a class="code hl_function" href="structVector2.html#a6b537328ae913e3e7267b539e7a4af92">zero</a>();</div>
<div class="line"><a id="l01994" name="l01994"></a><span class="lineno"> 1994</span>    }</div>
<div class="line"><a id="l01995" name="l01995"></a><span class="lineno"> 1995</span> </div>
<div class="line"><a id="l01996" name="l01996"></a><span class="lineno"> 1996</span>    <span class="comment">// If current primary has reset position after controller got it, add it to the delta</span></div>
<div class="line"><a id="l01997" name="l01997"></a><span class="lineno"> 1997</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[old_primary].<a class="code hl_function" href="classNavEKF3.html#a48b06963494d6987aa9b204276f354e3">getLastPosNorthEastReset</a>(old_pos_delta) &gt; <a class="code hl_variable" href="classNavEKF3.html#aa5976f864942fc0e32388caca1121074">pos_reset_data</a>.last_function_call) {</div>
<div class="line"><a id="l01998" name="l01998"></a><span class="lineno"> 1998</span>        <a class="code hl_variable" href="classNavEKF3.html#aa5976f864942fc0e32388caca1121074">pos_reset_data</a>.core_delta += old_pos_delta;</div>
<div class="line"><a id="l01999" name="l01999"></a><span class="lineno"> 1999</span>    }</div>
<div class="line"><a id="l02000" name="l02000"></a><span class="lineno"> 2000</span> </div>
<div class="line"><a id="l02001" name="l02001"></a><span class="lineno"> 2001</span>    <span class="comment">// Record the position delta between current core and new primary core and the timestamp of the core change</span></div>
<div class="line"><a id="l02002" name="l02002"></a><span class="lineno"> 2002</span>    <span class="comment">// Add current delta in case it hasn&#39;t been consumed yet</span></div>
<div class="line"><a id="l02003" name="l02003"></a><span class="lineno"> 2003</span>    <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[old_primary].<a class="code hl_function" href="classNavEKF3__core.html#af6c3f4076addbac86cceaba98bb38cbd">getPosNE</a>(pos_old_primary);</div>
<div class="line"><a id="l02004" name="l02004"></a><span class="lineno"> 2004</span>    <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[new_primary].<a class="code hl_function" href="classNavEKF3__core.html#af6c3f4076addbac86cceaba98bb38cbd">getPosNE</a>(pos_new_primary);</div>
<div class="line"><a id="l02005" name="l02005"></a><span class="lineno"> 2005</span>    <a class="code hl_variable" href="classNavEKF3.html#aa5976f864942fc0e32388caca1121074">pos_reset_data</a>.core_delta = pos_new_primary - pos_old_primary + <a class="code hl_variable" href="classNavEKF3.html#aa5976f864942fc0e32388caca1121074">pos_reset_data</a>.core_delta;</div>
<div class="line"><a id="l02006" name="l02006"></a><span class="lineno"> 2006</span>    <a class="code hl_variable" href="classNavEKF3.html#aa5976f864942fc0e32388caca1121074">pos_reset_data</a>.last_primary_change = <a class="code hl_variable" href="classNavEKF3.html#abc8f4be833ed62ad269ae9a2110c3e76">imuSampleTime_us</a> / 1000;</div>
<div class="line"><a id="l02007" name="l02007"></a><span class="lineno"> 2007</span>    <a class="code hl_variable" href="classNavEKF3.html#aa5976f864942fc0e32388caca1121074">pos_reset_data</a>.core_changed = <span class="keyword">true</span>;</div>
<div class="line"><a id="l02008" name="l02008"></a><span class="lineno"> 2008</span> </div>
<div class="line"><a id="l02009" name="l02009"></a><span class="lineno"> 2009</span>}</div>
</div>
<div class="line"><a id="l02010" name="l02010"></a><span class="lineno"> 2010</span> </div>
<div class="line"><a id="l02011" name="l02011"></a><span class="lineno"> 2011</span><span class="comment">// Update the vertical position reset data to capture changes due to a core switch</span></div>
<div class="line"><a id="l02012" name="l02012"></a><span class="lineno"> 2012</span><span class="comment">// This should be called after the decision to switch cores has been made, but before the</span></div>
<div class="line"><a id="l02013" name="l02013"></a><span class="lineno"> 2013</span><span class="comment">// new primary EKF update has been run</span></div>
<div class="foldopen" id="foldopen02014" data-start="{" data-end="}">
<div class="line"><a id="l02014" name="l02014"></a><span class="lineno"><a class="line" href="classNavEKF3.html#a596ddb5682513eba0ca4c608012fa0ee"> 2014</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classNavEKF3.html#a596ddb5682513eba0ca4c608012fa0ee">NavEKF3::updateLaneSwitchPosDownResetData</a>(uint8_t new_primary, uint8_t old_primary)</div>
<div class="line"><a id="l02015" name="l02015"></a><span class="lineno"> 2015</span>{</div>
<div class="line"><a id="l02016" name="l02016"></a><span class="lineno"> 2016</span>    <span class="keywordtype">float</span> posDownOldPrimary, posDownNewPrimary, oldPosDownDelta;</div>
<div class="line"><a id="l02017" name="l02017"></a><span class="lineno"> 2017</span> </div>
<div class="line"><a id="l02018" name="l02018"></a><span class="lineno"> 2018</span>    <span class="comment">// If core position reset data has been consumed reset delta to zero</span></div>
<div class="line"><a id="l02019" name="l02019"></a><span class="lineno"> 2019</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classNavEKF3.html#a9ca2cda81fb2f1db83f9dca905465a2a">pos_down_reset_data</a>.core_changed) {</div>
<div class="line"><a id="l02020" name="l02020"></a><span class="lineno"> 2020</span>        <a class="code hl_variable" href="classNavEKF3.html#a9ca2cda81fb2f1db83f9dca905465a2a">pos_down_reset_data</a>.core_delta = 0.0f;</div>
<div class="line"><a id="l02021" name="l02021"></a><span class="lineno"> 2021</span>    }</div>
<div class="line"><a id="l02022" name="l02022"></a><span class="lineno"> 2022</span> </div>
<div class="line"><a id="l02023" name="l02023"></a><span class="lineno"> 2023</span>    <span class="comment">// If current primary has reset position after controller got it, add it to the delta</span></div>
<div class="line"><a id="l02024" name="l02024"></a><span class="lineno"> 2024</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[old_primary].<a class="code hl_function" href="classNavEKF3.html#af8f633712a464fdef83c39ed1baf84cd">getLastPosDownReset</a>(oldPosDownDelta) &gt; <a class="code hl_variable" href="classNavEKF3.html#a9ca2cda81fb2f1db83f9dca905465a2a">pos_down_reset_data</a>.last_function_call) {</div>
<div class="line"><a id="l02025" name="l02025"></a><span class="lineno"> 2025</span>        <a class="code hl_variable" href="classNavEKF3.html#a9ca2cda81fb2f1db83f9dca905465a2a">pos_down_reset_data</a>.core_delta += oldPosDownDelta;</div>
<div class="line"><a id="l02026" name="l02026"></a><span class="lineno"> 2026</span>    }</div>
<div class="line"><a id="l02027" name="l02027"></a><span class="lineno"> 2027</span> </div>
<div class="line"><a id="l02028" name="l02028"></a><span class="lineno"> 2028</span>    <span class="comment">// Record the position delta between current core and new primary core and the timestamp of the core change</span></div>
<div class="line"><a id="l02029" name="l02029"></a><span class="lineno"> 2029</span>    <span class="comment">// Add current delta in case it hasn&#39;t been consumed yet</span></div>
<div class="line"><a id="l02030" name="l02030"></a><span class="lineno"> 2030</span>    <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[old_primary].<a class="code hl_function" href="classNavEKF3__core.html#af1e04cfaf90639b1695696e276cdc8d6">getPosD_local</a>(posDownOldPrimary);</div>
<div class="line"><a id="l02031" name="l02031"></a><span class="lineno"> 2031</span>    <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[new_primary].<a class="code hl_function" href="classNavEKF3__core.html#af1e04cfaf90639b1695696e276cdc8d6">getPosD_local</a>(posDownNewPrimary);</div>
<div class="line"><a id="l02032" name="l02032"></a><span class="lineno"> 2032</span>    <a class="code hl_variable" href="classNavEKF3.html#a9ca2cda81fb2f1db83f9dca905465a2a">pos_down_reset_data</a>.core_delta = posDownNewPrimary - posDownOldPrimary + <a class="code hl_variable" href="classNavEKF3.html#a9ca2cda81fb2f1db83f9dca905465a2a">pos_down_reset_data</a>.core_delta;</div>
<div class="line"><a id="l02033" name="l02033"></a><span class="lineno"> 2033</span>    <a class="code hl_variable" href="classNavEKF3.html#a9ca2cda81fb2f1db83f9dca905465a2a">pos_down_reset_data</a>.last_primary_change = <a class="code hl_variable" href="classNavEKF3.html#abc8f4be833ed62ad269ae9a2110c3e76">imuSampleTime_us</a> / 1000;</div>
<div class="line"><a id="l02034" name="l02034"></a><span class="lineno"> 2034</span>    <a class="code hl_variable" href="classNavEKF3.html#a9ca2cda81fb2f1db83f9dca905465a2a">pos_down_reset_data</a>.core_changed = <span class="keyword">true</span>;</div>
<div class="line"><a id="l02035" name="l02035"></a><span class="lineno"> 2035</span> </div>
<div class="line"><a id="l02036" name="l02036"></a><span class="lineno"> 2036</span>}</div>
</div>
<div class="line"><a id="l02037" name="l02037"></a><span class="lineno"> 2037</span> </div>
<div class="line"><a id="l02038" name="l02038"></a><span class="lineno"> 2038</span><span class="comment">// Writes the default equivalent airspeed and 1-sigma uncertainty in m/s to be used in forward flight if a measured airspeed is required and not available.</span></div>
<div class="foldopen" id="foldopen02039" data-start="{" data-end="}">
<div class="line"><a id="l02039" name="l02039"></a><span class="lineno"><a class="line" href="classNavEKF3.html#a0d8be28cc5f87cd1f92077f46b929c6b"> 2039</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classNavEKF3.html#a0d8be28cc5f87cd1f92077f46b929c6b">NavEKF3::writeDefaultAirSpeed</a>(<span class="keywordtype">float</span> <a class="code hl_variable" href="Airspeed_8cpp.html#abfed87a61c42e885ee14d5222b47583f">airspeed</a>, <span class="keywordtype">float</span> uncertainty)</div>
<div class="line"><a id="l02040" name="l02040"></a><span class="lineno"> 2040</span>{</div>
<div class="line"><a id="l02041" name="l02041"></a><span class="lineno"> 2041</span>    <a class="code hl_function" href="namespaceAP.html#a72bac6dee7ddc414f93cbf7cad325f55">AP::dal</a>().<a class="code hl_function" href="classAP__DAL.html#a88666a1031bcaaee31b70406e79540b5">log_writeDefaultAirSpeed3</a>(<a class="code hl_variable" href="Airspeed_8cpp.html#abfed87a61c42e885ee14d5222b47583f">airspeed</a>, uncertainty);</div>
<div class="line"><a id="l02042" name="l02042"></a><span class="lineno"> 2042</span> </div>
<div class="line"><a id="l02043" name="l02043"></a><span class="lineno"> 2043</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>) {</div>
<div class="line"><a id="l02044" name="l02044"></a><span class="lineno"> 2044</span>        <span class="keywordflow">for</span> (uint8_t i=0; i&lt;<a class="code hl_variable" href="classNavEKF3.html#a1146c4b7293610f34b6ecfd7ccc5bbb1">num_cores</a>; i++) {</div>
<div class="line"><a id="l02045" name="l02045"></a><span class="lineno"> 2045</span>            <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[i].<a class="code hl_function" href="classNavEKF3__core.html#a33764d8f8d4538743ed8500c3be0e480">writeDefaultAirSpeed</a>(<a class="code hl_variable" href="Airspeed_8cpp.html#abfed87a61c42e885ee14d5222b47583f">airspeed</a>, uncertainty);</div>
<div class="line"><a id="l02046" name="l02046"></a><span class="lineno"> 2046</span>        }</div>
<div class="line"><a id="l02047" name="l02047"></a><span class="lineno"> 2047</span>    }</div>
<div class="line"><a id="l02048" name="l02048"></a><span class="lineno"> 2048</span>}</div>
</div>
<div class="line"><a id="l02049" name="l02049"></a><span class="lineno"> 2049</span> </div>
<div class="line"><a id="l02050" name="l02050"></a><span class="lineno"> 2050</span><span class="comment">// returns true when the yaw angle has been aligned</span></div>
<div class="foldopen" id="foldopen02051" data-start="{" data-end="}">
<div class="line"><a id="l02051" name="l02051"></a><span class="lineno"><a class="line" href="classNavEKF3.html#a20640927e2adf9314baf5cbfc25526f1"> 2051</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classNavEKF3.html#a20640927e2adf9314baf5cbfc25526f1">NavEKF3::yawAlignmentComplete</a>(<span class="keywordtype">void</span>)<span class="keyword"> const</span></div>
<div class="line"><a id="l02052" name="l02052"></a><span class="lineno"> 2052</span><span class="keyword"></span>{</div>
<div class="line"><a id="l02053" name="l02053"></a><span class="lineno"> 2053</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>) {</div>
<div class="line"><a id="l02054" name="l02054"></a><span class="lineno"> 2054</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02055" name="l02055"></a><span class="lineno"> 2055</span>    }</div>
<div class="line"><a id="l02056" name="l02056"></a><span class="lineno"> 2056</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[<a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>].<a class="code hl_function" href="classNavEKF3__core.html#a0b2dfa8c5d29f74c757f8075b9945eb7">have_aligned_yaw</a>();</div>
<div class="line"><a id="l02057" name="l02057"></a><span class="lineno"> 2057</span>}</div>
</div>
<div class="line"><a id="l02058" name="l02058"></a><span class="lineno"> 2058</span> </div>
<div class="line"><a id="l02059" name="l02059"></a><span class="lineno"> 2059</span><span class="comment">// returns true when the state estimates are significantly degraded by vibration</span></div>
<div class="foldopen" id="foldopen02060" data-start="{" data-end="}">
<div class="line"><a id="l02060" name="l02060"></a><span class="lineno"><a class="line" href="classNavEKF3.html#a407c52e131dcd0c2d7eaec50f6d2d8b2"> 2060</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classNavEKF3.html#a407c52e131dcd0c2d7eaec50f6d2d8b2">NavEKF3::isVibrationAffected</a>()<span class="keyword"> const</span></div>
<div class="line"><a id="l02061" name="l02061"></a><span class="lineno"> 2061</span><span class="keyword"></span>{</div>
<div class="line"><a id="l02062" name="l02062"></a><span class="lineno"> 2062</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>) {</div>
<div class="line"><a id="l02063" name="l02063"></a><span class="lineno"> 2063</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[<a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>].<a class="code hl_function" href="classNavEKF3__core.html#a226f32c406b6c6f01bdf5078e696cc18">isVibrationAffected</a>();</div>
<div class="line"><a id="l02064" name="l02064"></a><span class="lineno"> 2064</span>    }</div>
<div class="line"><a id="l02065" name="l02065"></a><span class="lineno"> 2065</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02066" name="l02066"></a><span class="lineno"> 2066</span>}</div>
</div>
<div class="line"><a id="l02067" name="l02067"></a><span class="lineno"> 2067</span> </div>
<div class="line"><a id="l02068" name="l02068"></a><span class="lineno"> 2068</span><span class="comment">// get a yaw estimator instance</span></div>
<div class="foldopen" id="foldopen02069" data-start="{" data-end="}">
<div class="line"><a id="l02069" name="l02069"></a><span class="lineno"><a class="line" href="classNavEKF3.html#a1a0dd1f8ba1e80ae1dc94fa60a0e4c4f"> 2069</a></span><span class="keyword">const</span> <a class="code hl_class" href="classEKFGSF__yaw.html">EKFGSF_yaw</a> *<a class="code hl_function" href="classNavEKF3.html#a1a0dd1f8ba1e80ae1dc94fa60a0e4c4f">NavEKF3::get_yawEstimator</a>(<span class="keywordtype">void</span>)<span class="keyword"> const</span></div>
<div class="line"><a id="l02070" name="l02070"></a><span class="lineno"> 2070</span><span class="keyword"></span>{</div>
<div class="line"><a id="l02071" name="l02071"></a><span class="lineno"> 2071</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>) {</div>
<div class="line"><a id="l02072" name="l02072"></a><span class="lineno"> 2072</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">core</a>[<a class="code hl_variable" href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">primary</a>].<a class="code hl_function" href="classNavEKF3__core.html#a4ef25401d1d27de6f4a4bfb844fc6152">get_yawEstimator</a>();</div>
<div class="line"><a id="l02073" name="l02073"></a><span class="lineno"> 2073</span>    }</div>
<div class="line"><a id="l02074" name="l02074"></a><span class="lineno"> 2074</span>    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l02075" name="l02075"></a><span class="lineno"> 2075</span>}</div>
</div>
<div class="ttc" id="aAP__ADC__ADS1115_8cpp_html_aa72707fcb3d070ae7967b9a9e6b58013"><div class="ttname"><a href="AP__ADC__ADS1115_8cpp.html#aa72707fcb3d070ae7967b9a9e6b58013">error</a></div><div class="ttdeci">#define error(fmt, args ...)</div><div class="ttdef"><b>Definition</b> <a href="AP__ADC__ADS1115_8cpp_source.html#l00091">AP_ADC_ADS1115.cpp:91</a></div></div>
<div class="ttc" id="aAP__BoardConfig_8h_html"><div class="ttname"><a href="AP__BoardConfig_8h.html">AP_BoardConfig.h</a></div></div>
<div class="ttc" id="aAP__DAL_8h_html"><div class="ttname"><a href="AP__DAL_8h.html">AP_DAL.h</a></div></div>
<div class="ttc" id="aAP__HAL_8h_html"><div class="ttname"><a href="AP__HAL_8h.html">AP_HAL.h</a></div></div>
<div class="ttc" id="aAP__InertialSensor__config_8h_html_a2247b51f4c9a78d7d1f06d7dda78a82e"><div class="ttname"><a href="AP__InertialSensor__config_8h.html#a2247b51f4c9a78d7d1f06d7dda78a82e">INS_MAX_INSTANCES</a></div><div class="ttdeci">#define INS_MAX_INSTANCES</div><div class="ttdef"><b>Definition</b> <a href="AP__InertialSensor__config_8h_source.html#l00016">AP_InertialSensor_config.h:16</a></div></div>
<div class="ttc" id="aAP__InternalError_8cpp_html_a02ad7a50d04e0dbf28c6c90a183a0579"><div class="ttname"><a href="AP__InternalError_8cpp.html#a02ad7a50d04e0dbf28c6c90a183a0579">instance</a></div><div class="ttdeci">static AP_InternalError instance</div><div class="ttdef"><b>Definition</b> <a href="AP__InternalError_8cpp_source.html#l00015">AP_InternalError.cpp:15</a></div></div>
<div class="ttc" id="aAP__Logger_8h_html"><div class="ttname"><a href="AP__Logger_8h.html">AP_Logger.h</a></div></div>
<div class="ttc" id="aAP__Math_8cpp_html_ae77517d032abb1e1b525d2b43ff9a27d"><div class="ttname"><a href="AP__Math_8cpp.html#ae77517d032abb1e1b525d2b43ff9a27d">wrap_PI</a></div><div class="ttdeci">ftype wrap_PI(const ftype radian)</div><div class="ttdef"><b>Definition</b> <a href="AP__Math_8cpp_source.html#l00248">AP_Math.cpp:248</a></div></div>
<div class="ttc" id="aAP__Math_8h_html_a4e3ae698e8f99cec214348ad233e3c41"><div class="ttname"><a href="AP__Math_8h.html#a4e3ae698e8f99cec214348ad233e3c41">is_positive</a></div><div class="ttdeci">bool is_positive(const T fVal1)</div><div class="ttdef"><b>Definition</b> <a href="AP__Math_8h_source.html#l00063">AP_Math.h:63</a></div></div>
<div class="ttc" id="aAP__Math_8h_html_a7d4a1971dc48d4139da598676c19a993"><div class="ttname"><a href="AP__Math_8h.html#a7d4a1971dc48d4139da598676c19a993">constrain_ftype</a></div><div class="ttdeci">#define constrain_ftype(amt, low, high)</div><div class="ttdef"><b>Definition</b> <a href="AP__Math_8h_source.html#l00175">AP_Math.h:175</a></div></div>
<div class="ttc" id="aAP__NavEKF2__core_8h_html_a3a3babe7af69ce986963c5162af1caeb"><div class="ttname"><a href="AP__NavEKF2__core_8h.html#a3a3babe7af69ce986963c5162af1caeb">EKF_TARGET_DT</a></div><div class="ttdeci">#define EKF_TARGET_DT</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF2__core_8h_source.html#l00054">AP_NavEKF2_core.h:54</a></div></div>
<div class="ttc" id="aAP__NavEKF3_8cpp_html_a12817bbcd248827ccde9f151ab0feeeb"><div class="ttname"><a href="AP__NavEKF3_8cpp.html#a12817bbcd248827ccde9f151ab0feeeb">GYRO_P_NSE_DEFAULT</a></div><div class="ttdeci">#define GYRO_P_NSE_DEFAULT</div><div class="ttdef"><b>Definition</b> <a href="#l00103">AP_NavEKF3.cpp:103</a></div></div>
<div class="ttc" id="aAP__NavEKF3_8cpp_html_a18492f186be402b29b5ceef77a262082"><div class="ttname"><a href="AP__NavEKF3_8cpp.html#a18492f186be402b29b5ceef77a262082">POS_I_GATE_DEFAULT</a></div><div class="ttdeci">#define POS_I_GATE_DEFAULT</div><div class="ttdef"><b>Definition</b> <a href="#l00110">AP_NavEKF3.cpp:110</a></div></div>
<div class="ttc" id="aAP__NavEKF3_8cpp_html_a25d3d690fd4e2da6c94c55465925a989"><div class="ttname"><a href="AP__NavEKF3_8cpp.html#a25d3d690fd4e2da6c94c55465925a989">VELD_M_NSE_DEFAULT</a></div><div class="ttdeci">#define VELD_M_NSE_DEFAULT</div><div class="ttdef"><b>Definition</b> <a href="#l00099">AP_NavEKF3.cpp:99</a></div></div>
<div class="ttc" id="aAP__NavEKF3_8cpp_html_a4099e8f389936d32081a68dbaf39863a"><div class="ttname"><a href="AP__NavEKF3_8cpp.html#a4099e8f389936d32081a68dbaf39863a">MAG_M_NSE_DEFAULT</a></div><div class="ttdeci">#define MAG_M_NSE_DEFAULT</div><div class="ttdef"><b>Definition</b> <a href="#l00102">AP_NavEKF3.cpp:102</a></div></div>
<div class="ttc" id="aAP__NavEKF3_8cpp_html_a415eac335726e25966055dbbaa178ab2"><div class="ttname"><a href="AP__NavEKF3_8cpp.html#a415eac335726e25966055dbbaa178ab2">WIND_P_NSE_DEFAULT</a></div><div class="ttdeci">#define WIND_P_NSE_DEFAULT</div><div class="ttdef"><b>Definition</b> <a href="#l00120">AP_NavEKF3.cpp:120</a></div></div>
<div class="ttc" id="aAP__NavEKF3_8cpp_html_a481acf2aef902a504828b5a681fbd77b"><div class="ttname"><a href="AP__NavEKF3_8cpp.html#a481acf2aef902a504828b5a681fbd77b">POSNE_M_NSE_DEFAULT</a></div><div class="ttdeci">#define POSNE_M_NSE_DEFAULT</div><div class="ttdef"><b>Definition</b> <a href="#l00100">AP_NavEKF3.cpp:100</a></div></div>
<div class="ttc" id="aAP__NavEKF3_8cpp_html_a563328e54e49af8309dd738c0d2b6c16"><div class="ttname"><a href="AP__NavEKF3_8cpp.html#a563328e54e49af8309dd738c0d2b6c16">HAL_EKF_IMU_MASK_DEFAULT</a></div><div class="ttdeci">#define HAL_EKF_IMU_MASK_DEFAULT</div><div class="ttdef"><b>Definition</b> <a href="#l00130">AP_NavEKF3.cpp:130</a></div></div>
<div class="ttc" id="aAP__NavEKF3_8cpp_html_a5787c5cb966d78a182a7528d28417335"><div class="ttname"><a href="AP__NavEKF3_8cpp.html#a5787c5cb966d78a182a7528d28417335">VELNE_M_NSE_DEFAULT</a></div><div class="ttdeci">#define VELNE_M_NSE_DEFAULT</div><div class="ttdef"><b>Definition</b> <a href="#l00098">AP_NavEKF3.cpp:98</a></div></div>
<div class="ttc" id="aAP__NavEKF3_8cpp_html_a5acc5924c4a1100f963d8002eeb282a2"><div class="ttname"><a href="AP__NavEKF3_8cpp.html#a5acc5924c4a1100f963d8002eeb282a2">MAG_CAL_DEFAULT</a></div><div class="ttdeci">#define MAG_CAL_DEFAULT</div><div class="ttdef"><b>Definition</b> <a href="#l00113">AP_NavEKF3.cpp:113</a></div></div>
<div class="ttc" id="aAP__NavEKF3_8cpp_html_a669dc127386b7966e170e496a279b023"><div class="ttname"><a href="AP__NavEKF3_8cpp.html#a669dc127386b7966e170e496a279b023">MAG_I_GATE_DEFAULT</a></div><div class="ttdeci">#define MAG_I_GATE_DEFAULT</div><div class="ttdef"><b>Definition</b> <a href="#l00112">AP_NavEKF3.cpp:112</a></div></div>
<div class="ttc" id="aAP__NavEKF3_8cpp_html_a6c9f7d13f1966f31202304ff643e970e"><div class="ttname"><a href="AP__NavEKF3_8cpp.html#a6c9f7d13f1966f31202304ff643e970e">ACC_P_NSE_DEFAULT</a></div><div class="ttdeci">#define ACC_P_NSE_DEFAULT</div><div class="ttdef"><b>Definition</b> <a href="#l00104">AP_NavEKF3.cpp:104</a></div></div>
<div class="ttc" id="aAP__NavEKF3_8cpp_html_a70736687012cc7bdcfb1c3c861da9d37"><div class="ttname"><a href="AP__NavEKF3_8cpp.html#a70736687012cc7bdcfb1c3c861da9d37">GLITCH_RADIUS_DEFAULT</a></div><div class="ttdeci">#define GLITCH_RADIUS_DEFAULT</div><div class="ttdef"><b>Definition</b> <a href="#l00114">AP_NavEKF3.cpp:114</a></div></div>
<div class="ttc" id="aAP__NavEKF3_8cpp_html_a731c9b8648315eb61d495d836dcf3fd8"><div class="ttname"><a href="AP__NavEKF3_8cpp.html#a731c9b8648315eb61d495d836dcf3fd8">GBIAS_P_NSE_DEFAULT</a></div><div class="ttdeci">#define GBIAS_P_NSE_DEFAULT</div><div class="ttdef"><b>Definition</b> <a href="#l00105">AP_NavEKF3.cpp:105</a></div></div>
<div class="ttc" id="aAP__NavEKF3_8cpp_html_a76847a9da1855d42fdc239abceb89a2b"><div class="ttname"><a href="AP__NavEKF3_8cpp.html#a76847a9da1855d42fdc239abceb89a2b">ABIAS_P_NSE_DEFAULT</a></div><div class="ttdeci">#define ABIAS_P_NSE_DEFAULT</div><div class="ttdef"><b>Definition</b> <a href="#l00106">AP_NavEKF3.cpp:106</a></div></div>
<div class="ttc" id="aAP__NavEKF3_8cpp_html_a7f4e48f294410ef7f81e55b30ed9f3e6"><div class="ttname"><a href="AP__NavEKF3_8cpp.html#a7f4e48f294410ef7f81e55b30ed9f3e6">ALT_M_NSE_DEFAULT</a></div><div class="ttdeci">#define ALT_M_NSE_DEFAULT</div><div class="ttdef"><b>Definition</b> <a href="#l00101">AP_NavEKF3.cpp:101</a></div></div>
<div class="ttc" id="aAP__NavEKF3_8cpp_html_a81e13a370d69eb740c8e4d60ba00652b"><div class="ttname"><a href="AP__NavEKF3_8cpp.html#a81e13a370d69eb740c8e4d60ba00652b">FLOW_MEAS_DELAY</a></div><div class="ttdeci">#define FLOW_MEAS_DELAY</div><div class="ttdef"><b>Definition</b> <a href="#l00115">AP_NavEKF3.cpp:115</a></div></div>
<div class="ttc" id="aAP__NavEKF3_8cpp_html_a8bacddbf386491ce7be4956637ecca7a"><div class="ttname"><a href="AP__NavEKF3_8cpp.html#a8bacddbf386491ce7be4956637ecca7a">FLOW_USE_DEFAULT</a></div><div class="ttdeci">#define FLOW_USE_DEFAULT</div><div class="ttdef"><b>Definition</b> <a href="#l00119">AP_NavEKF3.cpp:119</a></div></div>
<div class="ttc" id="aAP__NavEKF3_8cpp_html_a8e61f809f20c44f5534feaa5f8732c52"><div class="ttname"><a href="AP__NavEKF3_8cpp.html#a8e61f809f20c44f5534feaa5f8732c52">FLOW_M_NSE_DEFAULT</a></div><div class="ttdeci">#define FLOW_M_NSE_DEFAULT</div><div class="ttdef"><b>Definition</b> <a href="#l00116">AP_NavEKF3.cpp:116</a></div></div>
<div class="ttc" id="aAP__NavEKF3_8cpp_html_aac39cb1a6a9eec23e6241bb24bb89f30"><div class="ttname"><a href="AP__NavEKF3_8cpp.html#aac39cb1a6a9eec23e6241bb24bb89f30">EK3_PRIMARY_DEFAULT</a></div><div class="ttdeci">#define EK3_PRIMARY_DEFAULT</div><div class="ttdef"><b>Definition</b> <a href="#l00125">AP_NavEKF3.cpp:125</a></div></div>
<div class="ttc" id="aAP__NavEKF3_8cpp_html_ad1c4fe1428be4f0ac4f261eac4f5462c"><div class="ttname"><a href="AP__NavEKF3_8cpp.html#ad1c4fe1428be4f0ac4f261eac4f5462c">FLOW_I_GATE_DEFAULT</a></div><div class="ttdeci">#define FLOW_I_GATE_DEFAULT</div><div class="ttdef"><b>Definition</b> <a href="#l00117">AP_NavEKF3.cpp:117</a></div></div>
<div class="ttc" id="aAP__NavEKF3_8cpp_html_ad81dedd819aa64ee95f4582c30798935"><div class="ttname"><a href="AP__NavEKF3_8cpp.html#ad81dedd819aa64ee95f4582c30798935">MAGE_P_NSE_DEFAULT</a></div><div class="ttdeci">#define MAGE_P_NSE_DEFAULT</div><div class="ttdef"><b>Definition</b> <a href="#l00108">AP_NavEKF3.cpp:108</a></div></div>
<div class="ttc" id="aAP__NavEKF3_8cpp_html_ad8a63b0d97bdb05acfcfa54793790631"><div class="ttname"><a href="AP__NavEKF3_8cpp.html#ad8a63b0d97bdb05acfcfa54793790631">CHECK_SCALER_DEFAULT</a></div><div class="ttdeci">#define CHECK_SCALER_DEFAULT</div><div class="ttdef"><b>Definition</b> <a href="#l00118">AP_NavEKF3.cpp:118</a></div></div>
<div class="ttc" id="aAP__NavEKF3_8cpp_html_ade9ffc70f4a31cae4beb030c97adbbca"><div class="ttname"><a href="AP__NavEKF3_8cpp.html#ade9ffc70f4a31cae4beb030c97adbbca">VEL_I_GATE_DEFAULT</a></div><div class="ttdeci">#define VEL_I_GATE_DEFAULT</div><div class="ttdef"><b>Definition</b> <a href="#l00109">AP_NavEKF3.cpp:109</a></div></div>
<div class="ttc" id="aAP__NavEKF3_8cpp_html_af34b4040dd7d9248e49c10916103a3d9"><div class="ttname"><a href="AP__NavEKF3_8cpp.html#af34b4040dd7d9248e49c10916103a3d9">HGT_I_GATE_DEFAULT</a></div><div class="ttdeci">#define HGT_I_GATE_DEFAULT</div><div class="ttdef"><b>Definition</b> <a href="#l00111">AP_NavEKF3.cpp:111</a></div></div>
<div class="ttc" id="aAP__NavEKF3_8cpp_html_afa9f6cd370c5c72529c024833ece4347"><div class="ttname"><a href="AP__NavEKF3_8cpp.html#afa9f6cd370c5c72529c024833ece4347">MAGB_P_NSE_DEFAULT</a></div><div class="ttdeci">#define MAGB_P_NSE_DEFAULT</div><div class="ttdef"><b>Definition</b> <a href="#l00107">AP_NavEKF3.cpp:107</a></div></div>
<div class="ttc" id="aAP__NavEKF3_8h_html_a47a55ec8fd8da907204074b432e18efc"><div class="ttname"><a href="AP__NavEKF3_8h.html#a47a55ec8fd8da907204074b432e18efc">CORE_ERR_LIM</a></div><div class="ttdeci">#define CORE_ERR_LIM</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3_8h_source.html#l00522">AP_NavEKF3.h:522</a></div></div>
<div class="ttc" id="aAP__NavEKF3_8h_html_ac55e8345c74b4472c571ca425dc16132"><div class="ttname"><a href="AP__NavEKF3_8h.html#ac55e8345c74b4472c571ca425dc16132">MAX_EKF_CORES</a></div><div class="ttdeci">#define MAX_EKF_CORES</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3_8h_source.html#l00521">AP_NavEKF3.h:521</a></div></div>
<div class="ttc" id="aAP__NavEKF3_8h_html_ad3676f4407f320e72578cf9beb2fccbb"><div class="ttname"><a href="AP__NavEKF3_8h.html#ad3676f4407f320e72578cf9beb2fccbb">BETTER_THRESH</a></div><div class="ttdeci">#define BETTER_THRESH</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3_8h_source.html#l00523">AP_NavEKF3.h:523</a></div></div>
<div class="ttc" id="aAP__NavEKF3__core_8h_html"><div class="ttname"><a href="AP__NavEKF3__core_8h.html">AP_NavEKF3_core.h</a></div></div>
<div class="ttc" id="aAP__NavEKF__Source_8h_html_a8274920defeb096990d5329472f6915b"><div class="ttname"><a href="AP__NavEKF__Source_8h.html#a8274920defeb096990d5329472f6915b">AP_NAKEKF_SOURCE_SET_MAX</a></div><div class="ttdeci">#define AP_NAKEKF_SOURCE_SET_MAX</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF__Source_8h_source.html#l00005">AP_NavEKF_Source.h:5</a></div></div>
<div class="ttc" id="aAP__Param_8h_html_a0f9acb038a5283b964b862aea8cc5051"><div class="ttname"><a href="AP__Param_8h.html#a0f9acb038a5283b964b862aea8cc5051">AP_GROUPEND</a></div><div class="ttdeci">#define AP_GROUPEND</div><div class="ttdef"><b>Definition</b> <a href="AP__Param_8h_source.html#l00163">AP_Param.h:163</a></div></div>
<div class="ttc" id="aAP__Param_8h_html_a16c360358c5d6a08d34f60921fd916a9"><div class="ttname"><a href="AP__Param_8h.html#a16c360358c5d6a08d34f60921fd916a9">AP_SUBGROUPINFO</a></div><div class="ttdeci">#define AP_SUBGROUPINFO(element, name, idx, thisclazz, elclazz)</div><div class="ttdef"><b>Definition</b> <a href="AP__Param_8h_source.html#l00152">AP_Param.h:152</a></div></div>
<div class="ttc" id="aAP__Param_8h_html_a1fc3014cf5831692db5dfaf5000c327e"><div class="ttname"><a href="AP__Param_8h.html#a1fc3014cf5831692db5dfaf5000c327e">AP_SUBGROUPEXTENSION</a></div><div class="ttdeci">#define AP_SUBGROUPEXTENSION(name, idx, clazz, vinfo)</div><div class="ttdef"><b>Definition</b> <a href="AP__Param_8h_source.html#l00155">AP_Param.h:155</a></div></div>
<div class="ttc" id="aAP__Param_8h_html_a78a408c84f2a1bafde256ac650142e4d"><div class="ttname"><a href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a></div><div class="ttdeci">#define AP_GROUPINFO(name, idx, clazz, element, def)</div><div class="ttdef"><b>Definition</b> <a href="AP__Param_8h_source.html#l00145">AP_Param.h:145</a></div></div>
<div class="ttc" id="aAP__Param_8h_html_ac24e2eb16c2194e975d27e47ddcb7f1c"><div class="ttname"><a href="AP__Param_8h.html#ac24e2eb16c2194e975d27e47ddcb7f1c">AP_GROUPINFO_FLAGS</a></div><div class="ttdeci">#define AP_GROUPINFO_FLAGS(name, idx, clazz, element, def, flags)</div><div class="ttdef"><b>Definition</b> <a href="AP__Param_8h_source.html#l00133">AP_Param.h:133</a></div></div>
<div class="ttc" id="aAP__Param_8h_html_ad9ca22a1e508dceea20feda89a344f9aae846a3e359a88214fe754f3862bc9347"><div class="ttname"><a href="AP__Param_8h.html#ad9ca22a1e508dceea20feda89a344f9aae846a3e359a88214fe754f3862bc9347">AP_PARAM_INT8</a></div><div class="ttdeci">@ AP_PARAM_INT8</div><div class="ttdef"><b>Definition</b> <a href="AP__Param_8h_source.html#l00180">AP_Param.h:180</a></div></div>
<div class="ttc" id="aAP__Param_8h_html_ae25c1c7495435989f8be5781c86be078"><div class="ttname"><a href="AP__Param_8h.html#ae25c1c7495435989f8be5781c86be078">AP_PARAM_FLAG_ENABLE</a></div><div class="ttdeci">#define AP_PARAM_FLAG_ENABLE</div><div class="ttdef"><b>Definition</b> <a href="AP__Param_8h_source.html#l00087">AP_Param.h:87</a></div></div>
<div class="ttc" id="aAP__Scripting_2generator_2src_2main_8c_html_a0c4aa150664a3347db13aeeb47811829"><div class="ttname"><a href="AP__Scripting_2generator_2src_2main_8c.html#a0c4aa150664a3347db13aeeb47811829">source</a></div><div class="ttdeci">FILE * source</div><div class="ttdef"><b>Definition</b> <a href="AP__Scripting_2generator_2src_2main_8c_source.html#l00084">main.c:84</a></div></div>
<div class="ttc" id="aAP__Vehicle__Type_8h_html"><div class="ttname"><a href="AP__Vehicle__Type_8h.html">AP_Vehicle_Type.h</a></div></div>
<div class="ttc" id="aAirspeed_8cpp_html_abfed87a61c42e885ee14d5222b47583f"><div class="ttname"><a href="Airspeed_8cpp.html#abfed87a61c42e885ee14d5222b47583f">airspeed</a></div><div class="ttdeci">AP_Airspeed airspeed</div><div class="ttdef"><b>Definition</b> <a href="Airspeed_8cpp_source.html#l00038">Airspeed.cpp:38</a></div></div>
<div class="ttc" id="aGCS_8h_html"><div class="ttname"><a href="GCS_8h.html">GCS.h</a></div><div class="ttdoc">Interface definition for the various Ground Control System.</div></div>
<div class="ttc" id="aGCS_8h_html_a266bfe8eda675e1092f045e93932b4a6"><div class="ttname"><a href="GCS_8h.html#a266bfe8eda675e1092f045e93932b4a6">GCS_SEND_TEXT</a></div><div class="ttdeci">#define GCS_SEND_TEXT(severity, format, args...)</div><div class="ttdef"><b>Definition</b> <a href="GCS_8h_source.html#l01349">GCS.h:1349</a></div></div>
<div class="ttc" id="aRCProtocolTest_8cpp_html_ab59cbd9523fdc9601bf57f555a9f8733"><div class="ttname"><a href="RCProtocolTest_8cpp.html#ab59cbd9523fdc9601bf57f555a9f8733">delay_ms</a></div><div class="ttdeci">static void delay_ms(uint32_t ms)</div><div class="ttdef"><b>Definition</b> <a href="RCProtocolTest_8cpp_source.html#l00064">RCProtocolTest.cpp:64</a></div></div>
<div class="ttc" id="aReplayGyroFFT_8cpp_html_a4b91d1711c0d031f33f581540503bc54"><div class="ttname"><a href="ReplayGyroFFT_8cpp.html#a4b91d1711c0d031f33f581540503bc54">ins</a></div><div class="ttdeci">static AP_InertialSensor ins</div><div class="ttdef"><b>Definition</b> <a href="ReplayGyroFFT_8cpp_source.html#l00029">ReplayGyroFFT.cpp:29</a></div></div>
<div class="ttc" id="aardupilot__SITL__QUAD_8h_html_ae4ebf6c3b1fa52d71d50bf1064a7eb14"><div class="ttname"><a href="ardupilot__SITL__QUAD_8h.html#ae4ebf6c3b1fa52d71d50bf1064a7eb14">wind</a></div><div class="ttdeci">VECTOR4F wind</div><div class="ttdef"><b>Definition</b> <a href="ardupilot__SITL__QUAD_8h_source.html#l00044">ardupilot_SITL_QUAD.h:44</a></div></div>
<div class="ttc" id="aclassAP__DAL_html_a122c59f982f0bf61155e70e5975e4938a43a5d0e1dd9af707cc1c15f5016bb802"><div class="ttname"><a href="classAP__DAL.html#a122c59f982f0bf61155e70e5975e4938a43a5d0e1dd9af707cc1c15f5016bb802">AP_DAL::FrameType::InitialiseFilterEKF3</a></div><div class="ttdeci">@ InitialiseFilterEKF3</div></div>
<div class="ttc" id="aclassAP__DAL_html_a122c59f982f0bf61155e70e5975e4938a4f099937c19adcbfb32aabbfb558bbb9"><div class="ttname"><a href="classAP__DAL.html#a122c59f982f0bf61155e70e5975e4938a4f099937c19adcbfb32aabbfb558bbb9">AP_DAL::FrameType::UpdateFilterEKF3</a></div><div class="ttdeci">@ UpdateFilterEKF3</div></div>
<div class="ttc" id="aclassAP__DAL_html_a17d0e831c8d816f317acd2a208a93aac"><div class="ttname"><a href="classAP__DAL.html#a17d0e831c8d816f317acd2a208a93aac">AP_DAL::log_SetLatLng</a></div><div class="ttdeci">void log_SetLatLng(const Location &amp;loc, float posAccuracy, uint32_t timestamp_ms)</div><div class="ttdef"><b>Definition</b> <a href="AP__DAL_8cpp_source.html#l00364">AP_DAL.cpp:364</a></div></div>
<div class="ttc" id="aclassAP__DAL_html_a268cb9f9573d5b87e679293572cc241e"><div class="ttname"><a href="classAP__DAL.html#a268cb9f9573d5b87e679293572cc241e">AP_DAL::writeExtNavVelData</a></div><div class="ttdeci">void writeExtNavVelData(const Vector3f &amp;vel, float err, uint32_t timeStamp_ms, uint16_t delay_ms)</div><div class="ttdef"><b>Definition</b> <a href="AP__DAL_8cpp_source.html#l00376">AP_DAL.cpp:376</a></div></div>
<div class="ttc" id="aclassAP__DAL_html_a30e37092f6f4f89e6f6fc1824737b2ae"><div class="ttname"><a href="classAP__DAL.html#a30e37092f6f4f89e6f6fc1824737b2ae">AP_DAL::Event</a></div><div class="ttdeci">Event</div><div class="ttdef"><b>Definition</b> <a href="AP__DAL_8h_source.html#l00036">AP_DAL.h:36</a></div></div>
<div class="ttc" id="aclassAP__DAL_html_a30e37092f6f4f89e6f6fc1824737b2aea2c8fd2ce5d2cb69111494819477944f8"><div class="ttname"><a href="classAP__DAL.html#a30e37092f6f4f89e6f6fc1824737b2aea2c8fd2ce5d2cb69111494819477944f8">AP_DAL::Event::resetHeightDatum</a></div><div class="ttdeci">@ resetHeightDatum</div></div>
<div class="ttc" id="aclassAP__DAL_html_a30e37092f6f4f89e6f6fc1824737b2aea6b1c9f2214e9c10dad4571fa4906261b"><div class="ttname"><a href="classAP__DAL.html#a30e37092f6f4f89e6f6fc1824737b2aea6b1c9f2214e9c10dad4571fa4906261b">AP_DAL::Event::unsetTerrainHgtStable</a></div><div class="ttdeci">@ unsetTerrainHgtStable</div></div>
<div class="ttc" id="aclassAP__DAL_html_a30e37092f6f4f89e6f6fc1824737b2aea88c8bd67ae3737ca2d74aab8b6fb6097"><div class="ttname"><a href="classAP__DAL.html#a30e37092f6f4f89e6f6fc1824737b2aea88c8bd67ae3737ca2d74aab8b6fb6097">AP_DAL::Event::setTerrainHgtStable</a></div><div class="ttdeci">@ setTerrainHgtStable</div></div>
<div class="ttc" id="aclassAP__DAL_html_a30e37092f6f4f89e6f6fc1824737b2aea8ee26806b5c45099cbdabaf500f15271"><div class="ttname"><a href="classAP__DAL.html#a30e37092f6f4f89e6f6fc1824737b2aea8ee26806b5c45099cbdabaf500f15271">AP_DAL::Event::setSourceSet0</a></div><div class="ttdeci">@ setSourceSet0</div></div>
<div class="ttc" id="aclassAP__DAL_html_a30e37092f6f4f89e6f6fc1824737b2aeab374ab0e06d0494a97acd4457271203b"><div class="ttname"><a href="classAP__DAL.html#a30e37092f6f4f89e6f6fc1824737b2aeab374ab0e06d0494a97acd4457271203b">AP_DAL::Event::checkLaneSwitch</a></div><div class="ttdeci">@ checkLaneSwitch</div></div>
<div class="ttc" id="aclassAP__DAL_html_a30e37092f6f4f89e6f6fc1824737b2aeab7578cc46457a891fbbad868e3c05e90"><div class="ttname"><a href="classAP__DAL.html#a30e37092f6f4f89e6f6fc1824737b2aeab7578cc46457a891fbbad868e3c05e90">AP_DAL::Event::requestYawReset</a></div><div class="ttdeci">@ requestYawReset</div></div>
<div class="ttc" id="aclassAP__DAL_html_a30e37092f6f4f89e6f6fc1824737b2aeaf53f323b3768b9c41648ec75084231d9"><div class="ttname"><a href="classAP__DAL.html#a30e37092f6f4f89e6f6fc1824737b2aeaf53f323b3768b9c41648ec75084231d9">AP_DAL::Event::resetGyroBias</a></div><div class="ttdeci">@ resetGyroBias</div></div>
<div class="ttc" id="aclassAP__DAL_html_a339b1248853fa41da787a7e10dd4469b"><div class="ttname"><a href="classAP__DAL.html#a339b1248853fa41da787a7e10dd4469b">AP_DAL::writeWheelOdom</a></div><div class="ttdeci">void writeWheelOdom(float delAng, float delTime, uint32_t timeStamp_ms, const Vector3f &amp;posOffset, float radius)</div><div class="ttdef"><b>Definition</b> <a href="AP__DAL_8cpp_source.html#l00390">AP_DAL.cpp:390</a></div></div>
<div class="ttc" id="aclassAP__DAL_html_a379ec175c98b831e31835e9c524f160c"><div class="ttname"><a href="classAP__DAL.html#a379ec175c98b831e31835e9c524f160c">AP_DAL::snprintf</a></div><div class="ttdeci">int snprintf(char *str, size_t size, const char *format,...) const</div><div class="ttdef"><b>Definition</b> <a href="AP__DAL_8cpp_source.html#l00261">AP_DAL.cpp:261</a></div></div>
<div class="ttc" id="aclassAP__DAL_html_a43811ce43863e6ecf07d93b2e1db97ef"><div class="ttname"><a href="classAP__DAL.html#a43811ce43863e6ecf07d93b2e1db97ef">AP_DAL::writeOptFlowMeas</a></div><div class="ttdeci">void writeOptFlowMeas(const uint8_t rawFlowQuality, const Vector2f &amp;rawFlowRates, const Vector2f &amp;rawGyroRates, const uint32_t msecFlowMeas, const Vector3f &amp;posOffset, float heightOverride)</div><div class="ttdef"><b>Definition</b> <a href="AP__DAL_8cpp_source.html#l00334">AP_DAL.cpp:334</a></div></div>
<div class="ttc" id="aclassAP__DAL_html_a43fba707a1a197c1cf57d6282a828b9b"><div class="ttname"><a href="classAP__DAL.html#a43fba707a1a197c1cf57d6282a828b9b">AP_DAL::millis</a></div><div class="ttdeci">uint32_t millis() const</div><div class="ttdef"><b>Definition</b> <a href="AP__DAL_8h_source.html#l00077">AP_DAL.h:77</a></div></div>
<div class="ttc" id="aclassAP__DAL_html_a6942be2fc29e5691dfa3f862ad897b53"><div class="ttname"><a href="classAP__DAL.html#a6942be2fc29e5691dfa3f862ad897b53">AP_DAL::available_memory</a></div><div class="ttdeci">uint32_t available_memory() const</div><div class="ttdef"><b>Definition</b> <a href="AP__DAL_8h_source.html#l00112">AP_DAL.h:112</a></div></div>
<div class="ttc" id="aclassAP__DAL_html_a782db34b87fa285703b89a30b2ba8727"><div class="ttname"><a href="classAP__DAL.html#a782db34b87fa285703b89a30b2ba8727">AP_DAL::log_SetOriginLLH3</a></div><div class="ttdeci">void log_SetOriginLLH3(const Location &amp;loc)</div><div class="ttdef"><b>Definition</b> <a href="AP__DAL_8cpp_source.html#l00225">AP_DAL.cpp:225</a></div></div>
<div class="ttc" id="aclassAP__DAL_html_a88666a1031bcaaee31b70406e79540b5"><div class="ttname"><a href="classAP__DAL.html#a88666a1031bcaaee31b70406e79540b5">AP_DAL::log_writeDefaultAirSpeed3</a></div><div class="ttdeci">void log_writeDefaultAirSpeed3(const float aspeed, const float uncertainty)</div><div class="ttdef"><b>Definition</b> <a href="AP__DAL_8cpp_source.html#l00237">AP_DAL.cpp:237</a></div></div>
<div class="ttc" id="aclassAP__DAL_html_a8af2e09e3df6f96c0b65598df2bd157a"><div class="ttname"><a href="classAP__DAL.html#a8af2e09e3df6f96c0b65598df2bd157a">AP_DAL::writeBodyFrameOdom</a></div><div class="ttdeci">void writeBodyFrameOdom(float quality, const Vector3f &amp;delPos, const Vector3f &amp;delAng, float delTime, uint32_t timeStamp_ms, uint16_t delay_ms, const Vector3f &amp;posOffset)</div><div class="ttdef"><b>Definition</b> <a href="AP__DAL_8cpp_source.html#l00403">AP_DAL.cpp:403</a></div></div>
<div class="ttc" id="aclassAP__DAL_html_a8e93e5727707c0b0c8a41d74ae4b34f1"><div class="ttname"><a href="classAP__DAL.html#a8e93e5727707c0b0c8a41d74ae4b34f1">AP_DAL::ins</a></div><div class="ttdeci">AP_DAL_InertialSensor &amp; ins()</div><div class="ttdef"><b>Definition</b> <a href="AP__DAL_8h_source.html#l00130">AP_DAL.h:130</a></div></div>
<div class="ttc" id="aclassAP__DAL_html_aa41c9b00116bc5c6efc7eb3c6b915ed3"><div class="ttname"><a href="classAP__DAL.html#aa41c9b00116bc5c6efc7eb3c6b915ed3">AP_DAL::log_event3</a></div><div class="ttdeci">void log_event3(Event event)</div><div class="ttdef"><b>Definition</b> <a href="AP__DAL_8cpp_source.html#l00214">AP_DAL.cpp:214</a></div></div>
<div class="ttc" id="aclassAP__DAL_html_aacd3492110784dce84ac67e3442cfee6"><div class="ttname"><a href="classAP__DAL.html#aacd3492110784dce84ac67e3442cfee6">AP_DAL::start_frame</a></div><div class="ttdeci">void start_frame(FrameType frametype)</div><div class="ttdef"><b>Definition</b> <a href="AP__DAL_8cpp_source.html#l00023">AP_DAL.cpp:23</a></div></div>
<div class="ttc" id="aclassAP__DAL_html_abe2e7f628098bcd4d1df4121ce03f92eaae9953a8fbbb13931f91eadd4ff027a2"><div class="ttname"><a href="classAP__DAL.html#abe2e7f628098bcd4d1df4121ce03f92eaae9953a8fbbb13931f91eadd4ff027a2">AP_DAL::MEM_FAST</a></div><div class="ttdeci">@ MEM_FAST</div><div class="ttdef"><b>Definition</b> <a href="AP__DAL_8h_source.html#l00127">AP_DAL.h:126</a></div></div>
<div class="ttc" id="aclassAP__DAL_html_ac076a0fb15a7a66d5a2a4d80e14ba900"><div class="ttname"><a href="classAP__DAL.html#ac076a0fb15a7a66d5a2a4d80e14ba900">AP_DAL::log_writeEulerYawAngle</a></div><div class="ttdeci">void log_writeEulerYawAngle(float yawAngle, float yawAngleErr, uint32_t timeStamp_ms, uint8_t type)</div><div class="ttdef"><b>Definition</b> <a href="AP__DAL_8cpp_source.html#l00248">AP_DAL.cpp:248</a></div></div>
<div class="ttc" id="aclassAP__DAL_html_ac3234bd198e0f2ab1f21fd34fd3751b8"><div class="ttname"><a href="classAP__DAL.html#ac3234bd198e0f2ab1f21fd34fd3751b8">AP_DAL::get_armed</a></div><div class="ttdeci">bool get_armed() const</div><div class="ttdef"><b>Definition</b> <a href="AP__DAL_8h_source.html#l00104">AP_DAL.h:104</a></div></div>
<div class="ttc" id="aclassAP__DAL_html_af036cd307771df02cf4e3dfc534a175c"><div class="ttname"><a href="classAP__DAL.html#af036cd307771df02cf4e3dfc534a175c">AP_DAL::writeExtNavData</a></div><div class="ttdeci">void writeExtNavData(const Vector3f &amp;pos, const Quaternion &amp;quat, float posErr, float angErr, uint32_t timeStamp_ms, uint16_t delay_ms, uint32_t resetTime_ms)</div><div class="ttdef"><b>Definition</b> <a href="AP__DAL_8cpp_source.html#l00349">AP_DAL.cpp:349</a></div></div>
<div class="ttc" id="aclassAP__DAL_html_af4f9b2694a134a87d5a6e50f2df9b420a8213dc971b8858fb00d67c41dff0617c"><div class="ttname"><a href="classAP__DAL.html#af4f9b2694a134a87d5a6e50f2df9b420a8213dc971b8858fb00d67c41dff0617c">AP_DAL::EKFType::EKF3</a></div><div class="ttdeci">@ EKF3</div></div>
<div class="ttc" id="aclassAP__DAL_html_af59be9a791f80ecdb6127906be93d1da"><div class="ttname"><a href="classAP__DAL.html#af59be9a791f80ecdb6127906be93d1da">AP_DAL::malloc_type</a></div><div class="ttdeci">void * malloc_type(size_t size, enum Memory_Type mem_type) const</div><div class="ttdef"><b>Definition</b> <a href="AP__DAL_8cpp_source.html#l00270">AP_DAL.cpp:270</a></div></div>
<div class="ttc" id="aclassAP__DAL_html_af71c3019a210e9d9b42f9ecafec1b6a9"><div class="ttname"><a href="classAP__DAL.html#af71c3019a210e9d9b42f9ecafec1b6a9">AP_DAL::micros64</a></div><div class="ttdeci">uint64_t micros64() const</div><div class="ttdef"><b>Definition</b> <a href="AP__DAL_8h_source.html#l00075">AP_DAL.h:75</a></div></div>
<div class="ttc" id="aclassAP__InertialSensor_html_a4807bcb7a752455c5752250d2e665981"><div class="ttname"><a href="classAP__InertialSensor.html#a4807bcb7a752455c5752250d2e665981">AP_InertialSensor::get_loop_rate_hz</a></div><div class="ttdeci">uint16_t get_loop_rate_hz(void) const</div><div class="ttdef"><b>Definition</b> <a href="AP__InertialSensor_8h_source.html#l00216">AP_InertialSensor.h:216</a></div></div>
<div class="ttc" id="aclassAP__InertialSensor_html_a8ca2cbf528de2276d1be01c00243db0d"><div class="ttname"><a href="classAP__InertialSensor.html#a8ca2cbf528de2276d1be01c00243db0d">AP_InertialSensor::get_accel_count</a></div><div class="ttdeci">uint8_t get_accel_count(void) const</div><div class="ttdef"><b>Definition</b> <a href="AP__InertialSensor_8h_source.html#l00151">AP_InertialSensor.h:151</a></div></div>
<div class="ttc" id="aclassAP__NavEKF__Source_html"><div class="ttname"><a href="classAP__NavEKF__Source.html">AP_NavEKF_Source</a></div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF__Source_8h_source.html#l00007">AP_NavEKF_Source.h:8</a></div></div>
<div class="ttc" id="aclassAP__NavEKF__Source_html_a17d5e8c0aef9358cb583818843738a9a"><div class="ttname"><a href="classAP__NavEKF__Source.html#a17d5e8c0aef9358cb583818843738a9a">AP_NavEKF_Source::align_inactive_sources</a></div><div class="ttdeci">void align_inactive_sources()</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF__Source_8cpp_source.html#l00250">AP_NavEKF_Source.cpp:250</a></div></div>
<div class="ttc" id="aclassAP__NavEKF__Source_html_a1fd577b10a24b01faba472f17c7b3105"><div class="ttname"><a href="classAP__NavEKF__Source.html#a1fd577b10a24b01faba472f17c7b3105">AP_NavEKF_Source::setPosVelYawSourceSet</a></div><div class="ttdeci">void setPosVelYawSourceSet(uint8_t source_set_idx)</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF__Source_8cpp_source.html#l00151">AP_NavEKF_Source.cpp:151</a></div></div>
<div class="ttc" id="aclassAP__NavEKF__Source_html_a3af9d170046f84985eae7e6ed6b98ad4a4a3fd580504c35a69c1ea7fda0f01fce"><div class="ttname"><a href="classAP__NavEKF__Source.html#a3af9d170046f84985eae7e6ed6b98ad4a4a3fd580504c35a69c1ea7fda0f01fce">AP_NavEKF_Source::SourceZ::BEACON</a></div><div class="ttdeci">@ BEACON</div></div>
<div class="ttc" id="aclassAP__NavEKF__Source_html_a3af9d170046f84985eae7e6ed6b98ad4a79f54eff060a61f2f82424bdb8f97eaa"><div class="ttname"><a href="classAP__NavEKF__Source.html#a3af9d170046f84985eae7e6ed6b98ad4a79f54eff060a61f2f82424bdb8f97eaa">AP_NavEKF_Source::SourceZ::RANGEFINDER</a></div><div class="ttdeci">@ RANGEFINDER</div></div>
<div class="ttc" id="aclassAP__NavEKF__Source_html_a3af9d170046f84985eae7e6ed6b98ad4a8c578de37278ada488d763ea86c5cf20"><div class="ttname"><a href="classAP__NavEKF__Source.html#a3af9d170046f84985eae7e6ed6b98ad4a8c578de37278ada488d763ea86c5cf20">AP_NavEKF_Source::SourceZ::GPS</a></div><div class="ttdeci">@ GPS</div></div>
<div class="ttc" id="aclassAP__NavEKF__Source_html_a3af9d170046f84985eae7e6ed6b98ad4ab50339a10e1de285ac99d4c3990b8693"><div class="ttname"><a href="classAP__NavEKF__Source.html#a3af9d170046f84985eae7e6ed6b98ad4ab50339a10e1de285ac99d4c3990b8693">AP_NavEKF_Source::SourceZ::NONE</a></div><div class="ttdeci">@ NONE</div></div>
<div class="ttc" id="aclassAP__NavEKF__Source_html_a3af9d170046f84985eae7e6ed6b98ad4aeb2e536d157ad22fbb72fb51be8191f7"><div class="ttname"><a href="classAP__NavEKF__Source.html#a3af9d170046f84985eae7e6ed6b98ad4aeb2e536d157ad22fbb72fb51be8191f7">AP_NavEKF_Source::SourceZ::EXTNAV</a></div><div class="ttdeci">@ EXTNAV</div></div>
<div class="ttc" id="aclassAP__NavEKF__Source_html_a4110475fe909979cc621b5c9ae35ac50"><div class="ttname"><a href="classAP__NavEKF__Source.html#a4110475fe909979cc621b5c9ae35ac50">AP_NavEKF_Source::pre_arm_check</a></div><div class="ttdeci">bool pre_arm_check(bool requires_position, char *failure_msg, uint8_t failure_msg_len) const</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF__Source_8cpp_source.html#l00325">AP_NavEKF_Source.cpp:325</a></div></div>
<div class="ttc" id="aclassAP__NavEKF__Source_html_a56c45e39c77958e2fc8524bb19154d26"><div class="ttname"><a href="classAP__NavEKF__Source.html#a56c45e39c77958e2fc8524bb19154d26">AP_NavEKF_Source::get_active_source_set</a></div><div class="ttdeci">uint8_t get_active_source_set() const</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF__Source_8cpp_source.html#l00551">AP_NavEKF_Source.cpp:551</a></div></div>
<div class="ttc" id="aclassAP__NavEKF__Source_html_a8effcb0802778fc240f30d949ae2a4a1"><div class="ttname"><a href="classAP__NavEKF__Source.html#a8effcb0802778fc240f30d949ae2a4a1">AP_NavEKF_Source::getYawSource</a></div><div class="ttdeci">SourceYaw getYawSource() const</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF__Source_8cpp_source.html#l00227">AP_NavEKF_Source.cpp:227</a></div></div>
<div class="ttc" id="aclassAP__NavEKF__Source_html_a9978923579ec2a26a23436d6e25a1a17"><div class="ttname"><a href="classAP__NavEKF__Source.html#a9978923579ec2a26a23436d6e25a1a17">AP_NavEKF_Source::getPosXYSource</a></div><div class="ttdeci">SourceXY getPosXYSource() const</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF__Source_8h_source.html#l00057">AP_NavEKF_Source.h:57</a></div></div>
<div class="ttc" id="aclassAP__NavEKF__Source_html_aa463f183bb6c2c7f2b217792b850af46"><div class="ttname"><a href="classAP__NavEKF__Source.html#aa463f183bb6c2c7f2b217792b850af46">AP_NavEKF_Source::SourceXY</a></div><div class="ttdeci">SourceXY</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF__Source_8h_source.html#l00017">AP_NavEKF_Source.h:17</a></div></div>
<div class="ttc" id="aclassAP__NavEKF__Source_html_aa463f183bb6c2c7f2b217792b850af46a78af6b14ce7ccf280ac26a6adef30488"><div class="ttname"><a href="classAP__NavEKF__Source.html#aa463f183bb6c2c7f2b217792b850af46a78af6b14ce7ccf280ac26a6adef30488">AP_NavEKF_Source::SourceXY::OPTFLOW</a></div><div class="ttdeci">@ OPTFLOW</div></div>
<div class="ttc" id="aclassAP__NavEKF__Source_html_aa463f183bb6c2c7f2b217792b850af46a8c578de37278ada488d763ea86c5cf20"><div class="ttname"><a href="classAP__NavEKF__Source.html#aa463f183bb6c2c7f2b217792b850af46a8c578de37278ada488d763ea86c5cf20">AP_NavEKF_Source::SourceXY::GPS</a></div><div class="ttdeci">@ GPS</div></div>
<div class="ttc" id="aclassAP__NavEKF__Source_html_aa463f183bb6c2c7f2b217792b850af46ab50339a10e1de285ac99d4c3990b8693"><div class="ttname"><a href="classAP__NavEKF__Source.html#aa463f183bb6c2c7f2b217792b850af46ab50339a10e1de285ac99d4c3990b8693">AP_NavEKF_Source::SourceXY::NONE</a></div><div class="ttdeci">@ NONE</div></div>
<div class="ttc" id="aclassAP__NavEKF__Source_html_abea913018218a14b824166c4e9392c34"><div class="ttname"><a href="classAP__NavEKF__Source.html#abea913018218a14b824166c4e9392c34">AP_NavEKF_Source::mark_configured</a></div><div class="ttdeci">void mark_configured()</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF__Source_8cpp_source.html#l00317">AP_NavEKF_Source.cpp:317</a></div></div>
<div class="ttc" id="aclassAP__NavEKF__Source_html_ac1dcc7cc9e9827ba974eeaeccdaa96bd"><div class="ttname"><a href="classAP__NavEKF__Source.html#ac1dcc7cc9e9827ba974eeaeccdaa96bd">AP_NavEKF_Source::SourceYaw</a></div><div class="ttdeci">SourceYaw</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF__Source_8h_source.html#l00039">AP_NavEKF_Source.h:39</a></div></div>
<div class="ttc" id="aclassAP__NavEKF__Source_html_ac1dcc7cc9e9827ba974eeaeccdaa96bda63a614587caac5bf9ba9582fcb30ed4c"><div class="ttname"><a href="classAP__NavEKF__Source.html#ac1dcc7cc9e9827ba974eeaeccdaa96bda63a614587caac5bf9ba9582fcb30ed4c">AP_NavEKF_Source::SourceYaw::GPS_COMPASS_FALLBACK</a></div><div class="ttdeci">@ GPS_COMPASS_FALLBACK</div></div>
<div class="ttc" id="aclassAP__NavEKF__Source_html_ac1dcc7cc9e9827ba974eeaeccdaa96bda8c578de37278ada488d763ea86c5cf20"><div class="ttname"><a href="classAP__NavEKF__Source.html#ac1dcc7cc9e9827ba974eeaeccdaa96bda8c578de37278ada488d763ea86c5cf20">AP_NavEKF_Source::SourceYaw::GPS</a></div><div class="ttdeci">@ GPS</div></div>
<div class="ttc" id="aclassAP__NavEKF__Source_html_ada7edb097581d01c0a00a15100287cdf"><div class="ttname"><a href="classAP__NavEKF__Source.html#ada7edb097581d01c0a00a15100287cdf">AP_NavEKF_Source::configured</a></div><div class="ttdeci">bool configured()</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF__Source_8cpp_source.html#l00304">AP_NavEKF_Source.cpp:304</a></div></div>
<div class="ttc" id="aclassAP__Param_html_a5f6dcfce1c0a79cf5bd81283e22f3201"><div class="ttname"><a href="classAP__Param.html#a5f6dcfce1c0a79cf5bd81283e22f3201">AP_Param::setup_object_defaults</a></div><div class="ttdeci">static void setup_object_defaults(const void *object_pointer, const struct GroupInfo *group_info)</div><div class="ttdef"><b>Definition</b> <a href="main_8cpp_source.html#l00010">main.cpp:10</a></div></div>
<div class="ttc" id="aclassAP__Param_html_a857c14c819b6d550957d0f9c56c379d0"><div class="ttname"><a href="classAP__Param.html#a857c14c819b6d550957d0f9c56c379d0">AP_Param::find_old_parameter</a></div><div class="ttdeci">static bool find_old_parameter(const struct ConversionInfo *info, AP_Param *value)</div><div class="ttdef"><b>Definition</b> <a href="AP__Param_8cpp_source.html#l01935">AP_Param.cpp:1935</a></div></div>
<div class="ttc" id="aclassAP__Param_html_a97a7b5f898c84c99cb57c76d4ddc870c"><div class="ttname"><a href="classAP__Param.html#a97a7b5f898c84c99cb57c76d4ddc870c">AP_Param::find_top_level_key_by_pointer</a></div><div class="ttdeci">static bool find_top_level_key_by_pointer(const void *ptr, uint16_t &amp;key)</div><div class="ttdef"><b>Definition</b> <a href="AP__Param_8cpp_source.html#l01057">AP_Param.cpp:1057</a></div></div>
<div class="ttc" id="aclassAP__Param_html_ac821b09bbf13b79a0a6b30c58deaf4a7"><div class="ttname"><a href="classAP__Param.html#ac821b09bbf13b79a0a6b30c58deaf4a7">AP_Param::set_and_save_by_name</a></div><div class="ttdeci">static bool set_and_save_by_name(const char *name, float value)</div><div class="ttdef"><b>Definition</b> <a href="AP__Param_8cpp_source.html#l02757">AP_Param.cpp:2757</a></div></div>
<div class="ttc" id="aclassEKFGSF__yaw_html"><div class="ttname"><a href="classEKFGSF__yaw.html">EKFGSF_yaw</a></div><div class="ttdef"><b>Definition</b> <a href="EKFGSF__yaw_8h_source.html#l00012">EKFGSF_yaw.h:13</a></div></div>
<div class="ttc" id="aclassGCS__MAVLINK_html"><div class="ttname"><a href="classGCS__MAVLINK.html">GCS_MAVLINK</a></div><div class="ttdoc">MAVLink transport control class.</div><div class="ttdef"><b>Definition</b> <a href="GCS_8h_source.html#l00189">GCS.h:190</a></div></div>
<div class="ttc" id="aclassLocation_html"><div class="ttname"><a href="classLocation.html">Location</a></div><div class="ttdef"><b>Definition</b> <a href="Location_8h_source.html#l00007">Location.h:8</a></div></div>
<div class="ttc" id="aclassMatrix3_html"><div class="ttname"><a href="classMatrix3.html">Matrix3&lt; float &gt;</a></div></div>
<div class="ttc" id="aclassNavEKF3__core_html"><div class="ttname"><a href="classNavEKF3__core.html">NavEKF3_core</a></div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3__core_8h_source.html#l00127">AP_NavEKF3_core.h:128</a></div></div>
<div class="ttc" id="aclassNavEKF3__core_html_a0367f32f87569616404164da99b5c83f"><div class="ttname"><a href="classNavEKF3__core.html#a0367f32f87569616404164da99b5c83f">NavEKF3_core::getFilterStatus</a></div><div class="ttdeci">void getFilterStatus(nav_filter_status &amp;status) const</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3__Outputs_8cpp_source.html#l00557">AP_NavEKF3_Outputs.cpp:557</a></div></div>
<div class="ttc" id="aclassNavEKF3__core_html_a0630cd65430a8082b50c94b4664fdb51"><div class="ttname"><a href="classNavEKF3__core.html#a0630cd65430a8082b50c94b4664fdb51">NavEKF3_core::getVelNED</a></div><div class="ttdeci">void getVelNED(Vector3f &amp;vel) const</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3__Outputs_8cpp_source.html#l00172">AP_NavEKF3_Outputs.cpp:172</a></div></div>
<div class="ttc" id="aclassNavEKF3__core_html_a0a3c021b87e1ff291b1c55a1204e7fca"><div class="ttname"><a href="classNavEKF3__core.html#a0a3c021b87e1ff291b1c55a1204e7fca">NavEKF3_core::getQuaternion</a></div><div class="ttdeci">void getQuaternion(Quaternion &amp;quat) const</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3__Outputs_8cpp_source.html#l00123">AP_NavEKF3_Outputs.cpp:123</a></div></div>
<div class="ttc" id="aclassNavEKF3__core_html_a0b2dfa8c5d29f74c757f8075b9945eb7"><div class="ttname"><a href="classNavEKF3__core.html#a0b2dfa8c5d29f74c757f8075b9945eb7">NavEKF3_core::have_aligned_yaw</a></div><div class="ttdeci">bool have_aligned_yaw(void) const</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3__core_8h_source.html#l00445">AP_NavEKF3_core.h:445</a></div></div>
<div class="ttc" id="aclassNavEKF3__core_html_a1084d1fe66f563415bf1f0bc9cd2ca6e"><div class="ttname"><a href="classNavEKF3__core.html#a1084d1fe66f563415bf1f0bc9cd2ca6e">NavEKF3_core::healthy</a></div><div class="ttdeci">bool healthy(void) const</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3__Outputs_8cpp_source.html#l00009">AP_NavEKF3_Outputs.cpp:9</a></div></div>
<div class="ttc" id="aclassNavEKF3__core_html_a1539785d1188622740f6bce08e5edfbd"><div class="ttname"><a href="classNavEKF3__core.html#a1539785d1188622740f6bce08e5edfbd">NavEKF3_core::setTerrainHgtStable</a></div><div class="ttdeci">void setTerrainHgtStable(bool val)</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3__VehicleStatus_8cpp_source.html#l00442">AP_NavEKF3_VehicleStatus.cpp:442</a></div></div>
<div class="ttc" id="aclassNavEKF3__core_html_a18160d7949e6a45af08e8bfbbf9dc240"><div class="ttname"><a href="classNavEKF3__core.html#a18160d7949e6a45af08e8bfbbf9dc240">NavEKF3_core::getOriginLLH</a></div><div class="ttdeci">bool getOriginLLH(Location &amp;loc) const</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3__Outputs_8cpp_source.html#l00387">AP_NavEKF3_Outputs.cpp:387</a></div></div>
<div class="ttc" id="aclassNavEKF3__core_html_a226f32c406b6c6f01bdf5078e696cc18"><div class="ttname"><a href="classNavEKF3__core.html#a226f32c406b6c6f01bdf5078e696cc18">NavEKF3_core::isVibrationAffected</a></div><div class="ttdeci">bool isVibrationAffected() const</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3__core_8h_source.html#l00452">AP_NavEKF3_core.h:452</a></div></div>
<div class="ttc" id="aclassNavEKF3__core_html_a2a7fae9e0bf2ce6fc2f9b3918dc168d3"><div class="ttname"><a href="classNavEKF3__core.html#a2a7fae9e0bf2ce6fc2f9b3918dc168d3">NavEKF3_core::UpdateFilter</a></div><div class="ttdeci">void UpdateFilter(bool predict)</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3__core_8cpp_source.html#l00609">AP_NavEKF3_core.cpp:609</a></div></div>
<div class="ttc" id="aclassNavEKF3__core_html_a33764d8f8d4538743ed8500c3be0e480"><div class="ttname"><a href="classNavEKF3__core.html#a33764d8f8d4538743ed8500c3be0e480">NavEKF3_core::writeDefaultAirSpeed</a></div><div class="ttdeci">void writeDefaultAirSpeed(float airspeed, float uncertainty)</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3__Measurements_8cpp_source.html#l01017">AP_NavEKF3_Measurements.cpp:1017</a></div></div>
<div class="ttc" id="aclassNavEKF3__core_html_a3ebf786bbc226b9f3b2da1e15ec3247d"><div class="ttname"><a href="classNavEKF3__core.html#a3ebf786bbc226b9f3b2da1e15ec3247d">NavEKF3_core::getRotationBodyToNED</a></div><div class="ttdeci">void getRotationBodyToNED(Matrix3f &amp;mat) const</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3__Outputs_8cpp_source.html#l00116">AP_NavEKF3_Outputs.cpp:116</a></div></div>
<div class="ttc" id="aclassNavEKF3__core_html_a41309cf6ebc9d6ba6110d3a2c0ee1015"><div class="ttname"><a href="classNavEKF3__core.html#a41309cf6ebc9d6ba6110d3a2c0ee1015">NavEKF3_core::use_compass</a></div><div class="ttdeci">bool use_compass(void) const</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3__Control_8cpp_source.html#l00584">AP_NavEKF3_Control.cpp:584</a></div></div>
<div class="ttc" id="aclassNavEKF3__core_html_a44d9f37a3ad6be9710d583e269743347"><div class="ttname"><a href="classNavEKF3__core.html#a44d9f37a3ad6be9710d583e269743347">NavEKF3_core::getPosD</a></div><div class="ttdeci">bool getPosD(float &amp;posD) const</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3__Outputs_8cpp_source.html#l00282">AP_NavEKF3_Outputs.cpp:282</a></div></div>
<div class="ttc" id="aclassNavEKF3__core_html_a45c5ebcb785701dac82a183c3bcf8c8a"><div class="ttname"><a href="classNavEKF3__core.html#a45c5ebcb785701dac82a183c3bcf8c8a">NavEKF3_core::getWind</a></div><div class="ttdeci">bool getWind(Vector3f &amp;wind) const</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3__Outputs_8cpp_source.html#l00162">AP_NavEKF3_Outputs.cpp:162</a></div></div>
<div class="ttc" id="aclassNavEKF3__core_html_a48263af5835a86691625db1a0a27364e"><div class="ttname"><a href="classNavEKF3__core.html#a48263af5835a86691625db1a0a27364e">NavEKF3_core::getLastYawResetAngle</a></div><div class="ttdeci">uint32_t getLastYawResetAngle(float &amp;yawAng) const</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3__Outputs_8cpp_source.html#l00130">AP_NavEKF3_Outputs.cpp:130</a></div></div>
<div class="ttc" id="aclassNavEKF3__core_html_a4ef25401d1d27de6f4a4bfb844fc6152"><div class="ttname"><a href="classNavEKF3__core.html#a4ef25401d1d27de6f4a4bfb844fc6152">NavEKF3_core::get_yawEstimator</a></div><div class="ttdeci">const EKFGSF_yaw * get_yawEstimator(void) const</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3__core_8h_source.html#l00455">AP_NavEKF3_core.h:455</a></div></div>
<div class="ttc" id="aclassNavEKF3__core_html_a558826c88490c1c60ef8c48e937138ff"><div class="ttname"><a href="classNavEKF3__core.html#a558826c88490c1c60ef8c48e937138ff">NavEKF3_core::setLatLng</a></div><div class="ttdeci">bool setLatLng(const Location &amp;loc, float posAccuracy, uint32_t timestamp_ms)</div></div>
<div class="ttc" id="aclassNavEKF3__core_html_a5a9f0e2cd73cf625c7015bf0dbb43393"><div class="ttname"><a href="classNavEKF3__core.html#a5a9f0e2cd73cf625c7015bf0dbb43393">NavEKF3_core::getEkfControlLimits</a></div><div class="ttdeci">void getEkfControlLimits(float &amp;ekfGndSpdLimit, float &amp;ekfNavVelGainScaler) const</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3__Outputs_8cpp_source.html#l00366">AP_NavEKF3_Outputs.cpp:366</a></div></div>
<div class="ttc" id="aclassNavEKF3__core_html_a615004e9e54df64123a0cb6afa22f9f2"><div class="ttname"><a href="classNavEKF3__core.html#a615004e9e54df64123a0cb6afa22f9f2">NavEKF3_core::writeExtNavVelData</a></div><div class="ttdeci">void writeExtNavVelData(const Vector3f &amp;vel, float err, uint32_t timeStamp_ms, uint16_t delay_ms)</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3__Measurements_8cpp_source.html#l01081">AP_NavEKF3_Measurements.cpp:1081</a></div></div>
<div class="ttc" id="aclassNavEKF3__core_html_a6a3c5ad71ef8b45820c8442ac78ec46e"><div class="ttname"><a href="classNavEKF3__core.html#a6a3c5ad71ef8b45820c8442ac78ec46e">NavEKF3_core::setOriginLLH</a></div><div class="ttdeci">bool setOriginLLH(const Location &amp;loc)</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3__Control_8cpp_source.html#l00638">AP_NavEKF3_Control.cpp:638</a></div></div>
<div class="ttc" id="aclassNavEKF3__core_html_a6f8d21f162d7fa8c309a776a561b1f18"><div class="ttname"><a href="classNavEKF3__core.html#a6f8d21f162d7fa8c309a776a561b1f18">NavEKF3_core::getEulerAngles</a></div><div class="ttdeci">void getEulerAngles(Vector3f &amp;eulers) const</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3__Outputs_8cpp_source.html#l00089">AP_NavEKF3_Outputs.cpp:89</a></div></div>
<div class="ttc" id="aclassNavEKF3__core_html_a78e47cc15cbe8fa43353bddc456293ff"><div class="ttname"><a href="classNavEKF3__core.html#a78e47cc15cbe8fa43353bddc456293ff">NavEKF3_core::writeBodyFrameOdom</a></div><div class="ttdeci">void writeBodyFrameOdom(float quality, const Vector3f &amp;delPos, const Vector3f &amp;delAng, float delTime, uint32_t timeStamp_ms, uint16_t delay_ms, const Vector3f &amp;posOffset)</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3__Measurements_8cpp_source.html#l00109">AP_NavEKF3_Measurements.cpp:109</a></div></div>
<div class="ttc" id="aclassNavEKF3__core_html_a7e6f5368184ed65123b5a3e64857ec64"><div class="ttname"><a href="classNavEKF3__core.html#a7e6f5368184ed65123b5a3e64857ec64">NavEKF3_core::getLLH</a></div><div class="ttdeci">bool getLLH(Location &amp;loc) const</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3__Outputs_8cpp_source.html#l00307">AP_NavEKF3_Outputs.cpp:307</a></div></div>
<div class="ttc" id="aclassNavEKF3__core_html_a7fcb0ee81e8b10edfcb4ee7fc39a7bbd"><div class="ttname"><a href="classNavEKF3__core.html#a7fcb0ee81e8b10edfcb4ee7fc39a7bbd">NavEKF3_core::errorScore</a></div><div class="ttdeci">float errorScore(void) const</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3__Outputs_8cpp_source.html#l00037">AP_NavEKF3_Outputs.cpp:37</a></div></div>
<div class="ttc" id="aclassNavEKF3__core_html_a93505e1079be2ea93f2e0cac8e3cd5d4"><div class="ttname"><a href="classNavEKF3__core.html#a93505e1079be2ea93f2e0cac8e3cd5d4">NavEKF3_core::getFilterFaults</a></div><div class="ttdeci">void getFilterFaults(uint16_t &amp;faults) const</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3__Outputs_8cpp_source.html#l00544">AP_NavEKF3_Outputs.cpp:544</a></div></div>
<div class="ttc" id="aclassNavEKF3__core_html_a95cbf578e1001ed755e5817b50512164"><div class="ttname"><a href="classNavEKF3__core.html#a95cbf578e1001ed755e5817b50512164">NavEKF3_core::writeExtNavData</a></div><div class="ttdeci">void writeExtNavData(const Vector3f &amp;pos, const Quaternion &amp;quat, float posErr, float angErr, uint32_t timeStamp_ms, uint16_t delay_ms, uint32_t resetTime_ms)</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3__Measurements_8cpp_source.html#l01027">AP_NavEKF3_Measurements.cpp:1027</a></div></div>
<div class="ttc" id="aclassNavEKF3__core_html_a994d08ccd30264ebc253083efd20c58d"><div class="ttname"><a href="classNavEKF3__core.html#a994d08ccd30264ebc253083efd20c58d">NavEKF3_core::resetGyroBias</a></div><div class="ttdeci">void resetGyroBias(void)</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3__GyroBias_8cpp_source.html#l00006">AP_NavEKF3_GyroBias.cpp:6</a></div></div>
<div class="ttc" id="aclassNavEKF3__core_html_a9cee568bfa2ed120af587a00e9075b48"><div class="ttname"><a href="classNavEKF3__core.html#a9cee568bfa2ed120af587a00e9075b48">NavEKF3_core::using_noncompass_for_yaw</a></div><div class="ttdeci">bool using_noncompass_for_yaw(void) const</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3__Control_8cpp_source.html#l00599">AP_NavEKF3_Control.cpp:599</a></div></div>
<div class="ttc" id="aclassNavEKF3__core_html_a9dc4d3eba1a0797a73ac5ffbf8039239"><div class="ttname"><a href="classNavEKF3__core.html#a9dc4d3eba1a0797a73ac5ffbf8039239">NavEKF3_core::using_extnav_for_yaw</a></div><div class="ttdeci">bool using_extnav_for_yaw() const</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3__Control_8cpp_source.html#l00615">AP_NavEKF3_Control.cpp:615</a></div></div>
<div class="ttc" id="aclassNavEKF3__core_html_aa65f297fdf62285256b81a60006ebbf2"><div class="ttname"><a href="classNavEKF3__core.html#aa65f297fdf62285256b81a60006ebbf2">NavEKF3_core::getAccelBias</a></div><div class="ttdeci">void getAccelBias(Vector3f &amp;accelBias) const</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3__Outputs_8cpp_source.html#l00106">AP_NavEKF3_Outputs.cpp:106</a></div></div>
<div class="ttc" id="aclassNavEKF3__core_html_aa733c890e57a3595796bbbe898bc4d94"><div class="ttname"><a href="classNavEKF3__core.html#aa733c890e57a3595796bbbe898bc4d94">NavEKF3_core::getMagNED</a></div><div class="ttdeci">void getMagNED(Vector3f &amp;magNED) const</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3__Outputs_8cpp_source.html#l00400">AP_NavEKF3_Outputs.cpp:400</a></div></div>
<div class="ttc" id="aclassNavEKF3__core_html_aa91c6f6836712ce3b7ade2969877ee68"><div class="ttname"><a href="classNavEKF3__core.html#aa91c6f6836712ce3b7ade2969877ee68">NavEKF3_core::getPosDownDerivative</a></div><div class="ttdeci">float getPosDownDerivative(void) const</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3__Outputs_8cpp_source.html#l00211">AP_NavEKF3_Outputs.cpp:211</a></div></div>
<div class="ttc" id="aclassNavEKF3__core_html_aaba64446224961d60c7349327de28b1a"><div class="ttname"><a href="classNavEKF3__core.html#aaba64446224961d60c7349327de28b1a">NavEKF3_core::writeOptFlowMeas</a></div><div class="ttdeci">void writeOptFlowMeas(const uint8_t rawFlowQuality, const Vector2f &amp;rawFlowRates, const Vector2f &amp;rawGyroRates, const uint32_t msecFlowMeas, const Vector3f &amp;posOffset, float heightOverride)</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3__Measurements_8cpp_source.html#l00170">AP_NavEKF3_Measurements.cpp:170</a></div></div>
<div class="ttc" id="aclassNavEKF3__core_html_aae08c43b03a3b37ea48df1fbbc989cfc"><div class="ttname"><a href="classNavEKF3__core.html#aae08c43b03a3b37ea48df1fbbc989cfc">NavEKF3_core::prearm_failure_reason</a></div><div class="ttdeci">const char * prearm_failure_reason(void) const</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3__Outputs_8cpp_source.html#l00636">AP_NavEKF3_Outputs.cpp:636</a></div></div>
<div class="ttc" id="aclassNavEKF3__core_html_aae18ada44b1b7be0d45af03391ef961a"><div class="ttname"><a href="classNavEKF3__core.html#aae18ada44b1b7be0d45af03391ef961a">NavEKF3_core::InitialiseFilterBootstrap</a></div><div class="ttdeci">bool InitialiseFilterBootstrap(void)</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3__core_8cpp_source.html#l00454">AP_NavEKF3_core.cpp:454</a></div></div>
<div class="ttc" id="aclassNavEKF3__core_html_aaf10db9ffc05b032efdfad3529334fcb"><div class="ttname"><a href="classNavEKF3__core.html#aaf10db9ffc05b032efdfad3529334fcb">NavEKF3_core::getHeightControlLimit</a></div><div class="ttdeci">bool getHeightControlLimit(float &amp;height) const</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3__Outputs_8cpp_source.html#l00066">AP_NavEKF3_Outputs.cpp:66</a></div></div>
<div class="ttc" id="aclassNavEKF3__core_html_ab05f51b664969602b6453394e2849cb9"><div class="ttname"><a href="classNavEKF3__core.html#ab05f51b664969602b6453394e2849cb9">NavEKF3_core::getHAGL</a></div><div class="ttdeci">bool getHAGL(float &amp;HAGL) const</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3__Outputs_8cpp_source.html#l00296">AP_NavEKF3_Outputs.cpp:296</a></div></div>
<div class="ttc" id="aclassNavEKF3__core_html_ab0b02bd2b13ff0dfde8ab4512d58ee42"><div class="ttname"><a href="classNavEKF3__core.html#ab0b02bd2b13ff0dfde8ab4512d58ee42">NavEKF3_core::getLastPosDownReset</a></div><div class="ttdeci">uint32_t getLastPosDownReset(float &amp;posD) const</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3__Outputs_8cpp_source.html#l00146">AP_NavEKF3_Outputs.cpp:146</a></div></div>
<div class="ttc" id="aclassNavEKF3__core_html_ab21f424d7f8ff9778c0e24494970164b"><div class="ttname"><a href="classNavEKF3__core.html#ab21f424d7f8ff9778c0e24494970164b">NavEKF3_core::getIMUIndex</a></div><div class="ttdeci">uint8_t getIMUIndex(void) const</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3__core_8h_source.html#l00414">AP_NavEKF3_core.h:414</a></div></div>
<div class="ttc" id="aclassNavEKF3__core_html_ab96f7bf6ff4966c829aa6d77605f0316"><div class="ttname"><a href="classNavEKF3__core.html#ab96f7bf6ff4966c829aa6d77605f0316">NavEKF3_core::getGyroBias</a></div><div class="ttdeci">void getGyroBias(Vector3f &amp;gyroBias) const</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3__Outputs_8cpp_source.html#l00096">AP_NavEKF3_Outputs.cpp:96</a></div></div>
<div class="ttc" id="aclassNavEKF3__core_html_aba5e7f644818fb9c52c6c27211d5baec"><div class="ttname"><a href="classNavEKF3__core.html#aba5e7f644818fb9c52c6c27211d5baec">NavEKF3_core::getActiveAirspeed</a></div><div class="ttdeci">uint8_t getActiveAirspeed() const</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3__Outputs_8cpp_source.html#l00439">AP_NavEKF3_Outputs.cpp:439</a></div></div>
<div class="ttc" id="aclassNavEKF3__core_html_abf484e1b5a5ab95a99f4816a1718f713"><div class="ttname"><a href="classNavEKF3__core.html#abf484e1b5a5ab95a99f4816a1718f713">NavEKF3_core::getMagXYZ</a></div><div class="ttdeci">void getMagXYZ(Vector3f &amp;magXYZ) const</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3__Outputs_8cpp_source.html#l00406">AP_NavEKF3_Outputs.cpp:406</a></div></div>
<div class="ttc" id="aclassNavEKF3__core_html_ac25933901b64eab2be59732752774720"><div class="ttname"><a href="classNavEKF3__core.html#ac25933901b64eab2be59732752774720">NavEKF3_core::getVelInnovationsAndVariancesForSource</a></div><div class="ttdeci">bool getVelInnovationsAndVariancesForSource(AP_NavEKF_Source::SourceXY source, Vector3f &amp;innovations, Vector3f &amp;variances) const WARN_IF_UNUSED</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3__Outputs_8cpp_source.html#l00491">AP_NavEKF3_Outputs.cpp:491</a></div></div>
<div class="ttc" id="aclassNavEKF3__core_html_ac64b1264894064c1356a16ab3c6e03e0"><div class="ttname"><a href="classNavEKF3__core.html#ac64b1264894064c1356a16ab3c6e03e0">NavEKF3_core::writeWheelOdom</a></div><div class="ttdeci">void writeWheelOdom(float delAng, float delTime, uint32_t timeStamp_ms, const Vector3f &amp;posOffset, float radius)</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3__Measurements_8cpp_source.html#l00140">AP_NavEKF3_Measurements.cpp:140</a></div></div>
<div class="ttc" id="aclassNavEKF3__core_html_ac85bec75a60ead6ebb6ea194ca62f52b"><div class="ttname"><a href="classNavEKF3__core.html#ac85bec75a60ead6ebb6ea194ca62f52b">NavEKF3_core::writeEulerYawAngle</a></div><div class="ttdeci">void writeEulerYawAngle(float yawAngle, float yawAngleErr, uint32_t timeStamp_ms, uint8_t type)</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3__Measurements_8cpp_source.html#l00992">AP_NavEKF3_Measurements.cpp:992</a></div></div>
<div class="ttc" id="aclassNavEKF3__core_html_acd2cb62d0969fba455275cab5fa636c1"><div class="ttname"><a href="classNavEKF3__core.html#acd2cb62d0969fba455275cab5fa636c1">NavEKF3_core::getLastVelNorthEastReset</a></div><div class="ttdeci">uint32_t getLastVelNorthEastReset(Vector2f &amp;vel) const</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3__Outputs_8cpp_source.html#l00154">AP_NavEKF3_Outputs.cpp:154</a></div></div>
<div class="ttc" id="aclassNavEKF3__core_html_ad0b5521c00cf78bc9622659c3e24f1e8"><div class="ttname"><a href="classNavEKF3__core.html#ad0b5521c00cf78bc9622659c3e24f1e8">NavEKF3_core::getInnovations</a></div><div class="ttdeci">bool getInnovations(Vector3f &amp;velInnov, Vector3f &amp;posInnov, Vector3f &amp;magInnov, float &amp;tasInnov, float &amp;yawInnov) const</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3__Outputs_8cpp_source.html#l00445">AP_NavEKF3_Outputs.cpp:445</a></div></div>
<div class="ttc" id="aclassNavEKF3__core_html_ad9b81c98e3f482698806e02884ee2a31"><div class="ttname"><a href="classNavEKF3__core.html#ad9b81c98e3f482698806e02884ee2a31">NavEKF3_core::setup_core</a></div><div class="ttdeci">bool setup_core(uint8_t _imu_index, uint8_t _core_index)</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3__core_8cpp_source.html#l00021">AP_NavEKF3_core.cpp:21</a></div></div>
<div class="ttc" id="aclassNavEKF3__core_html_ada44d13b68ddfd4b28337d5e52921ce7"><div class="ttname"><a href="classNavEKF3__core.html#ada44d13b68ddfd4b28337d5e52921ce7">NavEKF3_core::getLastPosNorthEastReset</a></div><div class="ttdeci">uint32_t getLastPosNorthEastReset(Vector2f &amp;pos) const</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3__Outputs_8cpp_source.html#l00138">AP_NavEKF3_Outputs.cpp:138</a></div></div>
<div class="ttc" id="aclassNavEKF3__core_html_ae839fe7b5fbec7da01fe063bba905ebb"><div class="ttname"><a href="classNavEKF3__core.html#ae839fe7b5fbec7da01fe063bba905ebb">NavEKF3_core::have_aligned_tilt</a></div><div class="ttdeci">bool have_aligned_tilt(void) const</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3__core_8h_source.html#l00440">AP_NavEKF3_core.h:440</a></div></div>
<div class="ttc" id="aclassNavEKF3__core_html_af1e04cfaf90639b1695696e276cdc8d6"><div class="ttname"><a href="classNavEKF3__core.html#af1e04cfaf90639b1695696e276cdc8d6">NavEKF3_core::getPosD_local</a></div><div class="ttdeci">bool getPosD_local(float &amp;posD) const</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3__Outputs_8cpp_source.html#l00261">AP_NavEKF3_Outputs.cpp:261</a></div></div>
<div class="ttc" id="aclassNavEKF3__core_html_af41dd3cd7b4d98165245ec8176b86ec6"><div class="ttname"><a href="classNavEKF3__core.html#af41dd3cd7b4d98165245ec8176b86ec6">NavEKF3_core::getOptFlowSample</a></div><div class="ttdeci">bool getOptFlowSample(uint32_t &amp;timeStamp_ms, Vector2f &amp;flowRate, Vector2f &amp;bodyRate, Vector2f &amp;losPred) const</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3__OptFlowFusion_8cpp_source.html#l00766">AP_NavEKF3_OptFlowFusion.cpp:766</a></div></div>
<div class="ttc" id="aclassNavEKF3__core_html_af6b7a2be6adb12caf10a55a54c820501"><div class="ttname"><a href="classNavEKF3__core.html#af6b7a2be6adb12caf10a55a54c820501">NavEKF3_core::getVariances</a></div><div class="ttdeci">bool getVariances(float &amp;velVar, float &amp;posVar, float &amp;hgtVar, Vector3f &amp;magVar, float &amp;tasVar, Vector2f &amp;offset) const</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3__Outputs_8cpp_source.html#l00474">AP_NavEKF3_Outputs.cpp:474</a></div></div>
<div class="ttc" id="aclassNavEKF3__core_html_af6c3f4076addbac86cceaba98bb38cbd"><div class="ttname"><a href="classNavEKF3__core.html#af6c3f4076addbac86cceaba98bb38cbd">NavEKF3_core::getPosNE</a></div><div class="ttdeci">bool getPosNE(Vector2f &amp;posNE) const</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3__Outputs_8cpp_source.html#l00220">AP_NavEKF3_Outputs.cpp:220</a></div></div>
<div class="ttc" id="aclassNavEKF3__core_html_af731b830636f1740f0f7f85e23fb7400"><div class="ttname"><a href="classNavEKF3__core.html#af731b830636f1740f0f7f85e23fb7400">NavEKF3_core::EKFGSF_requestYawReset</a></div><div class="ttdeci">void EKFGSF_requestYawReset()</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3__Control_8cpp_source.html#l00811">AP_NavEKF3_Control.cpp:811</a></div></div>
<div class="ttc" id="aclassNavEKF3__core_html_af7f756f6bdd6c4721ba7634d8c9718dc"><div class="ttname"><a href="classNavEKF3__core.html#af7f756f6bdd6c4721ba7634d8c9718dc">NavEKF3_core::getAirSpdHealthData</a></div><div class="ttdeci">bool getAirSpdHealthData(float &amp;innovation, float &amp;innovationVariance, uint32_t &amp;age_ms) const</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3__Outputs_8cpp_source.html#l00198">AP_NavEKF3_Outputs.cpp:198</a></div></div>
<div class="ttc" id="aclassNavEKF3__core_html_afa43abbb98c848a819f29a43995cec41"><div class="ttname"><a href="classNavEKF3__core.html#afa43abbb98c848a819f29a43995cec41">NavEKF3_core::getAirSpdVec</a></div><div class="ttdeci">bool getAirSpdVec(Vector3f &amp;vel) const</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3__Outputs_8cpp_source.html#l00180">AP_NavEKF3_Outputs.cpp:180</a></div></div>
<div class="ttc" id="aclassNavEKF3__core_html_aff3490a1bf2ebe36bbeed39df963f451"><div class="ttname"><a href="classNavEKF3__core.html#aff3490a1bf2ebe36bbeed39df963f451">NavEKF3_core::send_status_report</a></div><div class="ttdeci">void send_status_report(class GCS_MAVLINK &amp;link) const</div></div>
<div class="ttc" id="aclassNavEKF3_html"><div class="ttname"><a href="classNavEKF3.html">NavEKF3</a></div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3_8h_source.html#l00031">AP_NavEKF3.h:31</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a00749e276d885afc56a81151b7202041"><div class="ttname"><a href="classNavEKF3.html#a00749e276d885afc56a81151b7202041">NavEKF3::NavEKF3</a></div><div class="ttdeci">NavEKF3()</div><div class="ttdef"><b>Definition</b> <a href="#l00740">AP_NavEKF3.cpp:740</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a035a89e3287481ef8e781b74ec257ec1"><div class="ttname"><a href="classNavEKF3.html#a035a89e3287481ef8e781b74ec257ec1">NavEKF3::getPosD</a></div><div class="ttdeci">bool getPosD(float &amp;posD) const</div><div class="ttdef"><b>Definition</b> <a href="#l01187">AP_NavEKF3.cpp:1187</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a0445676d3c2795b6b0c41f0363a49743"><div class="ttname"><a href="classNavEKF3.html#a0445676d3c2795b6b0c41f0363a49743">NavEKF3::writeExtNavData</a></div><div class="ttdeci">void writeExtNavData(const Vector3f &amp;pos, const Quaternion &amp;quat, float posErr, float angErr, uint32_t timeStamp_ms, uint16_t delay_ms, uint32_t resetTime_ms)</div><div class="ttdef"><b>Definition</b> <a href="#l01594">AP_NavEKF3.cpp:1594</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a04a49878372fe5bf15547f2eabfa2fe1"><div class="ttname"><a href="classNavEKF3.html#a04a49878372fe5bf15547f2eabfa2fe1">NavEKF3::getPrimaryCoreIndex</a></div><div class="ttdeci">int8_t getPrimaryCoreIndex(void) const</div><div class="ttdef"><b>Definition</b> <a href="#l01155">AP_NavEKF3.cpp:1155</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a07f064fa513fbb6e7188141904f3b5b5"><div class="ttname"><a href="classNavEKF3.html#a07f064fa513fbb6e7188141904f3b5b5">NavEKF3::InitialiseFilter</a></div><div class="ttdeci">bool InitialiseFilter(void)</div><div class="ttdef"><b>Definition</b> <a href="#l00748">AP_NavEKF3.cpp:748</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a089a84c0e47cf115075baf4f8c50a472"><div class="ttname"><a href="classNavEKF3.html#a089a84c0e47cf115075baf4f8c50a472">NavEKF3::getFilterFaults</a></div><div class="ttdeci">void getFilterFaults(uint16_t &amp;faults) const</div><div class="ttdef"><b>Definition</b> <a href="#l01796">AP_NavEKF3.cpp:1796</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a0c83cea59aa26444f97c421441aa0c61"><div class="ttname"><a href="classNavEKF3.html#a0c83cea59aa26444f97c421441aa0c61">NavEKF3::getOriginLLH</a></div><div class="ttdeci">bool getOriginLLH(Location &amp;loc) const</div><div class="ttdef"><b>Definition</b> <a href="#l01372">AP_NavEKF3.cpp:1372</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a0d8be28cc5f87cd1f92077f46b929c6b"><div class="ttname"><a href="classNavEKF3.html#a0d8be28cc5f87cd1f92077f46b929c6b">NavEKF3::writeDefaultAirSpeed</a></div><div class="ttdeci">void writeDefaultAirSpeed(float airspeed, float uncertainty)</div><div class="ttdef"><b>Definition</b> <a href="#l02039">AP_NavEKF3.cpp:2039</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a0dfa237b7b3cf14f0f99eb91fe539cea"><div class="ttname"><a href="classNavEKF3.html#a0dfa237b7b3cf14f0f99eb91fe539cea">NavEKF3::getLastYawResetAngle</a></div><div class="ttdeci">uint32_t getLastYawResetAngle(float &amp;yawAngDelta)</div><div class="ttdef"><b>Definition</b> <a href="#l01839">AP_NavEKF3.cpp:1839</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a1146c4b7293610f34b6ecfd7ccc5bbb1"><div class="ttname"><a href="classNavEKF3.html#a1146c4b7293610f34b6ecfd7ccc5bbb1">NavEKF3::num_cores</a></div><div class="ttdeci">uint8_t num_cores</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3_8h_source.html#l00369">AP_NavEKF3.h:369</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a1336a87bbc3e1dba9eaf335309f1380f"><div class="ttname"><a href="classNavEKF3.html#a1336a87bbc3e1dba9eaf335309f1380f">NavEKF3::coreErrorScores</a></div><div class="ttdeci">float coreErrorScores[MAX_EKF_CORES]</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3_8h_source.html#l00529">AP_NavEKF3.h:529</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a16ae950c9e6b7c057a57cf6a2f0dd21c"><div class="ttname"><a href="classNavEKF3.html#a16ae950c9e6b7c057a57cf6a2f0dd21c">NavEKF3::requestYawReset</a></div><div class="ttdeci">void requestYawReset(void)</div><div class="ttdef"><b>Definition</b> <a href="#l01051">AP_NavEKF3.cpp:1051</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a1a0dd1f8ba1e80ae1dc94fa60a0e4c4f"><div class="ttname"><a href="classNavEKF3.html#a1a0dd1f8ba1e80ae1dc94fa60a0e4c4f">NavEKF3::get_yawEstimator</a></div><div class="ttdeci">const EKFGSF_yaw * get_yawEstimator(void) const</div><div class="ttdef"><b>Definition</b> <a href="#l02069">AP_NavEKF3.cpp:2069</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a1cbab8bb4dd6f14121771bfa048c6a0f"><div class="ttname"><a href="classNavEKF3.html#a1cbab8bb4dd6f14121771bfa048c6a0f">NavEKF3::coreBetterScore</a></div><div class="ttdeci">bool coreBetterScore(uint8_t new_core, uint8_t current_core) const</div><div class="ttdef"><b>Definition</b> <a href="#l00873">AP_NavEKF3.cpp:873</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a1da07a39c9d0a37f4da1b4b9c208338c"><div class="ttname"><a href="classNavEKF3.html#a1da07a39c9d0a37f4da1b4b9c208338c">NavEKF3::getHeightControlLimit</a></div><div class="ttdeci">bool getHeightControlLimit(float &amp;height) const</div><div class="ttdef"><b>Definition</b> <a href="#l01828">AP_NavEKF3.cpp:1828</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a1e94841407e1c010a35ae50ddb9dc0d1"><div class="ttname"><a href="classNavEKF3.html#a1e94841407e1c010a35ae50ddb9dc0d1">NavEKF3::setLatLng</a></div><div class="ttdeci">bool setLatLng(const Location &amp;loc, float posErr, uint32_t timestamp_ms)</div><div class="ttdef"><b>Definition</b> <a href="#l01411">AP_NavEKF3.cpp:1411</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a1ebaff46b3eb9a8737972c30b718693b"><div class="ttname"><a href="classNavEKF3.html#a1ebaff46b3eb9a8737972c30b718693b">NavEKF3::get_active_source_set</a></div><div class="ttdeci">uint8_t get_active_source_set() const</div><div class="ttdef"><b>Definition</b> <a href="#l01251">AP_NavEKF3.cpp:1251</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a20640927e2adf9314baf5cbfc25526f1"><div class="ttname"><a href="classNavEKF3.html#a20640927e2adf9314baf5cbfc25526f1">NavEKF3::yawAlignmentComplete</a></div><div class="ttdeci">bool yawAlignmentComplete(void) const</div><div class="ttdef"><b>Definition</b> <a href="#l02051">AP_NavEKF3.cpp:2051</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a2194f287cbfe1a153da81af4f1394c9e"><div class="ttname"><a href="classNavEKF3.html#a2194f287cbfe1a153da81af4f1394c9e">NavEKF3::coreImuIndex</a></div><div class="ttdeci">uint8_t coreImuIndex[MAX_EKF_CORES]</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3_8h_source.html#l00527">AP_NavEKF3.h:527</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a25ac14aff0153f44b622cb248510f165"><div class="ttname"><a href="classNavEKF3.html#a25ac14aff0153f44b622cb248510f165">NavEKF3::getMagXYZ</a></div><div class="ttdeci">void getMagXYZ(Vector3f &amp;magXYZ) const</div><div class="ttdef"><b>Definition</b> <a href="#l01321">AP_NavEKF3.cpp:1321</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a26f372b56234e045c01c07f51e1c8669"><div class="ttname"><a href="classNavEKF3.html#a26f372b56234e045c01c07f51e1c8669">NavEKF3::getPrimaryCoreIMUIndex</a></div><div class="ttdeci">int8_t getPrimaryCoreIMUIndex(void) const</div><div class="ttdef"><b>Definition</b> <a href="#l01165">AP_NavEKF3.cpp:1165</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a2880515772d5ab1544caf7679f8634e8"><div class="ttname"><a href="classNavEKF3.html#a2880515772d5ab1544caf7679f8634e8">NavEKF3::_imuMask</a></div><div class="ttdeci">AP_Int8 _imuMask</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3_8h_source.html#l00415">AP_NavEKF3.h:415</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a298b7e8499d3c512475aadeb75c2074a"><div class="ttname"><a href="classNavEKF3.html#a298b7e8499d3c512475aadeb75c2074a">NavEKF3::_framesPerPrediction</a></div><div class="ttdeci">uint8_t _framesPerPrediction</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3_8h_source.html#l00374">AP_NavEKF3.h:374</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a2aeb909b3c8c235eb0e3c71c3adbf2f5"><div class="ttname"><a href="classNavEKF3.html#a2aeb909b3c8c235eb0e3c71c3adbf2f5">NavEKF3::setOriginLLH</a></div><div class="ttdeci">bool setOriginLLH(const Location &amp;loc)</div><div class="ttdef"><b>Definition</b> <a href="#l01388">AP_NavEKF3.cpp:1388</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a2c6a4e02b2ed3af15f3cde86eee2495c"><div class="ttname"><a href="classNavEKF3.html#a2c6a4e02b2ed3af15f3cde86eee2495c">NavEKF3::getRotationBodyToNED</a></div><div class="ttdeci">void getRotationBodyToNED(Matrix3f &amp;mat) const</div><div class="ttdef"><b>Definition</b> <a href="#l01450">AP_NavEKF3.cpp:1450</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a2e557708838ba266e47b6d2ee9fb6165"><div class="ttname"><a href="classNavEKF3.html#a2e557708838ba266e47b6d2ee9fb6165">NavEKF3::getGyroBias</a></div><div class="ttdeci">void getGyroBias(int8_t instance, Vector3f &amp;gyroBias) const</div><div class="ttdef"><b>Definition</b> <a href="#l01233">AP_NavEKF3.cpp:1233</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a2e737c2728f9e9a4ac197496f2b97746"><div class="ttname"><a href="classNavEKF3.html#a2e737c2728f9e9a4ac197496f2b97746">NavEKF3::yaw_reset_data</a></div><div class="ttdeci">struct NavEKF3::@128 yaw_reset_data</div></div>
<div class="ttc" id="aclassNavEKF3_html_a2ebb307cbad292e1f1f107d916abbb93"><div class="ttname"><a href="classNavEKF3.html#a2ebb307cbad292e1f1f107d916abbb93">NavEKF3::getVariances</a></div><div class="ttdeci">bool getVariances(float &amp;velVar, float &amp;posVar, float &amp;hgtVar, Vector3f &amp;magVar, float &amp;tasVar, Vector2f &amp;offset) const</div><div class="ttdef"><b>Definition</b> <a href="#l01487">AP_NavEKF3.cpp:1487</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a2f3077aaa9dd2f1936b1f5ce82463d5d"><div class="ttname"><a href="classNavEKF3.html#a2f3077aaa9dd2f1936b1f5ce82463d5d">NavEKF3::getLastVelNorthEastReset</a></div><div class="ttdeci">uint32_t getLastVelNorthEastReset(Vector2f &amp;vel) const</div><div class="ttdef"><b>Definition</b> <a href="#l01914">AP_NavEKF3.cpp:1914</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a33aeb19292f207e5351e2e51c11c5641"><div class="ttname"><a href="classNavEKF3.html#a33aeb19292f207e5351e2e51c11c5641">NavEKF3::var_info</a></div><div class="ttdeci">static const struct AP_Param::GroupInfo var_info[]</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3_8h_source.html#l00134">AP_NavEKF3.h:134</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a37c1cacc4d7ceb88a396f4b4ab7260c1"><div class="ttname"><a href="classNavEKF3.html#a37c1cacc4d7ceb88a396f4b4ab7260c1">NavEKF3::writeWheelOdom</a></div><div class="ttdeci">void writeWheelOdom(float delAng, float delTime, uint32_t timeStamp_ms, const Vector3f &amp;posOffset, float radius)</div><div class="ttdef"><b>Definition</b> <a href="#l01653">AP_NavEKF3.cpp:1653</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a3cdeb6ee923a1b9831b837328e2dfeeb"><div class="ttname"><a href="classNavEKF3.html#a3cdeb6ee923a1b9831b837328e2dfeeb">NavEKF3::getVelNED</a></div><div class="ttdeci">void getVelNED(Vector3f &amp;vel) const</div><div class="ttdef"><b>Definition</b> <a href="#l01196">AP_NavEKF3.cpp:1196</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a3d065ec0f57eb7e0d25d6c31c743c5ff"><div class="ttname"><a href="classNavEKF3.html#a3d065ec0f57eb7e0d25d6c31c743c5ff">NavEKF3::checkLaneSwitch</a></div><div class="ttdeci">void checkLaneSwitch(void)</div><div class="ttdef"><b>Definition</b> <a href="#l01014">AP_NavEKF3.cpp:1014</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a407c52e131dcd0c2d7eaec50f6d2d8b2"><div class="ttname"><a href="classNavEKF3.html#a407c52e131dcd0c2d7eaec50f6d2d8b2">NavEKF3::isVibrationAffected</a></div><div class="ttdeci">bool isVibrationAffected() const</div><div class="ttdef"><b>Definition</b> <a href="#l02060">AP_NavEKF3.cpp:2060</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a477020fcf29376e0c2205dbf79728104"><div class="ttname"><a href="classNavEKF3.html#a477020fcf29376e0c2205dbf79728104">NavEKF3::UpdateFilter</a></div><div class="ttdeci">void UpdateFilter(void)</div><div class="ttdef"><b>Definition</b> <a href="#l00899">AP_NavEKF3.cpp:899</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a48b06963494d6987aa9b204276f354e3"><div class="ttname"><a href="classNavEKF3.html#a48b06963494d6987aa9b204276f354e3">NavEKF3::getLastPosNorthEastReset</a></div><div class="ttdeci">uint32_t getLastPosNorthEastReset(Vector2f &amp;posDelta)</div><div class="ttdef"><b>Definition</b> <a href="#l01877">AP_NavEKF3.cpp:1877</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a4a84c368db652543a845f3972eaf4752"><div class="ttname"><a href="classNavEKF3.html#a4a84c368db652543a845f3972eaf4752">NavEKF3::setPosVelYawSourceSet</a></div><div class="ttdeci">void setPosVelYawSourceSet(uint8_t source_set_idx)</div><div class="ttdef"><b>Definition</b> <a href="#l01100">AP_NavEKF3.cpp:1100</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a4ad7702179b67ce3ac2fee02d50214a1"><div class="ttname"><a href="classNavEKF3.html#a4ad7702179b67ce3ac2fee02d50214a1">NavEKF3::getInnovations</a></div><div class="ttdeci">bool getInnovations(Vector3f &amp;velInnov, Vector3f &amp;posInnov, Vector3f &amp;magInnov, float &amp;tasInnov, float &amp;yawInnov) const</div><div class="ttdef"><b>Definition</b> <a href="#l01477">AP_NavEKF3.cpp:1477</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a4f03f995de5b61177073d674b606ebc1"><div class="ttname"><a href="classNavEKF3.html#a4f03f995de5b61177073d674b606ebc1">NavEKF3::getAirSpdHealthData</a></div><div class="ttdeci">bool getAirSpdHealthData(float &amp;innovation, float &amp;innovationVariance, uint32_t &amp;age_ms) const</div><div class="ttdef"><b>Definition</b> <a href="#l01214">AP_NavEKF3.cpp:1214</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a5271b02c055d6e3ce43fd0c8f945e652"><div class="ttname"><a href="classNavEKF3.html#a5271b02c055d6e3ce43fd0c8f945e652">NavEKF3::updateLaneSwitchPosResetData</a></div><div class="ttdeci">void updateLaneSwitchPosResetData(uint8_t new_primary, uint8_t old_primary)</div><div class="ttdef"><b>Definition</b> <a href="#l01987">AP_NavEKF3.cpp:1987</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a53c2c82c783a57f738f29fadc3e826ae"><div class="ttname"><a href="classNavEKF3.html#a53c2c82c783a57f738f29fadc3e826ae">NavEKF3::_err_thresh</a></div><div class="ttdeci">AP_Float _err_thresh</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3_8h_source.html#l00439">AP_NavEKF3.h:439</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a55f65c6a644f83bfd16b7be5d31140b7"><div class="ttname"><a href="classNavEKF3.html#a55f65c6a644f83bfd16b7be5d31140b7">NavEKF3::getAccelBias</a></div><div class="ttdeci">void getAccelBias(int8_t instance, Vector3f &amp;accelBias) const</div><div class="ttdef"><b>Definition</b> <a href="#l01242">AP_NavEKF3.cpp:1242</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a56a3f163c822ed88e43a107442e012a9"><div class="ttname"><a href="classNavEKF3.html#a56a3f163c822ed88e43a107442e012a9">NavEKF3::getFilterStatus</a></div><div class="ttdeci">void getFilterStatus(nav_filter_status &amp;status) const</div><div class="ttdef"><b>Definition</b> <a href="#l01808">AP_NavEKF3.cpp:1808</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a596ddb5682513eba0ca4c608012fa0ee"><div class="ttname"><a href="classNavEKF3.html#a596ddb5682513eba0ca4c608012fa0ee">NavEKF3::updateLaneSwitchPosDownResetData</a></div><div class="ttdeci">void updateLaneSwitchPosDownResetData(uint8_t new_primary, uint8_t old_primary)</div><div class="ttdef"><b>Definition</b> <a href="#l02014">AP_NavEKF3.cpp:2014</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a5ba740c3b44b020fecd6ab74a806362e"><div class="ttname"><a href="classNavEKF3.html#a5ba740c3b44b020fecd6ab74a806362e">NavEKF3::writeEulerYawAngle</a></div><div class="ttdeci">void writeEulerYawAngle(float yawAngle, float yawAngleErr, uint32_t timeStamp_ms, uint8_t type)</div><div class="ttdef"><b>Definition</b> <a href="#l01571">AP_NavEKF3.cpp:1571</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a5da888b64f34e042cf00c2ef2efdb669"><div class="ttname"><a href="classNavEKF3.html#a5da888b64f34e042cf00c2ef2efdb669">NavEKF3::getMagOffsets</a></div><div class="ttdeci">bool getMagOffsets(uint8_t mag_idx, Vector3f &amp;magOffsets) const</div><div class="ttdef"><b>Definition</b> <a href="#l01340">AP_NavEKF3.cpp:1340</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a5ed8f8ad10ef0799106f5d7af2982b53"><div class="ttname"><a href="classNavEKF3.html#a5ed8f8ad10ef0799106f5d7af2982b53">NavEKF3::core</a></div><div class="ttdeci">NavEKF3_core * core</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3_8h_source.html#l00371">AP_NavEKF3.h:371</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a60da6bc22561adcdff5d8ce16c8901c8"><div class="ttname"><a href="classNavEKF3.html#a60da6bc22561adcdff5d8ce16c8901c8">NavEKF3::getPosNE</a></div><div class="ttdeci">bool getPosNE(Vector2f &amp;posNE) const</div><div class="ttdef"><b>Definition</b> <a href="#l01176">AP_NavEKF3.cpp:1176</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a62d52e92d0783f6962ef7a34b2c0c0be"><div class="ttname"><a href="classNavEKF3.html#a62d52e92d0783f6962ef7a34b2c0c0be">NavEKF3::primary</a></div><div class="ttdeci">uint8_t primary</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3_8h_source.html#l00370">AP_NavEKF3.h:370</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a69972010905c46bef11f4c49c3f8996b"><div class="ttname"><a href="classNavEKF3.html#a69972010905c46bef11f4c49c3f8996b">NavEKF3::updateCoreRelativeErrors</a></div><div class="ttdeci">void updateCoreRelativeErrors(void)</div><div class="ttdef"><b>Definition</b> <a href="#l01076">AP_NavEKF3.cpp:1076</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a6a6c48738c9fadb679c547ae5fd26c9b"><div class="ttname"><a href="classNavEKF3.html#a6a6c48738c9fadb679c547ae5fd26c9b">NavEKF3::getActiveAirspeed</a></div><div class="ttdeci">uint8_t getActiveAirspeed() const</div><div class="ttdef"><b>Definition</b> <a href="#l01329">AP_NavEKF3.cpp:1329</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a6ba0e2b20476552627b074a5629570ad"><div class="ttname"><a href="classNavEKF3.html#a6ba0e2b20476552627b074a5629570ad">NavEKF3::using_noncompass_for_yaw</a></div><div class="ttdeci">bool using_noncompass_for_yaw() const</div><div class="ttdef"><b>Definition</b> <a href="#l01517">AP_NavEKF3.cpp:1517</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a6df1d265b67a07f0cd79b001624729ba"><div class="ttname"><a href="classNavEKF3.html#a6df1d265b67a07f0cd79b001624729ba">NavEKF3::_primary_core</a></div><div class="ttdeci">AP_Int8 _primary_core</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3_8h_source.html#l00448">AP_NavEKF3.h:448</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a73f352f0f2068062be474efa5fa84514"><div class="ttname"><a href="classNavEKF3.html#a73f352f0f2068062be474efa5fa84514">NavEKF3::getQuaternion</a></div><div class="ttdeci">void getQuaternion(Quaternion &amp;quat) const</div><div class="ttdef"><b>Definition</b> <a href="#l01469">AP_NavEKF3.cpp:1469</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a7503cae247bbec2967b4225d77822d82"><div class="ttname"><a href="classNavEKF3.html#a7503cae247bbec2967b4225d77822d82">NavEKF3::coreLastTimePrimary_us</a></div><div class="ttdeci">uint64_t coreLastTimePrimary_us[MAX_EKF_CORES]</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3_8h_source.html#l00530">AP_NavEKF3.h:530</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a789658732d8d736866067a7871e4c447"><div class="ttname"><a href="classNavEKF3.html#a789658732d8d736866067a7871e4c447">NavEKF3::healthy</a></div><div class="ttdeci">bool healthy(void) const</div><div class="ttdef"><b>Definition</b> <a href="#l01109">AP_NavEKF3.cpp:1109</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a7bcc91eb0caffd2056ba6c8944cc499b"><div class="ttname"><a href="classNavEKF3.html#a7bcc91eb0caffd2056ba6c8944cc499b">NavEKF3::_frameTimeUsec</a></div><div class="ttdeci">uint32_t _frameTimeUsec</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3_8h_source.html#l00373">AP_NavEKF3.h:373</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a8170b94b0fc752e1e6e4e3f383befea4"><div class="ttname"><a href="classNavEKF3.html#a8170b94b0fc752e1e6e4e3f383befea4">NavEKF3::common_EKF_origin</a></div><div class="ttdeci">Location common_EKF_origin</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3_8h_source.html#l00533">AP_NavEKF3.h:533</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a850fafc5f4cb73ab3916b5ecfb871b1e"><div class="ttname"><a href="classNavEKF3.html#a850fafc5f4cb73ab3916b5ecfb871b1e">NavEKF3::common_origin_valid</a></div><div class="ttdeci">bool common_origin_valid</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3_8h_source.html#l00534">AP_NavEKF3.h:534</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a8ceab35016043bf8a1f9880dd0213839"><div class="ttname"><a href="classNavEKF3.html#a8ceab35016043bf8a1f9880dd0213839">NavEKF3::getOptFlowSample</a></div><div class="ttdeci">bool getOptFlowSample(uint32_t &amp;timeStamp_ms, Vector2f &amp;flowRate, Vector2f &amp;bodyRate, Vector2f &amp;losPred) const</div><div class="ttdef"><b>Definition</b> <a href="#l01561">AP_NavEKF3.cpp:1561</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a9499f7b52b4e54c6d8f26602ac8f00aa"><div class="ttname"><a href="classNavEKF3.html#a9499f7b52b4e54c6d8f26602ac8f00aa">NavEKF3::send_status_report</a></div><div class="ttdeci">void send_status_report(class GCS_MAVLINK &amp;link) const</div><div class="ttdef"><b>Definition</b> <a href="#l01818">AP_NavEKF3.cpp:1818</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_a9ca2cda81fb2f1db83f9dca905465a2a"><div class="ttname"><a href="classNavEKF3.html#a9ca2cda81fb2f1db83f9dca905465a2a">NavEKF3::pos_down_reset_data</a></div><div class="ttdeci">struct NavEKF3::@130 pos_down_reset_data</div></div>
<div class="ttc" id="aclassNavEKF3_html_a9ff516d8cf7091cd56ae86737ca404d6"><div class="ttname"><a href="classNavEKF3.html#a9ff516d8cf7091cd56ae86737ca404d6">NavEKF3::getEkfControlLimits</a></div><div class="ttdeci">void getEkfControlLimits(float &amp;ekfGndSpdLimit, float &amp;ekfNavVelGainScaler) const</div><div class="ttdef"><b>Definition</b> <a href="#l01292">AP_NavEKF3.cpp:1292</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_aa056feabc7a71a63a095831c5fabe6f4"><div class="ttname"><a href="classNavEKF3.html#aa056feabc7a71a63a095831c5fabe6f4">NavEKF3::getVelInnovationsAndVariancesForSource</a></div><div class="ttdeci">bool getVelInnovationsAndVariancesForSource(AP_NavEKF_Source::SourceXY source, Vector3f &amp;innovations, Vector3f &amp;variances) const WARN_IF_UNUSED</div><div class="ttdef"><b>Definition</b> <a href="#l01498">AP_NavEKF3.cpp:1498</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_aa3a2fa3e786069f11d152b40f5f66546"><div class="ttname"><a href="classNavEKF3.html#aa3a2fa3e786069f11d152b40f5f66546">NavEKF3::getLLH</a></div><div class="ttdeci">bool getLLH(Location &amp;loc) const</div><div class="ttdef"><b>Definition</b> <a href="#l01361">AP_NavEKF3.cpp:1361</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_aa40196f4e80a218be8e432a02898992d"><div class="ttname"><a href="classNavEKF3.html#aa40196f4e80a218be8e432a02898992d">NavEKF3::getWind</a></div><div class="ttdeci">bool getWind(Vector3f &amp;wind) const</div><div class="ttdef"><b>Definition</b> <a href="#l01304">AP_NavEKF3.cpp:1304</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_aa5976f864942fc0e32388caca1121074"><div class="ttname"><a href="classNavEKF3.html#aa5976f864942fc0e32388caca1121074">NavEKF3::pos_reset_data</a></div><div class="ttdeci">struct NavEKF3::@129 pos_reset_data</div></div>
<div class="ttc" id="aclassNavEKF3_html_aa9b81b0c96d7feac6e7177fcb235cf23"><div class="ttname"><a href="classNavEKF3.html#aa9b81b0c96d7feac6e7177fcb235cf23">NavEKF3::writeExtNavVelData</a></div><div class="ttdeci">void writeExtNavVelData(const Vector3f &amp;vel, float err, uint32_t timeStamp_ms, uint16_t delay_ms)</div><div class="ttdef"><b>Definition</b> <a href="#l01611">AP_NavEKF3.cpp:1611</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_aaadcea7282f2afc26000be0fa3d6e6f9"><div class="ttname"><a href="classNavEKF3.html#aaadcea7282f2afc26000be0fa3d6e6f9">NavEKF3::writeBodyFrameOdom</a></div><div class="ttdeci">void writeBodyFrameOdom(float quality, const Vector3f &amp;delPos, const Vector3f &amp;delAng, float delTime, uint32_t timeStamp_ms, uint16_t delay_ms, const Vector3f &amp;posOffset)</div><div class="ttdef"><b>Definition</b> <a href="#l01634">AP_NavEKF3.cpp:1634</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_aaae77db7a65077fa51e3bbb89b9e8b18"><div class="ttname"><a href="classNavEKF3.html#aaae77db7a65077fa51e3bbb89b9e8b18">NavEKF3::sources</a></div><div class="ttdeci">AP_NavEKF_Source sources</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3_8h_source.html#l00565">AP_NavEKF3.h:565</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_aabbd92a90484f88b6885cff14c3cfbdf"><div class="ttname"><a href="classNavEKF3.html#aabbd92a90484f88b6885cff14c3cfbdf">NavEKF3::NavEKF3_core</a></div><div class="ttdeci">friend class NavEKF3_core</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3_8h_source.html#l00032">AP_NavEKF3.h:32</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_ab2a2ba418967238853115d2f3492ed2d"><div class="ttname"><a href="classNavEKF3.html#ab2a2ba418967238853115d2f3492ed2d">NavEKF3::getQuaternionBodyToNED</a></div><div class="ttdeci">void getQuaternionBodyToNED(int8_t instance, Quaternion &amp;quat) const</div><div class="ttdef"><b>Definition</b> <a href="#l01458">AP_NavEKF3.cpp:1458</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_ab5ced206a72463a4c078febcba91a755"><div class="ttname"><a href="classNavEKF3.html#ab5ced206a72463a4c078febcba91a755">NavEKF3::_enable</a></div><div class="ttdeci">AP_Int8 _enable</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3_8h_source.html#l00385">AP_NavEKF3.h:385</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_ab670249257282baefc2bafb3d5513995"><div class="ttname"><a href="classNavEKF3.html#ab670249257282baefc2bafb3d5513995">NavEKF3::updateLaneSwitchYawResetData</a></div><div class="ttdeci">void updateLaneSwitchYawResetData(uint8_t new_primary, uint8_t old_primary)</div><div class="ttdef"><b>Definition</b> <a href="#l01961">AP_NavEKF3.cpp:1961</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_aba231648f97d3c7f8c5c4518e7bafa3a"><div class="ttname"><a href="classNavEKF3.html#aba231648f97d3c7f8c5c4518e7bafa3a">NavEKF3::configuredToUseGPSForPosXY</a></div><div class="ttdeci">bool configuredToUseGPSForPosXY(void) const</div><div class="ttdef"><b>Definition</b> <a href="#l01535">AP_NavEKF3.cpp:1535</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_aba7c7886dff66142d6eed35e79fca904"><div class="ttname"><a href="classNavEKF3.html#aba7c7886dff66142d6eed35e79fca904">NavEKF3::_magCal</a></div><div class="ttdeci">AP_Int8 _magCal</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3_8h_source.html#l00406">AP_NavEKF3.h:406</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_abbfff219bca13ecd15714afe41e74d06"><div class="ttname"><a href="classNavEKF3.html#abbfff219bca13ecd15714afe41e74d06">NavEKF3::writeOptFlowMeas</a></div><div class="ttdeci">void writeOptFlowMeas(const uint8_t rawFlowQuality, const Vector2f &amp;rawFlowRates, const Vector2f &amp;rawGyroRates, const uint32_t msecFlowMeas, const Vector3f &amp;posOffset, float heightOverride)</div><div class="ttdef"><b>Definition</b> <a href="#l01549">AP_NavEKF3.cpp:1549</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_abc8f4be833ed62ad269ae9a2110c3e76"><div class="ttname"><a href="classNavEKF3.html#abc8f4be833ed62ad269ae9a2110c3e76">NavEKF3::imuSampleTime_us</a></div><div class="ttdeci">uint64_t imuSampleTime_us</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3_8h_source.html#l00492">AP_NavEKF3.h:492</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_abced70b86b5e3d10e12e8aaeb9e00a77"><div class="ttname"><a href="classNavEKF3.html#abced70b86b5e3d10e12e8aaeb9e00a77">NavEKF3::pre_arm_check</a></div><div class="ttdeci">bool pre_arm_check(bool requires_position, char *failure_msg, uint8_t failure_msg_len) const</div><div class="ttdef"><b>Definition</b> <a href="#l01119">AP_NavEKF3.cpp:1119</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_ac5a00778eabdb63d023daf034eda5fa5"><div class="ttname"><a href="classNavEKF3.html#ac5a00778eabdb63d023daf034eda5fa5">NavEKF3::resetGyroBias</a></div><div class="ttdeci">void resetGyroBias(void)</div><div class="ttdef"><b>Definition</b> <a href="#l01257">AP_NavEKF3.cpp:1257</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_accf1f8c7ab44482eb0b032d6e0d2dd95"><div class="ttname"><a href="classNavEKF3.html#accf1f8c7ab44482eb0b032d6e0d2dd95">NavEKF3::updateCoreErrorScores</a></div><div class="ttdeci">float updateCoreErrorScores(void)</div><div class="ttdef"><b>Definition</b> <a href="#l01063">AP_NavEKF3.cpp:1063</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_aceeff801b2a2d6ea9cc9240f02ba0621"><div class="ttname"><a href="classNavEKF3.html#aceeff801b2a2d6ea9cc9240f02ba0621">NavEKF3::use_compass</a></div><div class="ttdeci">bool use_compass(void) const</div><div class="ttdef"><b>Definition</b> <a href="#l01508">AP_NavEKF3.cpp:1508</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_ad1243f01f1a8d2aeaabac969549e120f"><div class="ttname"><a href="classNavEKF3.html#ad1243f01f1a8d2aeaabac969549e120f">NavEKF3::coreRelativeErrors</a></div><div class="ttdeci">float coreRelativeErrors[MAX_EKF_CORES]</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3_8h_source.html#l00528">AP_NavEKF3.h:528</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_ad3a3ec456aee0f9177f044ae7b3b5376"><div class="ttname"><a href="classNavEKF3.html#ad3a3ec456aee0f9177f044ae7b3b5376">NavEKF3::setTerrainHgtStable</a></div><div class="ttdeci">void setTerrainHgtStable(bool val)</div><div class="ttdef"><b>Definition</b> <a href="#l01769">AP_NavEKF3.cpp:1769</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_ad5b6175364ba00236a8e22287d82c6f6"><div class="ttname"><a href="classNavEKF3.html#ad5b6175364ba00236a8e22287d82c6f6">NavEKF3::getHAGL</a></div><div class="ttdeci">bool getHAGL(float &amp;HAGL) const</div><div class="ttdef"><b>Definition</b> <a href="#l01433">AP_NavEKF3.cpp:1433</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_ad64a1d76cda0483376f225df0e2f687f"><div class="ttname"><a href="classNavEKF3.html#ad64a1d76cda0483376f225df0e2f687f">NavEKF3::getAirSpdVec</a></div><div class="ttdeci">bool getAirSpdVec(Vector3f &amp;vel) const</div><div class="ttdef"><b>Definition</b> <a href="#l01205">AP_NavEKF3.cpp:1205</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_ad8afa9c7a33458a26edbbf9e4b2cace6"><div class="ttname"><a href="classNavEKF3.html#ad8afa9c7a33458a26edbbf9e4b2cace6">NavEKF3::coreSetupRequired</a></div><div class="ttdeci">bool coreSetupRequired[MAX_EKF_CORES]</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3_8h_source.html#l00526">AP_NavEKF3.h:526</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_ad9b779e49d346aa1b2f57517d0ddfb15"><div class="ttname"><a href="classNavEKF3.html#ad9b779e49d346aa1b2f57517d0ddfb15">NavEKF3::getEulerAngles</a></div><div class="ttdeci">void getEulerAngles(Vector3f &amp;eulers) const</div><div class="ttdef"><b>Definition</b> <a href="#l01442">AP_NavEKF3.cpp:1442</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_ada4fbb4025ff1d86090afc5e65124f94"><div class="ttname"><a href="classNavEKF3.html#ada4fbb4025ff1d86090afc5e65124f94">NavEKF3::using_extnav_for_yaw</a></div><div class="ttdeci">bool using_extnav_for_yaw() const</div><div class="ttdef"><b>Definition</b> <a href="#l01526">AP_NavEKF3.cpp:1526</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_ae0b45576371faad6d7e5c021d3053ef9"><div class="ttname"><a href="classNavEKF3.html#ae0b45576371faad6d7e5c021d3053ef9">NavEKF3::runCoreSelection</a></div><div class="ttdeci">bool runCoreSelection</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3_8h_source.html#l00525">AP_NavEKF3.h:525</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_ae1973b73315a3cc633c6d350b4a92359"><div class="ttname"><a href="classNavEKF3.html#ae1973b73315a3cc633c6d350b4a92359">NavEKF3::convert_parameters</a></div><div class="ttdeci">void convert_parameters()</div><div class="ttdef"><b>Definition</b> <a href="#l01665">AP_NavEKF3.cpp:1665</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_ae37f34d5606f48bb6196fec2aa4c8c2d"><div class="ttname"><a href="classNavEKF3.html#ae37f34d5606f48bb6196fec2aa4c8c2d">NavEKF3::getPosDownDerivative</a></div><div class="ttdeci">float getPosDownDerivative() const</div><div class="ttdef"><b>Definition</b> <a href="#l01223">AP_NavEKF3.cpp:1223</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_aea2ab008287dea01634a96a7eac4e107"><div class="ttname"><a href="classNavEKF3.html#aea2ab008287dea01634a96a7eac4e107">NavEKF3::lastLaneSwitch_ms</a></div><div class="ttdeci">uint32_t lastLaneSwitch_ms</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3_8h_source.html#l00495">AP_NavEKF3.h:495</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_aed3d9992910acab18c7ac321973ed6ab"><div class="ttname"><a href="classNavEKF3.html#aed3d9992910acab18c7ac321973ed6ab">NavEKF3::var_info2</a></div><div class="ttdeci">static const struct AP_Param::GroupInfo var_info2[]</div><div class="ttdef"><b>Definition</b> <a href="AP__NavEKF3_8h_source.html#l00656">AP_NavEKF3.h:656</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_aeff588883c2a757adfa1ecb4031d0bb4"><div class="ttname"><a href="classNavEKF3.html#aeff588883c2a757adfa1ecb4031d0bb4">NavEKF3::resetHeightDatum</a></div><div class="ttdeci">bool resetHeightDatum(void)</div><div class="ttdef"><b>Definition</b> <a href="#l01273">AP_NavEKF3.cpp:1273</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_af8f633712a464fdef83c39ed1baf84cd"><div class="ttname"><a href="classNavEKF3.html#af8f633712a464fdef83c39ed1baf84cd">NavEKF3::getLastPosDownReset</a></div><div class="ttdeci">uint32_t getLastPosDownReset(float &amp;posDelta)</div><div class="ttdef"><b>Definition</b> <a href="#l01925">AP_NavEKF3.cpp:1925</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_afb4273bd837e1ae73e8499ec2781be95"><div class="ttname"><a href="classNavEKF3.html#afb4273bd837e1ae73e8499ec2781be95">NavEKF3::getMagNED</a></div><div class="ttdeci">void getMagNED(Vector3f &amp;magNED) const</div><div class="ttdef"><b>Definition</b> <a href="#l01313">AP_NavEKF3.cpp:1313</a></div></div>
<div class="ttc" id="aclassNavEKF3_html_afd51ab0da032456d39f8b2b3a9db50c7"><div class="ttname"><a href="classNavEKF3.html#afd51ab0da032456d39f8b2b3a9db50c7">NavEKF3::resetCoreErrors</a></div><div class="ttdeci">void resetCoreErrors(void)</div><div class="ttdef"><b>Definition</b> <a href="#l01092">AP_NavEKF3.cpp:1092</a></div></div>
<div class="ttc" id="aclassQuaternionT_html"><div class="ttname"><a href="classQuaternionT.html">QuaternionT&lt; float &gt;</a></div></div>
<div class="ttc" id="aclassQuaternionT_html_ab12c50ad4b582277deda302ff9109adf"><div class="ttname"><a href="classQuaternionT.html#ab12c50ad4b582277deda302ff9109adf">QuaternionT::from_rotation_matrix</a></div><div class="ttdeci">void from_rotation_matrix(const Matrix3&lt; T &gt; &amp;m)</div><div class="ttdef"><b>Definition</b> <a href="quaternion_8cpp_source.html#l00086">quaternion.cpp:86</a></div></div>
<div class="ttc" id="aclassVector3_html"><div class="ttname"><a href="classVector3.html">Vector3&lt; float &gt;</a></div></div>
<div class="ttc" id="aclassVector3_html_ab3e7f5401dd6e951978bfa746809f74f"><div class="ttname"><a href="classVector3.html#ab3e7f5401dd6e951978bfa746809f74f">Vector3::z</a></div><div class="ttdeci">T z</div><div class="ttdef"><b>Definition</b> <a href="vector3_8h_source.html#l00076">vector3.h:76</a></div></div>
<div class="ttc" id="amonocypher_8cpp_html_afa99ec4acc4ecb2dc3c2d05da15d0e3f"><div class="ttname"><a href="monocypher_8cpp.html#afa99ec4acc4ecb2dc3c2d05da15d0e3f">MAX</a></div><div class="ttdeci">#define MAX(a, b)</div><div class="ttdef"><b>Definition</b> <a href="monocypher_8cpp_source.html#l00072">monocypher.cpp:72</a></div></div>
<div class="ttc" id="anamespaceAP_html_a72bac6dee7ddc414f93cbf7cad325f55"><div class="ttname"><a href="namespaceAP.html#a72bac6dee7ddc414f93cbf7cad325f55">AP::dal</a></div><div class="ttdeci">AP_DAL &amp; dal()</div><div class="ttdef"><b>Definition</b> <a href="AP__DAL_8cpp_source.html#l00523">AP_DAL.cpp:523</a></div></div>
<div class="ttc" id="arouting_8cpp_html_acdef7b92239f1e607ef6caa33a16d2ed"><div class="ttname"><a href="routing_8cpp.html#acdef7b92239f1e607ef6caa33a16d2ed">status</a></div><div class="ttdeci">static mavlink_status_t status</div><div class="ttdef"><b>Definition</b> <a href="routing_8cpp_source.html#l00027">routing.cpp:27</a></div></div>
<div class="ttc" id="astructAP__Param_1_1ConversionInfo_html"><div class="ttname"><a href="structAP__Param_1_1ConversionInfo.html">AP_Param::ConversionInfo</a></div><div class="ttdef"><b>Definition</b> <a href="AP__Param_8h_source.html#l00225">AP_Param.h:225</a></div></div>
<div class="ttc" id="astructAP__Param_1_1GroupInfo_html"><div class="ttname"><a href="structAP__Param_1_1GroupInfo.html">AP_Param::GroupInfo</a></div><div class="ttdef"><b>Definition</b> <a href="AP__Param_8h_source.html#l00199">AP_Param.h:199</a></div></div>
<div class="ttc" id="astructVector2_html"><div class="ttname"><a href="structVector2.html">Vector2&lt; float &gt;</a></div></div>
<div class="ttc" id="astructVector2_html_a6b537328ae913e3e7267b539e7a4af92"><div class="ttname"><a href="structVector2.html#a6b537328ae913e3e7267b539e7a4af92">Vector2::zero</a></div><div class="ttdeci">void zero()</div><div class="ttdef"><b>Definition</b> <a href="vector2_8h_source.html#l00137">vector2.h:137</a></div></div>
<div class="ttc" id="astructtype_html"><div class="ttname"><a href="structtype.html">type</a></div><div class="ttdef"><b>Definition</b> <a href="AP__Scripting_2generator_2src_2main_8c_source.html#l00163">main.c:163</a></div></div>
<div class="ttc" id="aunionnav__filter__status_html"><div class="ttname"><a href="unionnav__filter__status.html">nav_filter_status</a></div><div class="ttdef"><b>Definition</b> <a href="AP__Nav__Common_8h_source.html#l00022">AP_Nav_Common.h:22</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Mar 22 2024 16:14:15 for APM:Libraries by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
