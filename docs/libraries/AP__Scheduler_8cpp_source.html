<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>APM:Libraries: libraries/AP_Scheduler/AP_Scheduler.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">APM:Libraries
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_bc0718b08fb2015b8e59c47b2805f60c.html">libraries</a></li><li class="navelem"><a class="el" href="dir_758bea2d57e44590e8b855eb3ebf4c35.html">AP_Scheduler</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle"><div class="title">AP_Scheduler.cpp</div></div>
</div><!--header-->
<div class="contents">
<a href="AP__Scheduler_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">/*</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment">   This program is free software: you can redistribute it and/or modify</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment">   it under the terms of the GNU General Public License as published by</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="comment">   the Free Software Foundation, either version 3 of the License, or</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="comment">   (at your option) any later version.</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="comment"></span> </div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="comment">   This program is distributed in the hope that it will be useful,</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="comment">   but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="comment">   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="comment">   GNU General Public License for more details.</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="comment"></span> </div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="comment">   You should have received a copy of the GNU General Public License</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="comment">   along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="comment"> */</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span> </div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="comment">/*</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="comment"> *  main loop scheduler for ArduPilot</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="comment"> *  Author: Andrew Tridgell, January 2013</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="comment"> *</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="comment"> */</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span> </div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span><span class="preprocessor">#include &quot;<a class="code" href="AP__Scheduler__config_8h.html">AP_Scheduler_config.h</a>&quot;</span></div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span> </div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span><span class="preprocessor">#include &quot;<a class="code" href="AP__Scheduler_8h.html">AP_Scheduler.h</a>&quot;</span></div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span> </div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span><span class="preprocessor">#include &lt;<a class="code" href="AP__HAL_8h.html">AP_HAL/AP_HAL.h</a>&gt;</span></div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span><span class="preprocessor">#include &lt;<a class="code" href="AP__Param_8h.html">AP_Param/AP_Param.h</a>&gt;</span></div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span><span class="preprocessor">#include &lt;<a class="code" href="AP__Vehicle_8h.html">AP_Vehicle/AP_Vehicle.h</a>&gt;</span></div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span><span class="preprocessor">#include &lt;<a class="code" href="AP__Logger_8h.html">AP_Logger/AP_Logger.h</a>&gt;</span></div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span><span class="preprocessor">#include &lt;<a class="code" href="AP__InertialSensor_8h.html">AP_InertialSensor/AP_InertialSensor.h</a>&gt;</span></div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span><span class="preprocessor">#include &lt;<a class="code" href="AP__InternalError_8h.html">AP_InternalError/AP_InternalError.h</a>&gt;</span></div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span><span class="preprocessor">#include &lt;<a class="code" href="ExpandingString_8h.html">AP_Common/ExpandingString.h</a>&gt;</span></div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span><span class="preprocessor">#include &lt;<a class="code" href="SIMState_8h.html">AP_HAL/SIMState.h</a>&gt;</span></div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span><span class="preprocessor">#include &lt;<a class="code" href="AP__Vehicle__Type_8h.html">AP_Vehicle/AP_Vehicle_Type.h</a>&gt;</span></div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span> </div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span><span class="preprocessor">#if CONFIG_HAL_BOARD == HAL_BOARD_SITL</span></div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span><span class="preprocessor">#include &lt;<a class="code" href="SITL_8h.html">SITL/SITL.h</a>&gt;</span></div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span><span class="preprocessor">#include &lt;<a class="code" href="stdio_8h.html">stdio.h</a>&gt;</span></div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span> </div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span><span class="preprocessor">#if APM_BUILD_COPTER_OR_HELI || APM_BUILD_TYPE(APM_BUILD_ArduSub)</span></div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span><span class="preprocessor">#define SCHEDULER_DEFAULT_LOOP_RATE 400</span></div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno"><a class="line" href="AP__Scheduler_8cpp.html#a8bed03ebb2c9cf4622eff2c8eadf8e84">   44</a></span><span class="preprocessor">#define SCHEDULER_DEFAULT_LOOP_RATE  50</span></div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span> </div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno"><a class="line" href="AP__Scheduler_8cpp.html#ac4824dfe0c68ba5d23e776016c6c74d1">   47</a></span><span class="preprocessor">#define debug(level, fmt, args...)   do { if ((level) &lt;= _debug.get()) { hal.console-&gt;printf(fmt, ##args); }} while (0)</span></div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span> </div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span><span class="keyword">extern</span> <span class="keyword">const</span> <a class="code hl_class" href="classAP__HAL_1_1HAL.html">AP_HAL::HAL</a>&amp; <a class="code hl_variable" href="AP__Scheduler_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>;</div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span> </div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span><span class="keyword">const</span> <a class="code hl_struct" href="structAP__Param_1_1GroupInfo.html">AP_Param::GroupInfo</a> <a class="code hl_variable" href="classAP__Scheduler.html#a17856eb311134db5b97fa62ca2f8d2f9">AP_Scheduler::var_info</a>[] = {</div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span>    <span class="comment">// @Param: DEBUG</span></div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span>    <span class="comment">// @DisplayName: Scheduler debug level</span></div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span>    <span class="comment">// @Description: Set to non-zero to enable scheduler debug messages. When set to show &quot;Slips&quot; the scheduler will display a message whenever a scheduled task is delayed due to too much CPU load. When set to ShowOverruns the scheduled will display a message whenever a task takes longer than the limit promised in the task table.</span></div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span>    <span class="comment">// @Values: 0:Disabled,2:ShowSlips,3:ShowOverruns</span></div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;DEBUG&quot;</span>,    0, <a class="code hl_class" href="classAP__Scheduler.html">AP_Scheduler</a>, <a class="code hl_variable" href="sumd_8cpp.html#abea63a461ba805d7c6c2facc133188c9">_debug</a>, 0),</div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span> </div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span>    <span class="comment">// @Param: LOOP_RATE</span></div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>    <span class="comment">// @DisplayName: Scheduling main loop rate</span></div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>    <span class="comment">// @Description: This controls the rate of the main control loop in Hz. This should only be changed by developers. This only takes effect on restart. Values over 400 are considered highly experimental.</span></div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span>    <span class="comment">// @Values: 50:50Hz,100:100Hz,200:200Hz,250:250Hz,300:300Hz,400:400Hz</span></div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span>    <span class="comment">// @RebootRequired: True</span></div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;LOOP_RATE&quot;</span>,  1, <a class="code hl_class" href="classAP__Scheduler.html">AP_Scheduler</a>, _loop_rate_hz, <a class="code hl_define" href="AP__Scheduler_8cpp.html#a8bed03ebb2c9cf4622eff2c8eadf8e84">SCHEDULER_DEFAULT_LOOP_RATE</a>),</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span> </div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>    <span class="comment">// @Param: OPTIONS</span></div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span>    <span class="comment">// @DisplayName: Scheduling options</span></div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>    <span class="comment">// @Description: This controls optional aspects of the scheduler.</span></div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span>    <span class="comment">// @Bitmask: 0:Enable per-task perf info</span></div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;OPTIONS&quot;</span>,  2, <a class="code hl_class" href="classAP__Scheduler.html">AP_Scheduler</a>, _options, 0),</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span> </div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>    <a class="code hl_define" href="AP__Param_8h.html#a0f9acb038a5283b964b862aea8cc5051">AP_GROUPEND</a></div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>};</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span> </div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span><span class="comment">// constructor</span></div>
<div class="foldopen" id="foldopen00078" data-start="{" data-end="}">
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno"><a class="line" href="classAP__Scheduler.html#a207443baf42f08d1bd89920deb77eb21">   78</a></span><a class="code hl_function" href="classAP__Scheduler.html#a207443baf42f08d1bd89920deb77eb21">AP_Scheduler::AP_Scheduler</a>()</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>{</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__Scheduler.html#ad2c5d0cd7fd4e472a47a9b7112d3bcf6">_singleton</a>) {</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span><span class="preprocessor">#if CONFIG_HAL_BOARD == HAL_BOARD_SITL</span></div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>        <a class="code hl_function" href="namespaceAP__HAL.html#a52edeef7d5ffaa365e1229b87c170307">AP_HAL::panic</a>(<span class="stringliteral">&quot;Too many schedulers&quot;</span>);</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>    }</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>    <a class="code hl_variable" href="classAP__Scheduler.html#ad2c5d0cd7fd4e472a47a9b7112d3bcf6">_singleton</a> = <span class="keyword">this</span>;</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span> </div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>    <a class="code hl_function" href="classAP__Param.html#a5f6dcfce1c0a79cf5bd81283e22f3201">AP_Param::setup_object_defaults</a>(<span class="keyword">this</span>, var_info);</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>}</div>
</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span> </div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span><span class="comment">/*</span></div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span><span class="comment"> * Get the AP_Scheduler singleton</span></div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span><span class="comment"> */</span></div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span><a class="code hl_class" href="classAP__Scheduler.html">AP_Scheduler</a> *<a class="code hl_variable" href="classAP__Scheduler.html#ad2c5d0cd7fd4e472a47a9b7112d3bcf6">AP_Scheduler::_singleton</a>;</div>
<div class="foldopen" id="foldopen00095" data-start="{" data-end="}">
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno"><a class="line" href="classAP__Scheduler.html#a0826068d9555266bdda5efd19c4b891a">   95</a></span><a class="code hl_class" href="classAP__Scheduler.html">AP_Scheduler</a> *<a class="code hl_function" href="classAP__Scheduler.html#a0826068d9555266bdda5efd19c4b891a">AP_Scheduler::get_singleton</a>()</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>{</div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classAP__Scheduler.html#ad2c5d0cd7fd4e472a47a9b7112d3bcf6">_singleton</a>;</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>}</div>
</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span> </div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span><span class="comment">// initialise the scheduler</span></div>
<div class="foldopen" id="foldopen00101" data-start="{" data-end="}">
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno"><a class="line" href="classAP__Scheduler.html#a602e25048ddab792f4654d17d38e1dd0">  101</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classAP__Scheduler.html#a602e25048ddab792f4654d17d38e1dd0">AP_Scheduler::init</a>(<span class="keyword">const</span> <a class="code hl_struct" href="structAP__Scheduler_1_1Task.html">AP_Scheduler::Task</a> *tasks, uint8_t num_tasks, uint32_t log_performance_bit)</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>{</div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>    <span class="comment">// grab the semaphore before we start anything</span></div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>    <a class="code hl_variable" href="classAP__Scheduler.html#ace501e826e716bc8501fa27403fc1e4c">_rsem</a>.take_blocking();</div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span> </div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>    <span class="comment">// only allow 50 to 2000 Hz</span></div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__Scheduler.html#ac997ff75649d6f705ce8798a02bc7ad1">_loop_rate_hz</a> &lt; 50) {</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>        <a class="code hl_variable" href="classAP__Scheduler.html#ac997ff75649d6f705ce8798a02bc7ad1">_loop_rate_hz</a>.set(50);</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__Scheduler.html#ac997ff75649d6f705ce8798a02bc7ad1">_loop_rate_hz</a> &gt; 2000) {</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>        <a class="code hl_variable" href="classAP__Scheduler.html#ac997ff75649d6f705ce8798a02bc7ad1">_loop_rate_hz</a>.set(2000);</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>    }</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>    <a class="code hl_variable" href="classAP__Scheduler.html#a9214183e4771dcc7546e0eb91c814150">_last_loop_time_s</a> = 1.0 / <a class="code hl_variable" href="classAP__Scheduler.html#ac997ff75649d6f705ce8798a02bc7ad1">_loop_rate_hz</a>;</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span> </div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>    <a class="code hl_variable" href="classAP__Scheduler.html#a8eb60ca73919e571955357f67b23f0ac">_vehicle_tasks</a> = tasks;</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>    <a class="code hl_variable" href="classAP__Scheduler.html#a4184acf485aae16d69c41ed20bd7a435">_num_vehicle_tasks</a> = num_tasks;</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span> </div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span><span class="preprocessor">#if AP_VEHICLE_ENABLED</span></div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>    <a class="code hl_class" href="classAP__Vehicle.html">AP_Vehicle</a>* <a class="code hl_variable" href="AHRS__Test_8cpp.html#a96159f137b07706488f9ffbedf89e79d">vehicle</a> = <a class="code hl_function" href="namespaceAP.html#a930025da7cb316754df99a6e26205e98">AP::vehicle</a>();</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="AHRS__Test_8cpp.html#a96159f137b07706488f9ffbedf89e79d">vehicle</a> != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>        <a class="code hl_variable" href="AHRS__Test_8cpp.html#a96159f137b07706488f9ffbedf89e79d">vehicle</a>-&gt;<a class="code hl_function" href="classAP__Vehicle.html#ad0a31dad3f4ba85f21b5ce32e1c536dd">get_common_scheduler_tasks</a>(<a class="code hl_variable" href="classAP__Scheduler.html#a4957730dea5a740ecb0aaa5f23f12895">_common_tasks</a>, <a class="code hl_variable" href="classAP__Scheduler.html#afa688c91df4d63b45dd1b2167d67b074">_num_common_tasks</a>);</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>    }</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span> </div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>    <a class="code hl_variable" href="classAP__Scheduler.html#a557a774600d808afd5dd15b2791aa88e">_num_tasks</a> = <a class="code hl_variable" href="classAP__Scheduler.html#a4184acf485aae16d69c41ed20bd7a435">_num_vehicle_tasks</a> + <a class="code hl_variable" href="classAP__Scheduler.html#afa688c91df4d63b45dd1b2167d67b074">_num_common_tasks</a>;</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span> </div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>   <a class="code hl_variable" href="classAP__Scheduler.html#afdcc6b11a2e2ee3392a9ebdf07dffb9f">_last_run</a> = <span class="keyword">new</span> uint16_t[<a class="code hl_variable" href="classAP__Scheduler.html#a557a774600d808afd5dd15b2791aa88e">_num_tasks</a>];</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>    <a class="code hl_variable" href="classAP__Scheduler.html#acb1a139e45dbe0c449e6f389cb0a5633">_tick_counter</a> = 0;</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span> </div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>    <span class="comment">// setup initial performance counters</span></div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>    <a class="code hl_variable" href="classAP__Scheduler.html#a4ec06632df7f98446d76f5090ca8d43b">perf_info</a>.<a class="code hl_function" href="classAP_1_1PerfInfo.html#a629b5da9510f930dda772361776c05b4">set_loop_rate</a>(<a class="code hl_function" href="classAP__Scheduler.html#a5de68a6345f4b9ce9eb4008ee4a6c161">get_loop_rate_hz</a>());</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>    <a class="code hl_variable" href="classAP__Scheduler.html#a4ec06632df7f98446d76f5090ca8d43b">perf_info</a>.<a class="code hl_function" href="classAP_1_1PerfInfo.html#a427d86ad9b709fcec98bc21fbc06da30">reset</a>();</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span> </div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__Scheduler.html#ae43b945ce2fe6b20495df7f344e6d94b">_options</a> &amp; uint8_t(<a class="code hl_enumvalue" href="classAP__Scheduler.html#a9ff367c44335c482c4138da2e78fab27a5ec936ab5de8eda22b64642f1b5813ce">Options::RECORD_TASK_INFO</a>)) {</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>        <a class="code hl_variable" href="classAP__Scheduler.html#a4ec06632df7f98446d76f5090ca8d43b">perf_info</a>.<a class="code hl_function" href="classAP_1_1PerfInfo.html#a65697c1721668743bfbf3d79d77f6df9">allocate_task_info</a>(<a class="code hl_variable" href="classAP__Scheduler.html#a557a774600d808afd5dd15b2791aa88e">_num_tasks</a>);</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>    }</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span> </div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>    <a class="code hl_variable" href="classAP__Scheduler.html#a8a6f9248d207fe32900fb8d6bcdfabe9">_log_performance_bit</a> = log_performance_bit;</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span> </div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>    <span class="comment">// sanity check the task lists to ensure the priorities are</span></div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>    <span class="comment">// never decrease</span></div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>    uint8_t old = 0;</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>    <span class="keywordflow">for</span> (uint8_t i=0; i&lt;<a class="code hl_variable" href="classAP__Scheduler.html#afa688c91df4d63b45dd1b2167d67b074">_num_common_tasks</a>; i++) {</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__Scheduler.html#a4957730dea5a740ecb0aaa5f23f12895">_common_tasks</a>[i].<a class="code hl_variable" href="lparser_8c.html#a81b42517a626e76f00bbe1bf33d3aeba">priority</a> &lt; old){</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>            <a class="code hl_define" href="AP__InternalError_8h.html#a6a214896237158d1318e3368b4b10dfb">INTERNAL_ERROR</a>(<a class="code hl_enumvalue" href="classAP__InternalError.html#a5173d851f3973e9a341e08ceb9451c11a125554e4c6e51cfd513a60efb7eb3c78">AP_InternalError::error_t::flow_of_control</a>);</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>        }</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>        old = <a class="code hl_variable" href="classAP__Scheduler.html#a4957730dea5a740ecb0aaa5f23f12895">_common_tasks</a>[i].<a class="code hl_variable" href="structAP__Scheduler_1_1Task.html#a491d948435493331852f0c55502ce0dd">priority</a>;</div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>    }</div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>    old = 0;</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>    <span class="keywordflow">for</span> (uint8_t i=0; i&lt;<a class="code hl_variable" href="classAP__Scheduler.html#a4184acf485aae16d69c41ed20bd7a435">_num_vehicle_tasks</a>; i++) {</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__Scheduler.html#a8eb60ca73919e571955357f67b23f0ac">_vehicle_tasks</a>[i].<a class="code hl_variable" href="lparser_8c.html#a81b42517a626e76f00bbe1bf33d3aeba">priority</a> &lt; old) {</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>            <a class="code hl_define" href="AP__InternalError_8h.html#a6a214896237158d1318e3368b4b10dfb">INTERNAL_ERROR</a>(<a class="code hl_enumvalue" href="classAP__InternalError.html#a5173d851f3973e9a341e08ceb9451c11a125554e4c6e51cfd513a60efb7eb3c78">AP_InternalError::error_t::flow_of_control</a>);</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>        }</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>        old = <a class="code hl_variable" href="classAP__Scheduler.html#a8eb60ca73919e571955357f67b23f0ac">_vehicle_tasks</a>[i].<a class="code hl_variable" href="structAP__Scheduler_1_1Task.html#a491d948435493331852f0c55502ce0dd">priority</a>;</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>    }</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>}</div>
</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span> </div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span><span class="comment">// one tick has passed</span></div>
<div class="foldopen" id="foldopen00160" data-start="{" data-end="}">
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno"><a class="line" href="classAP__Scheduler.html#aa4acb0c2d9d1da3af6e8491365e2f29a">  160</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classAP__Scheduler.html#aa4acb0c2d9d1da3af6e8491365e2f29a">AP_Scheduler::tick</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>{</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>    <a class="code hl_variable" href="classAP__Scheduler.html#acb1a139e45dbe0c449e6f389cb0a5633">_tick_counter</a>++;</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>    <a class="code hl_variable" href="classAP__Scheduler.html#a11af440621ec3b6c96adf437da611a1b">_tick_counter32</a>++;</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>}</div>
</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span> </div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span><span class="preprocessor">#if CONFIG_HAL_BOARD == HAL_BOARD_SITL</span></div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span><span class="comment">/*</span></div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span><span class="comment">  fill stack with NaN so we can catch use of uninitialised stack</span></div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span><span class="comment">  variables in SITL</span></div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span><span class="comment"> */</span></div>
<div class="foldopen" id="foldopen00171" data-start="{" data-end="}">
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno"><a class="line" href="AP__Scheduler_8cpp.html#aaa9eb2ef7d1450ef565519e02177bd96">  171</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="AP__Scheduler_8cpp.html#aaa9eb2ef7d1450ef565519e02177bd96">fill_nanf_stack</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>{</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="Printf_8cpp.html#a48d9522e58fa05906c6dba23e5745a72">v</a>[1024];</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>    <a class="code hl_function" href="AP__Math_8cpp.html#a59a7349384e672129d419fbd6aba2d61">fill_nanf</a>(<a class="code hl_variable" href="Printf_8cpp.html#a48d9522e58fa05906c6dba23e5745a72">v</a>, <a class="code hl_define" href="AP__Common_8h.html#a121caf32c5b5d704ef3453f0885a9ea5">ARRAY_SIZE</a>(<a class="code hl_variable" href="Printf_8cpp.html#a48d9522e58fa05906c6dba23e5745a72">v</a>));</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>}</div>
</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span> </div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span><span class="comment">/*</span></div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span><span class="comment">  run one tick</span></div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span><span class="comment">  this will run as many scheduler tasks as we can in the specified time</span></div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span><span class="comment"> */</span></div>
<div class="foldopen" id="foldopen00182" data-start="{" data-end="}">
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno"><a class="line" href="classAP__Scheduler.html#a16d85af56e1c52ebe422743580f3a90d">  182</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classAP__Scheduler.html#a16d85af56e1c52ebe422743580f3a90d">AP_Scheduler::run</a>(uint32_t time_available)</div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>{</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>    uint32_t run_started_usec = <a class="code hl_function" href="namespaceAP__HAL.html#a8293355e35887733b1fd151aef08a787">AP_HAL::micros</a>();</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>    uint32_t now = run_started_usec;</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span> </div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>    uint8_t vehicle_tasks_offset = 0;</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>    uint8_t common_tasks_offset = 0;</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span> </div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>    <span class="keywordflow">for</span> (uint8_t i=0; i&lt;<a class="code hl_variable" href="classAP__Scheduler.html#a557a774600d808afd5dd15b2791aa88e">_num_tasks</a>; i++) {</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>        <span class="comment">// determine which of the common task / vehicle task to run</span></div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>        <span class="keywordtype">bool</span> run_vehicle_task = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>        <span class="keywordflow">if</span> (vehicle_tasks_offset &lt; <a class="code hl_variable" href="classAP__Scheduler.html#a4184acf485aae16d69c41ed20bd7a435">_num_vehicle_tasks</a> &amp;&amp;</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>            common_tasks_offset &lt; <a class="code hl_variable" href="classAP__Scheduler.html#afa688c91df4d63b45dd1b2167d67b074">_num_common_tasks</a>) {</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>            <span class="comment">// still have entries on both lists; compare the</span></div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>            <span class="comment">// priorities.  In case of a tie the vehicle-specific</span></div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>            <span class="comment">// entry wins.</span></div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>            <span class="keyword">const</span> <a class="code hl_struct" href="structAP__Scheduler_1_1Task.html">Task</a> &amp;vehicle_task = <a class="code hl_variable" href="classAP__Scheduler.html#a8eb60ca73919e571955357f67b23f0ac">_vehicle_tasks</a>[vehicle_tasks_offset];</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span>            <span class="keyword">const</span> <a class="code hl_struct" href="structAP__Scheduler_1_1Task.html">Task</a> &amp;common_task = <a class="code hl_variable" href="classAP__Scheduler.html#a4957730dea5a740ecb0aaa5f23f12895">_common_tasks</a>[common_tasks_offset];</div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>            <span class="keywordflow">if</span> (vehicle_task.<a class="code hl_variable" href="structAP__Scheduler_1_1Task.html#a491d948435493331852f0c55502ce0dd">priority</a> &lt;= common_task.<a class="code hl_variable" href="structAP__Scheduler_1_1Task.html#a491d948435493331852f0c55502ce0dd">priority</a>) {</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>                run_vehicle_task = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>            }</div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (vehicle_tasks_offset &lt; <a class="code hl_variable" href="classAP__Scheduler.html#a4184acf485aae16d69c41ed20bd7a435">_num_vehicle_tasks</a>) {</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>            <span class="comment">// out of common tasks to run</span></div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>            run_vehicle_task = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (common_tasks_offset &lt; <a class="code hl_variable" href="classAP__Scheduler.html#afa688c91df4d63b45dd1b2167d67b074">_num_common_tasks</a>) {</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>            <span class="comment">// out of vehicle tasks to run</span></div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>            run_vehicle_task = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>            <span class="comment">// this is an error; the outside loop should have terminated</span></div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span>            <a class="code hl_define" href="AP__InternalError_8h.html#a6a214896237158d1318e3368b4b10dfb">INTERNAL_ERROR</a>(<a class="code hl_enumvalue" href="classAP__InternalError.html#a5173d851f3973e9a341e08ceb9451c11a125554e4c6e51cfd513a60efb7eb3c78">AP_InternalError::error_t::flow_of_control</a>);</div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>        }</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span> </div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>        <span class="keyword">const</span> <a class="code hl_struct" href="structAP__Scheduler_1_1Task.html">AP_Scheduler::Task</a> &amp;task = run_vehicle_task ? <a class="code hl_variable" href="classAP__Scheduler.html#a8eb60ca73919e571955357f67b23f0ac">_vehicle_tasks</a>[vehicle_tasks_offset] : <a class="code hl_variable" href="classAP__Scheduler.html#a4957730dea5a740ecb0aaa5f23f12895">_common_tasks</a>[common_tasks_offset];</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>        <span class="keywordflow">if</span> (run_vehicle_task) {</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>            vehicle_tasks_offset++;</div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>            common_tasks_offset++;</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>        }</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span> </div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>        <span class="keywordflow">if</span> (task.<a class="code hl_variable" href="structAP__Scheduler_1_1Task.html#a491d948435493331852f0c55502ce0dd">priority</a> &gt; <a class="code hl_enumvalue" href="classAP__Scheduler.html#a8cd776c70ab72e6ac3a20b7bcb7a5deda45271be83f8ba477588acce243607b52">MAX_FAST_TASK_PRIORITIES</a>) {</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>            <span class="keyword">const</span> uint16_t dt = <a class="code hl_variable" href="classAP__Scheduler.html#acb1a139e45dbe0c449e6f389cb0a5633">_tick_counter</a> - <a class="code hl_variable" href="classAP__Scheduler.html#afdcc6b11a2e2ee3392a9ebdf07dffb9f">_last_run</a>[i];</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>            <span class="comment">// we allow 0 to mean loop rate</span></div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>            uint32_t interval_ticks = (<a class="code hl_function" href="AP__Math_8h.html#a2a12cce483e9b870da70d30406d82c60">is_zero</a>(task.<a class="code hl_variable" href="structAP__Scheduler_1_1Task.html#ac36c77bd5732d346601c8ff2e1dbfa88">rate_hz</a>) ? 1 : <a class="code hl_variable" href="classAP__Scheduler.html#ac997ff75649d6f705ce8798a02bc7ad1">_loop_rate_hz</a> / task.<a class="code hl_variable" href="structAP__Scheduler_1_1Task.html#ac36c77bd5732d346601c8ff2e1dbfa88">rate_hz</a>);</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>            <span class="keywordflow">if</span> (interval_ticks &lt; 1) {</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>                interval_ticks = 1;</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>            }</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>            <span class="keywordflow">if</span> (dt &lt; interval_ticks) {</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>                <span class="comment">// this task is not yet scheduled to run again</span></div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>            }</div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>            <span class="comment">// this task is due to run. Do we have enough time to run it?</span></div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>            <a class="code hl_variable" href="classAP__Scheduler.html#ac20e0a677da03d415b99d0413ce631ae">_task_time_allowed</a> = task.<a class="code hl_variable" href="structAP__Scheduler_1_1Task.html#ab9fbd24b9c70e16354d8d0947fe69384">max_time_micros</a>;</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span> </div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>            <span class="keywordflow">if</span> (dt &gt;= interval_ticks*2) {</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>                <a class="code hl_variable" href="classAP__Scheduler.html#a4ec06632df7f98446d76f5090ca8d43b">perf_info</a>.<a class="code hl_function" href="classAP_1_1PerfInfo.html#a21f446c94c89c87a6d5d670068546973">task_slipped</a>(i);</div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>            }</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span> </div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>            <span class="keywordflow">if</span> (dt &gt;= interval_ticks*<a class="code hl_variable" href="classAP__Scheduler.html#a9530e68990d0341d3ae5ffca749a3fdb">max_task_slowdown</a>) {</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>                <span class="comment">// we are going beyond the maximum slowdown factor for a</span></div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span>                <span class="comment">// task. This will trigger increasing the time budget</span></div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>                <a class="code hl_variable" href="classAP__Scheduler.html#a45aede5542f1b5848f82d107d886ad6d">task_not_achieved</a>++;</div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>            }</div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span> </div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__Scheduler.html#ac20e0a677da03d415b99d0413ce631ae">_task_time_allowed</a> &gt; time_available) {</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>                <span class="comment">// not enough time to run this task.  Continue loop -</span></div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>                <span class="comment">// maybe another task will fit into time remaining</span></div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>            }</div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>            <a class="code hl_variable" href="classAP__Scheduler.html#ac20e0a677da03d415b99d0413ce631ae">_task_time_allowed</a> = <a class="code hl_function" href="classAP__Scheduler.html#a6ea2df59d699e91c31e1688ded595f1c">get_loop_period_us</a>();</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>        }</div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span> </div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>        <span class="comment">// run it</span></div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>        <a class="code hl_variable" href="classAP__Scheduler.html#a141789568619b15a4f5b536f819a95a3">_task_time_started</a> = now;</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>        <a class="code hl_variable" href="AC__AttitudeControl_8cpp.html#a240c1a4ae2a70d1855f91e4a0b1ac938">hal</a>.<a class="code hl_variable" href="classAP__HAL_1_1HAL.html#a9337a60383f4264fa96a20dbe43a4e2e">util</a>-&gt;<a class="code hl_variable" href="classAP__HAL_1_1Util.html#a64273fdab59825cea305a403054c25bf">persistent_data</a>.<a class="code hl_variable" href="structAP__HAL_1_1Util_1_1PersistentData.html#aa9f24b2ec5b919e948745878c8d96f59">scheduler_task</a> = i;</div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span><span class="preprocessor">#if CONFIG_HAL_BOARD == HAL_BOARD_SITL</span></div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>        <a class="code hl_function" href="AP__Scheduler_8cpp.html#aaa9eb2ef7d1450ef565519e02177bd96">fill_nanf_stack</a>();</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>        task.<a class="code hl_variable" href="structAP__Scheduler_1_1Task.html#ae8b2138ab213591aaa1a639a8101df79">function</a>();</div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>        <a class="code hl_variable" href="AC__AttitudeControl_8cpp.html#a240c1a4ae2a70d1855f91e4a0b1ac938">hal</a>.<a class="code hl_variable" href="classAP__HAL_1_1HAL.html#a9337a60383f4264fa96a20dbe43a4e2e">util</a>-&gt;<a class="code hl_variable" href="classAP__HAL_1_1Util.html#a64273fdab59825cea305a403054c25bf">persistent_data</a>.<a class="code hl_variable" href="structAP__HAL_1_1Util_1_1PersistentData.html#aa9f24b2ec5b919e948745878c8d96f59">scheduler_task</a> = -1;</div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span> </div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>        <span class="comment">// record the tick counter when we ran. This drives</span></div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>        <span class="comment">// when we next run the event</span></div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>        <a class="code hl_variable" href="classAP__Scheduler.html#afdcc6b11a2e2ee3392a9ebdf07dffb9f">_last_run</a>[i] = <a class="code hl_variable" href="classAP__Scheduler.html#acb1a139e45dbe0c449e6f389cb0a5633">_tick_counter</a>;</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span> </div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>        <span class="comment">// work out how long the event actually took</span></div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>        now = <a class="code hl_function" href="namespaceAP__HAL.html#a8293355e35887733b1fd151aef08a787">AP_HAL::micros</a>();</div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>        uint32_t time_taken = now - <a class="code hl_variable" href="classAP__Scheduler.html#a141789568619b15a4f5b536f819a95a3">_task_time_started</a>;</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>        <span class="keywordtype">bool</span> overrun = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>        <span class="keywordflow">if</span> (time_taken &gt; <a class="code hl_variable" href="classAP__Scheduler.html#ac20e0a677da03d415b99d0413ce631ae">_task_time_allowed</a>) {</div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>            overrun = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>            <span class="comment">// the event overran!</span></div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span>            <a class="code hl_define" href="AP__ADC__ADS1115_8cpp.html#a4cabfd12f7acea54d1d16436e9de5dc8">debug</a>(3, <span class="stringliteral">&quot;Scheduler overrun task[%u-%s] (%u/%u)\n&quot;</span>,</div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>                  (<span class="keywordtype">unsigned</span>)i,</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>                  task.<a class="code hl_variable" href="structAP__Scheduler_1_1Task.html#a24f69b528a11385efe43c8be446e5657">name</a>,</div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>                  (<span class="keywordtype">unsigned</span>)time_taken,</div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>                  (<span class="keywordtype">unsigned</span>)<a class="code hl_variable" href="classAP__Scheduler.html#ac20e0a677da03d415b99d0413ce631ae">_task_time_allowed</a>);</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span>        }</div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span> </div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>        <a class="code hl_variable" href="classAP__Scheduler.html#a4ec06632df7f98446d76f5090ca8d43b">perf_info</a>.<a class="code hl_function" href="classAP_1_1PerfInfo.html#adf6defe46f01eb1839df1bd658ebdf0a">update_task_info</a>(i, time_taken, overrun);</div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span> </div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span>        <span class="keywordflow">if</span> (time_taken &gt;= time_available) {</div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>            <span class="comment">/*</span></div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span><span class="comment">              we are out of time, but we need to keep walking the task</span></div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span><span class="comment">              table in case there is another fast loop task after this</span></div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span><span class="comment">              task, plus we need to update the accouting so we can</span></div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span><span class="comment">              work out if we need to allocate extra time for the loop</span></div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span><span class="comment">              (lower the loop rate)</span></div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span><span class="comment">              Just set time_available to zero, which means we will</span></div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span><span class="comment">              only run fast tasks after this one</span></div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span><span class="comment">             */</span></div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>            time_available = 0;</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>            time_available -= time_taken;</div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>        }</div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>    }</div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span> </div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>    <span class="comment">// update number of spare microseconds</span></div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>    <a class="code hl_variable" href="classAP__Scheduler.html#a6b26e7c51345c849165f4d2914b664f1">_spare_micros</a> += time_available;</div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span> </div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>    <a class="code hl_variable" href="classAP__Scheduler.html#aa208b64f15deebbd5e72fe25b2a55f24">_spare_ticks</a>++;</div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__Scheduler.html#aa208b64f15deebbd5e72fe25b2a55f24">_spare_ticks</a> == 32) {</div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>        <a class="code hl_variable" href="classAP__Scheduler.html#aa208b64f15deebbd5e72fe25b2a55f24">_spare_ticks</a> /= 2;</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>        <a class="code hl_variable" href="classAP__Scheduler.html#a6b26e7c51345c849165f4d2914b664f1">_spare_micros</a> /= 2;</div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>    }</div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span>}</div>
</div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span> </div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span><span class="comment">/*</span></div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span><span class="comment">  return number of micros until the current task reaches its deadline</span></div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span><span class="comment"> */</span></div>
<div class="foldopen" id="foldopen00313" data-start="{" data-end="}">
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno"><a class="line" href="classAP__Scheduler.html#aa01fa1d1430811f5301590d3c31f2184">  313</a></span>uint16_t <a class="code hl_function" href="classAP__Scheduler.html#aa01fa1d1430811f5301590d3c31f2184">AP_Scheduler::time_available_usec</a>(<span class="keywordtype">void</span>)<span class="keyword"> const</span></div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span><span class="keyword"></span>{</div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>    uint32_t dt = <a class="code hl_function" href="namespaceAP__HAL.html#a8293355e35887733b1fd151aef08a787">AP_HAL::micros</a>() - <a class="code hl_variable" href="classAP__Scheduler.html#a141789568619b15a4f5b536f819a95a3">_task_time_started</a>;</div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>    <span class="keywordflow">if</span> (dt &gt; <a class="code hl_variable" href="classAP__Scheduler.html#ac20e0a677da03d415b99d0413ce631ae">_task_time_allowed</a>) {</div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>    }</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classAP__Scheduler.html#ac20e0a677da03d415b99d0413ce631ae">_task_time_allowed</a> - dt;</div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>}</div>
</div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span> </div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span><span class="comment">/*</span></div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span><span class="comment">  calculate load average as a number from 0 to 1</span></div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span><span class="comment"> */</span></div>
<div class="foldopen" id="foldopen00325" data-start="{" data-end="}">
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno"><a class="line" href="classAP__Scheduler.html#abda29cac2f54d56ff8bf7791a6667a9c">  325</a></span><span class="keywordtype">float</span> <a class="code hl_function" href="classAP__Scheduler.html#abda29cac2f54d56ff8bf7791a6667a9c">AP_Scheduler::load_average</a>()</div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>{</div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>    <span class="comment">// return 1 if filtered main loop rate is 5% below the configured rate</span></div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="classAP__Scheduler.html#aeae6c98cb869b326dfddef9a21796d48">get_filtered_loop_rate_hz</a>() &lt; <a class="code hl_function" href="classAP__Scheduler.html#a5de68a6345f4b9ce9eb4008ee4a6c161">get_loop_rate_hz</a>() * 0.95) {</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>        <span class="keywordflow">return</span> 1.0;</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>    }</div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__Scheduler.html#aa208b64f15deebbd5e72fe25b2a55f24">_spare_ticks</a> == 0) {</div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>        <span class="keywordflow">return</span> 0.0f;</div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>    }</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>    <span class="keyword">const</span> uint32_t loop_us = <a class="code hl_function" href="classAP__Scheduler.html#a6ea2df59d699e91c31e1688ded595f1c">get_loop_period_us</a>();</div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span>    <span class="keyword">const</span> uint32_t used_time = loop_us - (<a class="code hl_variable" href="classAP__Scheduler.html#a6b26e7c51345c849165f4d2914b664f1">_spare_micros</a>/<a class="code hl_variable" href="classAP__Scheduler.html#aa208b64f15deebbd5e72fe25b2a55f24">_spare_ticks</a>);</div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>    <span class="keywordflow">return</span> <a class="code hl_define" href="AP__Math_8h.html#a5256308fd38a7098b8f95607aa56888f">constrain_float</a>(used_time / (<span class="keywordtype">float</span>)loop_us, 0, 1);</div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>}</div>
</div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span> </div>
<div class="foldopen" id="foldopen00339" data-start="{" data-end="}">
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno"><a class="line" href="classAP__Scheduler.html#a8d5eeba086253d166ac8f195f39868b6">  339</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classAP__Scheduler.html#a8d5eeba086253d166ac8f195f39868b6">AP_Scheduler::loop</a>()</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>{</div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>    <span class="comment">// wait for an INS sample</span></div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>    <a class="code hl_variable" href="AC__AttitudeControl_8cpp.html#a240c1a4ae2a70d1855f91e4a0b1ac938">hal</a>.<a class="code hl_variable" href="classAP__HAL_1_1HAL.html#a9337a60383f4264fa96a20dbe43a4e2e">util</a>-&gt;<a class="code hl_variable" href="classAP__HAL_1_1Util.html#a64273fdab59825cea305a403054c25bf">persistent_data</a>.<a class="code hl_variable" href="structAP__HAL_1_1Util_1_1PersistentData.html#aa9f24b2ec5b919e948745878c8d96f59">scheduler_task</a> = -3;</div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>    <a class="code hl_variable" href="classAP__Scheduler.html#ace501e826e716bc8501fa27403fc1e4c">_rsem</a>.give();</div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>    <a class="code hl_function" href="namespaceAP.html#ac571aa5a2ef71b7f4b4b2bfa09143fb9">AP::ins</a>().<a class="code hl_function" href="classAP__InertialSensor.html#a95ef73a5bd80238c036d9b29cfc694ce">wait_for_sample</a>();</div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>    <a class="code hl_variable" href="classAP__Scheduler.html#ace501e826e716bc8501fa27403fc1e4c">_rsem</a>.take_blocking();</div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>    <a class="code hl_variable" href="AC__AttitudeControl_8cpp.html#a240c1a4ae2a70d1855f91e4a0b1ac938">hal</a>.<a class="code hl_variable" href="classAP__HAL_1_1HAL.html#a9337a60383f4264fa96a20dbe43a4e2e">util</a>-&gt;<a class="code hl_variable" href="classAP__HAL_1_1Util.html#a64273fdab59825cea305a403054c25bf">persistent_data</a>.<a class="code hl_variable" href="structAP__HAL_1_1Util_1_1PersistentData.html#aa9f24b2ec5b919e948745878c8d96f59">scheduler_task</a> = -1;</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span> </div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>    <span class="keyword">const</span> uint32_t sample_time_us = <a class="code hl_function" href="namespaceAP__HAL.html#a8293355e35887733b1fd151aef08a787">AP_HAL::micros</a>();</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>    </div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__Scheduler.html#a0453a692bad08260da3b146ebc3ddafa">_loop_timer_start_us</a> == 0) {</div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span>        <a class="code hl_variable" href="classAP__Scheduler.html#a0453a692bad08260da3b146ebc3ddafa">_loop_timer_start_us</a> = sample_time_us;</div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span>        <a class="code hl_variable" href="classAP__Scheduler.html#a9214183e4771dcc7546e0eb91c814150">_last_loop_time_s</a> = <a class="code hl_function" href="classAP__Scheduler.html#a82db30c491d6a4eb2a2c34750d7a1de5">get_loop_period_s</a>();</div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>        <a class="code hl_variable" href="classAP__Scheduler.html#a9214183e4771dcc7546e0eb91c814150">_last_loop_time_s</a> = (sample_time_us - <a class="code hl_variable" href="classAP__Scheduler.html#a0453a692bad08260da3b146ebc3ddafa">_loop_timer_start_us</a>) * 1.0e-6;</div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span>    }</div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span> </div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span><span class="preprocessor">#if CONFIG_HAL_BOARD == HAL_BOARD_SITL</span></div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span>    {</div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>        <span class="comment">/*</span></div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span><span class="comment">          for testing low CPU conditions we can add an optional delay in SITL</span></div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span><span class="comment">        */</span></div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span>        <span class="keyword">auto</span> *<a class="code hl_variable" href="BARO__generic_8cpp.html#a83c33c2542db9ae7ca46bf548b52de7a">sitl</a> = AP::sitl();</div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span>        uint32_t loop_delay_us = <a class="code hl_variable" href="BARO__generic_8cpp.html#a83c33c2542db9ae7ca46bf548b52de7a">sitl</a>? <a class="code hl_variable" href="BARO__generic_8cpp.html#a83c33c2542db9ae7ca46bf548b52de7a">sitl</a>-&gt;loop_delay.get() : 1000U;</div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>        <a class="code hl_variable" href="AC__AttitudeControl_8cpp.html#a240c1a4ae2a70d1855f91e4a0b1ac938">hal</a>.<a class="code hl_variable" href="classAP__HAL_1_1HAL.html#a94ab41309b1ff10b8b862b826e59c882">scheduler</a>-&gt;<a class="code hl_function" href="classAP__HAL_1_1Scheduler.html#a78c4f1b1f192ac1c99544b6cc8f099b0">delay_microseconds</a>(loop_delay_us);</div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>    }</div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span> </div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span>    <span class="comment">// tell the scheduler one tick has passed</span></div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span>    <a class="code hl_function" href="classAP__Scheduler.html#aa4acb0c2d9d1da3af6e8491365e2f29a">tick</a>();</div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span> </div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span>    <span class="comment">// run all the tasks that are due to run. Note that we only</span></div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>    <span class="comment">// have to call this once per loop, as the tasks are scheduled</span></div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>    <span class="comment">// in multiples of the main loop tick. So if they don&#39;t run on</span></div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>    <span class="comment">// the first call to the scheduler they won&#39;t run on a later</span></div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span>    <span class="comment">// call until scheduler.tick() is called again</span></div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>    <span class="keyword">const</span> uint32_t loop_us = <a class="code hl_function" href="classAP__Scheduler.html#a6ea2df59d699e91c31e1688ded595f1c">get_loop_period_us</a>();</div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>    uint32_t now = <a class="code hl_function" href="namespaceAP__HAL.html#a8293355e35887733b1fd151aef08a787">AP_HAL::micros</a>();</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>    uint32_t time_available = 0;</div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>    <span class="keyword">const</span> uint32_t loop_tick_us = now - sample_time_us;</div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>    <span class="keywordflow">if</span> (loop_tick_us &lt; loop_us) {</div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span>        <span class="comment">// get remaining time available for this loop</span></div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span>        time_available = loop_us - loop_tick_us;</div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span>    }</div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span> </div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>    <span class="comment">// add in extra loop time determined by not achieving scheduler tasks</span></div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span>    time_available += <a class="code hl_variable" href="classAP__Scheduler.html#a56e047bfc9e01f382c8c09de17cc85a0">extra_loop_us</a>;</div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span> </div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span>    <span class="comment">// run the tasks</span></div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span>    <a class="code hl_function" href="ardupilot__SITL__QUAD_8c.html#a13a43e6d814de94978c515cb084873b1">run</a>(time_available);</div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span> </div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span><span class="preprocessor">#if CONFIG_HAL_BOARD == HAL_BOARD_SITL</span></div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span>    <span class="comment">// move result of AP_HAL::micros() forward:</span></div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span>    <a class="code hl_variable" href="AC__AttitudeControl_8cpp.html#a240c1a4ae2a70d1855f91e4a0b1ac938">hal</a>.<a class="code hl_variable" href="classAP__HAL_1_1HAL.html#a94ab41309b1ff10b8b862b826e59c882">scheduler</a>-&gt;<a class="code hl_function" href="classAP__HAL_1_1Scheduler.html#a78c4f1b1f192ac1c99544b6cc8f099b0">delay_microseconds</a>(1);</div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span> </div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__Scheduler.html#a45aede5542f1b5848f82d107d886ad6d">task_not_achieved</a> &gt; 0) {</div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span>        <span class="comment">// add some extra time to the budget</span></div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span>        <a class="code hl_variable" href="classAP__Scheduler.html#a56e047bfc9e01f382c8c09de17cc85a0">extra_loop_us</a> = <a class="code hl_define" href="monocypher_8cpp.html#a3acffbd305ee72dcd4593c0d8af64a4f">MIN</a>(<a class="code hl_variable" href="classAP__Scheduler.html#a56e047bfc9e01f382c8c09de17cc85a0">extra_loop_us</a>+100U, 5000U);</div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span>        <a class="code hl_variable" href="classAP__Scheduler.html#a45aede5542f1b5848f82d107d886ad6d">task_not_achieved</a> = 0;</div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span>        <a class="code hl_variable" href="classAP__Scheduler.html#a1f854d440dcfe5f3ce204c9f2c1db705">task_all_achieved</a> = 0;</div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__Scheduler.html#a56e047bfc9e01f382c8c09de17cc85a0">extra_loop_us</a> &gt; 0) {</div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span>        <a class="code hl_variable" href="classAP__Scheduler.html#a1f854d440dcfe5f3ce204c9f2c1db705">task_all_achieved</a>++;</div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__Scheduler.html#a1f854d440dcfe5f3ce204c9f2c1db705">task_all_achieved</a> &gt; 50) {</div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span>            <span class="comment">// we have gone through 50 loops without a task taking too</span></div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span>            <span class="comment">// long. CPU pressure has eased, so drop the extra time we&#39;re</span></div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span>            <span class="comment">// giving each loop</span></div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span>            <a class="code hl_variable" href="classAP__Scheduler.html#a1f854d440dcfe5f3ce204c9f2c1db705">task_all_achieved</a> = 0;</div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span>            <span class="comment">// we are achieving all tasks, slowly lower the extra loop time</span></div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span>            <a class="code hl_variable" href="classAP__Scheduler.html#a56e047bfc9e01f382c8c09de17cc85a0">extra_loop_us</a> = <a class="code hl_define" href="monocypher_8cpp.html#afa99ec4acc4ecb2dc3c2d05da15d0e3f">MAX</a>(0U, <a class="code hl_variable" href="classAP__Scheduler.html#a56e047bfc9e01f382c8c09de17cc85a0">extra_loop_us</a>-50U);</div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span>        }</div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span>    }</div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span> </div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>    <span class="comment">// check loop time</span></div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span>    <a class="code hl_variable" href="classAP__Scheduler.html#a4ec06632df7f98446d76f5090ca8d43b">perf_info</a>.<a class="code hl_function" href="classAP_1_1PerfInfo.html#a800eed07b994dcd081eb9b84b0ad50fd">check_loop_time</a>(sample_time_us - <a class="code hl_variable" href="classAP__Scheduler.html#a0453a692bad08260da3b146ebc3ddafa">_loop_timer_start_us</a>);</div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span>        </div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span>    <a class="code hl_variable" href="classAP__Scheduler.html#a0453a692bad08260da3b146ebc3ddafa">_loop_timer_start_us</a> = sample_time_us;</div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span> </div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span><span class="preprocessor">#if AP_SIM_ENABLED &amp;&amp; CONFIG_HAL_BOARD != HAL_BOARD_SITL</span></div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span>    <a class="code hl_variable" href="AC__AttitudeControl_8cpp.html#a240c1a4ae2a70d1855f91e4a0b1ac938">hal</a>.simstate-&gt;update();</div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span>}</div>
</div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span> </div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span><span class="preprocessor">#if HAL_LOGGING_ENABLED</span></div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span><span class="keywordtype">void</span> <a class="code hl_function" href="classAP__Scheduler.html#a463067370e88bd3c15d98b6e61abde41">AP_Scheduler::update_logging</a>()</div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span>{</div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="classAP__Scheduler.html#a755c219d23048f50b580fd0491a36d7f">debug_flags</a>()) {</div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span>        <a class="code hl_variable" href="classAP__Scheduler.html#a4ec06632df7f98446d76f5090ca8d43b">perf_info</a>.<a class="code hl_function" href="classAP_1_1PerfInfo.html#aeba093b964712dccec8e0ac5df3c5ded">update_logging</a>();</div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span>    }</div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__Scheduler.html#a8a6f9248d207fe32900fb8d6bcdfabe9">_log_performance_bit</a> != (uint32_t)-1 &amp;&amp;</div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span>        <a class="code hl_function" href="namespaceAP.html#aa35bfac1ea2da16f110e8e72db7b3b20">AP::logger</a>().should_log(<a class="code hl_variable" href="classAP__Scheduler.html#a8a6f9248d207fe32900fb8d6bcdfabe9">_log_performance_bit</a>)) {</div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span>        <a class="code hl_function" href="classAP__Scheduler.html#ab5ad36aaa0e937f3a3b2ef1a5e45d749">Log_Write_Performance</a>();</div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno">  432</span>    }</div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span>    <a class="code hl_variable" href="classAP__Scheduler.html#a4ec06632df7f98446d76f5090ca8d43b">perf_info</a>.<a class="code hl_function" href="classAP_1_1PerfInfo.html#a629b5da9510f930dda772361776c05b4">set_loop_rate</a>(<a class="code hl_function" href="classAP__Scheduler.html#a5de68a6345f4b9ce9eb4008ee4a6c161">get_loop_rate_hz</a>());</div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span>    <a class="code hl_variable" href="classAP__Scheduler.html#a4ec06632df7f98446d76f5090ca8d43b">perf_info</a>.<a class="code hl_function" href="classAP_1_1PerfInfo.html#a427d86ad9b709fcec98bc21fbc06da30">reset</a>();</div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span>    <span class="comment">// dynamically update the per-task perf counter</span></div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span>    <span class="keywordflow">if</span> (!(<a class="code hl_variable" href="classAP__Scheduler.html#ae43b945ce2fe6b20495df7f344e6d94b">_options</a> &amp; uint8_t(<a class="code hl_enumvalue" href="classAP__Scheduler.html#a9ff367c44335c482c4138da2e78fab27a5ec936ab5de8eda22b64642f1b5813ce">Options::RECORD_TASK_INFO</a>)) &amp;&amp; <a class="code hl_variable" href="classAP__Scheduler.html#a4ec06632df7f98446d76f5090ca8d43b">perf_info</a>.<a class="code hl_function" href="classAP_1_1PerfInfo.html#a402f1184e9a68f1fdfb62e4e5dab8f43">has_task_info</a>()) {</div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span>        <a class="code hl_variable" href="classAP__Scheduler.html#a4ec06632df7f98446d76f5090ca8d43b">perf_info</a>.<a class="code hl_function" href="classAP_1_1PerfInfo.html#ad8d3459ec535e8224b0b200737ef6682">free_task_info</a>();</div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code hl_variable" href="classAP__Scheduler.html#ae43b945ce2fe6b20495df7f344e6d94b">_options</a> &amp; uint8_t(<a class="code hl_enumvalue" href="classAP__Scheduler.html#a9ff367c44335c482c4138da2e78fab27a5ec936ab5de8eda22b64642f1b5813ce">Options::RECORD_TASK_INFO</a>)) &amp;&amp; !<a class="code hl_variable" href="classAP__Scheduler.html#a4ec06632df7f98446d76f5090ca8d43b">perf_info</a>.<a class="code hl_function" href="classAP_1_1PerfInfo.html#a402f1184e9a68f1fdfb62e4e5dab8f43">has_task_info</a>()) {</div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span>        <a class="code hl_variable" href="classAP__Scheduler.html#a4ec06632df7f98446d76f5090ca8d43b">perf_info</a>.<a class="code hl_function" href="classAP_1_1PerfInfo.html#a65697c1721668743bfbf3d79d77f6df9">allocate_task_info</a>(<a class="code hl_variable" href="classAP__Scheduler.html#a557a774600d808afd5dd15b2791aa88e">_num_tasks</a>);</div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span>    }</div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span>}</div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span> </div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span><span class="comment">// Write a performance monitoring packet</span></div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span><span class="keywordtype">void</span> <a class="code hl_function" href="classAP__Scheduler.html#ab5ad36aaa0e937f3a3b2ef1a5e45d749">AP_Scheduler::Log_Write_Performance</a>()</div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span>{</div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structAP__HAL_1_1Util_1_1PersistentData.html">AP_HAL::Util::PersistentData</a> &amp;pd = <a class="code hl_variable" href="AC__AttitudeControl_8cpp.html#a240c1a4ae2a70d1855f91e4a0b1ac938">hal</a>.<a class="code hl_variable" href="classAP__HAL_1_1HAL.html#a9337a60383f4264fa96a20dbe43a4e2e">util</a>-&gt;<a class="code hl_variable" href="classAP__HAL_1_1Util.html#a64273fdab59825cea305a403054c25bf">persistent_data</a>;</div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span>    <span class="keyword">struct </span><a class="code hl_struct" href="structlog__Performance.html">log_Performance</a> pkt = {</div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span>        <a class="code hl_define" href="AP__Logger_2LogStructure_8h.html#abca6b52da10346c72b10dd04698e4420">LOG_PACKET_HEADER_INIT</a>(<a class="code hl_enumvalue" href="AP__Logger_2LogStructure_8h.html#aec1abc8a4fd0e25bbcf703a19b991a05a5c30960f9c243575ee6953a9894c428d">LOG_PERFORMANCE_MSG</a>),</div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span>        time_us          : <a class="code hl_function" href="namespaceAP__HAL.html#a7aa0ce7625c9680e30ff4a99940907a5">AP_HAL::micros64</a>(),</div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span>        loop_rate        : (uint16_t)(<a class="code hl_function" href="classAP__Scheduler.html#aeae6c98cb869b326dfddef9a21796d48">get_filtered_loop_rate_hz</a>() + 0.5f),</div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span>        num_long_running : <a class="code hl_variable" href="classAP__Scheduler.html#a4ec06632df7f98446d76f5090ca8d43b">perf_info</a>.get_num_long_running(),</div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span>        num_loops        : <a class="code hl_variable" href="classAP__Scheduler.html#a4ec06632df7f98446d76f5090ca8d43b">perf_info</a>.get_num_loops(),</div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span>        max_time         : <a class="code hl_variable" href="classAP__Scheduler.html#a4ec06632df7f98446d76f5090ca8d43b">perf_info</a>.get_max_time(),</div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span>        mem_avail        : <a class="code hl_variable" href="AC__AttitudeControl_8cpp.html#a240c1a4ae2a70d1855f91e4a0b1ac938">hal</a>.util-&gt;available_memory(),</div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span>        load             : (uint16_t)(<a class="code hl_function" href="classAP__Scheduler.html#abda29cac2f54d56ff8bf7791a6667a9c">load_average</a>() * 1000),</div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span>        internal_error_last_line : <a class="code hl_namespace" href="namespaceAP.html">AP</a>::<a class="code hl_function" href="namespaceAP.html#afceb236ff617aaaa2b08afacd72532b0">internalerror</a>().last_error_line(),</div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span>        internal_errors  : <a class="code hl_namespace" href="namespaceAP.html">AP</a>::<a class="code hl_function" href="namespaceAP.html#afceb236ff617aaaa2b08afacd72532b0">internalerror</a>().errors(),</div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span>        internal_error_count : <a class="code hl_namespace" href="namespaceAP.html">AP</a>::<a class="code hl_function" href="namespaceAP.html#afceb236ff617aaaa2b08afacd72532b0">internalerror</a>().<a class="code hl_variable" href="test__expandingstring__failure_8cpp.html#a86988a65e0d3ece7990c032c159786d6">count</a>(),</div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span>        spi_count        : pd.spi_count,</div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno">  460</span>        i2c_count        : pd.i2c_count,</div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span>        i2c_isr_count    : pd.i2c_isr_count,</div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span>        <a class="code hl_variable" href="classAP__Scheduler.html#a56e047bfc9e01f382c8c09de17cc85a0">extra_loop_us</a>    : <a class="code hl_variable" href="classAP__Scheduler.html#a56e047bfc9e01f382c8c09de17cc85a0">extra_loop_us</a>,</div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span>    };</div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span>    <a class="code hl_function" href="namespaceAP.html#aa35bfac1ea2da16f110e8e72db7b3b20">AP::logger</a>().<a class="code hl_function" href="classAP__Logger.html#a32f5822b72789c7c83402b2af7544d09">WriteCriticalBlock</a>(&amp;pkt, <span class="keyword">sizeof</span>(pkt));</div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span>}</div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span><span class="preprocessor">#endif  </span><span class="comment">// HAL_LOGGING_ENABLED</span></div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span> </div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span><span class="comment">// display task statistics as text buffer for @SYS/tasks.txt</span></div>
<div class="foldopen" id="foldopen00469" data-start="{" data-end="}">
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno"><a class="line" href="classAP__Scheduler.html#a17f083411d635ce665affa393fb4f260">  469</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classAP__Scheduler.html#a17f083411d635ce665affa393fb4f260">AP_Scheduler::task_info</a>(<a class="code hl_class" href="classExpandingString.html">ExpandingString</a> &amp;str)</div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span>{</div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span>    <span class="comment">// a header to allow for machine parsers to determine format</span></div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span>    str.<a class="code hl_function" href="classExpandingString.html#ac7dfb3d6f983133060daecc5b6635f44">printf</a>(<span class="stringliteral">&quot;TasksV2\n&quot;</span>);</div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span> </div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span>    <span class="comment">// dynamically enable statistics collection</span></div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span>    <span class="keywordflow">if</span> (!(<a class="code hl_variable" href="classAP__Scheduler.html#ae43b945ce2fe6b20495df7f344e6d94b">_options</a> &amp; uint8_t(<a class="code hl_enumvalue" href="classAP__Scheduler.html#a9ff367c44335c482c4138da2e78fab27a5ec936ab5de8eda22b64642f1b5813ce">Options::RECORD_TASK_INFO</a>))) {</div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span>        <a class="code hl_variable" href="classAP__Scheduler.html#ae43b945ce2fe6b20495df7f344e6d94b">_options</a>.set(<a class="code hl_variable" href="classAP__Scheduler.html#ae43b945ce2fe6b20495df7f344e6d94b">_options</a> | uint8_t(<a class="code hl_enumvalue" href="classAP__Scheduler.html#a9ff367c44335c482c4138da2e78fab27a5ec936ab5de8eda22b64642f1b5813ce">Options::RECORD_TASK_INFO</a>));</div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span>    }</div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span> </div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__Scheduler.html#a4ec06632df7f98446d76f5090ca8d43b">perf_info</a>.<a class="code hl_function" href="classAP_1_1PerfInfo.html#acead87e89038909782e761605f487c83">get_task_info</a>(0) == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span>    }</div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span> </div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span>    <span class="comment">// baseline the total time taken by all tasks</span></div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span>    <span class="keywordtype">float</span> total_time = 1.0f;</div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span>    <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; <a class="code hl_variable" href="classAP__Scheduler.html#a557a774600d808afd5dd15b2791aa88e">_num_tasks</a> + 1; i++) {</div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span>        <span class="keyword">const</span> <a class="code hl_struct" href="structAP_1_1PerfInfo_1_1TaskInfo.html">AP::PerfInfo::TaskInfo</a>* ti = <a class="code hl_variable" href="classAP__Scheduler.html#a4ec06632df7f98446d76f5090ca8d43b">perf_info</a>.<a class="code hl_function" href="classAP_1_1PerfInfo.html#acead87e89038909782e761605f487c83">get_task_info</a>(i);</div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span>        <span class="keywordflow">if</span> (ti != <span class="keyword">nullptr</span> &amp;&amp; ti-&gt;<a class="code hl_variable" href="structAP_1_1PerfInfo_1_1TaskInfo.html#aed3139a81a756594ae5806332b00b974">tick_count</a> &gt; 0) {</div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span>            total_time += ti-&gt;<a class="code hl_variable" href="structAP_1_1PerfInfo_1_1TaskInfo.html#a37565d11b6b637c20382ab1c86cb8660">elapsed_time_us</a>;</div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno">  490</span>        }</div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno">  491</span>    }</div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno">  492</span> </div>
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span>    uint8_t vehicle_tasks_offset = 0;</div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span>    uint8_t common_tasks_offset = 0;</div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span> </div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno">  496</span>    <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; <a class="code hl_variable" href="classAP__Scheduler.html#a557a774600d808afd5dd15b2791aa88e">_num_tasks</a>; i++) {</div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span>        <span class="keyword">const</span> <a class="code hl_struct" href="structAP_1_1PerfInfo_1_1TaskInfo.html">AP::PerfInfo::TaskInfo</a>* ti = <a class="code hl_variable" href="classAP__Scheduler.html#a4ec06632df7f98446d76f5090ca8d43b">perf_info</a>.<a class="code hl_function" href="classAP_1_1PerfInfo.html#acead87e89038909782e761605f487c83">get_task_info</a>(i);</div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno">  498</span>        <span class="keyword">const</span> <span class="keywordtype">char</span> *task_name;</div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span> </div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span>        <span class="comment">// determine which of the common task / vehicle task to run</span></div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span>        <span class="keywordtype">bool</span> run_vehicle_task = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span>        <span class="keywordflow">if</span> (vehicle_tasks_offset &lt; <a class="code hl_variable" href="classAP__Scheduler.html#a4184acf485aae16d69c41ed20bd7a435">_num_vehicle_tasks</a> &amp;&amp;</div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno">  503</span>            common_tasks_offset &lt; <a class="code hl_variable" href="classAP__Scheduler.html#afa688c91df4d63b45dd1b2167d67b074">_num_common_tasks</a>) {</div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno">  504</span>            <span class="comment">// still have entries on both lists; compare the</span></div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span>            <span class="comment">// priorities.  In case of a tie the vehicle-specific</span></div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span>            <span class="comment">// entry wins.</span></div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span>            <span class="keyword">const</span> <a class="code hl_struct" href="structAP__Scheduler_1_1Task.html">Task</a> &amp;vehicle_task = <a class="code hl_variable" href="classAP__Scheduler.html#a8eb60ca73919e571955357f67b23f0ac">_vehicle_tasks</a>[vehicle_tasks_offset];</div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span>            <span class="keyword">const</span> <a class="code hl_struct" href="structAP__Scheduler_1_1Task.html">Task</a> &amp;common_task = <a class="code hl_variable" href="classAP__Scheduler.html#a4957730dea5a740ecb0aaa5f23f12895">_common_tasks</a>[common_tasks_offset];</div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span>            <span class="keywordflow">if</span> (vehicle_task.<a class="code hl_variable" href="structAP__Scheduler_1_1Task.html#a491d948435493331852f0c55502ce0dd">priority</a> &lt;= common_task.<a class="code hl_variable" href="structAP__Scheduler_1_1Task.html#a491d948435493331852f0c55502ce0dd">priority</a>) {</div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno">  510</span>                run_vehicle_task = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span>            }</div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (vehicle_tasks_offset &lt; <a class="code hl_variable" href="classAP__Scheduler.html#a4184acf485aae16d69c41ed20bd7a435">_num_vehicle_tasks</a>) {</div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span>            <span class="comment">// out of common tasks to run</span></div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span>            run_vehicle_task = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (common_tasks_offset &lt; <a class="code hl_variable" href="classAP__Scheduler.html#afa688c91df4d63b45dd1b2167d67b074">_num_common_tasks</a>) {</div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno">  516</span>            <span class="comment">// out of vehicle tasks to run</span></div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span>            run_vehicle_task = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno">  519</span>            <span class="comment">// this is an error; the outside loop should have terminated</span></div>
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno">  520</span>            <a class="code hl_define" href="AP__InternalError_8h.html#a6a214896237158d1318e3368b4b10dfb">INTERNAL_ERROR</a>(<a class="code hl_enumvalue" href="classAP__InternalError.html#a5173d851f3973e9a341e08ceb9451c11a125554e4c6e51cfd513a60efb7eb3c78">AP_InternalError::error_t::flow_of_control</a>);</div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno">  521</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno">  522</span>        }</div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span> </div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno">  524</span>        <span class="keywordflow">if</span> (run_vehicle_task) {</div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno">  525</span>            task_name = <a class="code hl_variable" href="classAP__Scheduler.html#a8eb60ca73919e571955357f67b23f0ac">_vehicle_tasks</a>[vehicle_tasks_offset++].<a class="code hl_variable" href="structAP__Scheduler_1_1Task.html#a24f69b528a11385efe43c8be446e5657">name</a>;</div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno">  526</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno">  527</span>            task_name = <a class="code hl_variable" href="classAP__Scheduler.html#a4957730dea5a740ecb0aaa5f23f12895">_common_tasks</a>[common_tasks_offset++].<a class="code hl_variable" href="structAP__Scheduler_1_1Task.html#a24f69b528a11385efe43c8be446e5657">name</a>;</div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno">  528</span>        }</div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno">  529</span> </div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno">  530</span>        ti-&gt;<a class="code hl_function" href="structAP_1_1PerfInfo_1_1TaskInfo.html#ab13c02a8fe4f6f412da4667f141c27ae">print</a>(task_name, total_time, str);</div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span>    }</div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span>}</div>
</div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span> </div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno">  534</span><span class="keyword">namespace </span><a class="code hl_namespace" href="namespaceAP.html">AP</a> {</div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span> </div>
<div class="foldopen" id="foldopen00536" data-start="{" data-end="}">
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno"><a class="line" href="namespaceAP.html#acdeafe5406efd2650ba54d24d3aecb7c">  536</a></span><a class="code hl_class" href="classAP__Scheduler.html">AP_Scheduler</a> &amp;<a class="code hl_variable" href="ReplayGyroFFT_8cpp.html#ad26e894ebbcedea19175de5c7bf544c0">scheduler</a>()</div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno">  537</span>{</div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno">  538</span>    <span class="keywordflow">return</span> *<a class="code hl_function" href="classAP__Scheduler.html#a0826068d9555266bdda5efd19c4b891a">AP_Scheduler::get_singleton</a>();</div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span>}</div>
</div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno">  540</span> </div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span>};</div>
<div class="ttc" id="aAC__AttitudeControl_8cpp_html_a240c1a4ae2a70d1855f91e4a0b1ac938"><div class="ttname"><a href="AC__AttitudeControl_8cpp.html#a240c1a4ae2a70d1855f91e4a0b1ac938">hal</a></div><div class="ttdeci">const AP_HAL::HAL &amp; hal</div><div class="ttdef"><b>Definition</b> <a href="AP__Compass__AK09916_8cpp_source.html#l00059">AP_Compass_AK09916.cpp:59</a></div></div>
<div class="ttc" id="aAHRS__Test_8cpp_html_a96159f137b07706488f9ffbedf89e79d"><div class="ttname"><a href="AHRS__Test_8cpp.html#a96159f137b07706488f9ffbedf89e79d">vehicle</a></div><div class="ttdeci">static DummyVehicle vehicle</div><div class="ttdef"><b>Definition</b> <a href="AHRS__Test_8cpp_source.html#l00050">AHRS_Test.cpp:50</a></div></div>
<div class="ttc" id="aAP__ADC__ADS1115_8cpp_html_a4cabfd12f7acea54d1d16436e9de5dc8"><div class="ttname"><a href="AP__ADC__ADS1115_8cpp.html#a4cabfd12f7acea54d1d16436e9de5dc8">debug</a></div><div class="ttdeci">#define debug(fmt, args ...)</div><div class="ttdef"><b>Definition</b> <a href="AP__ADC__ADS1115_8cpp_source.html#l00090">AP_ADC_ADS1115.cpp:90</a></div></div>
<div class="ttc" id="aAP__Common_8h_html_a121caf32c5b5d704ef3453f0885a9ea5"><div class="ttname"><a href="AP__Common_8h.html#a121caf32c5b5d704ef3453f0885a9ea5">ARRAY_SIZE</a></div><div class="ttdeci">#define ARRAY_SIZE(_arr)</div><div class="ttdef"><b>Definition</b> <a href="AP__Common_8h_source.html#l00099">AP_Common.h:99</a></div></div>
<div class="ttc" id="aAP__HAL_8h_html"><div class="ttname"><a href="AP__HAL_8h.html">AP_HAL.h</a></div></div>
<div class="ttc" id="aAP__InertialSensor_8h_html"><div class="ttname"><a href="AP__InertialSensor_8h.html">AP_InertialSensor.h</a></div></div>
<div class="ttc" id="aAP__InternalError_8h_html"><div class="ttname"><a href="AP__InternalError_8h.html">AP_InternalError.h</a></div></div>
<div class="ttc" id="aAP__InternalError_8h_html_a6a214896237158d1318e3368b4b10dfb"><div class="ttname"><a href="AP__InternalError_8h.html#a6a214896237158d1318e3368b4b10dfb">INTERNAL_ERROR</a></div><div class="ttdeci">#define INTERNAL_ERROR(error_number)</div><div class="ttdef"><b>Definition</b> <a href="AP__InternalError_8h_source.html#l00118">AP_InternalError.h:118</a></div></div>
<div class="ttc" id="aAP__Logger_2LogStructure_8h_html_abca6b52da10346c72b10dd04698e4420"><div class="ttname"><a href="AP__Logger_2LogStructure_8h.html#abca6b52da10346c72b10dd04698e4420">LOG_PACKET_HEADER_INIT</a></div><div class="ttdeci">#define LOG_PACKET_HEADER_INIT(id)</div><div class="ttdef"><b>Definition</b> <a href="AP__Logger_2LogStructure_8h_source.html#l00116">LogStructure.h:116</a></div></div>
<div class="ttc" id="aAP__Logger_2LogStructure_8h_html_aec1abc8a4fd0e25bbcf703a19b991a05a5c30960f9c243575ee6953a9894c428d"><div class="ttname"><a href="AP__Logger_2LogStructure_8h.html#aec1abc8a4fd0e25bbcf703a19b991a05a5c30960f9c243575ee6953a9894c428d">LOG_PERFORMANCE_MSG</a></div><div class="ttdeci">@ LOG_PERFORMANCE_MSG</div><div class="ttdef"><b>Definition</b> <a href="AP__Logger_2LogStructure_8h_source.html#l01370">LogStructure.h:1370</a></div></div>
<div class="ttc" id="aAP__Logger_8h_html"><div class="ttname"><a href="AP__Logger_8h.html">AP_Logger.h</a></div></div>
<div class="ttc" id="aAP__Math_8cpp_html_a59a7349384e672129d419fbd6aba2d61"><div class="ttname"><a href="AP__Math_8cpp.html#a59a7349384e672129d419fbd6aba2d61">fill_nanf</a></div><div class="ttdeci">void fill_nanf(float *f, uint16_t count)</div><div class="ttdef"><b>Definition</b> <a href="AP__Math_8cpp_source.html#l00424">AP_Math.cpp:424</a></div></div>
<div class="ttc" id="aAP__Math_8h_html_a2a12cce483e9b870da70d30406d82c60"><div class="ttname"><a href="AP__Math_8h.html#a2a12cce483e9b870da70d30406d82c60">is_zero</a></div><div class="ttdeci">bool is_zero(const T fVal1)</div><div class="ttdef"><b>Definition</b> <a href="AP__Math_8h_source.html#l00053">AP_Math.h:53</a></div></div>
<div class="ttc" id="aAP__Math_8h_html_a5256308fd38a7098b8f95607aa56888f"><div class="ttname"><a href="AP__Math_8h.html#a5256308fd38a7098b8f95607aa56888f">constrain_float</a></div><div class="ttdeci">#define constrain_float(amt, low, high)</div><div class="ttdef"><b>Definition</b> <a href="AP__Math_8h_source.html#l00174">AP_Math.h:174</a></div></div>
<div class="ttc" id="aAP__Param_8h_html"><div class="ttname"><a href="AP__Param_8h.html">AP_Param.h</a></div><div class="ttdoc">A system for managing and storing variables that are of general interest to the system.</div></div>
<div class="ttc" id="aAP__Param_8h_html_a0f9acb038a5283b964b862aea8cc5051"><div class="ttname"><a href="AP__Param_8h.html#a0f9acb038a5283b964b862aea8cc5051">AP_GROUPEND</a></div><div class="ttdeci">#define AP_GROUPEND</div><div class="ttdef"><b>Definition</b> <a href="AP__Param_8h_source.html#l00163">AP_Param.h:163</a></div></div>
<div class="ttc" id="aAP__Param_8h_html_a78a408c84f2a1bafde256ac650142e4d"><div class="ttname"><a href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a></div><div class="ttdeci">#define AP_GROUPINFO(name, idx, clazz, element, def)</div><div class="ttdef"><b>Definition</b> <a href="AP__Param_8h_source.html#l00145">AP_Param.h:145</a></div></div>
<div class="ttc" id="aAP__Scheduler_8cpp_html_a8bed03ebb2c9cf4622eff2c8eadf8e84"><div class="ttname"><a href="AP__Scheduler_8cpp.html#a8bed03ebb2c9cf4622eff2c8eadf8e84">SCHEDULER_DEFAULT_LOOP_RATE</a></div><div class="ttdeci">#define SCHEDULER_DEFAULT_LOOP_RATE</div><div class="ttdef"><b>Definition</b> <a href="#l00044">AP_Scheduler.cpp:44</a></div></div>
<div class="ttc" id="aAP__Scheduler_8cpp_html_aaa9eb2ef7d1450ef565519e02177bd96"><div class="ttname"><a href="AP__Scheduler_8cpp.html#aaa9eb2ef7d1450ef565519e02177bd96">fill_nanf_stack</a></div><div class="ttdeci">static void fill_nanf_stack(void)</div><div class="ttdef"><b>Definition</b> <a href="#l00171">AP_Scheduler.cpp:171</a></div></div>
<div class="ttc" id="aAP__Scheduler_8cpp_html_ae08c3ca4ba26b63cda0bb3e3c6c02785"><div class="ttname"><a href="AP__Scheduler_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a></div><div class="ttdeci">const AP_HAL::HAL &amp; hal</div><div class="ttdef"><b>Definition</b> <a href="AC__PID__test_8cpp_source.html#l00021">AC_PID_test.cpp:21</a></div></div>
<div class="ttc" id="aAP__Scheduler_8h_html"><div class="ttname"><a href="AP__Scheduler_8h.html">AP_Scheduler.h</a></div></div>
<div class="ttc" id="aAP__Scheduler__config_8h_html"><div class="ttname"><a href="AP__Scheduler__config_8h.html">AP_Scheduler_config.h</a></div></div>
<div class="ttc" id="aAP__Vehicle_8h_html"><div class="ttname"><a href="AP__Vehicle_8h.html">AP_Vehicle.h</a></div></div>
<div class="ttc" id="aAP__Vehicle__Type_8h_html"><div class="ttname"><a href="AP__Vehicle__Type_8h.html">AP_Vehicle_Type.h</a></div></div>
<div class="ttc" id="aBARO__generic_8cpp_html_a83c33c2542db9ae7ca46bf548b52de7a"><div class="ttname"><a href="BARO__generic_8cpp.html#a83c33c2542db9ae7ca46bf548b52de7a">sitl</a></div><div class="ttdeci">SITL::SIM sitl</div><div class="ttdef"><b>Definition</b> <a href="BARO__generic_8cpp_source.html#l00041">BARO_generic.cpp:41</a></div></div>
<div class="ttc" id="aExpandingString_8h_html"><div class="ttname"><a href="ExpandingString_8h.html">ExpandingString.h</a></div></div>
<div class="ttc" id="aPrintf_8cpp_html_a48d9522e58fa05906c6dba23e5745a72"><div class="ttname"><a href="Printf_8cpp.html#a48d9522e58fa05906c6dba23e5745a72">v</a></div><div class="ttdeci">float v</div><div class="ttdef"><b>Definition</b> <a href="Printf_8cpp_source.html#l00036">Printf.cpp:36</a></div></div>
<div class="ttc" id="aReplayGyroFFT_8cpp_html_ad26e894ebbcedea19175de5c7bf544c0"><div class="ttname"><a href="ReplayGyroFFT_8cpp.html#ad26e894ebbcedea19175de5c7bf544c0">scheduler</a></div><div class="ttdeci">static AP_Scheduler scheduler</div><div class="ttdef"><b>Definition</b> <a href="ReplayGyroFFT_8cpp_source.html#l00037">ReplayGyroFFT.cpp:37</a></div></div>
<div class="ttc" id="aSIMState_8h_html"><div class="ttname"><a href="SIMState_8h.html">SIMState.h</a></div></div>
<div class="ttc" id="aSITL_8h_html"><div class="ttname"><a href="SITL_8h.html">SITL.h</a></div></div>
<div class="ttc" id="aardupilot__SITL__QUAD_8c_html_a13a43e6d814de94978c515cb084873b1"><div class="ttname"><a href="ardupilot__SITL__QUAD_8c.html#a13a43e6d814de94978c515cb084873b1">run</a></div><div class="ttdeci">void run()</div><div class="ttdef"><b>Definition</b> <a href="ardupilot__SITL__QUAD_8c_source.html#l00239">ardupilot_SITL_QUAD.c:239</a></div></div>
<div class="ttc" id="aclassAP_1_1PerfInfo_html_a21f446c94c89c87a6d5d670068546973"><div class="ttname"><a href="classAP_1_1PerfInfo.html#a21f446c94c89c87a6d5d670068546973">AP::PerfInfo::task_slipped</a></div><div class="ttdeci">void task_slipped(uint8_t task_index)</div><div class="ttdef"><b>Definition</b> <a href="PerfInfo_8h_source.html#l00055">PerfInfo.h:55</a></div></div>
<div class="ttc" id="aclassAP_1_1PerfInfo_html_a402f1184e9a68f1fdfb62e4e5dab8f43"><div class="ttname"><a href="classAP_1_1PerfInfo.html#a402f1184e9a68f1fdfb62e4e5dab8f43">AP::PerfInfo::has_task_info</a></div><div class="ttdeci">bool has_task_info()</div><div class="ttdef"><b>Definition</b> <a href="PerfInfo_8h_source.html#l00047">PerfInfo.h:47</a></div></div>
<div class="ttc" id="aclassAP_1_1PerfInfo_html_a427d86ad9b709fcec98bc21fbc06da30"><div class="ttname"><a href="classAP_1_1PerfInfo.html#a427d86ad9b709fcec98bc21fbc06da30">AP::PerfInfo::reset</a></div><div class="ttdeci">void reset()</div><div class="ttdef"><b>Definition</b> <a href="PerfInfo_8cpp_source.html#l00017">PerfInfo.cpp:17</a></div></div>
<div class="ttc" id="aclassAP_1_1PerfInfo_html_a629b5da9510f930dda772361776c05b4"><div class="ttname"><a href="classAP_1_1PerfInfo.html#a629b5da9510f930dda772361776c05b4">AP::PerfInfo::set_loop_rate</a></div><div class="ttdeci">void set_loop_rate(uint16_t rate_hz)</div><div class="ttdef"><b>Definition</b> <a href="PerfInfo_8cpp_source.html#l00210">PerfInfo.cpp:210</a></div></div>
<div class="ttc" id="aclassAP_1_1PerfInfo_html_a65697c1721668743bfbf3d79d77f6df9"><div class="ttname"><a href="classAP_1_1PerfInfo.html#a65697c1721668743bfbf3d79d77f6df9">AP::PerfInfo::allocate_task_info</a></div><div class="ttdeci">void allocate_task_info(uint8_t num_tasks)</div><div class="ttdef"><b>Definition</b> <a href="PerfInfo_8cpp_source.html#l00037">PerfInfo.cpp:37</a></div></div>
<div class="ttc" id="aclassAP_1_1PerfInfo_html_a800eed07b994dcd081eb9b84b0ad50fd"><div class="ttname"><a href="classAP_1_1PerfInfo.html#a800eed07b994dcd081eb9b84b0ad50fd">AP::PerfInfo::check_loop_time</a></div><div class="ttdeci">void check_loop_time(uint32_t time_in_micros)</div><div class="ttdef"><b>Definition</b> <a href="PerfInfo_8cpp_source.html#l00104">PerfInfo.cpp:104</a></div></div>
<div class="ttc" id="aclassAP_1_1PerfInfo_html_acead87e89038909782e761605f487c83"><div class="ttname"><a href="classAP_1_1PerfInfo.html#acead87e89038909782e761605f487c83">AP::PerfInfo::get_task_info</a></div><div class="ttdeci">const TaskInfo * get_task_info(uint8_t task_index) const</div><div class="ttdef"><b>Definition</b> <a href="PerfInfo_8h_source.html#l00049">PerfInfo.h:49</a></div></div>
<div class="ttc" id="aclassAP_1_1PerfInfo_html_ad8d3459ec535e8224b0b200737ef6682"><div class="ttname"><a href="classAP_1_1PerfInfo.html#ad8d3459ec535e8224b0b200737ef6682">AP::PerfInfo::free_task_info</a></div><div class="ttdeci">void free_task_info()</div><div class="ttdef"><b>Definition</b> <a href="PerfInfo_8cpp_source.html#l00048">PerfInfo.cpp:48</a></div></div>
<div class="ttc" id="aclassAP_1_1PerfInfo_html_adf6defe46f01eb1839df1bd658ebdf0a"><div class="ttname"><a href="classAP_1_1PerfInfo.html#adf6defe46f01eb1839df1bd658ebdf0a">AP::PerfInfo::update_task_info</a></div><div class="ttdeci">void update_task_info(uint8_t task_index, uint16_t task_time_us, bool overrun)</div><div class="ttdef"><b>Definition</b> <a href="PerfInfo_8cpp_source.html#l00056">PerfInfo.cpp:56</a></div></div>
<div class="ttc" id="aclassAP_1_1PerfInfo_html_aeba093b964712dccec8e0ac5df3c5ded"><div class="ttname"><a href="classAP_1_1PerfInfo.html#aeba093b964712dccec8e0ac5df3c5ded">AP::PerfInfo::update_logging</a></div><div class="ttdeci">void update_logging() const</div><div class="ttdef"><b>Definition</b> <a href="PerfInfo_8cpp_source.html#l00197">PerfInfo.cpp:197</a></div></div>
<div class="ttc" id="aclassAP__HAL_1_1HAL_html"><div class="ttname"><a href="classAP__HAL_1_1HAL.html">AP_HAL::HAL</a></div><div class="ttdef"><b>Definition</b> <a href="HAL_8h_source.html#l00021">HAL.h:21</a></div></div>
<div class="ttc" id="aclassAP__HAL_1_1HAL_html_a9337a60383f4264fa96a20dbe43a4e2e"><div class="ttname"><a href="classAP__HAL_1_1HAL.html#a9337a60383f4264fa96a20dbe43a4e2e">AP_HAL::HAL::util</a></div><div class="ttdeci">AP_HAL::Util * util</div><div class="ttdef"><b>Definition</b> <a href="HAL_8h_source.html#l00131">HAL.h:131</a></div></div>
<div class="ttc" id="aclassAP__HAL_1_1HAL_html_a94ab41309b1ff10b8b862b826e59c882"><div class="ttname"><a href="classAP__HAL_1_1HAL.html#a94ab41309b1ff10b8b862b826e59c882">AP_HAL::HAL::scheduler</a></div><div class="ttdeci">AP_HAL::Scheduler * scheduler</div><div class="ttdef"><b>Definition</b> <a href="HAL_8h_source.html#l00130">HAL.h:130</a></div></div>
<div class="ttc" id="aclassAP__HAL_1_1Scheduler_html_a78c4f1b1f192ac1c99544b6cc8f099b0"><div class="ttname"><a href="classAP__HAL_1_1Scheduler.html#a78c4f1b1f192ac1c99544b6cc8f099b0">AP_HAL::Scheduler::delay_microseconds</a></div><div class="ttdeci">virtual void delay_microseconds(uint16_t us)=0</div></div>
<div class="ttc" id="aclassAP__HAL_1_1Util_html_a64273fdab59825cea305a403054c25bf"><div class="ttname"><a href="classAP__HAL_1_1Util.html#a64273fdab59825cea305a403054c25bf">AP_HAL::Util::persistent_data</a></div><div class="ttdeci">struct PersistentData persistent_data</div><div class="ttdef"><b>Definition</b> <a href="AP__HAL_2Util_8h_source.html#l00088">Util.h:88</a></div></div>
<div class="ttc" id="aclassAP__InertialSensor_html_a95ef73a5bd80238c036d9b29cfc694ce"><div class="ttname"><a href="classAP__InertialSensor.html#a95ef73a5bd80238c036d9b29cfc694ce">AP_InertialSensor::wait_for_sample</a></div><div class="ttdeci">void wait_for_sample(void) __RAMFUNC__</div><div class="ttdef"><b>Definition</b> <a href="AP__InertialSensor_8cpp_source.html#l01974">AP_InertialSensor.cpp:1974</a></div></div>
<div class="ttc" id="aclassAP__InternalError_html_a5173d851f3973e9a341e08ceb9451c11a125554e4c6e51cfd513a60efb7eb3c78"><div class="ttname"><a href="classAP__InternalError.html#a5173d851f3973e9a341e08ceb9451c11a125554e4c6e51cfd513a60efb7eb3c78">AP_InternalError::error_t::flow_of_control</a></div><div class="ttdeci">@ flow_of_control</div></div>
<div class="ttc" id="aclassAP__Logger_html_a32f5822b72789c7c83402b2af7544d09"><div class="ttname"><a href="classAP__Logger.html#a32f5822b72789c7c83402b2af7544d09">AP_Logger::WriteCriticalBlock</a></div><div class="ttdeci">void WriteCriticalBlock(const void *pBuffer, uint16_t size)</div><div class="ttdef"><b>Definition</b> <a href="AP__Logger_8cpp_source.html#l00779">AP_Logger.cpp:779</a></div></div>
<div class="ttc" id="aclassAP__Param_html_a5f6dcfce1c0a79cf5bd81283e22f3201"><div class="ttname"><a href="classAP__Param.html#a5f6dcfce1c0a79cf5bd81283e22f3201">AP_Param::setup_object_defaults</a></div><div class="ttdeci">static void setup_object_defaults(const void *object_pointer, const struct GroupInfo *group_info)</div><div class="ttdef"><b>Definition</b> <a href="main_8cpp_source.html#l00010">main.cpp:10</a></div></div>
<div class="ttc" id="aclassAP__Scheduler_html"><div class="ttname"><a href="classAP__Scheduler.html">AP_Scheduler</a></div><div class="ttdef"><b>Definition</b> <a href="AP__Scheduler_8h_source.html#l00072">AP_Scheduler.h:73</a></div></div>
<div class="ttc" id="aclassAP__Scheduler_html_a0453a692bad08260da3b146ebc3ddafa"><div class="ttname"><a href="classAP__Scheduler.html#a0453a692bad08260da3b146ebc3ddafa">AP_Scheduler::_loop_timer_start_us</a></div><div class="ttdeci">uint32_t _loop_timer_start_us</div><div class="ttdef"><b>Definition</b> <a href="AP__Scheduler_8h_source.html#l00242">AP_Scheduler.h:242</a></div></div>
<div class="ttc" id="aclassAP__Scheduler_html_a0826068d9555266bdda5efd19c4b891a"><div class="ttname"><a href="classAP__Scheduler.html#a0826068d9555266bdda5efd19c4b891a">AP_Scheduler::get_singleton</a></div><div class="ttdeci">static AP_Scheduler * get_singleton()</div><div class="ttdef"><b>Definition</b> <a href="#l00095">AP_Scheduler.cpp:95</a></div></div>
<div class="ttc" id="aclassAP__Scheduler_html_a11af440621ec3b6c96adf437da611a1b"><div class="ttname"><a href="classAP__Scheduler.html#a11af440621ec3b6c96adf437da611a1b">AP_Scheduler::_tick_counter32</a></div><div class="ttdeci">uint32_t _tick_counter32</div><div class="ttdef"><b>Definition</b> <a href="AP__Scheduler_8h_source.html#l00224">AP_Scheduler.h:224</a></div></div>
<div class="ttc" id="aclassAP__Scheduler_html_a141789568619b15a4f5b536f819a95a3"><div class="ttname"><a href="classAP__Scheduler.html#a141789568619b15a4f5b536f819a95a3">AP_Scheduler::_task_time_started</a></div><div class="ttdeci">uint32_t _task_time_started</div><div class="ttdef"><b>Definition</b> <a href="AP__Scheduler_8h_source.html#l00233">AP_Scheduler.h:233</a></div></div>
<div class="ttc" id="aclassAP__Scheduler_html_a16d85af56e1c52ebe422743580f3a90d"><div class="ttname"><a href="classAP__Scheduler.html#a16d85af56e1c52ebe422743580f3a90d">AP_Scheduler::run</a></div><div class="ttdeci">void run(uint32_t time_available)</div><div class="ttdef"><b>Definition</b> <a href="#l00182">AP_Scheduler.cpp:182</a></div></div>
<div class="ttc" id="aclassAP__Scheduler_html_a17856eb311134db5b97fa62ca2f8d2f9"><div class="ttname"><a href="classAP__Scheduler.html#a17856eb311134db5b97fa62ca2f8d2f9">AP_Scheduler::var_info</a></div><div class="ttdeci">static const struct AP_Param::GroupInfo var_info[]</div><div class="ttdef"><b>Definition</b> <a href="AP__Scheduler_8h_source.html#l00051">AP_Scheduler.h:51</a></div></div>
<div class="ttc" id="aclassAP__Scheduler_html_a17f083411d635ce665affa393fb4f260"><div class="ttname"><a href="classAP__Scheduler.html#a17f083411d635ce665affa393fb4f260">AP_Scheduler::task_info</a></div><div class="ttdeci">void task_info(ExpandingString &amp;str)</div><div class="ttdef"><b>Definition</b> <a href="#l00469">AP_Scheduler.cpp:469</a></div></div>
<div class="ttc" id="aclassAP__Scheduler_html_a1f854d440dcfe5f3ce204c9f2c1db705"><div class="ttname"><a href="classAP__Scheduler.html#a1f854d440dcfe5f3ce204c9f2c1db705">AP_Scheduler::task_all_achieved</a></div><div class="ttdeci">uint32_t task_all_achieved</div><div class="ttdef"><b>Definition</b> <a href="AP__Scheduler_8h_source.html#l00257">AP_Scheduler.h:257</a></div></div>
<div class="ttc" id="aclassAP__Scheduler_html_a207443baf42f08d1bd89920deb77eb21"><div class="ttname"><a href="classAP__Scheduler.html#a207443baf42f08d1bd89920deb77eb21">AP_Scheduler::AP_Scheduler</a></div><div class="ttdeci">AP_Scheduler()</div><div class="ttdef"><b>Definition</b> <a href="#l00078">AP_Scheduler.cpp:78</a></div></div>
<div class="ttc" id="aclassAP__Scheduler_html_a4184acf485aae16d69c41ed20bd7a435"><div class="ttname"><a href="classAP__Scheduler.html#a4184acf485aae16d69c41ed20bd7a435">AP_Scheduler::_num_vehicle_tasks</a></div><div class="ttdeci">uint8_t _num_vehicle_tasks</div><div class="ttdef"><b>Definition</b> <a href="AP__Scheduler_8h_source.html#l00212">AP_Scheduler.h:212</a></div></div>
<div class="ttc" id="aclassAP__Scheduler_html_a45aede5542f1b5848f82d107d886ad6d"><div class="ttname"><a href="classAP__Scheduler.html#a45aede5542f1b5848f82d107d886ad6d">AP_Scheduler::task_not_achieved</a></div><div class="ttdeci">uint32_t task_not_achieved</div><div class="ttdef"><b>Definition</b> <a href="AP__Scheduler_8h_source.html#l00256">AP_Scheduler.h:256</a></div></div>
<div class="ttc" id="aclassAP__Scheduler_html_a463067370e88bd3c15d98b6e61abde41"><div class="ttname"><a href="classAP__Scheduler.html#a463067370e88bd3c15d98b6e61abde41">AP_Scheduler::update_logging</a></div><div class="ttdeci">void update_logging()</div></div>
<div class="ttc" id="aclassAP__Scheduler_html_a4957730dea5a740ecb0aaa5f23f12895"><div class="ttname"><a href="classAP__Scheduler.html#a4957730dea5a740ecb0aaa5f23f12895">AP_Scheduler::_common_tasks</a></div><div class="ttdeci">const struct Task * _common_tasks</div><div class="ttdef"><b>Definition</b> <a href="AP__Scheduler_8h_source.html#l00215">AP_Scheduler.h:215</a></div></div>
<div class="ttc" id="aclassAP__Scheduler_html_a4ec06632df7f98446d76f5090ca8d43b"><div class="ttname"><a href="classAP__Scheduler.html#a4ec06632df7f98446d76f5090ca8d43b">AP_Scheduler::perf_info</a></div><div class="ttdeci">AP::PerfInfo perf_info</div><div class="ttdef"><b>Definition</b> <a href="AP__Scheduler_8h_source.html#l00189">AP_Scheduler.h:189</a></div></div>
<div class="ttc" id="aclassAP__Scheduler_html_a557a774600d808afd5dd15b2791aa88e"><div class="ttname"><a href="classAP__Scheduler.html#a557a774600d808afd5dd15b2791aa88e">AP_Scheduler::_num_tasks</a></div><div class="ttdeci">uint8_t _num_tasks</div><div class="ttdef"><b>Definition</b> <a href="AP__Scheduler_8h_source.html#l00219">AP_Scheduler.h:219</a></div></div>
<div class="ttc" id="aclassAP__Scheduler_html_a56e047bfc9e01f382c8c09de17cc85a0"><div class="ttname"><a href="classAP__Scheduler.html#a56e047bfc9e01f382c8c09de17cc85a0">AP_Scheduler::extra_loop_us</a></div><div class="ttdeci">uint32_t extra_loop_us</div><div class="ttdef"><b>Definition</b> <a href="AP__Scheduler_8h_source.html#l00261">AP_Scheduler.h:261</a></div></div>
<div class="ttc" id="aclassAP__Scheduler_html_a5de68a6345f4b9ce9eb4008ee4a6c161"><div class="ttname"><a href="classAP__Scheduler.html#a5de68a6345f4b9ce9eb4008ee4a6c161">AP_Scheduler::get_loop_rate_hz</a></div><div class="ttdeci">uint16_t get_loop_rate_hz(void)</div><div class="ttdef"><b>Definition</b> <a href="AP__Scheduler_8h_source.html#l00141">AP_Scheduler.h:141</a></div></div>
<div class="ttc" id="aclassAP__Scheduler_html_a602e25048ddab792f4654d17d38e1dd0"><div class="ttname"><a href="classAP__Scheduler.html#a602e25048ddab792f4654d17d38e1dd0">AP_Scheduler::init</a></div><div class="ttdeci">void init(const Task *tasks, uint8_t num_tasks, uint32_t log_performance_bit)</div><div class="ttdef"><b>Definition</b> <a href="#l00101">AP_Scheduler.cpp:101</a></div></div>
<div class="ttc" id="aclassAP__Scheduler_html_a6b26e7c51345c849165f4d2914b664f1"><div class="ttname"><a href="classAP__Scheduler.html#a6b26e7c51345c849165f4d2914b664f1">AP_Scheduler::_spare_micros</a></div><div class="ttdeci">uint32_t _spare_micros</div><div class="ttdef"><b>Definition</b> <a href="AP__Scheduler_8h_source.html#l00236">AP_Scheduler.h:236</a></div></div>
<div class="ttc" id="aclassAP__Scheduler_html_a6ea2df59d699e91c31e1688ded595f1c"><div class="ttname"><a href="classAP__Scheduler.html#a6ea2df59d699e91c31e1688ded595f1c">AP_Scheduler::get_loop_period_us</a></div><div class="ttdeci">uint32_t get_loop_period_us()</div><div class="ttdef"><b>Definition</b> <a href="AP__Scheduler_8h_source.html#l00148">AP_Scheduler.h:148</a></div></div>
<div class="ttc" id="aclassAP__Scheduler_html_a755c219d23048f50b580fd0491a36d7f"><div class="ttname"><a href="classAP__Scheduler.html#a755c219d23048f50b580fd0491a36d7f">AP_Scheduler::debug_flags</a></div><div class="ttdeci">uint8_t debug_flags(void)</div><div class="ttdef"><b>Definition</b> <a href="AP__Scheduler_8h_source.html#l00133">AP_Scheduler.h:133</a></div></div>
<div class="ttc" id="aclassAP__Scheduler_html_a82db30c491d6a4eb2a2c34750d7a1de5"><div class="ttname"><a href="classAP__Scheduler.html#a82db30c491d6a4eb2a2c34750d7a1de5">AP_Scheduler::get_loop_period_s</a></div><div class="ttdeci">float get_loop_period_s()</div><div class="ttdef"><b>Definition</b> <a href="AP__Scheduler_8h_source.html#l00155">AP_Scheduler.h:155</a></div></div>
<div class="ttc" id="aclassAP__Scheduler_html_a8a6f9248d207fe32900fb8d6bcdfabe9"><div class="ttname"><a href="classAP__Scheduler.html#a8a6f9248d207fe32900fb8d6bcdfabe9">AP_Scheduler::_log_performance_bit</a></div><div class="ttdeci">uint32_t _log_performance_bit</div><div class="ttdef"><b>Definition</b> <a href="AP__Scheduler_8h_source.html#l00248">AP_Scheduler.h:248</a></div></div>
<div class="ttc" id="aclassAP__Scheduler_html_a8cd776c70ab72e6ac3a20b7bcb7a5deda45271be83f8ba477588acce243607b52"><div class="ttname"><a href="classAP__Scheduler.html#a8cd776c70ab72e6ac3a20b7bcb7a5deda45271be83f8ba477588acce243607b52">AP_Scheduler::MAX_FAST_TASK_PRIORITIES</a></div><div class="ttdeci">@ MAX_FAST_TASK_PRIORITIES</div><div class="ttdef"><b>Definition</b> <a href="AP__Scheduler_8h_source.html#l00102">AP_Scheduler.h:101</a></div></div>
<div class="ttc" id="aclassAP__Scheduler_html_a8d5eeba086253d166ac8f195f39868b6"><div class="ttname"><a href="classAP__Scheduler.html#a8d5eeba086253d166ac8f195f39868b6">AP_Scheduler::loop</a></div><div class="ttdeci">void loop()</div><div class="ttdef"><b>Definition</b> <a href="#l00339">AP_Scheduler.cpp:339</a></div></div>
<div class="ttc" id="aclassAP__Scheduler_html_a8eb60ca73919e571955357f67b23f0ac"><div class="ttname"><a href="classAP__Scheduler.html#a8eb60ca73919e571955357f67b23f0ac">AP_Scheduler::_vehicle_tasks</a></div><div class="ttdeci">const struct Task * _vehicle_tasks</div><div class="ttdef"><b>Definition</b> <a href="AP__Scheduler_8h_source.html#l00211">AP_Scheduler.h:211</a></div></div>
<div class="ttc" id="aclassAP__Scheduler_html_a9214183e4771dcc7546e0eb91c814150"><div class="ttname"><a href="classAP__Scheduler.html#a9214183e4771dcc7546e0eb91c814150">AP_Scheduler::_last_loop_time_s</a></div><div class="ttdeci">float _last_loop_time_s</div><div class="ttdef"><b>Definition</b> <a href="AP__Scheduler_8h_source.html#l00245">AP_Scheduler.h:245</a></div></div>
<div class="ttc" id="aclassAP__Scheduler_html_a9530e68990d0341d3ae5ffca749a3fdb"><div class="ttname"><a href="classAP__Scheduler.html#a9530e68990d0341d3ae5ffca749a3fdb">AP_Scheduler::max_task_slowdown</a></div><div class="ttdeci">const uint8_t max_task_slowdown</div><div class="ttdef"><b>Definition</b> <a href="AP__Scheduler_8h_source.html#l00252">AP_Scheduler.h:252</a></div></div>
<div class="ttc" id="aclassAP__Scheduler_html_a9ff367c44335c482c4138da2e78fab27a5ec936ab5de8eda22b64642f1b5813ce"><div class="ttname"><a href="classAP__Scheduler.html#a9ff367c44335c482c4138da2e78fab27a5ec936ab5de8eda22b64642f1b5813ce">AP_Scheduler::Options::RECORD_TASK_INFO</a></div><div class="ttdeci">@ RECORD_TASK_INFO</div></div>
<div class="ttc" id="aclassAP__Scheduler_html_aa01fa1d1430811f5301590d3c31f2184"><div class="ttname"><a href="classAP__Scheduler.html#aa01fa1d1430811f5301590d3c31f2184">AP_Scheduler::time_available_usec</a></div><div class="ttdeci">uint16_t time_available_usec(void) const</div><div class="ttdef"><b>Definition</b> <a href="#l00313">AP_Scheduler.cpp:313</a></div></div>
<div class="ttc" id="aclassAP__Scheduler_html_aa208b64f15deebbd5e72fe25b2a55f24"><div class="ttname"><a href="classAP__Scheduler.html#aa208b64f15deebbd5e72fe25b2a55f24">AP_Scheduler::_spare_ticks</a></div><div class="ttdeci">uint8_t _spare_ticks</div><div class="ttdef"><b>Definition</b> <a href="AP__Scheduler_8h_source.html#l00239">AP_Scheduler.h:239</a></div></div>
<div class="ttc" id="aclassAP__Scheduler_html_aa4acb0c2d9d1da3af6e8491365e2f29a"><div class="ttname"><a href="classAP__Scheduler.html#aa4acb0c2d9d1da3af6e8491365e2f29a">AP_Scheduler::tick</a></div><div class="ttdeci">void tick(void)</div><div class="ttdef"><b>Definition</b> <a href="#l00160">AP_Scheduler.cpp:160</a></div></div>
<div class="ttc" id="aclassAP__Scheduler_html_ab5ad36aaa0e937f3a3b2ef1a5e45d749"><div class="ttname"><a href="classAP__Scheduler.html#ab5ad36aaa0e937f3a3b2ef1a5e45d749">AP_Scheduler::Log_Write_Performance</a></div><div class="ttdeci">void Log_Write_Performance()</div></div>
<div class="ttc" id="aclassAP__Scheduler_html_abda29cac2f54d56ff8bf7791a6667a9c"><div class="ttname"><a href="classAP__Scheduler.html#abda29cac2f54d56ff8bf7791a6667a9c">AP_Scheduler::load_average</a></div><div class="ttdeci">float load_average()</div><div class="ttdef"><b>Definition</b> <a href="#l00325">AP_Scheduler.cpp:325</a></div></div>
<div class="ttc" id="aclassAP__Scheduler_html_ac20e0a677da03d415b99d0413ce631ae"><div class="ttname"><a href="classAP__Scheduler.html#ac20e0a677da03d415b99d0413ce631ae">AP_Scheduler::_task_time_allowed</a></div><div class="ttdeci">uint32_t _task_time_allowed</div><div class="ttdef"><b>Definition</b> <a href="AP__Scheduler_8h_source.html#l00230">AP_Scheduler.h:230</a></div></div>
<div class="ttc" id="aclassAP__Scheduler_html_ac997ff75649d6f705ce8798a02bc7ad1"><div class="ttname"><a href="classAP__Scheduler.html#ac997ff75649d6f705ce8798a02bc7ad1">AP_Scheduler::_loop_rate_hz</a></div><div class="ttdeci">AP_Int16 _loop_rate_hz</div><div class="ttdef"><b>Definition</b> <a href="AP__Scheduler_8h_source.html#l00196">AP_Scheduler.h:196</a></div></div>
<div class="ttc" id="aclassAP__Scheduler_html_acb1a139e45dbe0c449e6f389cb0a5633"><div class="ttname"><a href="classAP__Scheduler.html#acb1a139e45dbe0c449e6f389cb0a5633">AP_Scheduler::_tick_counter</a></div><div class="ttdeci">uint16_t _tick_counter</div><div class="ttdef"><b>Definition</b> <a href="AP__Scheduler_8h_source.html#l00223">AP_Scheduler.h:223</a></div></div>
<div class="ttc" id="aclassAP__Scheduler_html_ace501e826e716bc8501fa27403fc1e4c"><div class="ttname"><a href="classAP__Scheduler.html#ace501e826e716bc8501fa27403fc1e4c">AP_Scheduler::_rsem</a></div><div class="ttdeci">HAL_Semaphore _rsem</div><div class="ttdef"><b>Definition</b> <a href="AP__Scheduler_8h_source.html#l00265">AP_Scheduler.h:265</a></div></div>
<div class="ttc" id="aclassAP__Scheduler_html_ad2c5d0cd7fd4e472a47a9b7112d3bcf6"><div class="ttname"><a href="classAP__Scheduler.html#ad2c5d0cd7fd4e472a47a9b7112d3bcf6">AP_Scheduler::_singleton</a></div><div class="ttdeci">static AP_Scheduler * _singleton</div><div class="ttdef"><b>Definition</b> <a href="AP__Scheduler_8h_source.html#l00081">AP_Scheduler.h:81</a></div></div>
<div class="ttc" id="aclassAP__Scheduler_html_ae43b945ce2fe6b20495df7f344e6d94b"><div class="ttname"><a href="classAP__Scheduler.html#ae43b945ce2fe6b20495df7f344e6d94b">AP_Scheduler::_options</a></div><div class="ttdeci">AP_Int8 _options</div><div class="ttdef"><b>Definition</b> <a href="AP__Scheduler_8h_source.html#l00202">AP_Scheduler.h:202</a></div></div>
<div class="ttc" id="aclassAP__Scheduler_html_aeae6c98cb869b326dfddef9a21796d48"><div class="ttname"><a href="classAP__Scheduler.html#aeae6c98cb869b326dfddef9a21796d48">AP_Scheduler::get_filtered_loop_rate_hz</a></div><div class="ttdeci">float get_filtered_loop_rate_hz()</div><div class="ttdef"><b>Definition</b> <a href="AP__Scheduler_8h_source.html#l00168">AP_Scheduler.h:168</a></div></div>
<div class="ttc" id="aclassAP__Scheduler_html_afa688c91df4d63b45dd1b2167d67b074"><div class="ttname"><a href="classAP__Scheduler.html#afa688c91df4d63b45dd1b2167d67b074">AP_Scheduler::_num_common_tasks</a></div><div class="ttdeci">uint8_t _num_common_tasks</div><div class="ttdef"><b>Definition</b> <a href="AP__Scheduler_8h_source.html#l00216">AP_Scheduler.h:216</a></div></div>
<div class="ttc" id="aclassAP__Scheduler_html_afdcc6b11a2e2ee3392a9ebdf07dffb9f"><div class="ttname"><a href="classAP__Scheduler.html#afdcc6b11a2e2ee3392a9ebdf07dffb9f">AP_Scheduler::_last_run</a></div><div class="ttdeci">uint16_t * _last_run</div><div class="ttdef"><b>Definition</b> <a href="AP__Scheduler_8h_source.html#l00227">AP_Scheduler.h:227</a></div></div>
<div class="ttc" id="aclassAP__Vehicle_html"><div class="ttname"><a href="classAP__Vehicle.html">AP_Vehicle</a></div><div class="ttdef"><b>Definition</b> <a href="AP__Vehicle_8h_source.html#l00085">AP_Vehicle.h:85</a></div></div>
<div class="ttc" id="aclassAP__Vehicle_html_ad0a31dad3f4ba85f21b5ce32e1c536dd"><div class="ttname"><a href="classAP__Vehicle.html#ad0a31dad3f4ba85f21b5ce32e1c536dd">AP_Vehicle::get_common_scheduler_tasks</a></div><div class="ttdeci">void get_common_scheduler_tasks(const AP_Scheduler::Task *&amp;tasks, uint8_t &amp;num_tasks)</div><div class="ttdef"><b>Definition</b> <a href="AP__Vehicle_8cpp_source.html#l00653">AP_Vehicle.cpp:653</a></div></div>
<div class="ttc" id="aclassExpandingString_html"><div class="ttname"><a href="classExpandingString.html">ExpandingString</a></div><div class="ttdef"><b>Definition</b> <a href="ExpandingString_8h_source.html#l00025">ExpandingString.h:25</a></div></div>
<div class="ttc" id="aclassExpandingString_html_ac7dfb3d6f983133060daecc5b6635f44"><div class="ttname"><a href="classExpandingString.html#ac7dfb3d6f983133060daecc5b6635f44">ExpandingString::printf</a></div><div class="ttdeci">void printf(const char *format,...) FMT_PRINTF(2</div><div class="ttdef"><b>Definition</b> <a href="ExpandingString_8cpp_source.html#l00060">ExpandingString.cpp:60</a></div></div>
<div class="ttc" id="alparser_8c_html_a81b42517a626e76f00bbe1bf33d3aeba"><div class="ttname"><a href="lparser_8c.html#a81b42517a626e76f00bbe1bf33d3aeba">priority</a></div><div class="ttdeci">static const struct @195 priority[]</div></div>
<div class="ttc" id="amonocypher_8cpp_html_a3acffbd305ee72dcd4593c0d8af64a4f"><div class="ttname"><a href="monocypher_8cpp.html#a3acffbd305ee72dcd4593c0d8af64a4f">MIN</a></div><div class="ttdeci">#define MIN(a, b)</div><div class="ttdef"><b>Definition</b> <a href="monocypher_8cpp_source.html#l00071">monocypher.cpp:71</a></div></div>
<div class="ttc" id="amonocypher_8cpp_html_afa99ec4acc4ecb2dc3c2d05da15d0e3f"><div class="ttname"><a href="monocypher_8cpp.html#afa99ec4acc4ecb2dc3c2d05da15d0e3f">MAX</a></div><div class="ttdeci">#define MAX(a, b)</div><div class="ttdef"><b>Definition</b> <a href="monocypher_8cpp_source.html#l00072">monocypher.cpp:72</a></div></div>
<div class="ttc" id="anamespaceAP__HAL_html_a52edeef7d5ffaa365e1229b87c170307"><div class="ttname"><a href="namespaceAP__HAL.html#a52edeef7d5ffaa365e1229b87c170307">AP_HAL::panic</a></div><div class="ttdeci">void panic(const char *errormsg,...) FMT_PRINTF(1</div><div class="ttdef"><b>Definition</b> <a href="AP__HAL__ChibiOS_2system_8cpp_source.html#l00327">system.cpp:327</a></div></div>
<div class="ttc" id="anamespaceAP__HAL_html_a7aa0ce7625c9680e30ff4a99940907a5"><div class="ttname"><a href="namespaceAP__HAL.html#a7aa0ce7625c9680e30ff4a99940907a5">AP_HAL::micros64</a></div><div class="ttdeci">uint64_t micros64()</div><div class="ttdef"><b>Definition</b> <a href="AP__HAL__ChibiOS_2system_8cpp_source.html#l00387">system.cpp:387</a></div></div>
<div class="ttc" id="anamespaceAP__HAL_html_a8293355e35887733b1fd151aef08a787"><div class="ttname"><a href="namespaceAP__HAL.html#a8293355e35887733b1fd151aef08a787">AP_HAL::micros</a></div><div class="ttdeci">uint32_t micros()</div><div class="ttdef"><b>Definition</b> <a href="AP__HAL__ChibiOS_2system_8cpp_source.html#l00352">system.cpp:352</a></div></div>
<div class="ttc" id="anamespaceAP_html"><div class="ttname"><a href="namespaceAP.html">AP</a></div><div class="ttdef"><b>Definition</b> <a href="AC__Avoid_8cpp_source.html#l01481">AC_Avoid.cpp:1481</a></div></div>
<div class="ttc" id="anamespaceAP_html_a930025da7cb316754df99a6e26205e98"><div class="ttname"><a href="namespaceAP.html#a930025da7cb316754df99a6e26205e98">AP::vehicle</a></div><div class="ttdeci">AP_Vehicle * vehicle()</div><div class="ttdef"><b>Definition</b> <a href="AP__Vehicle_8cpp_source.html#l01119">AP_Vehicle.cpp:1119</a></div></div>
<div class="ttc" id="anamespaceAP_html_aa35bfac1ea2da16f110e8e72db7b3b20"><div class="ttname"><a href="namespaceAP.html#aa35bfac1ea2da16f110e8e72db7b3b20">AP::logger</a></div><div class="ttdeci">AP_Logger &amp; logger()</div><div class="ttdef"><b>Definition</b> <a href="AP__Logger_8cpp_source.html#l01740">AP_Logger.cpp:1740</a></div></div>
<div class="ttc" id="anamespaceAP_html_ac571aa5a2ef71b7f4b4b2bfa09143fb9"><div class="ttname"><a href="namespaceAP.html#ac571aa5a2ef71b7f4b4b2bfa09143fb9">AP::ins</a></div><div class="ttdeci">AP_InertialSensor &amp; ins()</div><div class="ttdef"><b>Definition</b> <a href="AP__InertialSensor_8cpp_source.html#l02780">AP_InertialSensor.cpp:2780</a></div></div>
<div class="ttc" id="anamespaceAP_html_afceb236ff617aaaa2b08afacd72532b0"><div class="ttname"><a href="namespaceAP.html#afceb236ff617aaaa2b08afacd72532b0">AP::internalerror</a></div><div class="ttdeci">AP_InternalError &amp; internalerror()</div><div class="ttdef"><b>Definition</b> <a href="AP__InternalError_8cpp_source.html#l00113">AP_InternalError.cpp:113</a></div></div>
<div class="ttc" id="astdio_8h_html"><div class="ttname"><a href="stdio_8h.html">stdio.h</a></div></div>
<div class="ttc" id="astructAP_1_1PerfInfo_1_1TaskInfo_html"><div class="ttname"><a href="structAP_1_1PerfInfo_1_1TaskInfo.html">AP::PerfInfo::TaskInfo</a></div><div class="ttdef"><b>Definition</b> <a href="PerfInfo_8h_source.html#l00013">PerfInfo.h:13</a></div></div>
<div class="ttc" id="astructAP_1_1PerfInfo_1_1TaskInfo_html_a37565d11b6b637c20382ab1c86cb8660"><div class="ttname"><a href="structAP_1_1PerfInfo_1_1TaskInfo.html#a37565d11b6b637c20382ab1c86cb8660">AP::PerfInfo::TaskInfo::elapsed_time_us</a></div><div class="ttdeci">uint32_t elapsed_time_us</div><div class="ttdef"><b>Definition</b> <a href="PerfInfo_8h_source.html#l00016">PerfInfo.h:16</a></div></div>
<div class="ttc" id="astructAP_1_1PerfInfo_1_1TaskInfo_html_ab13c02a8fe4f6f412da4667f141c27ae"><div class="ttname"><a href="structAP_1_1PerfInfo_1_1TaskInfo.html#ab13c02a8fe4f6f412da4667f141c27ae">AP::PerfInfo::TaskInfo::print</a></div><div class="ttdeci">void print(const char *task_name, uint32_t total_time, ExpandingString &amp;str) const</div><div class="ttdef"><b>Definition</b> <a href="PerfInfo_8cpp_source.html#l00085">PerfInfo.cpp:85</a></div></div>
<div class="ttc" id="astructAP_1_1PerfInfo_1_1TaskInfo_html_aed3139a81a756594ae5806332b00b974"><div class="ttname"><a href="structAP_1_1PerfInfo_1_1TaskInfo.html#aed3139a81a756594ae5806332b00b974">AP::PerfInfo::TaskInfo::tick_count</a></div><div class="ttdeci">uint32_t tick_count</div><div class="ttdef"><b>Definition</b> <a href="PerfInfo_8h_source.html#l00017">PerfInfo.h:17</a></div></div>
<div class="ttc" id="astructAP__HAL_1_1Util_1_1PersistentData_html"><div class="ttname"><a href="structAP__HAL_1_1Util_1_1PersistentData.html">AP_HAL::Util::PersistentData</a></div><div class="ttdef"><b>Definition</b> <a href="AP__HAL_2Util_8h_source.html#l00063">Util.h:63</a></div></div>
<div class="ttc" id="astructAP__HAL_1_1Util_1_1PersistentData_html_aa9f24b2ec5b919e948745878c8d96f59"><div class="ttname"><a href="structAP__HAL_1_1Util_1_1PersistentData.html#aa9f24b2ec5b919e948745878c8d96f59">AP_HAL::Util::PersistentData::scheduler_task</a></div><div class="ttdeci">int8_t scheduler_task</div><div class="ttdef"><b>Definition</b> <a href="AP__HAL_2Util_8h_source.html#l00083">Util.h:83</a></div></div>
<div class="ttc" id="astructAP__Param_1_1GroupInfo_html"><div class="ttname"><a href="structAP__Param_1_1GroupInfo.html">AP_Param::GroupInfo</a></div><div class="ttdef"><b>Definition</b> <a href="AP__Param_8h_source.html#l00199">AP_Param.h:199</a></div></div>
<div class="ttc" id="astructAP__Scheduler_1_1Task_html"><div class="ttname"><a href="structAP__Scheduler_1_1Task.html">AP_Scheduler::Task</a></div><div class="ttdef"><b>Definition</b> <a href="AP__Scheduler_8h_source.html#l00085">AP_Scheduler.h:85</a></div></div>
<div class="ttc" id="astructAP__Scheduler_1_1Task_html_a24f69b528a11385efe43c8be446e5657"><div class="ttname"><a href="structAP__Scheduler_1_1Task.html#a24f69b528a11385efe43c8be446e5657">AP_Scheduler::Task::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition</b> <a href="AP__Scheduler_8h_source.html#l00087">AP_Scheduler.h:87</a></div></div>
<div class="ttc" id="astructAP__Scheduler_1_1Task_html_a491d948435493331852f0c55502ce0dd"><div class="ttname"><a href="structAP__Scheduler_1_1Task.html#a491d948435493331852f0c55502ce0dd">AP_Scheduler::Task::priority</a></div><div class="ttdeci">uint8_t priority</div><div class="ttdef"><b>Definition</b> <a href="AP__Scheduler_8h_source.html#l00090">AP_Scheduler.h:90</a></div></div>
<div class="ttc" id="astructAP__Scheduler_1_1Task_html_ab9fbd24b9c70e16354d8d0947fe69384"><div class="ttname"><a href="structAP__Scheduler_1_1Task.html#ab9fbd24b9c70e16354d8d0947fe69384">AP_Scheduler::Task::max_time_micros</a></div><div class="ttdeci">uint16_t max_time_micros</div><div class="ttdef"><b>Definition</b> <a href="AP__Scheduler_8h_source.html#l00089">AP_Scheduler.h:89</a></div></div>
<div class="ttc" id="astructAP__Scheduler_1_1Task_html_ac36c77bd5732d346601c8ff2e1dbfa88"><div class="ttname"><a href="structAP__Scheduler_1_1Task.html#ac36c77bd5732d346601c8ff2e1dbfa88">AP_Scheduler::Task::rate_hz</a></div><div class="ttdeci">float rate_hz</div><div class="ttdef"><b>Definition</b> <a href="AP__Scheduler_8h_source.html#l00088">AP_Scheduler.h:88</a></div></div>
<div class="ttc" id="astructAP__Scheduler_1_1Task_html_ae8b2138ab213591aaa1a639a8101df79"><div class="ttname"><a href="structAP__Scheduler_1_1Task.html#ae8b2138ab213591aaa1a639a8101df79">AP_Scheduler::Task::function</a></div><div class="ttdeci">task_fn_t function</div><div class="ttdef"><b>Definition</b> <a href="AP__Scheduler_8h_source.html#l00086">AP_Scheduler.h:86</a></div></div>
<div class="ttc" id="astructlog__Performance_html"><div class="ttname"><a href="structlog__Performance.html">log_Performance</a></div><div class="ttdef"><b>Definition</b> <a href="AP__Logger_2LogStructure_8h_source.html#l00556">LogStructure.h:556</a></div></div>
<div class="ttc" id="asumd_8cpp_html_abea63a461ba805d7c6c2facc133188c9"><div class="ttname"><a href="sumd_8cpp.html#abea63a461ba805d7c6c2facc133188c9">_debug</a></div><div class="ttdeci">static bool _debug</div><div class="ttdef"><b>Definition</b> <a href="sumd_8cpp_source.html#l00100">sumd.cpp:100</a></div></div>
<div class="ttc" id="atest__expandingstring__failure_8cpp_html_a86988a65e0d3ece7990c032c159786d6"><div class="ttname"><a href="test__expandingstring__failure_8cpp.html#a86988a65e0d3ece7990c032c159786d6">count</a></div><div class="ttdeci">static uint32_t count</div><div class="ttdef"><b>Definition</b> <a href="test__expandingstring__failure_8cpp_source.html#l00012">test_expandingstring_failure.cpp:12</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Mar 22 2024 16:14:15 for APM:Libraries by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
