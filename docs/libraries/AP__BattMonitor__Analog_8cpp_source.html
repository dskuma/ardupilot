<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>APM:Libraries: libraries/AP_BattMonitor/AP_BattMonitor_Analog.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">APM:Libraries
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_bc0718b08fb2015b8e59c47b2805f60c.html">libraries</a></li><li class="navelem"><a class="el" href="dir_210b3cddc805c7c91973d20121d570cf.html">AP_BattMonitor</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle"><div class="title">AP_BattMonitor_Analog.cpp</div></div>
</div><!--header-->
<div class="contents">
<a href="AP__BattMonitor__Analog_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="preprocessor">#include &quot;<a class="code" href="AP__BattMonitor__config_8h.html">AP_BattMonitor_config.h</a>&quot;</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span> </div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="preprocessor">#if AP_BATTERY_ANALOG_ENABLED</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span> </div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="preprocessor">#include &lt;<a class="code" href="AP__HAL_8h.html">AP_HAL/AP_HAL.h</a>&gt;</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="preprocessor">#include &lt;<a class="code" href="AP__Common_8h.html">AP_Common/AP_Common.h</a>&gt;</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="preprocessor">#include &lt;<a class="code" href="AP__Math_8h.html">AP_Math/AP_Math.h</a>&gt;</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span> </div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="preprocessor">#include &quot;<a class="code" href="AP__BattMonitor__Analog_8h.html">AP_BattMonitor_Analog.h</a>&quot;</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span> </div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="keyword">extern</span> <span class="keyword">const</span> <a class="code hl_class" href="classAP__HAL_1_1HAL.html">AP_HAL::HAL</a>&amp; <a class="code hl_variable" href="AP__BattMonitor__Analog_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>;</div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span> </div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="keyword">const</span> <a class="code hl_struct" href="structAP__Param_1_1GroupInfo.html">AP_Param::GroupInfo</a> <a class="code hl_variable" href="classAP__BattMonitor__Analog.html#a299ff51a47ed298cdc82df6a777a3af3">AP_BattMonitor_Analog::var_info</a>[] = {</div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span> </div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span>    <span class="comment">// @Param: VOLT_PIN</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span>    <span class="comment">// @DisplayName: Battery Voltage sensing pin</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span>    <span class="comment">// @Description: Sets the analog input pin that should be used for voltage monitoring.</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span>    <span class="comment">// @Values: -1:Disabled, 2:Pixhawk/Pixracer/Navio2/Pixhawk2_PM1, 5:Navigator, 13:Pixhawk2_PM2/CubeOrange_PM2, 14:CubeOrange, 16:Durandal, 100:PX4-v1</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span>    <span class="comment">// @RebootRequired: True</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;VOLT_PIN&quot;</span>, 1, <a class="code hl_class" href="classAP__BattMonitor__Analog.html">AP_BattMonitor_Analog</a>, _volt_pin, <a class="code hl_define" href="AP__BattMonitor__Analog_8h.html#ad071e5f6f02fe9047f9ff601eaffb348">AP_BATT_VOLT_PIN</a>),</div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span> </div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span>    <span class="comment">// @Param: CURR_PIN</span></div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span>    <span class="comment">// @DisplayName: Battery Current sensing pin</span></div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span>    <span class="comment">// @Description: Sets the analog input pin that should be used for current monitoring.</span></div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span>    <span class="comment">// @Values: -1:Disabled, 3:Pixhawk/Pixracer/Navio2/Pixhawk2_PM1, 4:CubeOrange_PM2/Navigator, 14:Pixhawk2_PM2, 15:CubeOrange, 17:Durandal, 101:PX4-v1</span></div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span>    <span class="comment">// @RebootRequired: True</span></div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;CURR_PIN&quot;</span>, 2, <a class="code hl_class" href="classAP__BattMonitor__Analog.html">AP_BattMonitor_Analog</a>, _curr_pin, <a class="code hl_define" href="AP__BattMonitor__Analog_8h.html#a9b46f5bb27fdd1ebd697d4df5f050ca5">AP_BATT_CURR_PIN</a>),</div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span> </div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span>    <span class="comment">// @Param: VOLT_MULT</span></div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span>    <span class="comment">// @DisplayName: Voltage Multiplier</span></div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span>    <span class="comment">// @Description: Used to convert the voltage of the voltage sensing pin (@PREFIX@VOLT_PIN) to the actual battery&#39;s voltage (pin_voltage * VOLT_MULT). For the 3DR Power brick with a Pixhawk, this should be set to 10.1. For the Pixhawk with the 3DR 4in1 ESC this should be 12.02. For the PX using the PX4IO power supply this should be set to 1.</span></div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;VOLT_MULT&quot;</span>, 3, <a class="code hl_class" href="classAP__BattMonitor__Analog.html">AP_BattMonitor_Analog</a>, _volt_multiplier, <a class="code hl_define" href="AP__BattMonitor__Analog_8h.html#ad30e2aa2e3f441e417b22744c8f90e8a">AP_BATT_VOLTDIVIDER_DEFAULT</a>),</div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span> </div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span>    <span class="comment">// @Param: AMP_PERVLT</span></div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span>    <span class="comment">// @DisplayName: Amps per volt</span></div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span>    <span class="comment">// @Description: Number of amps that a 1V reading on the current sensor corresponds to. With a Pixhawk using the 3DR Power brick this should be set to 17. For the Pixhawk with the 3DR 4in1 ESC this should be 17. For Synthetic Current sensor monitors, this is the maximum, full throttle current draw.</span></div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span>    <span class="comment">// @Units: A/V</span></div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;AMP_PERVLT&quot;</span>, 4, <a class="code hl_class" href="classAP__BattMonitor__Analog.html">AP_BattMonitor_Analog</a>, _curr_amp_per_volt, <a class="code hl_define" href="AP__BattMonitor__Analog_8h.html#ac1f3bd8a99937361877fc91c0f50b965">AP_BATT_CURR_AMP_PERVOLT_DEFAULT</a>),</div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span> </div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span>    <span class="comment">// @Param: AMP_OFFSET</span></div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span>    <span class="comment">// @DisplayName: AMP offset</span></div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span>    <span class="comment">// @Description: Voltage offset at zero current on current sensor for Analog Sensors. For Synthetic Current sensor, this offset is the zero throttle system current and is added to the calculated throttle base current.</span></div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span>    <span class="comment">// @Units: V</span></div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;AMP_OFFSET&quot;</span>, 5, <a class="code hl_class" href="classAP__BattMonitor__Analog.html">AP_BattMonitor_Analog</a>, _curr_amp_offset, <a class="code hl_define" href="AP__BattMonitor__Analog_8h.html#ac46672337b3238e198ea53c5c2b267f8">AP_BATT_CURR_AMP_OFFSET_DEFAULT</a>),</div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span> </div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span>    <span class="comment">// @Param: VLT_OFFSET</span></div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span>    <span class="comment">// @DisplayName: Voltage offset</span></div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span>    <span class="comment">// @Description: Voltage offset on voltage pin. This allows for an offset due to a diode. This voltage is subtracted before the scaling is applied.</span></div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span>    <span class="comment">// @Units: V</span></div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;VLT_OFFSET&quot;</span>, 6, <a class="code hl_class" href="classAP__BattMonitor__Analog.html">AP_BattMonitor_Analog</a>, _volt_offset, 0),</div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>    </div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span>    <span class="comment">// Param indexes must be less than 10 to avoid conflict with other battery monitor param tables loaded by pointer</span></div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span> </div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>    <a class="code hl_define" href="AP__Param_8h.html#a0f9acb038a5283b964b862aea8cc5051">AP_GROUPEND</a></div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>};</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span> </div>
<div class="foldopen" id="foldopen00064" data-start="{" data-end="}">
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno"><a class="line" href="classAP__BattMonitor__Analog.html#a5366468b336c045e8e1e6fee6bb4a423">   64</a></span><a class="code hl_function" href="classAP__BattMonitor__Analog.html#a5366468b336c045e8e1e6fee6bb4a423">AP_BattMonitor_Analog::AP_BattMonitor_Analog</a>(<a class="code hl_class" href="classAP__BattMonitor.html">AP_BattMonitor</a> &amp;mon,</div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>                                             <a class="code hl_struct" href="structAP__BattMonitor_1_1BattMonitor__State.html">AP_BattMonitor::BattMonitor_State</a> &amp;mon_state,</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span>                                             <a class="code hl_class" href="classAP__BattMonitor__Params.html">AP_BattMonitor_Params</a> &amp;params) :</div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>    <a class="code hl_class" href="classAP__BattMonitor__Backend.html">AP_BattMonitor_Backend</a>(mon, mon_state, params)</div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span>{</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>    <a class="code hl_function" href="classAP__Param.html#a5f6dcfce1c0a79cf5bd81283e22f3201">AP_Param::setup_object_defaults</a>(<span class="keyword">this</span>, var_info);</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span> </div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>    <span class="comment">// no other good way of setting these defaults</span></div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span><span class="preprocessor">#if AP_BATT_MONITOR_MAX_INSTANCES &gt; 1</span></div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>    <span class="keywordflow">if</span> (mon_state.<a class="code hl_variable" href="structAP__BattMonitor_1_1BattMonitor__State.html#a8a170bff721c6e34803b4ca19408d6a9">instance</a> == 1) {</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span><span class="preprocessor">#ifdef HAL_BATT2_VOLT_PIN</span></div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>        <a class="code hl_variable" href="classAP__BattMonitor__Analog.html#a228d77dd02595fe4b732eea8a3acd88a">_volt_pin</a>.set_default(HAL_BATT2_VOLT_PIN);</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span><span class="preprocessor">#ifdef HAL_BATT2_CURR_PIN</span></div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>        <a class="code hl_variable" href="classAP__BattMonitor__Analog.html#a1aef210cf075c57046803da0ceca9e74">_curr_pin</a>.set_default(HAL_BATT2_CURR_PIN);</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span><span class="preprocessor">#ifdef HAL_BATT2_VOLT_SCALE</span></div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>        <a class="code hl_variable" href="classAP__BattMonitor__Analog.html#a5b7bd0590615e72c843b49657a22d8ac">_volt_multiplier</a>.set_default(HAL_BATT2_VOLT_SCALE);</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span><span class="preprocessor">#ifdef HAL_BATT2_CURR_SCALE</span></div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>        <a class="code hl_variable" href="classAP__BattMonitor__Analog.html#a5e5c3bdaac8a526c28fc0a5fcec95c45">_curr_amp_per_volt</a>.set_default(HAL_BATT2_CURR_SCALE);</div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>    }</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>    <a class="code hl_variable" href="classAP__BattMonitor__Backend.html#a4c129b83ff159b3be7123a57d81bb71b">_state</a>.<a class="code hl_variable" href="structAP__BattMonitor_1_1BattMonitor__State.html#aed97983eb6f22749577556802d4a642c">var_info</a> = <a class="code hl_variable" href="classAP__BattMonitor__Analog.html#a299ff51a47ed298cdc82df6a777a3af3">var_info</a>;</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>    </div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>    <a class="code hl_variable" href="classAP__BattMonitor__Analog.html#ad1dc3b4d1fe2d582f6e172090c234387">_volt_pin_analog_source</a> = <a class="code hl_variable" href="AC__AttitudeControl_8cpp.html#a240c1a4ae2a70d1855f91e4a0b1ac938">hal</a>.<a class="code hl_variable" href="classAP__HAL_1_1HAL.html#a48a758dbd587c916aa4f5ea5ae9521e4">analogin</a>-&gt;<a class="code hl_function" href="classAP__HAL_1_1AnalogIn.html#aece8e7300762b4d65ac6129f4bc32024">channel</a>(<a class="code hl_variable" href="classAP__BattMonitor__Analog.html#a228d77dd02595fe4b732eea8a3acd88a">_volt_pin</a>);</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>    <a class="code hl_variable" href="classAP__BattMonitor__Analog.html#ac59e54ef2902fddb9f755ae130f98a2b">_curr_pin_analog_source</a> = <a class="code hl_variable" href="AC__AttitudeControl_8cpp.html#a240c1a4ae2a70d1855f91e4a0b1ac938">hal</a>.<a class="code hl_variable" href="classAP__HAL_1_1HAL.html#a48a758dbd587c916aa4f5ea5ae9521e4">analogin</a>-&gt;<a class="code hl_function" href="classAP__HAL_1_1AnalogIn.html#aece8e7300762b4d65ac6129f4bc32024">channel</a>(<a class="code hl_variable" href="classAP__BattMonitor__Analog.html#a1aef210cf075c57046803da0ceca9e74">_curr_pin</a>);</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span> </div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>}</div>
</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span> </div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span><span class="comment">// read - read the voltage and current</span></div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span><span class="keywordtype">void</span></div>
<div class="foldopen" id="foldopen00097" data-start="{" data-end="}">
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno"><a class="line" href="classAP__BattMonitor__Analog.html#ad25bd84c3aebc99e11a62a3caf26576b">   97</a></span><a class="code hl_function" href="classAP__BattMonitor__Analog.html#ad25bd84c3aebc99e11a62a3caf26576b">AP_BattMonitor_Analog::read</a>()</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>{</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>    <span class="comment">// this copes with changing the pin at runtime</span></div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>    <a class="code hl_variable" href="classAP__BattMonitor__Backend.html#a4c129b83ff159b3be7123a57d81bb71b">_state</a>.<a class="code hl_variable" href="structAP__BattMonitor_1_1BattMonitor__State.html#af1d0be8848c4490896009c67624e1ecf">healthy</a> = <a class="code hl_variable" href="classAP__BattMonitor__Analog.html#ad1dc3b4d1fe2d582f6e172090c234387">_volt_pin_analog_source</a>-&gt;<a class="code hl_function" href="classAP__HAL_1_1AnalogSource.html#af7d269467bc07c84c585f231309b1ce0">set_pin</a>(<a class="code hl_variable" href="classAP__BattMonitor__Analog.html#a228d77dd02595fe4b732eea8a3acd88a">_volt_pin</a>);</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span> </div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>    <span class="comment">// get voltage</span></div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>    <a class="code hl_variable" href="classAP__BattMonitor__Backend.html#a4c129b83ff159b3be7123a57d81bb71b">_state</a>.<a class="code hl_variable" href="structAP__BattMonitor_1_1BattMonitor__State.html#adf15328b351887e17b23a4587c0d1a7d">voltage</a> = (<a class="code hl_variable" href="classAP__BattMonitor__Analog.html#ad1dc3b4d1fe2d582f6e172090c234387">_volt_pin_analog_source</a>-&gt;<a class="code hl_function" href="classAP__HAL_1_1AnalogSource.html#a97f02eb815fd2f568df7b927d6f6b559">voltage_average</a>() - <a class="code hl_variable" href="classAP__BattMonitor__Analog.html#a67318d0770b36b22ad24abf371c4caa6">_volt_offset</a>) * <a class="code hl_variable" href="classAP__BattMonitor__Analog.html#a5b7bd0590615e72c843b49657a22d8ac">_volt_multiplier</a>;</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span> </div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span>    <span class="comment">// read current</span></div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="classAP__BattMonitor__Analog.html#af999d244a878a1b4a163d5d0cadf16d2">has_current</a>()) {</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>        <span class="comment">// calculate time since last current read</span></div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>        <span class="keyword">const</span> uint32_t tnow = <a class="code hl_function" href="namespaceAP__HAL.html#a8293355e35887733b1fd151aef08a787">AP_HAL::micros</a>();</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>        <span class="keyword">const</span> uint32_t <a class="code hl_variable" href="examples_2SlewLimiter_2SlewLimiter_8cpp.html#a9edc0498ef6cb8e9dbb9aa086d7ea007">dt_us</a> = tnow - <a class="code hl_variable" href="classAP__BattMonitor__Backend.html#a4c129b83ff159b3be7123a57d81bb71b">_state</a>.<a class="code hl_variable" href="structAP__BattMonitor_1_1BattMonitor__State.html#a95e8d8958120942865517f3289ee3747">last_time_micros</a>;</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span> </div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>        <span class="comment">// this copes with changing the pin at runtime</span></div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>        <a class="code hl_variable" href="classAP__BattMonitor__Backend.html#a4c129b83ff159b3be7123a57d81bb71b">_state</a>.<a class="code hl_variable" href="structAP__BattMonitor_1_1BattMonitor__State.html#af1d0be8848c4490896009c67624e1ecf">healthy</a> &amp;= <a class="code hl_variable" href="classAP__BattMonitor__Analog.html#ac59e54ef2902fddb9f755ae130f98a2b">_curr_pin_analog_source</a>-&gt;<a class="code hl_function" href="classAP__HAL_1_1AnalogSource.html#af7d269467bc07c84c585f231309b1ce0">set_pin</a>(<a class="code hl_variable" href="classAP__BattMonitor__Analog.html#a1aef210cf075c57046803da0ceca9e74">_curr_pin</a>);</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span> </div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>        <span class="comment">// read current</span></div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>        <a class="code hl_variable" href="classAP__BattMonitor__Backend.html#a4c129b83ff159b3be7123a57d81bb71b">_state</a>.<a class="code hl_variable" href="structAP__BattMonitor_1_1BattMonitor__State.html#a76191932302d83a9505a2899968bccbe">current_amps</a> = (<a class="code hl_variable" href="classAP__BattMonitor__Analog.html#ac59e54ef2902fddb9f755ae130f98a2b">_curr_pin_analog_source</a>-&gt;<a class="code hl_function" href="classAP__HAL_1_1AnalogSource.html#a97f02eb815fd2f568df7b927d6f6b559">voltage_average</a>() - <a class="code hl_variable" href="classAP__BattMonitor__Analog.html#a8af15e18a99855cd873d02504ef61f50">_curr_amp_offset</a>) * <a class="code hl_variable" href="classAP__BattMonitor__Analog.html#a5e5c3bdaac8a526c28fc0a5fcec95c45">_curr_amp_per_volt</a>;</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span> </div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>        <a class="code hl_function" href="classAP__BattMonitor__Backend.html#a4ffb7dda1da9a88da5aa398687b7b3da">update_consumed</a>(<a class="code hl_variable" href="classAP__BattMonitor__Backend.html#a4c129b83ff159b3be7123a57d81bb71b">_state</a>, <a class="code hl_variable" href="examples_2SlewLimiter_2SlewLimiter_8cpp.html#a9edc0498ef6cb8e9dbb9aa086d7ea007">dt_us</a>);</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span> </div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>        <span class="comment">// record time</span></div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>        <a class="code hl_variable" href="classAP__BattMonitor__Backend.html#a4c129b83ff159b3be7123a57d81bb71b">_state</a>.<a class="code hl_variable" href="structAP__BattMonitor_1_1BattMonitor__State.html#a95e8d8958120942865517f3289ee3747">last_time_micros</a> = tnow;</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>    }</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>}</div>
</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span> </div>
<div class="foldopen" id="foldopen00125" data-start="{" data-end="}">
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno"><a class="line" href="classAP__BattMonitor__Analog.html#af999d244a878a1b4a163d5d0cadf16d2">  125</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classAP__BattMonitor__Analog.html#af999d244a878a1b4a163d5d0cadf16d2">AP_BattMonitor_Analog::has_current</a>()<span class="keyword"> const</span></div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span><span class="keyword"></span>{</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>    <span class="keywordflow">return</span> ((<a class="code hl_enumeration" href="classAP__BattMonitor.html#adbde82cea122b14cb271bfb1c4b096c7">AP_BattMonitor::Type</a>)<a class="code hl_variable" href="classAP__BattMonitor__Backend.html#ace3a43f8564c002b7984e331e9a381d2">_params</a>.<a class="code hl_variable" href="classAP__BattMonitor__Params.html#ae2ce66a6da84665ca3a1487f9aa04054">_type</a>.get() == <a class="code hl_enumvalue" href="classAP__BattMonitor.html#adbde82cea122b14cb271bfb1c4b096c7aecee5fcb5a6b140afd975bcecb724ea5">AP_BattMonitor::Type::ANALOG_VOLTAGE_AND_CURRENT</a>);</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>}</div>
</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span> </div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span><span class="preprocessor">#endif  </span><span class="comment">// AP_BATTERY_ANALOG_ENABLED</span></div>
<div class="ttc" id="aAC__AttitudeControl_8cpp_html_a240c1a4ae2a70d1855f91e4a0b1ac938"><div class="ttname"><a href="AC__AttitudeControl_8cpp.html#a240c1a4ae2a70d1855f91e4a0b1ac938">hal</a></div><div class="ttdeci">const AP_HAL::HAL &amp; hal</div><div class="ttdef"><b>Definition</b> <a href="AP__Compass__AK09916_8cpp_source.html#l00059">AP_Compass_AK09916.cpp:59</a></div></div>
<div class="ttc" id="aAP__BattMonitor__Analog_8cpp_html_ae08c3ca4ba26b63cda0bb3e3c6c02785"><div class="ttname"><a href="AP__BattMonitor__Analog_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a></div><div class="ttdeci">const AP_HAL::HAL &amp; hal</div><div class="ttdef"><b>Definition</b> <a href="AC__PID__test_8cpp_source.html#l00021">AC_PID_test.cpp:21</a></div></div>
<div class="ttc" id="aAP__BattMonitor__Analog_8h_html"><div class="ttname"><a href="AP__BattMonitor__Analog_8h.html">AP_BattMonitor_Analog.h</a></div></div>
<div class="ttc" id="aAP__BattMonitor__Analog_8h_html_a9b46f5bb27fdd1ebd697d4df5f050ca5"><div class="ttname"><a href="AP__BattMonitor__Analog_8h.html#a9b46f5bb27fdd1ebd697d4df5f050ca5">AP_BATT_CURR_PIN</a></div><div class="ttdeci">#define AP_BATT_CURR_PIN</div><div class="ttdef"><b>Definition</b> <a href="AP__BattMonitor__Analog_8h_source.html#l00018">AP_BattMonitor_Analog.h:18</a></div></div>
<div class="ttc" id="aAP__BattMonitor__Analog_8h_html_ac1f3bd8a99937361877fc91c0f50b965"><div class="ttname"><a href="AP__BattMonitor__Analog_8h.html#ac1f3bd8a99937361877fc91c0f50b965">AP_BATT_CURR_AMP_PERVOLT_DEFAULT</a></div><div class="ttdeci">#define AP_BATT_CURR_AMP_PERVOLT_DEFAULT</div><div class="ttdef"><b>Definition</b> <a href="AP__BattMonitor__Analog_8h_source.html#l00020">AP_BattMonitor_Analog.h:20</a></div></div>
<div class="ttc" id="aAP__BattMonitor__Analog_8h_html_ac46672337b3238e198ea53c5c2b267f8"><div class="ttname"><a href="AP__BattMonitor__Analog_8h.html#ac46672337b3238e198ea53c5c2b267f8">AP_BATT_CURR_AMP_OFFSET_DEFAULT</a></div><div class="ttdeci">#define AP_BATT_CURR_AMP_OFFSET_DEFAULT</div><div class="ttdef"><b>Definition</b> <a href="AP__BattMonitor__Analog_8h_source.html#l00090">AP_BattMonitor_Analog.h:90</a></div></div>
<div class="ttc" id="aAP__BattMonitor__Analog_8h_html_ad071e5f6f02fe9047f9ff601eaffb348"><div class="ttname"><a href="AP__BattMonitor__Analog_8h.html#ad071e5f6f02fe9047f9ff601eaffb348">AP_BATT_VOLT_PIN</a></div><div class="ttdeci">#define AP_BATT_VOLT_PIN</div><div class="ttdef"><b>Definition</b> <a href="AP__BattMonitor__Analog_8h_source.html#l00017">AP_BattMonitor_Analog.h:17</a></div></div>
<div class="ttc" id="aAP__BattMonitor__Analog_8h_html_ad30e2aa2e3f441e417b22744c8f90e8a"><div class="ttname"><a href="AP__BattMonitor__Analog_8h.html#ad30e2aa2e3f441e417b22744c8f90e8a">AP_BATT_VOLTDIVIDER_DEFAULT</a></div><div class="ttdeci">#define AP_BATT_VOLTDIVIDER_DEFAULT</div><div class="ttdef"><b>Definition</b> <a href="AP__BattMonitor__Analog_8h_source.html#l00019">AP_BattMonitor_Analog.h:19</a></div></div>
<div class="ttc" id="aAP__BattMonitor__config_8h_html"><div class="ttname"><a href="AP__BattMonitor__config_8h.html">AP_BattMonitor_config.h</a></div></div>
<div class="ttc" id="aAP__Common_8h_html"><div class="ttname"><a href="AP__Common_8h.html">AP_Common.h</a></div><div class="ttdoc">Common definitions and utility routines for the ArduPilot libraries.</div></div>
<div class="ttc" id="aAP__HAL_8h_html"><div class="ttname"><a href="AP__HAL_8h.html">AP_HAL.h</a></div></div>
<div class="ttc" id="aAP__Math_8h_html"><div class="ttname"><a href="AP__Math_8h.html">AP_Math.h</a></div></div>
<div class="ttc" id="aAP__Param_8h_html_a0f9acb038a5283b964b862aea8cc5051"><div class="ttname"><a href="AP__Param_8h.html#a0f9acb038a5283b964b862aea8cc5051">AP_GROUPEND</a></div><div class="ttdeci">#define AP_GROUPEND</div><div class="ttdef"><b>Definition</b> <a href="AP__Param_8h_source.html#l00163">AP_Param.h:163</a></div></div>
<div class="ttc" id="aAP__Param_8h_html_a78a408c84f2a1bafde256ac650142e4d"><div class="ttname"><a href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a></div><div class="ttdeci">#define AP_GROUPINFO(name, idx, clazz, element, def)</div><div class="ttdef"><b>Definition</b> <a href="AP__Param_8h_source.html#l00145">AP_Param.h:145</a></div></div>
<div class="ttc" id="aclassAP__BattMonitor__Analog_html"><div class="ttname"><a href="classAP__BattMonitor__Analog.html">AP_BattMonitor_Analog</a></div><div class="ttdef"><b>Definition</b> <a href="AP__BattMonitor__Analog_8h_source.html#l00099">AP_BattMonitor_Analog.h:100</a></div></div>
<div class="ttc" id="aclassAP__BattMonitor__Analog_html_a1aef210cf075c57046803da0ceca9e74"><div class="ttname"><a href="classAP__BattMonitor__Analog.html#a1aef210cf075c57046803da0ceca9e74">AP_BattMonitor_Analog::_curr_pin</a></div><div class="ttdeci">AP_Int8 _curr_pin</div><div class="ttdoc">board pin used to measure battery voltage</div><div class="ttdef"><b>Definition</b> <a href="AP__BattMonitor__Analog_8h_source.html#l00130">AP_BattMonitor_Analog.h:130</a></div></div>
<div class="ttc" id="aclassAP__BattMonitor__Analog_html_a228d77dd02595fe4b732eea8a3acd88a"><div class="ttname"><a href="classAP__BattMonitor__Analog.html#a228d77dd02595fe4b732eea8a3acd88a">AP_BattMonitor_Analog::_volt_pin</a></div><div class="ttdeci">AP_Int8 _volt_pin</div><div class="ttdoc">offset voltage that is subtracted from voltage pin before conversion</div><div class="ttdef"><b>Definition</b> <a href="AP__BattMonitor__Analog_8h_source.html#l00129">AP_BattMonitor_Analog.h:129</a></div></div>
<div class="ttc" id="aclassAP__BattMonitor__Analog_html_a299ff51a47ed298cdc82df6a777a3af3"><div class="ttname"><a href="classAP__BattMonitor__Analog.html#a299ff51a47ed298cdc82df6a777a3af3">AP_BattMonitor_Analog::var_info</a></div><div class="ttdeci">static const struct AP_Param::GroupInfo var_info[]</div><div class="ttdef"><b>Definition</b> <a href="AP__BattMonitor__Analog_8h_source.html#l00013">AP_BattMonitor_Analog.h:13</a></div></div>
<div class="ttc" id="aclassAP__BattMonitor__Analog_html_a5366468b336c045e8e1e6fee6bb4a423"><div class="ttname"><a href="classAP__BattMonitor__Analog.html#a5366468b336c045e8e1e6fee6bb4a423">AP_BattMonitor_Analog::AP_BattMonitor_Analog</a></div><div class="ttdeci">AP_BattMonitor_Analog(AP_BattMonitor &amp;mon, AP_BattMonitor::BattMonitor_State &amp;mon_state, AP_BattMonitor_Params &amp;params)</div><div class="ttdoc">Constructor.</div><div class="ttdef"><b>Definition</b> <a href="#l00064">AP_BattMonitor_Analog.cpp:64</a></div></div>
<div class="ttc" id="aclassAP__BattMonitor__Analog_html_a5b7bd0590615e72c843b49657a22d8ac"><div class="ttname"><a href="classAP__BattMonitor__Analog.html#a5b7bd0590615e72c843b49657a22d8ac">AP_BattMonitor_Analog::_volt_multiplier</a></div><div class="ttdeci">AP_Float _volt_multiplier</div><div class="ttdef"><b>Definition</b> <a href="AP__BattMonitor__Analog_8h_source.html#l00125">AP_BattMonitor_Analog.h:125</a></div></div>
<div class="ttc" id="aclassAP__BattMonitor__Analog_html_a5e5c3bdaac8a526c28fc0a5fcec95c45"><div class="ttname"><a href="classAP__BattMonitor__Analog.html#a5e5c3bdaac8a526c28fc0a5fcec95c45">AP_BattMonitor_Analog::_curr_amp_per_volt</a></div><div class="ttdeci">AP_Float _curr_amp_per_volt</div><div class="ttdoc">voltage on volt pin multiplied by this to calculate battery voltage</div><div class="ttdef"><b>Definition</b> <a href="AP__BattMonitor__Analog_8h_source.html#l00126">AP_BattMonitor_Analog.h:126</a></div></div>
<div class="ttc" id="aclassAP__BattMonitor__Analog_html_a67318d0770b36b22ad24abf371c4caa6"><div class="ttname"><a href="classAP__BattMonitor__Analog.html#a67318d0770b36b22ad24abf371c4caa6">AP_BattMonitor_Analog::_volt_offset</a></div><div class="ttdeci">AP_Float _volt_offset</div><div class="ttdoc">offset voltage that is subtracted from current pin before conversion to amps</div><div class="ttdef"><b>Definition</b> <a href="AP__BattMonitor__Analog_8h_source.html#l00128">AP_BattMonitor_Analog.h:128</a></div></div>
<div class="ttc" id="aclassAP__BattMonitor__Analog_html_a8af15e18a99855cd873d02504ef61f50"><div class="ttname"><a href="classAP__BattMonitor__Analog.html#a8af15e18a99855cd873d02504ef61f50">AP_BattMonitor_Analog::_curr_amp_offset</a></div><div class="ttdeci">AP_Float _curr_amp_offset</div><div class="ttdoc">voltage on current pin multiplied by this to calculate current in amps</div><div class="ttdef"><b>Definition</b> <a href="AP__BattMonitor__Analog_8h_source.html#l00127">AP_BattMonitor_Analog.h:127</a></div></div>
<div class="ttc" id="aclassAP__BattMonitor__Analog_html_ac59e54ef2902fddb9f755ae130f98a2b"><div class="ttname"><a href="classAP__BattMonitor__Analog.html#ac59e54ef2902fddb9f755ae130f98a2b">AP_BattMonitor_Analog::_curr_pin_analog_source</a></div><div class="ttdeci">AP_HAL::AnalogSource * _curr_pin_analog_source</div><div class="ttdef"><b>Definition</b> <a href="AP__BattMonitor__Analog_8h_source.html#l00122">AP_BattMonitor_Analog.h:122</a></div></div>
<div class="ttc" id="aclassAP__BattMonitor__Analog_html_ad1dc3b4d1fe2d582f6e172090c234387"><div class="ttname"><a href="classAP__BattMonitor__Analog.html#ad1dc3b4d1fe2d582f6e172090c234387">AP_BattMonitor_Analog::_volt_pin_analog_source</a></div><div class="ttdeci">AP_HAL::AnalogSource * _volt_pin_analog_source</div><div class="ttdef"><b>Definition</b> <a href="AP__BattMonitor__Analog_8h_source.html#l00121">AP_BattMonitor_Analog.h:121</a></div></div>
<div class="ttc" id="aclassAP__BattMonitor__Analog_html_ad25bd84c3aebc99e11a62a3caf26576b"><div class="ttname"><a href="classAP__BattMonitor__Analog.html#ad25bd84c3aebc99e11a62a3caf26576b">AP_BattMonitor_Analog::read</a></div><div class="ttdeci">virtual void read() override</div><div class="ttdoc">Read the battery voltage and current. Should be called at 10hz.</div><div class="ttdef"><b>Definition</b> <a href="#l00097">AP_BattMonitor_Analog.cpp:97</a></div></div>
<div class="ttc" id="aclassAP__BattMonitor__Analog_html_af999d244a878a1b4a163d5d0cadf16d2"><div class="ttname"><a href="classAP__BattMonitor__Analog.html#af999d244a878a1b4a163d5d0cadf16d2">AP_BattMonitor_Analog::has_current</a></div><div class="ttdeci">virtual bool has_current() const override</div><div class="ttdoc">returns true if battery monitor provides current info</div><div class="ttdef"><b>Definition</b> <a href="#l00125">AP_BattMonitor_Analog.cpp:125</a></div></div>
<div class="ttc" id="aclassAP__BattMonitor__Backend_html"><div class="ttname"><a href="classAP__BattMonitor__Backend.html">AP_BattMonitor_Backend</a></div><div class="ttdef"><b>Definition</b> <a href="AP__BattMonitor__Backend_8h_source.html#l00025">AP_BattMonitor_Backend.h:26</a></div></div>
<div class="ttc" id="aclassAP__BattMonitor__Backend_html_a4c129b83ff159b3be7123a57d81bb71b"><div class="ttname"><a href="classAP__BattMonitor__Backend.html#a4c129b83ff159b3be7123a57d81bb71b">AP_BattMonitor_Backend::_state</a></div><div class="ttdeci">AP_BattMonitor::BattMonitor_State &amp; _state</div><div class="ttdef"><b>Definition</b> <a href="AP__BattMonitor__Backend_8h_source.html#l00113">AP_BattMonitor_Backend.h:113</a></div></div>
<div class="ttc" id="aclassAP__BattMonitor__Backend_html_a4ffb7dda1da9a88da5aa398687b7b3da"><div class="ttname"><a href="classAP__BattMonitor__Backend.html#a4ffb7dda1da9a88da5aa398687b7b3da">AP_BattMonitor_Backend::update_consumed</a></div><div class="ttdeci">void update_consumed(AP_BattMonitor::BattMonitor_State &amp;state, uint32_t dt_us)</div><div class="ttdef"><b>Definition</b> <a href="AP__BattMonitor__Backend_8cpp_source.html#l00332">AP_BattMonitor_Backend.cpp:332</a></div></div>
<div class="ttc" id="aclassAP__BattMonitor__Backend_html_ace3a43f8564c002b7984e331e9a381d2"><div class="ttname"><a href="classAP__BattMonitor__Backend.html#ace3a43f8564c002b7984e331e9a381d2">AP_BattMonitor_Backend::_params</a></div><div class="ttdeci">AP_BattMonitor_Params &amp; _params</div><div class="ttdef"><b>Definition</b> <a href="AP__BattMonitor__Backend_8h_source.html#l00114">AP_BattMonitor_Backend.h:114</a></div></div>
<div class="ttc" id="aclassAP__BattMonitor__Params_html"><div class="ttname"><a href="classAP__BattMonitor__Params.html">AP_BattMonitor_Params</a></div><div class="ttdef"><b>Definition</b> <a href="AP__BattMonitor__Params_8h_source.html#l00006">AP_BattMonitor_Params.h:6</a></div></div>
<div class="ttc" id="aclassAP__BattMonitor__Params_html_ae2ce66a6da84665ca3a1487f9aa04054"><div class="ttname"><a href="classAP__BattMonitor__Params.html#ae2ce66a6da84665ca3a1487f9aa04054">AP_BattMonitor_Params::_type</a></div><div class="ttdeci">AP_Int8 _type</div><div class="ttdoc">max battery power allowed. Reduce max throttle to reduce current to satisfy t his limit</div><div class="ttdef"><b>Definition</b> <a href="AP__BattMonitor__Params_8h_source.html#l00045">AP_BattMonitor_Params.h:45</a></div></div>
<div class="ttc" id="aclassAP__BattMonitor_html"><div class="ttname"><a href="classAP__BattMonitor.html">AP_BattMonitor</a></div><div class="ttdef"><b>Definition</b> <a href="AP__BattMonitor_8h_source.html#l00054">AP_BattMonitor.h:55</a></div></div>
<div class="ttc" id="aclassAP__BattMonitor_html_adbde82cea122b14cb271bfb1c4b096c7"><div class="ttname"><a href="classAP__BattMonitor.html#adbde82cea122b14cb271bfb1c4b096c7">AP_BattMonitor::Type</a></div><div class="ttdeci">Type</div><div class="ttdef"><b>Definition</b> <a href="AP__BattMonitor_8h_source.html#l00089">AP_BattMonitor.h:89</a></div></div>
<div class="ttc" id="aclassAP__BattMonitor_html_adbde82cea122b14cb271bfb1c4b096c7aecee5fcb5a6b140afd975bcecb724ea5"><div class="ttname"><a href="classAP__BattMonitor.html#adbde82cea122b14cb271bfb1c4b096c7aecee5fcb5a6b140afd975bcecb724ea5">AP_BattMonitor::Type::ANALOG_VOLTAGE_AND_CURRENT</a></div><div class="ttdeci">@ ANALOG_VOLTAGE_AND_CURRENT</div></div>
<div class="ttc" id="aclassAP__HAL_1_1AnalogIn_html_aece8e7300762b4d65ac6129f4bc32024"><div class="ttname"><a href="classAP__HAL_1_1AnalogIn.html#aece8e7300762b4d65ac6129f4bc32024">AP_HAL::AnalogIn::channel</a></div><div class="ttdeci">virtual AP_HAL::AnalogSource * channel(int16_t n)=0</div></div>
<div class="ttc" id="aclassAP__HAL_1_1AnalogSource_html_a97f02eb815fd2f568df7b927d6f6b559"><div class="ttname"><a href="classAP__HAL_1_1AnalogSource.html#a97f02eb815fd2f568df7b927d6f6b559">AP_HAL::AnalogSource::voltage_average</a></div><div class="ttdeci">virtual float voltage_average()=0</div></div>
<div class="ttc" id="aclassAP__HAL_1_1AnalogSource_html_af7d269467bc07c84c585f231309b1ce0"><div class="ttname"><a href="classAP__HAL_1_1AnalogSource.html#af7d269467bc07c84c585f231309b1ce0">AP_HAL::AnalogSource::set_pin</a></div><div class="ttdeci">virtual bool set_pin(uint8_t p) WARN_IF_UNUSED=0</div></div>
<div class="ttc" id="aclassAP__HAL_1_1HAL_html"><div class="ttname"><a href="classAP__HAL_1_1HAL.html">AP_HAL::HAL</a></div><div class="ttdef"><b>Definition</b> <a href="HAL_8h_source.html#l00021">HAL.h:21</a></div></div>
<div class="ttc" id="aclassAP__HAL_1_1HAL_html_a48a758dbd587c916aa4f5ea5ae9521e4"><div class="ttname"><a href="classAP__HAL_1_1HAL.html#a48a758dbd587c916aa4f5ea5ae9521e4">AP_HAL::HAL::analogin</a></div><div class="ttdeci">AP_HAL::AnalogIn * analogin</div><div class="ttdef"><b>Definition</b> <a href="HAL_8h_source.html#l00124">HAL.h:124</a></div></div>
<div class="ttc" id="aclassAP__Param_html_a5f6dcfce1c0a79cf5bd81283e22f3201"><div class="ttname"><a href="classAP__Param.html#a5f6dcfce1c0a79cf5bd81283e22f3201">AP_Param::setup_object_defaults</a></div><div class="ttdeci">static void setup_object_defaults(const void *object_pointer, const struct GroupInfo *group_info)</div><div class="ttdef"><b>Definition</b> <a href="main_8cpp_source.html#l00010">main.cpp:10</a></div></div>
<div class="ttc" id="aexamples_2SlewLimiter_2SlewLimiter_8cpp_html_a9edc0498ef6cb8e9dbb9aa086d7ea007"><div class="ttname"><a href="examples_2SlewLimiter_2SlewLimiter_8cpp.html#a9edc0498ef6cb8e9dbb9aa086d7ea007">dt_us</a></div><div class="ttdeci">const uint16_t dt_us</div><div class="ttdef"><b>Definition</b> <a href="examples_2SlewLimiter_2SlewLimiter_8cpp_source.html#l00021">SlewLimiter.cpp:21</a></div></div>
<div class="ttc" id="anamespaceAP__HAL_html_a8293355e35887733b1fd151aef08a787"><div class="ttname"><a href="namespaceAP__HAL.html#a8293355e35887733b1fd151aef08a787">AP_HAL::micros</a></div><div class="ttdeci">uint32_t micros()</div><div class="ttdef"><b>Definition</b> <a href="AP__HAL__ChibiOS_2system_8cpp_source.html#l00352">system.cpp:352</a></div></div>
<div class="ttc" id="astructAP__BattMonitor_1_1BattMonitor__State_html"><div class="ttname"><a href="structAP__BattMonitor_1_1BattMonitor__State.html">AP_BattMonitor::BattMonitor_State</a></div><div class="ttdef"><b>Definition</b> <a href="AP__BattMonitor_8h_source.html#l00137">AP_BattMonitor.h:137</a></div></div>
<div class="ttc" id="astructAP__BattMonitor_1_1BattMonitor__State_html_a76191932302d83a9505a2899968bccbe"><div class="ttname"><a href="structAP__BattMonitor_1_1BattMonitor__State.html#a76191932302d83a9505a2899968bccbe">AP_BattMonitor::BattMonitor_State::current_amps</a></div><div class="ttdeci">float current_amps</div><div class="ttdef"><b>Definition</b> <a href="AP__BattMonitor_8h_source.html#l00140">AP_BattMonitor.h:140</a></div></div>
<div class="ttc" id="astructAP__BattMonitor_1_1BattMonitor__State_html_a8a170bff721c6e34803b4ca19408d6a9"><div class="ttname"><a href="structAP__BattMonitor_1_1BattMonitor__State.html#a8a170bff721c6e34803b4ca19408d6a9">AP_BattMonitor::BattMonitor_State::instance</a></div><div class="ttdeci">uint8_t instance</div><div class="ttdef"><b>Definition</b> <a href="AP__BattMonitor_8h_source.html#l00162">AP_BattMonitor.h:162</a></div></div>
<div class="ttc" id="astructAP__BattMonitor_1_1BattMonitor__State_html_a95e8d8958120942865517f3289ee3747"><div class="ttname"><a href="structAP__BattMonitor_1_1BattMonitor__State.html#a95e8d8958120942865517f3289ee3747">AP_BattMonitor::BattMonitor_State::last_time_micros</a></div><div class="ttdeci">uint32_t last_time_micros</div><div class="ttdef"><b>Definition</b> <a href="AP__BattMonitor_8h_source.html#l00143">AP_BattMonitor.h:143</a></div></div>
<div class="ttc" id="astructAP__BattMonitor_1_1BattMonitor__State_html_adf15328b351887e17b23a4587c0d1a7d"><div class="ttname"><a href="structAP__BattMonitor_1_1BattMonitor__State.html#adf15328b351887e17b23a4587c0d1a7d">AP_BattMonitor::BattMonitor_State::voltage</a></div><div class="ttdeci">float voltage</div><div class="ttdef"><b>Definition</b> <a href="AP__BattMonitor_8h_source.html#l00139">AP_BattMonitor.h:139</a></div></div>
<div class="ttc" id="astructAP__BattMonitor_1_1BattMonitor__State_html_aed97983eb6f22749577556802d4a642c"><div class="ttname"><a href="structAP__BattMonitor_1_1BattMonitor__State.html#aed97983eb6f22749577556802d4a642c">AP_BattMonitor::BattMonitor_State::var_info</a></div><div class="ttdeci">const struct AP_Param::GroupInfo * var_info</div><div class="ttdef"><b>Definition</b> <a href="AP__BattMonitor_8h_source.html#l00163">AP_BattMonitor.h:163</a></div></div>
<div class="ttc" id="astructAP__BattMonitor_1_1BattMonitor__State_html_af1d0be8848c4490896009c67624e1ecf"><div class="ttname"><a href="structAP__BattMonitor_1_1BattMonitor__State.html#af1d0be8848c4490896009c67624e1ecf">AP_BattMonitor::BattMonitor_State::healthy</a></div><div class="ttdeci">bool healthy</div><div class="ttdef"><b>Definition</b> <a href="AP__BattMonitor_8h_source.html#l00155">AP_BattMonitor.h:155</a></div></div>
<div class="ttc" id="astructAP__Param_1_1GroupInfo_html"><div class="ttname"><a href="structAP__Param_1_1GroupInfo.html">AP_Param::GroupInfo</a></div><div class="ttdef"><b>Definition</b> <a href="AP__Param_8h_source.html#l00199">AP_Param.h:199</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Mar 22 2024 16:14:13 for APM:Libraries by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
