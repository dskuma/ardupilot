<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>APM:Libraries: libraries/AC_Fence/AC_Fence.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">APM:Libraries
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_bc0718b08fb2015b8e59c47b2805f60c.html">libraries</a></li><li class="navelem"><a class="el" href="dir_1ebdd2fd6ebd12468875f4226312aa44.html">AC_Fence</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle"><div class="title">AC_Fence.cpp</div></div>
</div><!--header-->
<div class="contents">
<a href="AC__Fence_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="preprocessor">#include &quot;<a class="code" href="AC__Fence_8h.html">AC_Fence.h</a>&quot;</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span> </div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="preprocessor">#if AP_FENCE_ENABLED</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span> </div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="preprocessor">#include &lt;<a class="code" href="AP__Vehicle__Type_8h.html">AP_Vehicle/AP_Vehicle_Type.h</a>&gt;</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span> </div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="preprocessor">#ifndef AC_FENCE_DUMMY_METHODS_ENABLED</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno"><a class="line" href="AC__Fence_8cpp.html#ae1c7f09cbb74367c05f310e17bb787a0">    8</a></span><span class="preprocessor">#define AC_FENCE_DUMMY_METHODS_ENABLED  (!(APM_BUILD_TYPE(APM_BUILD_Rover) | APM_BUILD_COPTER_OR_HELI | APM_BUILD_TYPE(APM_BUILD_ArduPlane) | APM_BUILD_TYPE(APM_BUILD_ArduSub) | (AP_FENCE_ENABLED == 1)))</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span> </div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="preprocessor">#if !AC_FENCE_DUMMY_METHODS_ENABLED</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span> </div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="preprocessor">#include &lt;<a class="code" href="AP__AHRS_8h.html">AP_AHRS/AP_AHRS.h</a>&gt;</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="preprocessor">#include &lt;<a class="code" href="AP__HAL_8h.html">AP_HAL/AP_HAL.h</a>&gt;</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="preprocessor">#include &lt;<a class="code" href="AP__Logger_8h.html">AP_Logger/AP_Logger.h</a>&gt;</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="preprocessor">#include &lt;<a class="code" href="GCS_8h.html">GCS_MAVLink/GCS.h</a>&gt;</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span> </div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="keyword">extern</span> <span class="keyword">const</span> <a class="code hl_class" href="classAP__HAL_1_1HAL.html">AP_HAL::HAL</a>&amp; <a class="code hl_variable" href="AC__AttitudeControl_8cpp.html#a240c1a4ae2a70d1855f91e4a0b1ac938">hal</a>;</div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span> </div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="preprocessor">#if APM_BUILD_TYPE(APM_BUILD_Rover)</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span><span class="preprocessor">#define AC_FENCE_TYPE_DEFAULT AC_FENCE_TYPE_CIRCLE | AC_FENCE_TYPE_POLYGON</span></div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span><span class="preprocessor">#elif APM_BUILD_TYPE(APM_BUILD_ArduPlane)</span></div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span><span class="preprocessor">#define AC_FENCE_TYPE_DEFAULT AC_FENCE_TYPE_POLYGON</span></div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span><span class="preprocessor">#define AC_FENCE_TYPE_DEFAULT AC_FENCE_TYPE_ALT_MAX | AC_FENCE_TYPE_CIRCLE | AC_FENCE_TYPE_POLYGON</span></div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span> </div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span><span class="comment">// default boundaries</span></div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span><span class="preprocessor">#define AC_FENCE_ALT_MAX_DEFAULT                    100.0f  </span><span class="comment">// default max altitude is 100m</span></div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span><span class="preprocessor">#define AC_FENCE_ALT_MIN_DEFAULT                    -10.0f  </span><span class="comment">// default maximum depth in meters</span></div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span><span class="preprocessor">#define AC_FENCE_CIRCLE_RADIUS_DEFAULT              300.0f  </span><span class="comment">// default circular fence radius is 300m</span></div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span><span class="preprocessor">#define AC_FENCE_ALT_MAX_BACKUP_DISTANCE            20.0f   </span><span class="comment">// after fence is broken we recreate the fence 20m further up</span></div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span><span class="preprocessor">#define AC_FENCE_ALT_MIN_BACKUP_DISTANCE            20.0f   </span><span class="comment">// after fence is broken we recreate the fence 20m further down</span></div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span><span class="preprocessor">#define AC_FENCE_MARGIN_DEFAULT                     2.0f    </span><span class="comment">// default distance in meters that autopilot&#39;s should maintain from the fence to avoid a breach</span></div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span><span class="preprocessor">#define AC_FENCE_MANUAL_RECOVERY_TIME_MIN           10000   </span><span class="comment">// pilot has 10seconds to recover during which time the autopilot will not attempt to re-take control</span></div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span> </div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span><span class="preprocessor">#if APM_BUILD_TYPE(APM_BUILD_ArduPlane)</span></div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span><span class="preprocessor">#define AC_FENCE_CIRCLE_RADIUS_BACKUP_DISTANCE     100.0   </span><span class="comment">// after fence is broken we recreate the fence 100m further out</span></div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span><span class="preprocessor">#define AC_FENCE_CIRCLE_RADIUS_BACKUP_DISTANCE      20.0   </span><span class="comment">// after fence is broken we recreate the fence 20m further out</span></div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span> </div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span> </div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span><span class="keyword">const</span> <a class="code hl_struct" href="structAP__Param_1_1GroupInfo.html">AP_Param::GroupInfo</a> <a class="code hl_variable" href="classAC__Fence.html#aac9c39791792bfc755fceefc4b6c7c80">AC_Fence::var_info</a>[] = {</div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span>    <span class="comment">// @Param: ENABLE</span></div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span>    <span class="comment">// @DisplayName: Fence enable/disable</span></div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span>    <span class="comment">// @Description: Allows you to enable (1) or disable (0) the fence functionality</span></div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span>    <span class="comment">// @Values: 0:Disabled,1:Enabled</span></div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;ENABLE&quot;</span>,      0,  <a class="code hl_class" href="classAC__Fence.html">AC_Fence</a>,   _enabled,   0),</div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span> </div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span>    <span class="comment">// @Param: TYPE</span></div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span>    <span class="comment">// @DisplayName: Fence Type</span></div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span>    <span class="comment">// @Description: Enabled fence types held as bitmask</span></div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span>    <span class="comment">// @Bitmask{Rover}: 1:Circle Centered on Home,2:Inclusion/Exclusion Circles+Polygons</span></div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span>    <span class="comment">// @Bitmask{Copter, Plane, Sub}: 0:Max altitude,1:Circle Centered on Home,2:Inclusion/Exclusion Circles+Polygons,3:Min altitude</span></div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;TYPE&quot;</span>,        1,  <a class="code hl_class" href="classAC__Fence.html">AC_Fence</a>,   _enabled_fences,  AC_FENCE_TYPE_DEFAULT),</div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span> </div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>    <span class="comment">// @Param: ACTION</span></div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>    <span class="comment">// @DisplayName: Fence Action</span></div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span>    <span class="comment">// @Description: What action should be taken when fence is breached</span></div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span>    <span class="comment">// @Values{Copter}: 0:Report Only,1:RTL or Land,2:Always Land,3:SmartRTL or RTL or Land,4:Brake or Land,5:SmartRTL or Land</span></div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>    <span class="comment">// @Values{Rover}: 0:Report Only,1:RTL or Hold,2:Hold,3:SmartRTL or RTL or Hold,4:SmartRTL or Hold</span></div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>    <span class="comment">// @Values{Plane}: 0:Report Only,1:RTL,6:Guided,7:GuidedThrottlePass</span></div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span>    <span class="comment">// @Values: 0:Report Only,1:RTL or Land</span></div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;ACTION&quot;</span>,      2,  <a class="code hl_class" href="classAC__Fence.html">AC_Fence</a>,   _action,        <a class="code hl_define" href="AC__Fence_8h.html#a891bd0f1dfb690de706e6f61dd8848d8">AC_FENCE_ACTION_RTL_AND_LAND</a>),</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span> </div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span>    <span class="comment">// @Param{Copter, Plane, Sub}: ALT_MAX</span></div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>    <span class="comment">// @DisplayName: Fence Maximum Altitude</span></div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>    <span class="comment">// @Description: Maximum altitude allowed before geofence triggers</span></div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>    <span class="comment">// @Units: m</span></div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>    <span class="comment">// @Range: 10 1000</span></div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>    <span class="comment">// @Increment: 1</span></div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>    <a class="code hl_define" href="AP__Param_8h.html#a752a6a1d27589c64a386ab2818e7057d">AP_GROUPINFO_FRAME</a>(<span class="stringliteral">&quot;ALT_MAX&quot;</span>, 3, <a class="code hl_class" href="classAC__Fence.html">AC_Fence</a>, _alt_max, AC_FENCE_ALT_MAX_DEFAULT, <a class="code hl_define" href="AP__Param_8h.html#afdcffd80a5fa249148be6d8fdc63cb3c">AP_PARAM_FRAME_COPTER</a> | <a class="code hl_define" href="AP__Param_8h.html#aaccf2c99c335d606cf6a851c02835e46">AP_PARAM_FRAME_SUB</a> | <a class="code hl_define" href="AP__Param_8h.html#a9838c03b98e6652d227f617eb2757dd9">AP_PARAM_FRAME_TRICOPTER</a> | <a class="code hl_define" href="AP__Param_8h.html#ac1328ddd823ea908dfe71e10c9a36a2e">AP_PARAM_FRAME_HELI</a> | <a class="code hl_define" href="AP__Param_8h.html#a5def49b63b71690b19ea5a19ee3b4788">AP_PARAM_FRAME_PLANE</a>),</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span> </div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>    <span class="comment">// @Param: RADIUS</span></div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>    <span class="comment">// @DisplayName: Circular Fence Radius</span></div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>    <span class="comment">// @Description: Circle fence radius which when breached will cause an RTL</span></div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>    <span class="comment">// @Units: m</span></div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>    <span class="comment">// @Range: 30 10000</span></div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;RADIUS&quot;</span>,      4,  <a class="code hl_class" href="classAC__Fence.html">AC_Fence</a>,   _circle_radius, AC_FENCE_CIRCLE_RADIUS_DEFAULT),</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span> </div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>    <span class="comment">// @Param: MARGIN</span></div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>    <span class="comment">// @DisplayName: Fence Margin</span></div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>    <span class="comment">// @Description: Distance that autopilot&#39;s should maintain from the fence to avoid a breach</span></div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>    <span class="comment">// @Units: m</span></div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>    <span class="comment">// @Range: 1 10</span></div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;MARGIN&quot;</span>,      5,  <a class="code hl_class" href="classAC__Fence.html">AC_Fence</a>,   _margin, AC_FENCE_MARGIN_DEFAULT),</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span> </div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>    <span class="comment">// @Param: TOTAL</span></div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>    <span class="comment">// @DisplayName: Fence polygon point total</span></div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>    <span class="comment">// @Description: Number of polygon points saved in eeprom (do not update manually)</span></div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>    <span class="comment">// @Range: 1 20</span></div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;TOTAL&quot;</span>,       6,  <a class="code hl_class" href="classAC__Fence.html">AC_Fence</a>,   _total, 0),</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span> </div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>    <span class="comment">// @Param{Copter, Plane, Sub}: ALT_MIN</span></div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>    <span class="comment">// @DisplayName: Fence Minimum Altitude</span></div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>    <span class="comment">// @Description: Minimum altitude allowed before geofence triggers</span></div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span>    <span class="comment">// @Units: m</span></div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>    <span class="comment">// @Range: -100 100</span></div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>    <span class="comment">// @Increment: 1</span></div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>    <a class="code hl_define" href="AP__Param_8h.html#a752a6a1d27589c64a386ab2818e7057d">AP_GROUPINFO_FRAME</a>(<span class="stringliteral">&quot;ALT_MIN&quot;</span>,     7,  <a class="code hl_class" href="classAC__Fence.html">AC_Fence</a>,   _alt_min,       AC_FENCE_ALT_MIN_DEFAULT, <a class="code hl_define" href="AP__Param_8h.html#afdcffd80a5fa249148be6d8fdc63cb3c">AP_PARAM_FRAME_COPTER</a> | <a class="code hl_define" href="AP__Param_8h.html#aaccf2c99c335d606cf6a851c02835e46">AP_PARAM_FRAME_SUB</a> | <a class="code hl_define" href="AP__Param_8h.html#a9838c03b98e6652d227f617eb2757dd9">AP_PARAM_FRAME_TRICOPTER</a> | <a class="code hl_define" href="AP__Param_8h.html#ac1328ddd823ea908dfe71e10c9a36a2e">AP_PARAM_FRAME_HELI</a> | <a class="code hl_define" href="AP__Param_8h.html#a5def49b63b71690b19ea5a19ee3b4788">AP_PARAM_FRAME_PLANE</a>),</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span> </div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>    <span class="comment">// @Param{Plane}: RET_RALLY</span></div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>    <span class="comment">// @DisplayName: Fence Return to Rally</span></div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>    <span class="comment">// @Description: Should the vehicle return to fence return point or rally point</span></div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>    <span class="comment">// @Values: 0:Fence Return Point,1:Nearest Rally Point</span></div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>    <span class="comment">// @Range: 0 1</span></div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>    <span class="comment">// @Increment: 1</span></div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>    <a class="code hl_define" href="AP__Param_8h.html#a752a6a1d27589c64a386ab2818e7057d">AP_GROUPINFO_FRAME</a>(<span class="stringliteral">&quot;RET_RALLY&quot;</span>,   8,  <a class="code hl_class" href="classAC__Fence.html">AC_Fence</a>,   _ret_rally,       0, <a class="code hl_define" href="AP__Param_8h.html#a5def49b63b71690b19ea5a19ee3b4788">AP_PARAM_FRAME_PLANE</a>),</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span> </div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>    <span class="comment">// @Param{Plane}: RET_ALT</span></div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>    <span class="comment">// @DisplayName: Fence Return Altitude</span></div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>    <span class="comment">// @Description: Altitude the vehicle will transit to when a fence breach occurs</span></div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>    <span class="comment">// @Units: m</span></div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>    <span class="comment">// @Range: 0 32767</span></div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>    <span class="comment">// @Increment: 1</span></div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>    <a class="code hl_define" href="AP__Param_8h.html#a752a6a1d27589c64a386ab2818e7057d">AP_GROUPINFO_FRAME</a>(<span class="stringliteral">&quot;RET_ALT&quot;</span>,   9,  <a class="code hl_class" href="classAC__Fence.html">AC_Fence</a>,   _ret_altitude,       0.0f, <a class="code hl_define" href="AP__Param_8h.html#a5def49b63b71690b19ea5a19ee3b4788">AP_PARAM_FRAME_PLANE</a>),</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span> </div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>    <span class="comment">// @Param{Plane}: AUTOENABLE</span></div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>    <span class="comment">// @DisplayName: Fence Auto-Enable</span></div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>    <span class="comment">// @Description: Auto-enable of fences. AutoEnableOnTakeoff enables all configured fences after autotakeoffs reach altitude. During autolandings the fences will be disabled.  AutoEnableDisableFloorOnLanding enables all configured fences after autotakeoffs reach altitude. During autolandings only the Minimum Altitude fence will be disabled. AutoEnableOnlyWhenArmed enables all configured fences, but no fences are disabled during autolandings. However, fence breaches are ignored while executing prior breach recovery actions which may include autolandings.</span></div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>    <span class="comment">// @Values: 0:AutoEnableOff,1:AutoEnableOnTakeoff,2:AutoEnableDisableFloorOnLanding,3:AutoEnableOnlyWhenArmed</span></div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>    <span class="comment">// @Range: 0 3</span></div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>    <span class="comment">// @Increment: 1</span></div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>    <a class="code hl_define" href="AP__Param_8h.html#a752a6a1d27589c64a386ab2818e7057d">AP_GROUPINFO_FRAME</a>(<span class="stringliteral">&quot;AUTOENABLE&quot;</span>, 10, <a class="code hl_class" href="classAC__Fence.html">AC_Fence</a>, _auto_enabled, <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(AutoEnable::ALWAYS_DISABLED), <a class="code hl_define" href="AP__Param_8h.html#a5def49b63b71690b19ea5a19ee3b4788">AP_PARAM_FRAME_PLANE</a>),</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span> </div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>    <span class="comment">// @Param{Plane}: OPTIONS</span></div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>    <span class="comment">// @DisplayName: Fence options</span></div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>    <span class="comment">// @Description: 0:Disable mode change following fence action until fence breach is cleared. When bit 1 is set the allowable flight areas is the union of all polygon and circle fence areas instead of the intersection, which means a fence breach occurs only if you are outside all of the fence areas.</span></div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>    <span class="comment">// @Bitmask: 0:Disable mode change following fence action until fence breach is cleared, 1:Allow union of inclusion areas</span></div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>    <a class="code hl_define" href="AP__Param_8h.html#a752a6a1d27589c64a386ab2818e7057d">AP_GROUPINFO_FRAME</a>(<span class="stringliteral">&quot;OPTIONS&quot;</span>, 11, <a class="code hl_class" href="classAC__Fence.html">AC_Fence</a>, _options, <span class="keyword">static_cast&lt;</span>uint16_t<span class="keyword">&gt;</span>(OPTIONS::DISABLE_MODE_CHANGE), <a class="code hl_define" href="AP__Param_8h.html#a5def49b63b71690b19ea5a19ee3b4788">AP_PARAM_FRAME_PLANE</a>),</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span> </div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>    <a class="code hl_define" href="AP__Param_8h.html#a0f9acb038a5283b964b862aea8cc5051">AP_GROUPEND</a></div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>};</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span> </div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span><a class="code hl_function" href="classAC__Fence.html#ad7a09ac5f46a1d5b77c2493e393566af">AC_Fence::AC_Fence</a>()</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>{</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span><span class="preprocessor">#if CONFIG_HAL_BOARD == HAL_BOARD_SITL</span></div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAC__Fence.html#a1f3a0270715b1add73c313f3be88d628">_singleton</a> != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>        <a class="code hl_function" href="namespaceAP__HAL.html#a52edeef7d5ffaa365e1229b87c170307">AP_HAL::panic</a>(<span class="stringliteral">&quot;Fence must be singleton&quot;</span>);</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>    }</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>    <a class="code hl_variable" href="classAC__Fence.html#a1f3a0270715b1add73c313f3be88d628">_singleton</a> = <span class="keyword">this</span>;</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>    <a class="code hl_function" href="classAP__Param.html#a5f6dcfce1c0a79cf5bd81283e22f3201">AP_Param::setup_object_defaults</a>(<span class="keyword">this</span>, var_info);</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>}</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span> </div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span><span class="keywordtype">void</span> <a class="code hl_function" href="classAC__Fence.html#a049ab67fd30dd133cbb24439173a9286">AC_Fence::enable</a>(<span class="keywordtype">bool</span> <a class="code hl_class" href="classAP__JSON_1_1value.html">value</a>)</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>{</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span><span class="preprocessor">#if HAL_LOGGING_ENABLED</span></div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAC__Fence.html#aaab03c980945563ed9ae79002d7b5b1e">_enabled</a> &amp;&amp; !<a class="code hl_class" href="classAP__JSON_1_1value.html">value</a>) {</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>        <a class="code hl_function" href="namespaceAP.html#aa35bfac1ea2da16f110e8e72db7b3b20">AP::logger</a>().<a class="code hl_function" href="classAP__Logger.html#acc819f09dd35b615500c4dec658519d2">Write_Event</a>(<a class="code hl_enumvalue" href="AP__Logger_8h.html#abfb7fdeeabd95c90488508e20c5ea981af2c7d4de27fa69e526bc0feb560f2bf2">LogEvent::FENCE_DISABLE</a>);</div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classAC__Fence.html#aaab03c980945563ed9ae79002d7b5b1e">_enabled</a> &amp;&amp; <a class="code hl_class" href="classAP__JSON_1_1value.html">value</a>) {</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>        <a class="code hl_function" href="namespaceAP.html#aa35bfac1ea2da16f110e8e72db7b3b20">AP::logger</a>().<a class="code hl_function" href="classAP__Logger.html#acc819f09dd35b615500c4dec658519d2">Write_Event</a>(<a class="code hl_enumvalue" href="AP__Logger_8h.html#abfb7fdeeabd95c90488508e20c5ea981a2df6d8ccdb8d5dad8198bbe42cd2ce58">LogEvent::FENCE_ENABLE</a>);</div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>    }</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>    <a class="code hl_variable" href="classAC__Fence.html#aaab03c980945563ed9ae79002d7b5b1e">_enabled</a>.set(<a class="code hl_class" href="classAP__JSON_1_1value.html">value</a>);</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>    <span class="keywordflow">if</span> (!<a class="code hl_class" href="classAP__JSON_1_1value.html">value</a>) {</div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>        <a class="code hl_function" href="classAC__Fence.html#abffb87707643347f6bde6a085f5fec2a">clear_breach</a>(<a class="code hl_define" href="AC__Fence_8h.html#a59d24be6af70247389fefab47eb70466">AC_FENCE_TYPE_ALT_MIN</a> | <a class="code hl_define" href="AC__Fence_8h.html#a25ae7d3ea4c5f0872a8f1361b363a639">AC_FENCE_TYPE_ALT_MAX</a> | <a class="code hl_define" href="AC__Fence_8h.html#a8078609b52ef3d0325edd8c5a288913e">AC_FENCE_TYPE_CIRCLE</a> | <a class="code hl_define" href="AC__Fence_8h.html#ac2819f73d591766f42bfcfc1fa41c057">AC_FENCE_TYPE_POLYGON</a>);</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>        <a class="code hl_function" href="classAC__Fence.html#acfdf8e3bcc8431a10ff7768a99de7149">disable_floor</a>();</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>        <a class="code hl_function" href="classAC__Fence.html#ac6fe40b20cce08f1c581d13cf67b0f72">enable_floor</a>();</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>    }</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>}</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span> </div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span><span class="keywordtype">void</span> <a class="code hl_function" href="classAC__Fence.html#ac6fe40b20cce08f1c581d13cf67b0f72">AC_Fence::enable_floor</a>()</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>{</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span><span class="preprocessor">#if HAL_LOGGING_ENABLED</span></div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classAC__Fence.html#a2605992bd9dd6f7f51d07c16ce144ccd">_floor_enabled</a>) {</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>        <span class="comment">// Floor is currently disabled, enable it</span></div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>        <a class="code hl_function" href="namespaceAP.html#aa35bfac1ea2da16f110e8e72db7b3b20">AP::logger</a>().<a class="code hl_function" href="classAP__Logger.html#acc819f09dd35b615500c4dec658519d2">Write_Event</a>(<a class="code hl_enumvalue" href="AP__Logger_8h.html#abfb7fdeeabd95c90488508e20c5ea981a6fdd365f65c8e729f7d74bc56a7c61bb">LogEvent::FENCE_FLOOR_ENABLE</a>);</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>    }</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>    <a class="code hl_variable" href="classAC__Fence.html#a2605992bd9dd6f7f51d07c16ce144ccd">_floor_enabled</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>}</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span> </div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span><span class="keywordtype">void</span> <a class="code hl_function" href="classAC__Fence.html#acfdf8e3bcc8431a10ff7768a99de7149">AC_Fence::disable_floor</a>()</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>{</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span><span class="preprocessor">#if HAL_LOGGING_ENABLED</span></div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAC__Fence.html#a2605992bd9dd6f7f51d07c16ce144ccd">_floor_enabled</a>) {</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>        <span class="comment">// Floor is currently enabled, disable it</span></div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>        <a class="code hl_function" href="namespaceAP.html#aa35bfac1ea2da16f110e8e72db7b3b20">AP::logger</a>().<a class="code hl_function" href="classAP__Logger.html#acc819f09dd35b615500c4dec658519d2">Write_Event</a>(<a class="code hl_enumvalue" href="AP__Logger_8h.html#abfb7fdeeabd95c90488508e20c5ea981a12ed8807f7173e9a64c3cad3dfe9bd9c">LogEvent::FENCE_FLOOR_DISABLE</a>);</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>    }</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span>    <a class="code hl_variable" href="classAC__Fence.html#a2605992bd9dd6f7f51d07c16ce144ccd">_floor_enabled</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>    <a class="code hl_function" href="classAC__Fence.html#abffb87707643347f6bde6a085f5fec2a">clear_breach</a>(<a class="code hl_define" href="AC__Fence_8h.html#a59d24be6af70247389fefab47eb70466">AC_FENCE_TYPE_ALT_MIN</a>);</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>}</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span> </div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span><span class="comment">/*</span></div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span><span class="comment">  called when an auto-takeoff is complete</span></div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span><span class="comment">*/</span></div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span><span class="keywordtype">void</span> <a class="code hl_function" href="classAC__Fence.html#aec25c6879cf00417bb1fb4d48c9ca70f">AC_Fence::auto_enable_fence_after_takeoff</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>{</div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAC__Fence.html#aaab03c980945563ed9ae79002d7b5b1e">_enabled</a>) {</div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>    } </div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span>    <span class="keywordflow">switch</span>(<a class="code hl_function" href="classAC__Fence.html#ab7efc0e2e81e68b3fbbab7faff3ae63b">auto_enabled</a>()) {</div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAC__Fence.html#a3995332aeef635395d2374b85ea8b746a591a773392e0ac43aff7463ecf7b997f">AC_Fence::AutoEnable::ALWAYS_ENABLED</a>:</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAC__Fence.html#a3995332aeef635395d2374b85ea8b746a26169300902ecf3b9a5e45922c651856">AC_Fence::AutoEnable::ENABLE_DISABLE_FLOOR_ONLY</a>:</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>            <a class="code hl_function" href="classAC__Fence.html#a049ab67fd30dd133cbb24439173a9286">enable</a>(<span class="keyword">true</span>);</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>            <a class="code hl_define" href="GCS_8h.html#a266bfe8eda675e1092f045e93932b4a6">GCS_SEND_TEXT</a>(MAV_SEVERITY_NOTICE, <span class="stringliteral">&quot;Fence enabled (auto enabled)&quot;</span>);</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>            <span class="comment">// fence does not auto-enable in other takeoff conditions</span></div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>    }</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>}</div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span> </div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span><span class="comment">/*</span></div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span><span class="comment">  called when performing an auto landing</span></div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span><span class="comment"> */</span></div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span><span class="keywordtype">void</span> <a class="code hl_function" href="classAC__Fence.html#a2df818846d47d5df3f6f278e43bfea27">AC_Fence::auto_disable_fence_for_landing</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>{</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>    <span class="keywordflow">switch</span> (<a class="code hl_function" href="classAC__Fence.html#ab7efc0e2e81e68b3fbbab7faff3ae63b">auto_enabled</a>()) {</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAC__Fence.html#a3995332aeef635395d2374b85ea8b746a591a773392e0ac43aff7463ecf7b997f">AC_Fence::AutoEnable::ALWAYS_ENABLED</a>:</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>            <a class="code hl_function" href="classAC__Fence.html#a049ab67fd30dd133cbb24439173a9286">enable</a>(<span class="keyword">false</span>);</div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>            <a class="code hl_define" href="GCS_8h.html#a266bfe8eda675e1092f045e93932b4a6">GCS_SEND_TEXT</a>(MAV_SEVERITY_NOTICE, <span class="stringliteral">&quot;Fence disabled (auto disable)&quot;</span>);</div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAC__Fence.html#a3995332aeef635395d2374b85ea8b746a26169300902ecf3b9a5e45922c651856">AC_Fence::AutoEnable::ENABLE_DISABLE_FLOOR_ONLY</a>:</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>            <a class="code hl_function" href="classAC__Fence.html#acfdf8e3bcc8431a10ff7768a99de7149">disable_floor</a>();</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>            <a class="code hl_define" href="GCS_8h.html#a266bfe8eda675e1092f045e93932b4a6">GCS_SEND_TEXT</a>(MAV_SEVERITY_NOTICE, <span class="stringliteral">&quot;Fence floor disabled (auto disable)&quot;</span>);</div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>            <span class="comment">// fence does not auto-disable in other landing conditions</span></div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>    }</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>}</div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span> </div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span><span class="keywordtype">bool</span> <a class="code hl_function" href="classAC__Fence.html#a66dc7837ee6762c950605dfcead343ca">AC_Fence::present</a>()<span class="keyword"> const</span></div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span><span class="keyword"></span>{</div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span>    <span class="keyword">const</span> <span class="keyword">auto</span> enabled_fences = <a class="code hl_variable" href="classAC__Fence.html#a50e9929c6135853a40f67d24a2e33b77">_enabled_fences</a>.get();</div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>    <span class="comment">// A fence is present if any of the conditions are true.</span></div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>    <span class="comment">//   * tin can (circle) is enabled</span></div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>    <span class="comment">//   * min or max alt is enabled</span></div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>    <span class="comment">//   * polygon fences are enabled and any fence has been uploaded</span></div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>    <span class="keywordflow">if</span> (enabled_fences &amp; <a class="code hl_define" href="AC__Fence_8h.html#a8078609b52ef3d0325edd8c5a288913e">AC_FENCE_TYPE_CIRCLE</a> ||</div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>        enabled_fences &amp; <a class="code hl_define" href="AC__Fence_8h.html#a59d24be6af70247389fefab47eb70466">AC_FENCE_TYPE_ALT_MIN</a> ||</div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>        enabled_fences &amp; <a class="code hl_define" href="AC__Fence_8h.html#a25ae7d3ea4c5f0872a8f1361b363a639">AC_FENCE_TYPE_ALT_MAX</a> ||</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>        ((enabled_fences &amp; <a class="code hl_define" href="AC__Fence_8h.html#ac2819f73d591766f42bfcfc1fa41c057">AC_FENCE_TYPE_POLYGON</a>) &amp;&amp; <a class="code hl_variable" href="classAC__Fence.html#a02f5aea772f6b73814ddad2ac5f1828b">_poly_loader</a>.<a class="code hl_function" href="classAC__PolyFence__loader.html#a1fe32810f46488cdf6aad79c15533b98">total_fence_count</a>() &gt; 0)) {</div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>    }</div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span> </div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>}</div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span> </div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>uint8_t <a class="code hl_function" href="classAC__Fence.html#a1c191248ef154bb17da4795498b2fc03">AC_Fence::get_enabled_fences</a>()<span class="keyword"> const</span></div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span><span class="keyword"></span>{</div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classAC__Fence.html#aaab03c980945563ed9ae79002d7b5b1e">_enabled</a> &amp;&amp; !<a class="code hl_variable" href="classAC__Fence.html#af2ad75b14baad838cb61416a6140b592">_auto_enabled</a>) {</div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>    }</div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classAC__Fence.html#a50e9929c6135853a40f67d24a2e33b77">_enabled_fences</a>;</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>}</div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span> </div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span><span class="comment">// additional checks for the polygon fence:</span></div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span><span class="keywordtype">bool</span> <a class="code hl_function" href="classAC__Fence.html#a44e87044bf07cb5dd2b2399bf59c7feb">AC_Fence::pre_arm_check_polygon</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* &amp;fail_msg)<span class="keyword"> const</span></div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span><span class="keyword"></span>{</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>    <span class="keywordflow">if</span> (!(<a class="code hl_variable" href="classAC__Fence.html#a50e9929c6135853a40f67d24a2e33b77">_enabled_fences</a> &amp; <a class="code hl_define" href="AC__Fence_8h.html#ac2819f73d591766f42bfcfc1fa41c057">AC_FENCE_TYPE_POLYGON</a>)) {</div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>        <span class="comment">// not enabled; all good</span></div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span>    }</div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span> </div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>    <span class="keywordflow">if</span> (! <a class="code hl_variable" href="classAC__Fence.html#a02f5aea772f6b73814ddad2ac5f1828b">_poly_loader</a>.<a class="code hl_function" href="classAC__PolyFence__loader.html#a38885641f6be9b5e2f507f5abb06e92b">loaded</a>()) {</div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>        fail_msg = <span class="stringliteral">&quot;Fences invalid&quot;</span>;</div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span>    }</div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span> </div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classAC__Fence.html#a02f5aea772f6b73814ddad2ac5f1828b">_poly_loader</a>.<a class="code hl_function" href="classAC__PolyFence__loader.html#a9573e3ae1c8d2997d85cd081479e895d">check_inclusion_circle_margin</a>(<a class="code hl_variable" href="classAC__Fence.html#a2708e05d5c8cbf227e5c6b5fa05332b9">_margin</a>)) {</div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span>        fail_msg = <span class="stringliteral">&quot;Margin is less than inclusion circle radius&quot;</span>;</div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>    }</div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span> </div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span>}</div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span> </div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span><span class="comment">// additional checks for the circle fence:</span></div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span><span class="keywordtype">bool</span> <a class="code hl_function" href="classAC__Fence.html#a8880a449f2e5c05078c41106ae9a9a75">AC_Fence::pre_arm_check_circle</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* &amp;fail_msg)<span class="keyword"> const</span></div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span><span class="keyword"></span>{</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAC__Fence.html#abae8d67d909b67f2ea35aa8ceb70bdaf">_circle_radius</a> &lt; 0) {</div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>        fail_msg = <span class="stringliteral">&quot;Invalid FENCE_RADIUS value&quot;</span>;</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>    }</div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAC__Fence.html#abae8d67d909b67f2ea35aa8ceb70bdaf">_circle_radius</a> &lt; <a class="code hl_variable" href="classAC__Fence.html#a2708e05d5c8cbf227e5c6b5fa05332b9">_margin</a>) {</div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>        fail_msg = <span class="stringliteral">&quot;FENCE_MARGIN is less than FENCE_RADIUS&quot;</span>;</div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>    }</div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span> </div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>}</div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span> </div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span><span class="comment">// additional checks for the alt fence:</span></div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span><span class="keywordtype">bool</span> <a class="code hl_function" href="classAC__Fence.html#a2e1b31469e12ba2749555d89d8892d5f">AC_Fence::pre_arm_check_alt</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* &amp;fail_msg)<span class="keyword"> const</span></div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span><span class="keyword"></span>{</div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAC__Fence.html#a54e4175384bd580418514c190a77e902">_alt_max</a> &lt; 0.0f) {</div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>        fail_msg = <span class="stringliteral">&quot;Invalid FENCE_ALT_MAX value&quot;</span>;</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>    }</div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span> </div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAC__Fence.html#a7ebf5b0a5f3f3e1e499f06c0d9f2821d">_alt_min</a> &lt; -100.0f) {</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>        fail_msg = <span class="stringliteral">&quot;Invalid FENCE_ALT_MIN value&quot;</span>;</div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>    }</div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>}</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span> </div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span> </div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span><span class="keywordtype">bool</span> <a class="code hl_function" href="classAC__Fence.html#ae46cc9ba79d869296585e41a2702621e">AC_Fence::pre_arm_check</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* &amp;fail_msg)<span class="keyword"> const</span></div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span><span class="keyword"></span>{</div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>    fail_msg = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span> </div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>    <span class="comment">// if fences are enabled but none selected fail pre-arm check</span></div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="classAC__Fence.html#a6bed7149b276214cbe954b1f977cbdab">enabled</a>() &amp;&amp; !<a class="code hl_function" href="classAC__Fence.html#a66dc7837ee6762c950605dfcead343ca">present</a>()) {</div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>        fail_msg = <span class="stringliteral">&quot;Fences enabled, but none selected&quot;</span>;</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>    }</div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span> </div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>    <span class="comment">// if not enabled or not fence set-up always return true</span></div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>    <span class="keywordflow">if</span> ((!<a class="code hl_variable" href="classAC__Fence.html#aaab03c980945563ed9ae79002d7b5b1e">_enabled</a> &amp;&amp; !<a class="code hl_variable" href="classAC__Fence.html#af2ad75b14baad838cb61416a6140b592">_auto_enabled</a>) || !<a class="code hl_variable" href="classAC__Fence.html#a50e9929c6135853a40f67d24a2e33b77">_enabled_fences</a>) {</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span>    }</div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span> </div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>    <span class="comment">// if we have horizontal limits enabled, check we can get a</span></div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>    <span class="comment">// relative position from the AHRS</span></div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>    <span class="keywordflow">if</span> ((<a class="code hl_variable" href="classAC__Fence.html#a50e9929c6135853a40f67d24a2e33b77">_enabled_fences</a> &amp; <a class="code hl_define" href="AC__Fence_8h.html#a8078609b52ef3d0325edd8c5a288913e">AC_FENCE_TYPE_CIRCLE</a>) ||</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>        (<a class="code hl_variable" href="classAC__Fence.html#a50e9929c6135853a40f67d24a2e33b77">_enabled_fences</a> &amp; <a class="code hl_define" href="AC__Fence_8h.html#ac2819f73d591766f42bfcfc1fa41c057">AC_FENCE_TYPE_POLYGON</a>)) {</div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>        <a class="code hl_class" href="structVector2.html">Vector2f</a> position;</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="namespaceAP.html#a99432cfdb696952c9b7146f155a815aa">AP::ahrs</a>().get_relative_position_NE_home(position)) {</div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>            fail_msg = <span class="stringliteral">&quot;Fence requires position&quot;</span>;</div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>        }</div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>    }</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span> </div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="classAC__Fence.html#a44e87044bf07cb5dd2b2399bf59c7feb">pre_arm_check_polygon</a>(fail_msg)) {</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span>    }</div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span> </div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="classAC__Fence.html#a8880a449f2e5c05078c41106ae9a9a75">pre_arm_check_circle</a>(fail_msg)) {</div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>    }</div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span> </div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="classAC__Fence.html#a2e1b31469e12ba2749555d89d8892d5f">pre_arm_check_alt</a>(fail_msg)) {</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span>    }</div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span> </div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span>    <span class="comment">// check no limits are currently breached</span></div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAC__Fence.html#a32db232f7e9c6adbdf03ce58f7e4d7b1">_breached_fences</a>) {</div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span>        fail_msg =  <span class="stringliteral">&quot;vehicle outside fence&quot;</span>;</div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>    }</div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span> </div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>    <span class="comment">// validate FENCE_MARGIN parameter range</span></div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAC__Fence.html#a2708e05d5c8cbf227e5c6b5fa05332b9">_margin</a> &lt; 0.0f) {</div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span>        fail_msg = <span class="stringliteral">&quot;Invalid FENCE_MARGIN value&quot;</span>;</div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>    }</div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span> </div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAC__Fence.html#a54e4175384bd580418514c190a77e902">_alt_max</a> &lt; <a class="code hl_variable" href="classAC__Fence.html#a7ebf5b0a5f3f3e1e499f06c0d9f2821d">_alt_min</a>) {</div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>        fail_msg =  <span class="stringliteral">&quot;FENCE_ALT_MAX &lt; FENCE_ALT_MIN&quot;</span>;</div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span>    }</div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span> </div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAC__Fence.html#a54e4175384bd580418514c190a77e902">_alt_max</a> - <a class="code hl_variable" href="classAC__Fence.html#a7ebf5b0a5f3f3e1e499f06c0d9f2821d">_alt_min</a> &lt;= 2.0f * <a class="code hl_variable" href="classAC__Fence.html#a2708e05d5c8cbf227e5c6b5fa05332b9">_margin</a>) {</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>        fail_msg =  <span class="stringliteral">&quot;FENCE_MARGIN too big&quot;</span>;</div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>    }</div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span> </div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span>    <span class="comment">// if we got this far everything must be ok</span></div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span>}</div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span> </div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span><span class="keywordtype">bool</span> <a class="code hl_function" href="classAC__Fence.html#adae81127f1110dd08c7137a6b8aac956">AC_Fence::check_fence_alt_max</a>()</div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span>{</div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span>    <span class="comment">// altitude fence check</span></div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span>    <span class="keywordflow">if</span> (!(<a class="code hl_variable" href="classAC__Fence.html#a50e9929c6135853a40f67d24a2e33b77">_enabled_fences</a> &amp; <a class="code hl_define" href="AC__Fence_8h.html#a25ae7d3ea4c5f0872a8f1361b363a639">AC_FENCE_TYPE_ALT_MAX</a>)) {</div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span>        <span class="comment">// not enabled; no breach</span></div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span>    }</div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span> </div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span>    <a class="code hl_function" href="namespaceAP.html#a99432cfdb696952c9b7146f155a815aa">AP::ahrs</a>().<a class="code hl_function" href="classAP__AHRS.html#a0ce7fb0e943712be46d2ec00e2c7e7de">get_relative_position_D_home</a>(<a class="code hl_variable" href="classAC__Fence.html#aefa0eacd69a9085a339322033a318ac8">_curr_alt</a>);</div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span>    <a class="code hl_variable" href="classAC__Fence.html#aefa0eacd69a9085a339322033a318ac8">_curr_alt</a> = -<a class="code hl_variable" href="classAC__Fence.html#aefa0eacd69a9085a339322033a318ac8">_curr_alt</a>; <span class="comment">// translate Down to Up</span></div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span> </div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span>    <span class="comment">// check if we are over the altitude fence</span></div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAC__Fence.html#aefa0eacd69a9085a339322033a318ac8">_curr_alt</a> &gt;= <a class="code hl_variable" href="classAC__Fence.html#a54e4175384bd580418514c190a77e902">_alt_max</a>) {</div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span> </div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span>        <span class="comment">// record distance above breach</span></div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span>        <a class="code hl_variable" href="classAC__Fence.html#a3ef2bf61f0ea360e494c3811e2e81ad8">_alt_max_breach_distance</a> = <a class="code hl_variable" href="classAC__Fence.html#aefa0eacd69a9085a339322033a318ac8">_curr_alt</a> - <a class="code hl_variable" href="classAC__Fence.html#a54e4175384bd580418514c190a77e902">_alt_max</a>;</div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span> </div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span>        <span class="comment">// check for a new breach or a breach of the backup fence</span></div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span>        <span class="keywordflow">if</span> (!(<a class="code hl_variable" href="classAC__Fence.html#a32db232f7e9c6adbdf03ce58f7e4d7b1">_breached_fences</a> &amp; <a class="code hl_define" href="AC__Fence_8h.html#a25ae7d3ea4c5f0872a8f1361b363a639">AC_FENCE_TYPE_ALT_MAX</a>) ||</div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span>            (!<a class="code hl_function" href="AP__Math_8h.html#a2a12cce483e9b870da70d30406d82c60">is_zero</a>(<a class="code hl_variable" href="classAC__Fence.html#a30343ca9219b07d3b6b11210dd93529f">_alt_max_backup</a>) &amp;&amp; <a class="code hl_variable" href="classAC__Fence.html#aefa0eacd69a9085a339322033a318ac8">_curr_alt</a> &gt;= <a class="code hl_variable" href="classAC__Fence.html#a30343ca9219b07d3b6b11210dd93529f">_alt_max_backup</a>)) {</div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span> </div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span>            <span class="comment">// new breach</span></div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span>            <a class="code hl_function" href="classAC__Fence.html#a501071ae142ab3cf07ffa27b5e926d76">record_breach</a>(<a class="code hl_define" href="AC__Fence_8h.html#a25ae7d3ea4c5f0872a8f1361b363a639">AC_FENCE_TYPE_ALT_MAX</a>);</div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span> </div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>            <span class="comment">// create a backup fence 20m higher up</span></div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span>            <a class="code hl_variable" href="classAC__Fence.html#a30343ca9219b07d3b6b11210dd93529f">_alt_max_backup</a> = <a class="code hl_variable" href="classAC__Fence.html#aefa0eacd69a9085a339322033a318ac8">_curr_alt</a> + AC_FENCE_ALT_MAX_BACKUP_DISTANCE;</div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span>            <span class="comment">// new breach</span></div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span>        }</div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span>        <span class="comment">// old breach</span></div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span>    }</div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span> </div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span>    <span class="comment">// not breached</span></div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span> </div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span>    <span class="comment">// clear max alt breach if present</span></div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span>    <span class="keywordflow">if</span> ((<a class="code hl_variable" href="classAC__Fence.html#a32db232f7e9c6adbdf03ce58f7e4d7b1">_breached_fences</a> &amp; <a class="code hl_define" href="AC__Fence_8h.html#a25ae7d3ea4c5f0872a8f1361b363a639">AC_FENCE_TYPE_ALT_MAX</a>) != 0) {</div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span>        <a class="code hl_function" href="classAC__Fence.html#abffb87707643347f6bde6a085f5fec2a">clear_breach</a>(<a class="code hl_define" href="AC__Fence_8h.html#a25ae7d3ea4c5f0872a8f1361b363a639">AC_FENCE_TYPE_ALT_MAX</a>);</div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span>        <a class="code hl_variable" href="classAC__Fence.html#a30343ca9219b07d3b6b11210dd93529f">_alt_max_backup</a> = 0.0f;</div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span>        <a class="code hl_variable" href="classAC__Fence.html#a3ef2bf61f0ea360e494c3811e2e81ad8">_alt_max_breach_distance</a> = 0.0f;</div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span>    }</div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span> </div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno">  432</span>}</div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span> </div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span><span class="keywordtype">bool</span> <a class="code hl_function" href="classAC__Fence.html#a6a3ea58ff2a865c2b31f57d682d5b6ae">AC_Fence::check_fence_alt_min</a>()</div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span>{</div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span>    <span class="comment">// altitude fence check</span></div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span>    <span class="keywordflow">if</span> (!(<a class="code hl_variable" href="classAC__Fence.html#a50e9929c6135853a40f67d24a2e33b77">_enabled_fences</a> &amp; <a class="code hl_define" href="AC__Fence_8h.html#a59d24be6af70247389fefab47eb70466">AC_FENCE_TYPE_ALT_MIN</a>)) {</div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span>        <span class="comment">// not enabled; no breach</span></div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span>    }</div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span> </div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span>    <a class="code hl_function" href="namespaceAP.html#a99432cfdb696952c9b7146f155a815aa">AP::ahrs</a>().<a class="code hl_function" href="classAP__AHRS.html#a0ce7fb0e943712be46d2ec00e2c7e7de">get_relative_position_D_home</a>(<a class="code hl_variable" href="classAC__Fence.html#aefa0eacd69a9085a339322033a318ac8">_curr_alt</a>);</div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span>    <a class="code hl_variable" href="classAC__Fence.html#aefa0eacd69a9085a339322033a318ac8">_curr_alt</a> = -<a class="code hl_variable" href="classAC__Fence.html#aefa0eacd69a9085a339322033a318ac8">_curr_alt</a>; <span class="comment">// translate Down to Up</span></div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span> </div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span>    <span class="comment">// check if we are under the altitude fence</span></div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAC__Fence.html#aefa0eacd69a9085a339322033a318ac8">_curr_alt</a> &lt;= <a class="code hl_variable" href="classAC__Fence.html#a7ebf5b0a5f3f3e1e499f06c0d9f2821d">_alt_min</a>) {</div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span> </div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span>        <span class="comment">// record distance below breach</span></div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span>        <a class="code hl_variable" href="classAC__Fence.html#a9cd428de13ed847ee9b7808a7c155ad5">_alt_min_breach_distance</a> = <a class="code hl_variable" href="classAC__Fence.html#a7ebf5b0a5f3f3e1e499f06c0d9f2821d">_alt_min</a> - <a class="code hl_variable" href="classAC__Fence.html#aefa0eacd69a9085a339322033a318ac8">_curr_alt</a>;</div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span> </div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span>        <span class="comment">// check for a new breach or a breach of the backup fence</span></div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span>        <span class="keywordflow">if</span> (!(<a class="code hl_variable" href="classAC__Fence.html#a32db232f7e9c6adbdf03ce58f7e4d7b1">_breached_fences</a> &amp; <a class="code hl_define" href="AC__Fence_8h.html#a59d24be6af70247389fefab47eb70466">AC_FENCE_TYPE_ALT_MIN</a>) ||</div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span>            (!<a class="code hl_function" href="AP__Math_8h.html#a2a12cce483e9b870da70d30406d82c60">is_zero</a>(<a class="code hl_variable" href="classAC__Fence.html#a66662a5ace914e441dbd24691f42bace">_alt_min_backup</a>) &amp;&amp; <a class="code hl_variable" href="classAC__Fence.html#aefa0eacd69a9085a339322033a318ac8">_curr_alt</a> &lt;= <a class="code hl_variable" href="classAC__Fence.html#a66662a5ace914e441dbd24691f42bace">_alt_min_backup</a>)) {</div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span> </div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span>            <span class="comment">// new breach</span></div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span>            <a class="code hl_function" href="classAC__Fence.html#a501071ae142ab3cf07ffa27b5e926d76">record_breach</a>(<a class="code hl_define" href="AC__Fence_8h.html#a59d24be6af70247389fefab47eb70466">AC_FENCE_TYPE_ALT_MIN</a>);</div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno">  460</span> </div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span>            <span class="comment">// create a backup fence 20m lower down</span></div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span>            <a class="code hl_variable" href="classAC__Fence.html#a66662a5ace914e441dbd24691f42bace">_alt_min_backup</a> = <a class="code hl_variable" href="classAC__Fence.html#aefa0eacd69a9085a339322033a318ac8">_curr_alt</a> - AC_FENCE_ALT_MIN_BACKUP_DISTANCE;</div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span>            <span class="comment">// new breach</span></div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span>        }</div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span>        <span class="comment">// old breach</span></div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span>    }</div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span> </div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span>    <span class="comment">// not breached</span></div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span> </div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span>    <span class="comment">// clear min alt breach if present</span></div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span>    <span class="keywordflow">if</span> ((<a class="code hl_variable" href="classAC__Fence.html#a32db232f7e9c6adbdf03ce58f7e4d7b1">_breached_fences</a> &amp; <a class="code hl_define" href="AC__Fence_8h.html#a59d24be6af70247389fefab47eb70466">AC_FENCE_TYPE_ALT_MIN</a>) != 0) {</div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span>        <a class="code hl_function" href="classAC__Fence.html#abffb87707643347f6bde6a085f5fec2a">clear_breach</a>(<a class="code hl_define" href="AC__Fence_8h.html#a59d24be6af70247389fefab47eb70466">AC_FENCE_TYPE_ALT_MIN</a>);</div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span>        <a class="code hl_variable" href="classAC__Fence.html#a66662a5ace914e441dbd24691f42bace">_alt_min_backup</a> = 0.0f;</div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span>        <a class="code hl_variable" href="classAC__Fence.html#a9cd428de13ed847ee9b7808a7c155ad5">_alt_min_breach_distance</a> = 0.0f;</div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span>    }</div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span> </div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span>}</div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span> </div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span><span class="comment">// check_fence_polygon - returns true if the poly fence is freshly</span></div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span><span class="comment">// breached.  That includes being inside exclusion zones and outside</span></div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span><span class="comment">// inclusions zones</span></div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span><span class="keywordtype">bool</span> <a class="code hl_function" href="classAC__Fence.html#a77b1b81a26b6ddbdc933bf2ce3310514">AC_Fence::check_fence_polygon</a>()</div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span>{</div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> was_breached = <a class="code hl_variable" href="classAC__Fence.html#a32db232f7e9c6adbdf03ce58f7e4d7b1">_breached_fences</a> &amp; <a class="code hl_define" href="AC__Fence_8h.html#ac2819f73d591766f42bfcfc1fa41c057">AC_FENCE_TYPE_POLYGON</a>;</div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> breached = ((<a class="code hl_variable" href="classAC__Fence.html#a50e9929c6135853a40f67d24a2e33b77">_enabled_fences</a> &amp; <a class="code hl_define" href="AC__Fence_8h.html#ac2819f73d591766f42bfcfc1fa41c057">AC_FENCE_TYPE_POLYGON</a>) &amp;&amp;</div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span>                           <a class="code hl_variable" href="classAC__Fence.html#a02f5aea772f6b73814ddad2ac5f1828b">_poly_loader</a>.<a class="code hl_function" href="classAC__PolyFence__loader.html#adce8261dd60449241bd1014253c88ac8">breached</a>());</div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno">  490</span>    <span class="keywordflow">if</span> (breached) {</div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno">  491</span>        <span class="keywordflow">if</span> (!was_breached) {</div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno">  492</span>            <a class="code hl_function" href="classAC__Fence.html#a501071ae142ab3cf07ffa27b5e926d76">record_breach</a>(<a class="code hl_define" href="AC__Fence_8h.html#ac2819f73d591766f42bfcfc1fa41c057">AC_FENCE_TYPE_POLYGON</a>);</div>
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span>        }</div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno">  496</span>    }</div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span>    <span class="keywordflow">if</span> (was_breached) {</div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno">  498</span>        <a class="code hl_function" href="classAC__Fence.html#abffb87707643347f6bde6a085f5fec2a">clear_breach</a>(<a class="code hl_define" href="AC__Fence_8h.html#ac2819f73d591766f42bfcfc1fa41c057">AC_FENCE_TYPE_POLYGON</a>);</div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span>    }</div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span>}</div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span> </div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span><span class="keywordtype">bool</span> <a class="code hl_function" href="classAC__Fence.html#aaa3fd6fe8cb03492cf4f1a22046db02c">AC_Fence::check_fence_circle</a>()</div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span>{</div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span>    <span class="keywordflow">if</span> (!(<a class="code hl_variable" href="classAC__Fence.html#a50e9929c6135853a40f67d24a2e33b77">_enabled_fences</a> &amp; <a class="code hl_define" href="AC__Fence_8h.html#a8078609b52ef3d0325edd8c5a288913e">AC_FENCE_TYPE_CIRCLE</a>)) {</div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno">  510</span>        <span class="comment">// not enabled; no breach</span></div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span>    }</div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span> </div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span>    <a class="code hl_class" href="structVector2.html">Vector2f</a> home;</div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="namespaceAP.html#a99432cfdb696952c9b7146f155a815aa">AP::ahrs</a>().get_relative_position_NE_home(home)) {</div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno">  516</span>        <span class="comment">// we (may) remain breached if we can&#39;t update home</span></div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span>        <a class="code hl_variable" href="classAC__Fence.html#a1640757eb9125b41961cea5c1eff3341">_home_distance</a> = home.<a class="code hl_function" href="structVector2.html#aed3cf4803ee803dc1447985ca323178f">length</a>();</div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span>    }</div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno">  519</span> </div>
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno">  520</span>    <span class="comment">// check if we are outside the fence</span></div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno">  521</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAC__Fence.html#a1640757eb9125b41961cea5c1eff3341">_home_distance</a> &gt;= <a class="code hl_variable" href="classAC__Fence.html#abae8d67d909b67f2ea35aa8ceb70bdaf">_circle_radius</a>) {</div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno">  522</span> </div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span>        <span class="comment">// record distance outside the fence</span></div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno">  524</span>        <a class="code hl_variable" href="classAC__Fence.html#a97e656d93344486b6b143e560b6a7495">_circle_breach_distance</a> = <a class="code hl_variable" href="classAC__Fence.html#a1640757eb9125b41961cea5c1eff3341">_home_distance</a> - <a class="code hl_variable" href="classAC__Fence.html#abae8d67d909b67f2ea35aa8ceb70bdaf">_circle_radius</a>;</div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno">  525</span> </div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno">  526</span>        <span class="comment">// check for a new breach or a breach of the backup fence</span></div>
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno">  527</span>        <span class="keywordflow">if</span> (!(<a class="code hl_variable" href="classAC__Fence.html#a32db232f7e9c6adbdf03ce58f7e4d7b1">_breached_fences</a> &amp; <a class="code hl_define" href="AC__Fence_8h.html#a8078609b52ef3d0325edd8c5a288913e">AC_FENCE_TYPE_CIRCLE</a>) ||</div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno">  528</span>            (!<a class="code hl_function" href="AP__Math_8h.html#a2a12cce483e9b870da70d30406d82c60">is_zero</a>(<a class="code hl_variable" href="classAC__Fence.html#a775b2f0019418843d6c0c105ed24bf1d">_circle_radius_backup</a>) &amp;&amp; <a class="code hl_variable" href="classAC__Fence.html#a1640757eb9125b41961cea5c1eff3341">_home_distance</a> &gt;= <a class="code hl_variable" href="classAC__Fence.html#a775b2f0019418843d6c0c105ed24bf1d">_circle_radius_backup</a>)) {</div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno">  529</span>            <span class="comment">// new breach</span></div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno">  530</span>            <span class="comment">// create a backup fence 20m or 100m further out</span></div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span>            <a class="code hl_function" href="classAC__Fence.html#a501071ae142ab3cf07ffa27b5e926d76">record_breach</a>(<a class="code hl_define" href="AC__Fence_8h.html#a8078609b52ef3d0325edd8c5a288913e">AC_FENCE_TYPE_CIRCLE</a>);</div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span>            <a class="code hl_variable" href="classAC__Fence.html#a775b2f0019418843d6c0c105ed24bf1d">_circle_radius_backup</a> = <a class="code hl_variable" href="classAC__Fence.html#a1640757eb9125b41961cea5c1eff3341">_home_distance</a> + AC_FENCE_CIRCLE_RADIUS_BACKUP_DISTANCE;</div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno">  534</span>        }</div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span>    }</div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno">  537</span> </div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno">  538</span>    <span class="comment">// not currently breached</span></div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span> </div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno">  540</span>    <span class="comment">// clear circle breach if present</span></div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAC__Fence.html#a32db232f7e9c6adbdf03ce58f7e4d7b1">_breached_fences</a> &amp; <a class="code hl_define" href="AC__Fence_8h.html#a8078609b52ef3d0325edd8c5a288913e">AC_FENCE_TYPE_CIRCLE</a>) {</div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span>        <a class="code hl_function" href="classAC__Fence.html#abffb87707643347f6bde6a085f5fec2a">clear_breach</a>(<a class="code hl_define" href="AC__Fence_8h.html#a8078609b52ef3d0325edd8c5a288913e">AC_FENCE_TYPE_CIRCLE</a>);</div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span>        <a class="code hl_variable" href="classAC__Fence.html#a775b2f0019418843d6c0c105ed24bf1d">_circle_radius_backup</a> = 0.0f;</div>
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno">  544</span>        <a class="code hl_variable" href="classAC__Fence.html#a97e656d93344486b6b143e560b6a7495">_circle_breach_distance</a> = 0.0f;</div>
<div class="line"><a id="l00545" name="l00545"></a><span class="lineno">  545</span>    }</div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno">  546</span> </div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span>}</div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span> </div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span> </div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno">  552</span>uint8_t <a class="code hl_function" href="classAC__Fence.html#abedc694a31751eb8ebc2d72c35cb89e7">AC_Fence::check</a>()</div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span>{</div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno">  554</span>    uint8_t ret = 0;</div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span> </div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span>    <span class="comment">// clear any breach from a non-enabled fence</span></div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span>    <a class="code hl_function" href="classAC__Fence.html#abffb87707643347f6bde6a085f5fec2a">clear_breach</a>(~<a class="code hl_variable" href="classAC__Fence.html#a50e9929c6135853a40f67d24a2e33b77">_enabled_fences</a>);</div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span> </div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span>    <span class="comment">// return immediately if disabled</span></div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span>    <span class="keywordflow">if</span> ((!<a class="code hl_variable" href="classAC__Fence.html#aaab03c980945563ed9ae79002d7b5b1e">_enabled</a> &amp;&amp; !<a class="code hl_variable" href="classAC__Fence.html#af2ad75b14baad838cb61416a6140b592">_auto_enabled</a>) || !<a class="code hl_variable" href="classAC__Fence.html#a50e9929c6135853a40f67d24a2e33b77">_enabled_fences</a>) {</div>
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno">  561</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00562" name="l00562"></a><span class="lineno">  562</span>    }</div>
<div class="line"><a id="l00563" name="l00563"></a><span class="lineno">  563</span> </div>
<div class="line"><a id="l00564" name="l00564"></a><span class="lineno">  564</span>    <span class="comment">// check if pilot is attempting to recover manually</span></div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAC__Fence.html#ac1a4ce506ac3c4e1819dedaba1915e2b">_manual_recovery_start_ms</a> != 0) {</div>
<div class="line"><a id="l00566" name="l00566"></a><span class="lineno">  566</span>        <span class="comment">// we ignore any fence breaches during the manual recovery period which is about 10 seconds</span></div>
<div class="line"><a id="l00567" name="l00567"></a><span class="lineno">  567</span>        <span class="keywordflow">if</span> ((<a class="code hl_function" href="namespaceAP__HAL.html#a77dffbb18891996280308e21316ec186">AP_HAL::millis</a>() - <a class="code hl_variable" href="classAC__Fence.html#ac1a4ce506ac3c4e1819dedaba1915e2b">_manual_recovery_start_ms</a>) &lt; AC_FENCE_MANUAL_RECOVERY_TIME_MIN) {</div>
<div class="line"><a id="l00568" name="l00568"></a><span class="lineno">  568</span>            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00569" name="l00569"></a><span class="lineno">  569</span>        }</div>
<div class="line"><a id="l00570" name="l00570"></a><span class="lineno">  570</span>        <span class="comment">// recovery period has passed so reset manual recovery time</span></div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno">  571</span>        <span class="comment">// and continue with fence breach checks</span></div>
<div class="line"><a id="l00572" name="l00572"></a><span class="lineno">  572</span>        <a class="code hl_variable" href="classAC__Fence.html#ac1a4ce506ac3c4e1819dedaba1915e2b">_manual_recovery_start_ms</a> = 0;</div>
<div class="line"><a id="l00573" name="l00573"></a><span class="lineno">  573</span>    }</div>
<div class="line"><a id="l00574" name="l00574"></a><span class="lineno">  574</span> </div>
<div class="line"><a id="l00575" name="l00575"></a><span class="lineno">  575</span>    <span class="comment">// maximum altitude fence check</span></div>
<div class="line"><a id="l00576" name="l00576"></a><span class="lineno">  576</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="classAC__Fence.html#adae81127f1110dd08c7137a6b8aac956">check_fence_alt_max</a>()) {</div>
<div class="line"><a id="l00577" name="l00577"></a><span class="lineno">  577</span>        ret |= <a class="code hl_define" href="AC__Fence_8h.html#a25ae7d3ea4c5f0872a8f1361b363a639">AC_FENCE_TYPE_ALT_MAX</a>;</div>
<div class="line"><a id="l00578" name="l00578"></a><span class="lineno">  578</span>    }</div>
<div class="line"><a id="l00579" name="l00579"></a><span class="lineno">  579</span> </div>
<div class="line"><a id="l00580" name="l00580"></a><span class="lineno">  580</span>    <span class="comment">// minimum altitude fence check</span></div>
<div class="line"><a id="l00581" name="l00581"></a><span class="lineno">  581</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAC__Fence.html#a2605992bd9dd6f7f51d07c16ce144ccd">_floor_enabled</a> &amp;&amp; <a class="code hl_function" href="classAC__Fence.html#a6a3ea58ff2a865c2b31f57d682d5b6ae">check_fence_alt_min</a>()) {</div>
<div class="line"><a id="l00582" name="l00582"></a><span class="lineno">  582</span>        ret |= <a class="code hl_define" href="AC__Fence_8h.html#a59d24be6af70247389fefab47eb70466">AC_FENCE_TYPE_ALT_MIN</a>;</div>
<div class="line"><a id="l00583" name="l00583"></a><span class="lineno">  583</span>    }</div>
<div class="line"><a id="l00584" name="l00584"></a><span class="lineno">  584</span> </div>
<div class="line"><a id="l00585" name="l00585"></a><span class="lineno">  585</span>    <span class="comment">// circle fence check</span></div>
<div class="line"><a id="l00586" name="l00586"></a><span class="lineno">  586</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="classAC__Fence.html#aaa3fd6fe8cb03492cf4f1a22046db02c">check_fence_circle</a>()) {</div>
<div class="line"><a id="l00587" name="l00587"></a><span class="lineno">  587</span>        ret |= <a class="code hl_define" href="AC__Fence_8h.html#a8078609b52ef3d0325edd8c5a288913e">AC_FENCE_TYPE_CIRCLE</a>;</div>
<div class="line"><a id="l00588" name="l00588"></a><span class="lineno">  588</span>    }</div>
<div class="line"><a id="l00589" name="l00589"></a><span class="lineno">  589</span> </div>
<div class="line"><a id="l00590" name="l00590"></a><span class="lineno">  590</span>    <span class="comment">// polygon fence check</span></div>
<div class="line"><a id="l00591" name="l00591"></a><span class="lineno">  591</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="classAC__Fence.html#a77b1b81a26b6ddbdc933bf2ce3310514">check_fence_polygon</a>()) {</div>
<div class="line"><a id="l00592" name="l00592"></a><span class="lineno">  592</span>        ret |= <a class="code hl_define" href="AC__Fence_8h.html#ac2819f73d591766f42bfcfc1fa41c057">AC_FENCE_TYPE_POLYGON</a>;</div>
<div class="line"><a id="l00593" name="l00593"></a><span class="lineno">  593</span>    }</div>
<div class="line"><a id="l00594" name="l00594"></a><span class="lineno">  594</span> </div>
<div class="line"><a id="l00595" name="l00595"></a><span class="lineno">  595</span>    <span class="comment">// return any new breaches that have occurred</span></div>
<div class="line"><a id="l00596" name="l00596"></a><span class="lineno">  596</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a id="l00597" name="l00597"></a><span class="lineno">  597</span>}</div>
<div class="line"><a id="l00598" name="l00598"></a><span class="lineno">  598</span> </div>
<div class="line"><a id="l00599" name="l00599"></a><span class="lineno">  599</span><span class="comment">// returns true if the destination is within fence (used to reject waypoints outside the fence)</span></div>
<div class="line"><a id="l00600" name="l00600"></a><span class="lineno">  600</span><span class="keywordtype">bool</span> <a class="code hl_function" href="classAC__Fence.html#a3ae563bc2f2c3a60d85247b647e569ca">AC_Fence::check_destination_within_fence</a>(<span class="keyword">const</span> <a class="code hl_class" href="classLocation.html">Location</a>&amp; loc)</div>
<div class="line"><a id="l00601" name="l00601"></a><span class="lineno">  601</span>{</div>
<div class="line"><a id="l00602" name="l00602"></a><span class="lineno">  602</span>    <span class="comment">// Altitude fence check - Fence Ceiling</span></div>
<div class="line"><a id="l00603" name="l00603"></a><span class="lineno">  603</span>    <span class="keywordflow">if</span> ((<a class="code hl_function" href="classAC__Fence.html#a1c191248ef154bb17da4795498b2fc03">get_enabled_fences</a>() &amp; <a class="code hl_define" href="AC__Fence_8h.html#a25ae7d3ea4c5f0872a8f1361b363a639">AC_FENCE_TYPE_ALT_MAX</a>)) {</div>
<div class="line"><a id="l00604" name="l00604"></a><span class="lineno">  604</span>        int32_t alt_above_home_cm;</div>
<div class="line"><a id="l00605" name="l00605"></a><span class="lineno">  605</span>        <span class="keywordflow">if</span> (loc.<a class="code hl_function" href="classLocation.html#a0b8a5317ad6b631a7a82c52b258fec1f">get_alt_cm</a>(<a class="code hl_enumvalue" href="classLocation.html#af494dabb88cd43e0d4efa99f04d31351adc2241348a103ecefcef66579c80336f">Location::AltFrame::ABOVE_HOME</a>, alt_above_home_cm)) {</div>
<div class="line"><a id="l00606" name="l00606"></a><span class="lineno">  606</span>            <span class="keywordflow">if</span> ((alt_above_home_cm * 0.01f) &gt; <a class="code hl_variable" href="classAC__Fence.html#a54e4175384bd580418514c190a77e902">_alt_max</a>) {</div>
<div class="line"><a id="l00607" name="l00607"></a><span class="lineno">  607</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00608" name="l00608"></a><span class="lineno">  608</span>            }</div>
<div class="line"><a id="l00609" name="l00609"></a><span class="lineno">  609</span>        }</div>
<div class="line"><a id="l00610" name="l00610"></a><span class="lineno">  610</span>    }</div>
<div class="line"><a id="l00611" name="l00611"></a><span class="lineno">  611</span> </div>
<div class="line"><a id="l00612" name="l00612"></a><span class="lineno">  612</span>    <span class="comment">// Altitude fence check - Fence Floor</span></div>
<div class="line"><a id="l00613" name="l00613"></a><span class="lineno">  613</span>    <span class="keywordflow">if</span> ((<a class="code hl_function" href="classAC__Fence.html#a1c191248ef154bb17da4795498b2fc03">get_enabled_fences</a>() &amp; <a class="code hl_define" href="AC__Fence_8h.html#a59d24be6af70247389fefab47eb70466">AC_FENCE_TYPE_ALT_MIN</a>)) {</div>
<div class="line"><a id="l00614" name="l00614"></a><span class="lineno">  614</span>        int32_t alt_above_home_cm;</div>
<div class="line"><a id="l00615" name="l00615"></a><span class="lineno">  615</span>        <span class="keywordflow">if</span> (loc.<a class="code hl_function" href="classLocation.html#a0b8a5317ad6b631a7a82c52b258fec1f">get_alt_cm</a>(<a class="code hl_enumvalue" href="classLocation.html#af494dabb88cd43e0d4efa99f04d31351adc2241348a103ecefcef66579c80336f">Location::AltFrame::ABOVE_HOME</a>, alt_above_home_cm)) {</div>
<div class="line"><a id="l00616" name="l00616"></a><span class="lineno">  616</span>            <span class="keywordflow">if</span> ((alt_above_home_cm * 0.01f) &lt; <a class="code hl_variable" href="classAC__Fence.html#a7ebf5b0a5f3f3e1e499f06c0d9f2821d">_alt_min</a>) {</div>
<div class="line"><a id="l00617" name="l00617"></a><span class="lineno">  617</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00618" name="l00618"></a><span class="lineno">  618</span>            }</div>
<div class="line"><a id="l00619" name="l00619"></a><span class="lineno">  619</span>        }</div>
<div class="line"><a id="l00620" name="l00620"></a><span class="lineno">  620</span>    }</div>
<div class="line"><a id="l00621" name="l00621"></a><span class="lineno">  621</span> </div>
<div class="line"><a id="l00622" name="l00622"></a><span class="lineno">  622</span>    <span class="comment">// Circular fence check</span></div>
<div class="line"><a id="l00623" name="l00623"></a><span class="lineno">  623</span>    <span class="keywordflow">if</span> ((<a class="code hl_function" href="classAC__Fence.html#a1c191248ef154bb17da4795498b2fc03">get_enabled_fences</a>() &amp; <a class="code hl_define" href="AC__Fence_8h.html#a8078609b52ef3d0325edd8c5a288913e">AC_FENCE_TYPE_CIRCLE</a>)) {</div>
<div class="line"><a id="l00624" name="l00624"></a><span class="lineno">  624</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="namespaceAP.html#a99432cfdb696952c9b7146f155a815aa">AP::ahrs</a>().get_home().get_distance(loc) &gt; <a class="code hl_variable" href="classAC__Fence.html#abae8d67d909b67f2ea35aa8ceb70bdaf">_circle_radius</a>) {</div>
<div class="line"><a id="l00625" name="l00625"></a><span class="lineno">  625</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00626" name="l00626"></a><span class="lineno">  626</span>        }</div>
<div class="line"><a id="l00627" name="l00627"></a><span class="lineno">  627</span>    }</div>
<div class="line"><a id="l00628" name="l00628"></a><span class="lineno">  628</span> </div>
<div class="line"><a id="l00629" name="l00629"></a><span class="lineno">  629</span>    <span class="comment">// polygon fence check</span></div>
<div class="line"><a id="l00630" name="l00630"></a><span class="lineno">  630</span>    <span class="keywordflow">if</span> ((<a class="code hl_function" href="classAC__Fence.html#a1c191248ef154bb17da4795498b2fc03">get_enabled_fences</a>() &amp; <a class="code hl_define" href="AC__Fence_8h.html#ac2819f73d591766f42bfcfc1fa41c057">AC_FENCE_TYPE_POLYGON</a>)) {</div>
<div class="line"><a id="l00631" name="l00631"></a><span class="lineno">  631</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAC__Fence.html#a02f5aea772f6b73814ddad2ac5f1828b">_poly_loader</a>.<a class="code hl_function" href="classAC__PolyFence__loader.html#adce8261dd60449241bd1014253c88ac8">breached</a>(loc)) {</div>
<div class="line"><a id="l00632" name="l00632"></a><span class="lineno">  632</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00633" name="l00633"></a><span class="lineno">  633</span>        }</div>
<div class="line"><a id="l00634" name="l00634"></a><span class="lineno">  634</span>    }</div>
<div class="line"><a id="l00635" name="l00635"></a><span class="lineno">  635</span> </div>
<div class="line"><a id="l00636" name="l00636"></a><span class="lineno">  636</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00637" name="l00637"></a><span class="lineno">  637</span>}</div>
<div class="line"><a id="l00638" name="l00638"></a><span class="lineno">  638</span> </div>
<div class="line"><a id="l00640" name="l00640"></a><span class="lineno">  640</span><span class="keywordtype">void</span> <a class="code hl_function" href="classAC__Fence.html#a501071ae142ab3cf07ffa27b5e926d76">AC_Fence::record_breach</a>(uint8_t fence_type)</div>
<div class="line"><a id="l00641" name="l00641"></a><span class="lineno">  641</span>{</div>
<div class="line"><a id="l00642" name="l00642"></a><span class="lineno">  642</span>    <span class="comment">// if we haven&#39;t already breached a limit, update the breach time</span></div>
<div class="line"><a id="l00643" name="l00643"></a><span class="lineno">  643</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classAC__Fence.html#a32db232f7e9c6adbdf03ce58f7e4d7b1">_breached_fences</a>) {</div>
<div class="line"><a id="l00644" name="l00644"></a><span class="lineno">  644</span>        <span class="keyword">const</span> uint32_t now = <a class="code hl_function" href="namespaceAP__HAL.html#a77dffbb18891996280308e21316ec186">AP_HAL::millis</a>();</div>
<div class="line"><a id="l00645" name="l00645"></a><span class="lineno">  645</span>        <a class="code hl_variable" href="classAC__Fence.html#ad8c13b275d25491c0a3dcf3eff8dead7">_breach_time</a> = now;</div>
<div class="line"><a id="l00646" name="l00646"></a><span class="lineno">  646</span> </div>
<div class="line"><a id="l00647" name="l00647"></a><span class="lineno">  647</span>        <span class="comment">// emit a message indicated we&#39;re newly-breached, but not too often</span></div>
<div class="line"><a id="l00648" name="l00648"></a><span class="lineno">  648</span>        <span class="keywordflow">if</span> (now - <a class="code hl_variable" href="classAC__Fence.html#a821bda01a08ae9a61e408c037c3aa1f6">_last_breach_notify_sent_ms</a> &gt; 1000) {</div>
<div class="line"><a id="l00649" name="l00649"></a><span class="lineno">  649</span>            <a class="code hl_variable" href="classAC__Fence.html#a821bda01a08ae9a61e408c037c3aa1f6">_last_breach_notify_sent_ms</a> = now;</div>
<div class="line"><a id="l00650" name="l00650"></a><span class="lineno">  650</span>            <a class="code hl_define" href="GCS_8h.html#ae6c78c8b4fe0e326d9dce475a686e069">GCS_SEND_MESSAGE</a>(<a class="code hl_enumvalue" href="ap__message_8h.html#abeccfcc1b97df359517df10fa4209991ae9a7c633e107e9cea381665f0c0a93d5">MSG_FENCE_STATUS</a>);</div>
<div class="line"><a id="l00651" name="l00651"></a><span class="lineno">  651</span>        }</div>
<div class="line"><a id="l00652" name="l00652"></a><span class="lineno">  652</span>    }</div>
<div class="line"><a id="l00653" name="l00653"></a><span class="lineno">  653</span> </div>
<div class="line"><a id="l00654" name="l00654"></a><span class="lineno">  654</span>    <span class="comment">// update breach count</span></div>
<div class="line"><a id="l00655" name="l00655"></a><span class="lineno">  655</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAC__Fence.html#a554a9e9287a8d23dd6e71b21aaa28ffb">_breach_count</a> &lt; 65500) {</div>
<div class="line"><a id="l00656" name="l00656"></a><span class="lineno">  656</span>        <a class="code hl_variable" href="classAC__Fence.html#a554a9e9287a8d23dd6e71b21aaa28ffb">_breach_count</a>++;</div>
<div class="line"><a id="l00657" name="l00657"></a><span class="lineno">  657</span>    }</div>
<div class="line"><a id="l00658" name="l00658"></a><span class="lineno">  658</span> </div>
<div class="line"><a id="l00659" name="l00659"></a><span class="lineno">  659</span>    <span class="comment">// update bitmask</span></div>
<div class="line"><a id="l00660" name="l00660"></a><span class="lineno">  660</span>    <a class="code hl_variable" href="classAC__Fence.html#a32db232f7e9c6adbdf03ce58f7e4d7b1">_breached_fences</a> |= fence_type;</div>
<div class="line"><a id="l00661" name="l00661"></a><span class="lineno">  661</span>}</div>
<div class="line"><a id="l00662" name="l00662"></a><span class="lineno">  662</span> </div>
<div class="line"><a id="l00664" name="l00664"></a><span class="lineno">  664</span><span class="keywordtype">void</span> <a class="code hl_function" href="classAC__Fence.html#abffb87707643347f6bde6a085f5fec2a">AC_Fence::clear_breach</a>(uint8_t fence_type)</div>
<div class="line"><a id="l00665" name="l00665"></a><span class="lineno">  665</span>{</div>
<div class="line"><a id="l00666" name="l00666"></a><span class="lineno">  666</span>    <a class="code hl_variable" href="classAC__Fence.html#a32db232f7e9c6adbdf03ce58f7e4d7b1">_breached_fences</a> &amp;= ~fence_type;</div>
<div class="line"><a id="l00667" name="l00667"></a><span class="lineno">  667</span>}</div>
<div class="line"><a id="l00668" name="l00668"></a><span class="lineno">  668</span> </div>
<div class="line"><a id="l00671" name="l00671"></a><span class="lineno">  671</span><span class="keywordtype">float</span> <a class="code hl_function" href="classAC__Fence.html#a268abcf38118992f2e78a33292ab9dd5">AC_Fence::get_breach_distance</a>(uint8_t fence_type)<span class="keyword"> const</span></div>
<div class="line"><a id="l00672" name="l00672"></a><span class="lineno">  672</span><span class="keyword"></span>{</div>
<div class="line"><a id="l00673" name="l00673"></a><span class="lineno">  673</span>    <span class="keywordtype">float</span> max = 0.0f;</div>
<div class="line"><a id="l00674" name="l00674"></a><span class="lineno">  674</span> </div>
<div class="line"><a id="l00675" name="l00675"></a><span class="lineno">  675</span>    <span class="keywordflow">if</span> (fence_type &amp; <a class="code hl_define" href="AC__Fence_8h.html#a25ae7d3ea4c5f0872a8f1361b363a639">AC_FENCE_TYPE_ALT_MAX</a>) {</div>
<div class="line"><a id="l00676" name="l00676"></a><span class="lineno">  676</span>        max = <a class="code hl_define" href="monocypher_8cpp.html#afa99ec4acc4ecb2dc3c2d05da15d0e3f">MAX</a>(<a class="code hl_variable" href="classAC__Fence.html#a3ef2bf61f0ea360e494c3811e2e81ad8">_alt_max_breach_distance</a>, max);</div>
<div class="line"><a id="l00677" name="l00677"></a><span class="lineno">  677</span>    }</div>
<div class="line"><a id="l00678" name="l00678"></a><span class="lineno">  678</span>    <span class="keywordflow">if</span> (fence_type &amp; <a class="code hl_define" href="AC__Fence_8h.html#a59d24be6af70247389fefab47eb70466">AC_FENCE_TYPE_ALT_MIN</a>) {</div>
<div class="line"><a id="l00679" name="l00679"></a><span class="lineno">  679</span>        max = <a class="code hl_define" href="monocypher_8cpp.html#afa99ec4acc4ecb2dc3c2d05da15d0e3f">MAX</a>(<a class="code hl_variable" href="classAC__Fence.html#a9cd428de13ed847ee9b7808a7c155ad5">_alt_min_breach_distance</a>, max);</div>
<div class="line"><a id="l00680" name="l00680"></a><span class="lineno">  680</span>    }</div>
<div class="line"><a id="l00681" name="l00681"></a><span class="lineno">  681</span>    <span class="keywordflow">if</span> (fence_type &amp; <a class="code hl_define" href="AC__Fence_8h.html#a8078609b52ef3d0325edd8c5a288913e">AC_FENCE_TYPE_CIRCLE</a>) {</div>
<div class="line"><a id="l00682" name="l00682"></a><span class="lineno">  682</span>        max = <a class="code hl_define" href="monocypher_8cpp.html#afa99ec4acc4ecb2dc3c2d05da15d0e3f">MAX</a>(<a class="code hl_variable" href="classAC__Fence.html#a97e656d93344486b6b143e560b6a7495">_circle_breach_distance</a>, max);</div>
<div class="line"><a id="l00683" name="l00683"></a><span class="lineno">  683</span>    }</div>
<div class="line"><a id="l00684" name="l00684"></a><span class="lineno">  684</span>    <span class="keywordflow">return</span> max;</div>
<div class="line"><a id="l00685" name="l00685"></a><span class="lineno">  685</span>}</div>
<div class="line"><a id="l00686" name="l00686"></a><span class="lineno">  686</span> </div>
<div class="line"><a id="l00689" name="l00689"></a><span class="lineno">  689</span><span class="keywordtype">void</span> <a class="code hl_function" href="classAC__Fence.html#a32ddec2d811a21b723c83fca515a2004">AC_Fence::manual_recovery_start</a>()</div>
<div class="line"><a id="l00690" name="l00690"></a><span class="lineno">  690</span>{</div>
<div class="line"><a id="l00691" name="l00691"></a><span class="lineno">  691</span>    <span class="comment">// return immediate if we haven&#39;t breached a fence</span></div>
<div class="line"><a id="l00692" name="l00692"></a><span class="lineno">  692</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classAC__Fence.html#a32db232f7e9c6adbdf03ce58f7e4d7b1">_breached_fences</a>) {</div>
<div class="line"><a id="l00693" name="l00693"></a><span class="lineno">  693</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00694" name="l00694"></a><span class="lineno">  694</span>    }</div>
<div class="line"><a id="l00695" name="l00695"></a><span class="lineno">  695</span> </div>
<div class="line"><a id="l00696" name="l00696"></a><span class="lineno">  696</span>    <span class="comment">// record time pilot began manual recovery</span></div>
<div class="line"><a id="l00697" name="l00697"></a><span class="lineno">  697</span>    <a class="code hl_variable" href="classAC__Fence.html#ac1a4ce506ac3c4e1819dedaba1915e2b">_manual_recovery_start_ms</a> = <a class="code hl_function" href="namespaceAP__HAL.html#a77dffbb18891996280308e21316ec186">AP_HAL::millis</a>();</div>
<div class="line"><a id="l00698" name="l00698"></a><span class="lineno">  698</span>}</div>
<div class="line"><a id="l00699" name="l00699"></a><span class="lineno">  699</span> </div>
<div class="line"><a id="l00700" name="l00700"></a><span class="lineno">  700</span><span class="comment">// methods for mavlink SYS_STATUS message (send_sys_status)</span></div>
<div class="line"><a id="l00701" name="l00701"></a><span class="lineno">  701</span><span class="keywordtype">bool</span> <a class="code hl_function" href="classAC__Fence.html#a3618533d9240de9b88efff69b2324bd7">AC_Fence::sys_status_present</a>()<span class="keyword"> const</span></div>
<div class="line"><a id="l00702" name="l00702"></a><span class="lineno">  702</span><span class="keyword"></span>{</div>
<div class="line"><a id="l00703" name="l00703"></a><span class="lineno">  703</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classAC__Fence.html#a66dc7837ee6762c950605dfcead343ca">present</a>();</div>
<div class="line"><a id="l00704" name="l00704"></a><span class="lineno">  704</span>}</div>
<div class="line"><a id="l00705" name="l00705"></a><span class="lineno">  705</span> </div>
<div class="line"><a id="l00706" name="l00706"></a><span class="lineno">  706</span><span class="keywordtype">bool</span> <a class="code hl_function" href="classAC__Fence.html#a0e3e53cc542383224396a49d979767a5">AC_Fence::sys_status_enabled</a>()<span class="keyword"> const</span></div>
<div class="line"><a id="l00707" name="l00707"></a><span class="lineno">  707</span><span class="keyword"></span>{</div>
<div class="line"><a id="l00708" name="l00708"></a><span class="lineno">  708</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="classAC__Fence.html#a3618533d9240de9b88efff69b2324bd7">sys_status_present</a>()) {</div>
<div class="line"><a id="l00709" name="l00709"></a><span class="lineno">  709</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00710" name="l00710"></a><span class="lineno">  710</span>    }</div>
<div class="line"><a id="l00711" name="l00711"></a><span class="lineno">  711</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAC__Fence.html#a2b994045951bfdc96510e082c9e5d6d8">_action</a> == <a class="code hl_define" href="AC__Fence_8h.html#a2f788fa1e42c86652fbabc183fbaac1d">AC_FENCE_ACTION_REPORT_ONLY</a>) {</div>
<div class="line"><a id="l00712" name="l00712"></a><span class="lineno">  712</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00713" name="l00713"></a><span class="lineno">  713</span>    }</div>
<div class="line"><a id="l00714" name="l00714"></a><span class="lineno">  714</span>    <span class="comment">// Fence is only enabled when the flag is enabled</span></div>
<div class="line"><a id="l00715" name="l00715"></a><span class="lineno">  715</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classAC__Fence.html#aaab03c980945563ed9ae79002d7b5b1e">_enabled</a>;</div>
<div class="line"><a id="l00716" name="l00716"></a><span class="lineno">  716</span>}</div>
<div class="line"><a id="l00717" name="l00717"></a><span class="lineno">  717</span> </div>
<div class="line"><a id="l00718" name="l00718"></a><span class="lineno">  718</span><span class="keywordtype">bool</span> <a class="code hl_function" href="classAC__Fence.html#aab2b6ce40f27cdec68ce7fa26846b6ef">AC_Fence::sys_status_failed</a>()<span class="keyword"> const</span></div>
<div class="line"><a id="l00719" name="l00719"></a><span class="lineno">  719</span><span class="keyword"></span>{</div>
<div class="line"><a id="l00720" name="l00720"></a><span class="lineno">  720</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="classAC__Fence.html#a3618533d9240de9b88efff69b2324bd7">sys_status_present</a>()) {</div>
<div class="line"><a id="l00721" name="l00721"></a><span class="lineno">  721</span>        <span class="comment">// not failed if not present; can fail if present but not enabled</span></div>
<div class="line"><a id="l00722" name="l00722"></a><span class="lineno">  722</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00723" name="l00723"></a><span class="lineno">  723</span>    }</div>
<div class="line"><a id="l00724" name="l00724"></a><span class="lineno">  724</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="classAC__Fence.html#a3370da9e8d33b90de3220ef5e4c7fd44">get_breaches</a>() != 0) {</div>
<div class="line"><a id="l00725" name="l00725"></a><span class="lineno">  725</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00726" name="l00726"></a><span class="lineno">  726</span>    }</div>
<div class="line"><a id="l00727" name="l00727"></a><span class="lineno">  727</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00728" name="l00728"></a><span class="lineno">  728</span>}</div>
<div class="line"><a id="l00729" name="l00729"></a><span class="lineno">  729</span> </div>
<div class="line"><a id="l00730" name="l00730"></a><span class="lineno">  730</span><a class="code hl_class" href="classAC__PolyFence__loader.html">AC_PolyFence_loader</a> &amp;<a class="code hl_function" href="classAC__Fence.html#a4268d8dca11b8d9257018d09e68bdb64">AC_Fence::polyfence</a>()</div>
<div class="line"><a id="l00731" name="l00731"></a><span class="lineno">  731</span>{</div>
<div class="line"><a id="l00732" name="l00732"></a><span class="lineno">  732</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classAC__Fence.html#a02f5aea772f6b73814ddad2ac5f1828b">_poly_loader</a>;</div>
<div class="line"><a id="l00733" name="l00733"></a><span class="lineno">  733</span>}</div>
<div class="line"><a id="l00734" name="l00734"></a><span class="lineno">  734</span><span class="keyword">const</span> <a class="code hl_class" href="classAC__PolyFence__loader.html">AC_PolyFence_loader</a> &amp;<a class="code hl_function" href="classAC__Fence.html#a4268d8dca11b8d9257018d09e68bdb64">AC_Fence::polyfence</a>()<span class="keyword"> const</span></div>
<div class="line"><a id="l00735" name="l00735"></a><span class="lineno">  735</span><span class="keyword"></span>{</div>
<div class="line"><a id="l00736" name="l00736"></a><span class="lineno">  736</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classAC__Fence.html#a02f5aea772f6b73814ddad2ac5f1828b">_poly_loader</a>;</div>
<div class="line"><a id="l00737" name="l00737"></a><span class="lineno">  737</span>}</div>
<div class="line"><a id="l00738" name="l00738"></a><span class="lineno">  738</span> </div>
<div class="line"><a id="l00739" name="l00739"></a><span class="lineno">  739</span> </div>
<div class="line"><a id="l00740" name="l00740"></a><span class="lineno">  740</span><span class="preprocessor">#else  </span><span class="comment">// build type is not appropriate; provide a dummy implementation:</span></div>
<div class="line"><a id="l00741" name="l00741"></a><span class="lineno">  741</span><span class="keyword">const</span> <a class="code hl_struct" href="structAP__Param_1_1GroupInfo.html">AP_Param::GroupInfo</a> <a class="code hl_variable" href="classAC__Fence.html#aac9c39791792bfc755fceefc4b6c7c80">AC_Fence::var_info</a>[] = { <a class="code hl_define" href="AP__Param_8h.html#a0f9acb038a5283b964b862aea8cc5051">AP_GROUPEND</a> };</div>
<div class="line"><a id="l00742" name="l00742"></a><span class="lineno">  742</span> </div>
<div class="line"><a id="l00743" name="l00743"></a><span class="lineno"><a class="line" href="classAC__Fence.html#ad7a09ac5f46a1d5b77c2493e393566af">  743</a></span><a class="code hl_function" href="classAC__Fence.html#ad7a09ac5f46a1d5b77c2493e393566af">AC_Fence::AC_Fence</a>() {};</div>
<div class="line"><a id="l00744" name="l00744"></a><span class="lineno">  744</span> </div>
<div class="line"><a id="l00745" name="l00745"></a><span class="lineno"><a class="line" href="classAC__Fence.html#a049ab67fd30dd133cbb24439173a9286">  745</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classAC__Fence.html#a049ab67fd30dd133cbb24439173a9286">AC_Fence::enable</a>(<span class="keywordtype">bool</span> <a class="code hl_class" href="classAP__JSON_1_1value.html">value</a>) {};</div>
<div class="line"><a id="l00746" name="l00746"></a><span class="lineno">  746</span> </div>
<div class="line"><a id="l00747" name="l00747"></a><span class="lineno"><a class="line" href="classAC__Fence.html#acfdf8e3bcc8431a10ff7768a99de7149">  747</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classAC__Fence.html#acfdf8e3bcc8431a10ff7768a99de7149">AC_Fence::disable_floor</a>() {};</div>
<div class="line"><a id="l00748" name="l00748"></a><span class="lineno">  748</span> </div>
<div class="line"><a id="l00749" name="l00749"></a><span class="lineno"><a class="line" href="classAC__Fence.html#aec25c6879cf00417bb1fb4d48c9ca70f">  749</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classAC__Fence.html#aec25c6879cf00417bb1fb4d48c9ca70f">AC_Fence::auto_enable_fence_after_takeoff</a>() {};</div>
<div class="line"><a id="l00750" name="l00750"></a><span class="lineno"><a class="line" href="classAC__Fence.html#a2df818846d47d5df3f6f278e43bfea27">  750</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classAC__Fence.html#a2df818846d47d5df3f6f278e43bfea27">AC_Fence::auto_disable_fence_for_landing</a>() {};</div>
<div class="line"><a id="l00751" name="l00751"></a><span class="lineno">  751</span> </div>
<div class="line"><a id="l00752" name="l00752"></a><span class="lineno"><a class="line" href="classAC__Fence.html#a66dc7837ee6762c950605dfcead343ca">  752</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classAC__Fence.html#a66dc7837ee6762c950605dfcead343ca">AC_Fence::present</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <span class="keyword">false</span>; }</div>
<div class="line"><a id="l00753" name="l00753"></a><span class="lineno">  753</span> </div>
<div class="line"><a id="l00754" name="l00754"></a><span class="lineno"><a class="line" href="classAC__Fence.html#a1c191248ef154bb17da4795498b2fc03">  754</a></span>uint8_t <a class="code hl_function" href="classAC__Fence.html#a1c191248ef154bb17da4795498b2fc03">AC_Fence::get_enabled_fences</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> 0; }</div>
<div class="line"><a id="l00755" name="l00755"></a><span class="lineno">  755</span> </div>
<div class="line"><a id="l00756" name="l00756"></a><span class="lineno"><a class="line" href="classAC__Fence.html#ae46cc9ba79d869296585e41a2702621e">  756</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classAC__Fence.html#ae46cc9ba79d869296585e41a2702621e">AC_Fence::pre_arm_check</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* &amp;fail_msg)<span class="keyword"> const  </span>{ <span class="keywordflow">return</span> <span class="keyword">true</span>; }</div>
<div class="line"><a id="l00757" name="l00757"></a><span class="lineno">  757</span> </div>
<div class="line"><a id="l00758" name="l00758"></a><span class="lineno"><a class="line" href="classAC__Fence.html#abedc694a31751eb8ebc2d72c35cb89e7">  758</a></span>uint8_t <a class="code hl_function" href="classAC__Fence.html#abedc694a31751eb8ebc2d72c35cb89e7">AC_Fence::check</a>() { <span class="keywordflow">return</span> 0; }</div>
<div class="line"><a id="l00759" name="l00759"></a><span class="lineno"><a class="line" href="classAC__Fence.html#a3ae563bc2f2c3a60d85247b647e569ca">  759</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classAC__Fence.html#a3ae563bc2f2c3a60d85247b647e569ca">AC_Fence::check_destination_within_fence</a>(<span class="keyword">const</span> <a class="code hl_class" href="classLocation.html">Location</a>&amp; loc) { <span class="keywordflow">return</span> <span class="keyword">true</span>; }</div>
<div class="line"><a id="l00760" name="l00760"></a><span class="lineno"><a class="line" href="classAC__Fence.html#a268abcf38118992f2e78a33292ab9dd5">  760</a></span><span class="keywordtype">float</span> <a class="code hl_function" href="classAC__Fence.html#a268abcf38118992f2e78a33292ab9dd5">AC_Fence::get_breach_distance</a>(uint8_t fence_type)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> 0.0; }</div>
<div class="line"><a id="l00761" name="l00761"></a><span class="lineno">  761</span> </div>
<div class="line"><a id="l00762" name="l00762"></a><span class="lineno"><a class="line" href="classAC__Fence.html#a32ddec2d811a21b723c83fca515a2004">  762</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classAC__Fence.html#a32ddec2d811a21b723c83fca515a2004">AC_Fence::manual_recovery_start</a>() {}</div>
<div class="line"><a id="l00763" name="l00763"></a><span class="lineno">  763</span> </div>
<div class="line"><a id="l00764" name="l00764"></a><span class="lineno"><a class="line" href="classAC__Fence.html#a3618533d9240de9b88efff69b2324bd7">  764</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classAC__Fence.html#a3618533d9240de9b88efff69b2324bd7">AC_Fence::sys_status_present</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <span class="keyword">false</span>; }</div>
<div class="line"><a id="l00765" name="l00765"></a><span class="lineno"><a class="line" href="classAC__Fence.html#a0e3e53cc542383224396a49d979767a5">  765</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classAC__Fence.html#a0e3e53cc542383224396a49d979767a5">AC_Fence::sys_status_enabled</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <span class="keyword">false</span>; }</div>
<div class="line"><a id="l00766" name="l00766"></a><span class="lineno"><a class="line" href="classAC__Fence.html#aab2b6ce40f27cdec68ce7fa26846b6ef">  766</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classAC__Fence.html#aab2b6ce40f27cdec68ce7fa26846b6ef">AC_Fence::sys_status_failed</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <span class="keyword">false</span>; }</div>
<div class="line"><a id="l00767" name="l00767"></a><span class="lineno">  767</span> </div>
<div class="foldopen" id="foldopen00768" data-start="{" data-end="}">
<div class="line"><a id="l00768" name="l00768"></a><span class="lineno"><a class="line" href="classAC__Fence.html#a4268d8dca11b8d9257018d09e68bdb64">  768</a></span><a class="code hl_class" href="classAC__PolyFence__loader.html">AC_PolyFence_loader</a> &amp;<a class="code hl_function" href="classAC__Fence.html#a4268d8dca11b8d9257018d09e68bdb64">AC_Fence::polyfence</a>()</div>
<div class="line"><a id="l00769" name="l00769"></a><span class="lineno">  769</span>{</div>
<div class="line"><a id="l00770" name="l00770"></a><span class="lineno">  770</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classAC__Fence.html#a02f5aea772f6b73814ddad2ac5f1828b">_poly_loader</a>;</div>
<div class="line"><a id="l00771" name="l00771"></a><span class="lineno">  771</span>}</div>
</div>
<div class="foldopen" id="foldopen00772" data-start="{" data-end="}">
<div class="line"><a id="l00772" name="l00772"></a><span class="lineno"><a class="line" href="classAC__Fence.html#a27d2a837d345e5057a9a4f6cd5c8d999">  772</a></span><span class="keyword">const</span> <a class="code hl_class" href="classAC__PolyFence__loader.html">AC_PolyFence_loader</a> &amp;<a class="code hl_function" href="classAC__Fence.html#a4268d8dca11b8d9257018d09e68bdb64">AC_Fence::polyfence</a>()<span class="keyword"> const</span></div>
<div class="line"><a id="l00773" name="l00773"></a><span class="lineno">  773</span><span class="keyword"></span>{</div>
<div class="line"><a id="l00774" name="l00774"></a><span class="lineno">  774</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classAC__Fence.html#a02f5aea772f6b73814ddad2ac5f1828b">_poly_loader</a>;</div>
<div class="line"><a id="l00775" name="l00775"></a><span class="lineno">  775</span>}</div>
</div>
<div class="line"><a id="l00776" name="l00776"></a><span class="lineno">  776</span> </div>
<div class="line"><a id="l00777" name="l00777"></a><span class="lineno">  777</span><span class="preprocessor">#endif </span><span class="comment">// #if AC_FENCE_DUMMY_METHODS_ENABLED</span></div>
<div class="line"><a id="l00778" name="l00778"></a><span class="lineno">  778</span> </div>
<div class="line"><a id="l00779" name="l00779"></a><span class="lineno">  779</span><span class="comment">// singleton instance</span></div>
<div class="line"><a id="l00780" name="l00780"></a><span class="lineno">  780</span><a class="code hl_class" href="classAC__Fence.html">AC_Fence</a> *<a class="code hl_variable" href="classAC__Fence.html#a1f3a0270715b1add73c313f3be88d628">AC_Fence::_singleton</a>;</div>
<div class="line"><a id="l00781" name="l00781"></a><span class="lineno">  781</span> </div>
<div class="line"><a id="l00782" name="l00782"></a><span class="lineno">  782</span><span class="keyword">namespace </span><a class="code hl_namespace" href="namespaceAP.html">AP</a></div>
<div class="line"><a id="l00783" name="l00783"></a><span class="lineno">  783</span>{</div>
<div class="line"><a id="l00784" name="l00784"></a><span class="lineno">  784</span> </div>
<div class="foldopen" id="foldopen00785" data-start="{" data-end="}">
<div class="line"><a id="l00785" name="l00785"></a><span class="lineno"><a class="line" href="namespaceAP.html#ad7eb5eb7d80cfbcb69839b497bff7a46">  785</a></span><a class="code hl_class" href="classAC__Fence.html">AC_Fence</a> *<a class="code hl_function" href="namespaceAP.html#ad7eb5eb7d80cfbcb69839b497bff7a46">fence</a>()</div>
<div class="line"><a id="l00786" name="l00786"></a><span class="lineno">  786</span>{</div>
<div class="line"><a id="l00787" name="l00787"></a><span class="lineno">  787</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classAC__Fence.html#ace571cd8d535e8667da552a0c2a65f4c">AC_Fence::get_singleton</a>();</div>
<div class="line"><a id="l00788" name="l00788"></a><span class="lineno">  788</span>}</div>
</div>
<div class="line"><a id="l00789" name="l00789"></a><span class="lineno">  789</span> </div>
<div class="line"><a id="l00790" name="l00790"></a><span class="lineno">  790</span>}</div>
<div class="line"><a id="l00791" name="l00791"></a><span class="lineno">  791</span> </div>
<div class="line"><a id="l00792" name="l00792"></a><span class="lineno">  792</span><span class="preprocessor">#endif </span><span class="comment">// AP_FENCE_ENABLED</span></div>
<div class="ttc" id="aAC__AttitudeControl_8cpp_html_a240c1a4ae2a70d1855f91e4a0b1ac938"><div class="ttname"><a href="AC__AttitudeControl_8cpp.html#a240c1a4ae2a70d1855f91e4a0b1ac938">hal</a></div><div class="ttdeci">const AP_HAL::HAL &amp; hal</div><div class="ttdef"><b>Definition</b> <a href="AP__Compass__AK09916_8cpp_source.html#l00059">AP_Compass_AK09916.cpp:59</a></div></div>
<div class="ttc" id="aAC__Fence_8h_html"><div class="ttname"><a href="AC__Fence_8h.html">AC_Fence.h</a></div></div>
<div class="ttc" id="aAC__Fence_8h_html_a25ae7d3ea4c5f0872a8f1361b363a639"><div class="ttname"><a href="AC__Fence_8h.html#a25ae7d3ea4c5f0872a8f1361b363a639">AC_FENCE_TYPE_ALT_MAX</a></div><div class="ttdeci">#define AC_FENCE_TYPE_ALT_MAX</div><div class="ttdef"><b>Definition</b> <a href="AC__Fence_8h_source.html#l00014">AC_Fence.h:14</a></div></div>
<div class="ttc" id="aAC__Fence_8h_html_a2f788fa1e42c86652fbabc183fbaac1d"><div class="ttname"><a href="AC__Fence_8h.html#a2f788fa1e42c86652fbabc183fbaac1d">AC_FENCE_ACTION_REPORT_ONLY</a></div><div class="ttdeci">#define AC_FENCE_ACTION_REPORT_ONLY</div><div class="ttdef"><b>Definition</b> <a href="AC__Fence_8h_source.html#l00020">AC_Fence.h:20</a></div></div>
<div class="ttc" id="aAC__Fence_8h_html_a59d24be6af70247389fefab47eb70466"><div class="ttname"><a href="AC__Fence_8h.html#a59d24be6af70247389fefab47eb70466">AC_FENCE_TYPE_ALT_MIN</a></div><div class="ttdeci">#define AC_FENCE_TYPE_ALT_MIN</div><div class="ttdef"><b>Definition</b> <a href="AC__Fence_8h_source.html#l00017">AC_Fence.h:17</a></div></div>
<div class="ttc" id="aAC__Fence_8h_html_a8078609b52ef3d0325edd8c5a288913e"><div class="ttname"><a href="AC__Fence_8h.html#a8078609b52ef3d0325edd8c5a288913e">AC_FENCE_TYPE_CIRCLE</a></div><div class="ttdeci">#define AC_FENCE_TYPE_CIRCLE</div><div class="ttdef"><b>Definition</b> <a href="AC__Fence_8h_source.html#l00015">AC_Fence.h:15</a></div></div>
<div class="ttc" id="aAC__Fence_8h_html_a891bd0f1dfb690de706e6f61dd8848d8"><div class="ttname"><a href="AC__Fence_8h.html#a891bd0f1dfb690de706e6f61dd8848d8">AC_FENCE_ACTION_RTL_AND_LAND</a></div><div class="ttdeci">#define AC_FENCE_ACTION_RTL_AND_LAND</div><div class="ttdef"><b>Definition</b> <a href="AC__Fence_8h_source.html#l00021">AC_Fence.h:21</a></div></div>
<div class="ttc" id="aAC__Fence_8h_html_ac2819f73d591766f42bfcfc1fa41c057"><div class="ttname"><a href="AC__Fence_8h.html#ac2819f73d591766f42bfcfc1fa41c057">AC_FENCE_TYPE_POLYGON</a></div><div class="ttdeci">#define AC_FENCE_TYPE_POLYGON</div><div class="ttdef"><b>Definition</b> <a href="AC__Fence_8h_source.html#l00016">AC_Fence.h:16</a></div></div>
<div class="ttc" id="aAP__AHRS_8h_html"><div class="ttname"><a href="AP__AHRS_8h.html">AP_AHRS.h</a></div></div>
<div class="ttc" id="aAP__HAL_8h_html"><div class="ttname"><a href="AP__HAL_8h.html">AP_HAL.h</a></div></div>
<div class="ttc" id="aAP__Logger_8h_html"><div class="ttname"><a href="AP__Logger_8h.html">AP_Logger.h</a></div></div>
<div class="ttc" id="aAP__Logger_8h_html_abfb7fdeeabd95c90488508e20c5ea981a12ed8807f7173e9a64c3cad3dfe9bd9c"><div class="ttname"><a href="AP__Logger_8h.html#abfb7fdeeabd95c90488508e20c5ea981a12ed8807f7173e9a64c3cad3dfe9bd9c">LogEvent::FENCE_FLOOR_DISABLE</a></div><div class="ttdeci">@ FENCE_FLOOR_DISABLE</div></div>
<div class="ttc" id="aAP__Logger_8h_html_abfb7fdeeabd95c90488508e20c5ea981a2df6d8ccdb8d5dad8198bbe42cd2ce58"><div class="ttname"><a href="AP__Logger_8h.html#abfb7fdeeabd95c90488508e20c5ea981a2df6d8ccdb8d5dad8198bbe42cd2ce58">LogEvent::FENCE_ENABLE</a></div><div class="ttdeci">@ FENCE_ENABLE</div></div>
<div class="ttc" id="aAP__Logger_8h_html_abfb7fdeeabd95c90488508e20c5ea981a6fdd365f65c8e729f7d74bc56a7c61bb"><div class="ttname"><a href="AP__Logger_8h.html#abfb7fdeeabd95c90488508e20c5ea981a6fdd365f65c8e729f7d74bc56a7c61bb">LogEvent::FENCE_FLOOR_ENABLE</a></div><div class="ttdeci">@ FENCE_FLOOR_ENABLE</div></div>
<div class="ttc" id="aAP__Logger_8h_html_abfb7fdeeabd95c90488508e20c5ea981af2c7d4de27fa69e526bc0feb560f2bf2"><div class="ttname"><a href="AP__Logger_8h.html#abfb7fdeeabd95c90488508e20c5ea981af2c7d4de27fa69e526bc0feb560f2bf2">LogEvent::FENCE_DISABLE</a></div><div class="ttdeci">@ FENCE_DISABLE</div></div>
<div class="ttc" id="aAP__Math_8h_html_a2a12cce483e9b870da70d30406d82c60"><div class="ttname"><a href="AP__Math_8h.html#a2a12cce483e9b870da70d30406d82c60">is_zero</a></div><div class="ttdeci">bool is_zero(const T fVal1)</div><div class="ttdef"><b>Definition</b> <a href="AP__Math_8h_source.html#l00053">AP_Math.h:53</a></div></div>
<div class="ttc" id="aAP__Param_8h_html_a0f9acb038a5283b964b862aea8cc5051"><div class="ttname"><a href="AP__Param_8h.html#a0f9acb038a5283b964b862aea8cc5051">AP_GROUPEND</a></div><div class="ttdeci">#define AP_GROUPEND</div><div class="ttdef"><b>Definition</b> <a href="AP__Param_8h_source.html#l00163">AP_Param.h:163</a></div></div>
<div class="ttc" id="aAP__Param_8h_html_a5def49b63b71690b19ea5a19ee3b4788"><div class="ttname"><a href="AP__Param_8h.html#a5def49b63b71690b19ea5a19ee3b4788">AP_PARAM_FRAME_PLANE</a></div><div class="ttdeci">#define AP_PARAM_FRAME_PLANE</div><div class="ttdef"><b>Definition</b> <a href="AP__Param_8h_source.html#l00118">AP_Param.h:118</a></div></div>
<div class="ttc" id="aAP__Param_8h_html_a752a6a1d27589c64a386ab2818e7057d"><div class="ttname"><a href="AP__Param_8h.html#a752a6a1d27589c64a386ab2818e7057d">AP_GROUPINFO_FRAME</a></div><div class="ttdeci">#define AP_GROUPINFO_FRAME(name, idx, clazz, element, def, frame_flags)</div><div class="ttdef"><b>Definition</b> <a href="AP__Param_8h_source.html#l00136">AP_Param.h:136</a></div></div>
<div class="ttc" id="aAP__Param_8h_html_a78a408c84f2a1bafde256ac650142e4d"><div class="ttname"><a href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a></div><div class="ttdeci">#define AP_GROUPINFO(name, idx, clazz, element, def)</div><div class="ttdef"><b>Definition</b> <a href="AP__Param_8h_source.html#l00145">AP_Param.h:145</a></div></div>
<div class="ttc" id="aAP__Param_8h_html_a9838c03b98e6652d227f617eb2757dd9"><div class="ttname"><a href="AP__Param_8h.html#a9838c03b98e6652d227f617eb2757dd9">AP_PARAM_FRAME_TRICOPTER</a></div><div class="ttdeci">#define AP_PARAM_FRAME_TRICOPTER</div><div class="ttdef"><b>Definition</b> <a href="AP__Param_8h_source.html#l00120">AP_Param.h:120</a></div></div>
<div class="ttc" id="aAP__Param_8h_html_aaccf2c99c335d606cf6a851c02835e46"><div class="ttname"><a href="AP__Param_8h.html#aaccf2c99c335d606cf6a851c02835e46">AP_PARAM_FRAME_SUB</a></div><div class="ttdeci">#define AP_PARAM_FRAME_SUB</div><div class="ttdef"><b>Definition</b> <a href="AP__Param_8h_source.html#l00119">AP_Param.h:119</a></div></div>
<div class="ttc" id="aAP__Param_8h_html_ac1328ddd823ea908dfe71e10c9a36a2e"><div class="ttname"><a href="AP__Param_8h.html#ac1328ddd823ea908dfe71e10c9a36a2e">AP_PARAM_FRAME_HELI</a></div><div class="ttdeci">#define AP_PARAM_FRAME_HELI</div><div class="ttdef"><b>Definition</b> <a href="AP__Param_8h_source.html#l00121">AP_Param.h:121</a></div></div>
<div class="ttc" id="aAP__Param_8h_html_afdcffd80a5fa249148be6d8fdc63cb3c"><div class="ttname"><a href="AP__Param_8h.html#afdcffd80a5fa249148be6d8fdc63cb3c">AP_PARAM_FRAME_COPTER</a></div><div class="ttdeci">#define AP_PARAM_FRAME_COPTER</div><div class="ttdef"><b>Definition</b> <a href="AP__Param_8h_source.html#l00116">AP_Param.h:116</a></div></div>
<div class="ttc" id="aAP__Vehicle__Type_8h_html"><div class="ttname"><a href="AP__Vehicle__Type_8h.html">AP_Vehicle_Type.h</a></div></div>
<div class="ttc" id="aGCS_8h_html"><div class="ttname"><a href="GCS_8h.html">GCS.h</a></div><div class="ttdoc">Interface definition for the various Ground Control System.</div></div>
<div class="ttc" id="aGCS_8h_html_a266bfe8eda675e1092f045e93932b4a6"><div class="ttname"><a href="GCS_8h.html#a266bfe8eda675e1092f045e93932b4a6">GCS_SEND_TEXT</a></div><div class="ttdeci">#define GCS_SEND_TEXT(severity, format, args...)</div><div class="ttdef"><b>Definition</b> <a href="GCS_8h_source.html#l01349">GCS.h:1349</a></div></div>
<div class="ttc" id="aGCS_8h_html_ae6c78c8b4fe0e326d9dce475a686e069"><div class="ttname"><a href="GCS_8h.html#ae6c78c8b4fe0e326d9dce475a686e069">GCS_SEND_MESSAGE</a></div><div class="ttdeci">#define GCS_SEND_MESSAGE(msg)</div><div class="ttdef"><b>Definition</b> <a href="GCS_8h_source.html#l01359">GCS.h:1359</a></div></div>
<div class="ttc" id="aap__message_8h_html_abeccfcc1b97df359517df10fa4209991ae9a7c633e107e9cea381665f0c0a93d5"><div class="ttname"><a href="ap__message_8h.html#abeccfcc1b97df359517df10fa4209991ae9a7c633e107e9cea381665f0c0a93d5">MSG_FENCE_STATUS</a></div><div class="ttdeci">@ MSG_FENCE_STATUS</div><div class="ttdef"><b>Definition</b> <a href="ap__message_8h_source.html#l00040">ap_message.h:40</a></div></div>
<div class="ttc" id="aclassAC__Fence_html"><div class="ttname"><a href="classAC__Fence.html">AC_Fence</a></div><div class="ttdef"><b>Definition</b> <a href="AC__Fence_8h_source.html#l00032">AC_Fence.h:33</a></div></div>
<div class="ttc" id="aclassAC__Fence_html_a02f5aea772f6b73814ddad2ac5f1828b"><div class="ttname"><a href="classAC__Fence.html#a02f5aea772f6b73814ddad2ac5f1828b">AC_Fence::_poly_loader</a></div><div class="ttdeci">AC_PolyFence_loader _poly_loader</div><div class="ttdef"><b>Definition</b> <a href="AC__Fence_8h_source.html#l00227">AC_Fence.h:227</a></div></div>
<div class="ttc" id="aclassAC__Fence_html_a049ab67fd30dd133cbb24439173a9286"><div class="ttname"><a href="classAC__Fence.html#a049ab67fd30dd133cbb24439173a9286">AC_Fence::enable</a></div><div class="ttdeci">void enable(bool value)</div><div class="ttdoc">enable - allows fence to be enabled/disabled.</div><div class="ttdef"><b>Definition</b> <a href="#l00745">AC_Fence.cpp:745</a></div></div>
<div class="ttc" id="aclassAC__Fence_html_a0e3e53cc542383224396a49d979767a5"><div class="ttname"><a href="classAC__Fence.html#a0e3e53cc542383224396a49d979767a5">AC_Fence::sys_status_enabled</a></div><div class="ttdeci">bool sys_status_enabled() const</div><div class="ttdef"><b>Definition</b> <a href="#l00765">AC_Fence.cpp:765</a></div></div>
<div class="ttc" id="aclassAC__Fence_html_a1640757eb9125b41961cea5c1eff3341"><div class="ttname"><a href="classAC__Fence.html#a1640757eb9125b41961cea5c1eff3341">AC_Fence::_home_distance</a></div><div class="ttdeci">float _home_distance</div><div class="ttdef"><b>Definition</b> <a href="AC__Fence_8h_source.html#l00214">AC_Fence.h:214</a></div></div>
<div class="ttc" id="aclassAC__Fence_html_a1c191248ef154bb17da4795498b2fc03"><div class="ttname"><a href="classAC__Fence.html#a1c191248ef154bb17da4795498b2fc03">AC_Fence::get_enabled_fences</a></div><div class="ttdeci">uint8_t get_enabled_fences() const</div><div class="ttdoc">get_enabled_fences - returns bitmask of enabled fences</div><div class="ttdef"><b>Definition</b> <a href="#l00754">AC_Fence.cpp:754</a></div></div>
<div class="ttc" id="aclassAC__Fence_html_a1f3a0270715b1add73c313f3be88d628"><div class="ttname"><a href="classAC__Fence.html#a1f3a0270715b1add73c313f3be88d628">AC_Fence::_singleton</a></div><div class="ttdeci">static AC_Fence * _singleton</div><div class="ttdef"><b>Definition</b> <a href="AC__Fence_8h_source.html#l00163">AC_Fence.h:163</a></div></div>
<div class="ttc" id="aclassAC__Fence_html_a2605992bd9dd6f7f51d07c16ce144ccd"><div class="ttname"><a href="classAC__Fence.html#a2605992bd9dd6f7f51d07c16ce144ccd">AC_Fence::_floor_enabled</a></div><div class="ttdeci">bool _floor_enabled</div><div class="ttdef"><b>Definition</b> <a href="AC__Fence_8h_source.html#l00213">AC_Fence.h:213</a></div></div>
<div class="ttc" id="aclassAC__Fence_html_a268abcf38118992f2e78a33292ab9dd5"><div class="ttname"><a href="classAC__Fence.html#a268abcf38118992f2e78a33292ab9dd5">AC_Fence::get_breach_distance</a></div><div class="ttdeci">float get_breach_distance(uint8_t fence_type) const</div><div class="ttdef"><b>Definition</b> <a href="#l00760">AC_Fence.cpp:760</a></div></div>
<div class="ttc" id="aclassAC__Fence_html_a2708e05d5c8cbf227e5c6b5fa05332b9"><div class="ttname"><a href="classAC__Fence.html#a2708e05d5c8cbf227e5c6b5fa05332b9">AC_Fence::_margin</a></div><div class="ttdeci">AP_Float _margin</div><div class="ttdef"><b>Definition</b> <a href="AC__Fence_8h_source.html#l00196">AC_Fence.h:196</a></div></div>
<div class="ttc" id="aclassAC__Fence_html_a2b994045951bfdc96510e082c9e5d6d8"><div class="ttname"><a href="classAC__Fence.html#a2b994045951bfdc96510e082c9e5d6d8">AC_Fence::_action</a></div><div class="ttdeci">AP_Int8 _action</div><div class="ttdef"><b>Definition</b> <a href="AC__Fence_8h_source.html#l00192">AC_Fence.h:192</a></div></div>
<div class="ttc" id="aclassAC__Fence_html_a2df818846d47d5df3f6f278e43bfea27"><div class="ttname"><a href="classAC__Fence.html#a2df818846d47d5df3f6f278e43bfea27">AC_Fence::auto_disable_fence_for_landing</a></div><div class="ttdeci">void auto_disable_fence_for_landing()</div><div class="ttdoc">auto_disable_fence_for_landing - auto disables respective fence. Called prior to landing.</div><div class="ttdef"><b>Definition</b> <a href="#l00750">AC_Fence.cpp:750</a></div></div>
<div class="ttc" id="aclassAC__Fence_html_a2e1b31469e12ba2749555d89d8892d5f"><div class="ttname"><a href="classAC__Fence.html#a2e1b31469e12ba2749555d89d8892d5f">AC_Fence::pre_arm_check_alt</a></div><div class="ttdeci">bool pre_arm_check_alt(const char *&amp;fail_msg) const</div></div>
<div class="ttc" id="aclassAC__Fence_html_a30343ca9219b07d3b6b11210dd93529f"><div class="ttname"><a href="classAC__Fence.html#a30343ca9219b07d3b6b11210dd93529f">AC_Fence::_alt_max_backup</a></div><div class="ttdeci">float _alt_max_backup</div><div class="ttdef"><b>Definition</b> <a href="AC__Fence_8h_source.html#l00203">AC_Fence.h:203</a></div></div>
<div class="ttc" id="aclassAC__Fence_html_a32db232f7e9c6adbdf03ce58f7e4d7b1"><div class="ttname"><a href="classAC__Fence.html#a32db232f7e9c6adbdf03ce58f7e4d7b1">AC_Fence::_breached_fences</a></div><div class="ttdeci">uint8_t _breached_fences</div><div class="ttdef"><b>Definition</b> <a href="AC__Fence_8h_source.html#l00219">AC_Fence.h:219</a></div></div>
<div class="ttc" id="aclassAC__Fence_html_a32ddec2d811a21b723c83fca515a2004"><div class="ttname"><a href="classAC__Fence.html#a32ddec2d811a21b723c83fca515a2004">AC_Fence::manual_recovery_start</a></div><div class="ttdeci">void manual_recovery_start()</div><div class="ttdef"><b>Definition</b> <a href="#l00762">AC_Fence.cpp:762</a></div></div>
<div class="ttc" id="aclassAC__Fence_html_a3370da9e8d33b90de3220ef5e4c7fd44"><div class="ttname"><a href="classAC__Fence.html#a3370da9e8d33b90de3220ef5e4c7fd44">AC_Fence::get_breaches</a></div><div class="ttdeci">uint8_t get_breaches() const</div><div class="ttdoc">get_breaches - returns bit mask of the fence types that have been breached</div><div class="ttdef"><b>Definition</b> <a href="AC__Fence_8h_source.html#l00103">AC_Fence.h:103</a></div></div>
<div class="ttc" id="aclassAC__Fence_html_a3618533d9240de9b88efff69b2324bd7"><div class="ttname"><a href="classAC__Fence.html#a3618533d9240de9b88efff69b2324bd7">AC_Fence::sys_status_present</a></div><div class="ttdeci">bool sys_status_present() const</div><div class="ttdef"><b>Definition</b> <a href="#l00764">AC_Fence.cpp:764</a></div></div>
<div class="ttc" id="aclassAC__Fence_html_a3995332aeef635395d2374b85ea8b746a26169300902ecf3b9a5e45922c651856"><div class="ttname"><a href="classAC__Fence.html#a3995332aeef635395d2374b85ea8b746a26169300902ecf3b9a5e45922c651856">AC_Fence::AutoEnable::ENABLE_DISABLE_FLOOR_ONLY</a></div><div class="ttdeci">@ ENABLE_DISABLE_FLOOR_ONLY</div></div>
<div class="ttc" id="aclassAC__Fence_html_a3995332aeef635395d2374b85ea8b746a591a773392e0ac43aff7463ecf7b997f"><div class="ttname"><a href="classAC__Fence.html#a3995332aeef635395d2374b85ea8b746a591a773392e0ac43aff7463ecf7b997f">AC_Fence::AutoEnable::ALWAYS_ENABLED</a></div><div class="ttdeci">@ ALWAYS_ENABLED</div></div>
<div class="ttc" id="aclassAC__Fence_html_a3ae563bc2f2c3a60d85247b647e569ca"><div class="ttname"><a href="classAC__Fence.html#a3ae563bc2f2c3a60d85247b647e569ca">AC_Fence::check_destination_within_fence</a></div><div class="ttdeci">bool check_destination_within_fence(const class Location &amp;loc)</div><div class="ttdef"><b>Definition</b> <a href="#l00759">AC_Fence.cpp:759</a></div></div>
<div class="ttc" id="aclassAC__Fence_html_a3ef2bf61f0ea360e494c3811e2e81ad8"><div class="ttname"><a href="classAC__Fence.html#a3ef2bf61f0ea360e494c3811e2e81ad8">AC_Fence::_alt_max_breach_distance</a></div><div class="ttdeci">float _alt_max_breach_distance</div><div class="ttdef"><b>Definition</b> <a href="AC__Fence_8h_source.html#l00208">AC_Fence.h:208</a></div></div>
<div class="ttc" id="aclassAC__Fence_html_a4268d8dca11b8d9257018d09e68bdb64"><div class="ttname"><a href="classAC__Fence.html#a4268d8dca11b8d9257018d09e68bdb64">AC_Fence::polyfence</a></div><div class="ttdeci">AC_PolyFence_loader &amp; polyfence()</div><div class="ttdef"><b>Definition</b> <a href="#l00768">AC_Fence.cpp:768</a></div></div>
<div class="ttc" id="aclassAC__Fence_html_a44e87044bf07cb5dd2b2399bf59c7feb"><div class="ttname"><a href="classAC__Fence.html#a44e87044bf07cb5dd2b2399bf59c7feb">AC_Fence::pre_arm_check_polygon</a></div><div class="ttdeci">bool pre_arm_check_polygon(const char *&amp;fail_msg) const</div></div>
<div class="ttc" id="aclassAC__Fence_html_a501071ae142ab3cf07ffa27b5e926d76"><div class="ttname"><a href="classAC__Fence.html#a501071ae142ab3cf07ffa27b5e926d76">AC_Fence::record_breach</a></div><div class="ttdeci">void record_breach(uint8_t fence_type)</div><div class="ttdoc">record_breach - update breach bitmask, time and count</div></div>
<div class="ttc" id="aclassAC__Fence_html_a50e9929c6135853a40f67d24a2e33b77"><div class="ttname"><a href="classAC__Fence.html#a50e9929c6135853a40f67d24a2e33b77">AC_Fence::_enabled_fences</a></div><div class="ttdeci">AP_Int8 _enabled_fences</div><div class="ttdef"><b>Definition</b> <a href="AC__Fence_8h_source.html#l00191">AC_Fence.h:191</a></div></div>
<div class="ttc" id="aclassAC__Fence_html_a54e4175384bd580418514c190a77e902"><div class="ttname"><a href="classAC__Fence.html#a54e4175384bd580418514c190a77e902">AC_Fence::_alt_max</a></div><div class="ttdeci">AP_Float _alt_max</div><div class="ttdef"><b>Definition</b> <a href="AC__Fence_8h_source.html#l00193">AC_Fence.h:193</a></div></div>
<div class="ttc" id="aclassAC__Fence_html_a554a9e9287a8d23dd6e71b21aaa28ffb"><div class="ttname"><a href="classAC__Fence.html#a554a9e9287a8d23dd6e71b21aaa28ffb">AC_Fence::_breach_count</a></div><div class="ttdeci">uint16_t _breach_count</div><div class="ttdef"><b>Definition</b> <a href="AC__Fence_8h_source.html#l00221">AC_Fence.h:221</a></div></div>
<div class="ttc" id="aclassAC__Fence_html_a66662a5ace914e441dbd24691f42bace"><div class="ttname"><a href="classAC__Fence.html#a66662a5ace914e441dbd24691f42bace">AC_Fence::_alt_min_backup</a></div><div class="ttdeci">float _alt_min_backup</div><div class="ttdef"><b>Definition</b> <a href="AC__Fence_8h_source.html#l00204">AC_Fence.h:204</a></div></div>
<div class="ttc" id="aclassAC__Fence_html_a66dc7837ee6762c950605dfcead343ca"><div class="ttname"><a href="classAC__Fence.html#a66dc7837ee6762c950605dfcead343ca">AC_Fence::present</a></div><div class="ttdeci">bool present() const</div><div class="ttdoc">present - returns true if fence is present</div><div class="ttdef"><b>Definition</b> <a href="#l00752">AC_Fence.cpp:752</a></div></div>
<div class="ttc" id="aclassAC__Fence_html_a6a3ea58ff2a865c2b31f57d682d5b6ae"><div class="ttname"><a href="classAC__Fence.html#a6a3ea58ff2a865c2b31f57d682d5b6ae">AC_Fence::check_fence_alt_min</a></div><div class="ttdeci">bool check_fence_alt_min()</div><div class="ttdoc">check_fence_alt_min - true if min alt fence has been newly breached</div></div>
<div class="ttc" id="aclassAC__Fence_html_a6bed7149b276214cbe954b1f977cbdab"><div class="ttname"><a href="classAC__Fence.html#a6bed7149b276214cbe954b1f977cbdab">AC_Fence::enabled</a></div><div class="ttdeci">bool enabled() const</div><div class="ttdoc">enabled - returns true if fence is enabled</div><div class="ttdef"><b>Definition</b> <a href="AC__Fence_8h_source.html#l00076">AC_Fence.h:76</a></div></div>
<div class="ttc" id="aclassAC__Fence_html_a775b2f0019418843d6c0c105ed24bf1d"><div class="ttname"><a href="classAC__Fence.html#a775b2f0019418843d6c0c105ed24bf1d">AC_Fence::_circle_radius_backup</a></div><div class="ttdeci">float _circle_radius_backup</div><div class="ttdef"><b>Definition</b> <a href="AC__Fence_8h_source.html#l00205">AC_Fence.h:205</a></div></div>
<div class="ttc" id="aclassAC__Fence_html_a77b1b81a26b6ddbdc933bf2ce3310514"><div class="ttname"><a href="classAC__Fence.html#a77b1b81a26b6ddbdc933bf2ce3310514">AC_Fence::check_fence_polygon</a></div><div class="ttdeci">bool check_fence_polygon()</div><div class="ttdoc">check_fence_polygon - true if polygon fence has been newly breached</div></div>
<div class="ttc" id="aclassAC__Fence_html_a7ebf5b0a5f3f3e1e499f06c0d9f2821d"><div class="ttname"><a href="classAC__Fence.html#a7ebf5b0a5f3f3e1e499f06c0d9f2821d">AC_Fence::_alt_min</a></div><div class="ttdeci">AP_Float _alt_min</div><div class="ttdef"><b>Definition</b> <a href="AC__Fence_8h_source.html#l00194">AC_Fence.h:194</a></div></div>
<div class="ttc" id="aclassAC__Fence_html_a821bda01a08ae9a61e408c037c3aa1f6"><div class="ttname"><a href="classAC__Fence.html#a821bda01a08ae9a61e408c037c3aa1f6">AC_Fence::_last_breach_notify_sent_ms</a></div><div class="ttdeci">uint32_t _last_breach_notify_sent_ms</div><div class="ttdef"><b>Definition</b> <a href="AC__Fence_8h_source.html#l00222">AC_Fence.h:222</a></div></div>
<div class="ttc" id="aclassAC__Fence_html_a8880a449f2e5c05078c41106ae9a9a75"><div class="ttname"><a href="classAC__Fence.html#a8880a449f2e5c05078c41106ae9a9a75">AC_Fence::pre_arm_check_circle</a></div><div class="ttdeci">bool pre_arm_check_circle(const char *&amp;fail_msg) const</div></div>
<div class="ttc" id="aclassAC__Fence_html_a97e656d93344486b6b143e560b6a7495"><div class="ttname"><a href="classAC__Fence.html#a97e656d93344486b6b143e560b6a7495">AC_Fence::_circle_breach_distance</a></div><div class="ttdeci">float _circle_breach_distance</div><div class="ttdef"><b>Definition</b> <a href="AC__Fence_8h_source.html#l00210">AC_Fence.h:210</a></div></div>
<div class="ttc" id="aclassAC__Fence_html_a9cd428de13ed847ee9b7808a7c155ad5"><div class="ttname"><a href="classAC__Fence.html#a9cd428de13ed847ee9b7808a7c155ad5">AC_Fence::_alt_min_breach_distance</a></div><div class="ttdeci">float _alt_min_breach_distance</div><div class="ttdef"><b>Definition</b> <a href="AC__Fence_8h_source.html#l00209">AC_Fence.h:209</a></div></div>
<div class="ttc" id="aclassAC__Fence_html_aaa3fd6fe8cb03492cf4f1a22046db02c"><div class="ttname"><a href="classAC__Fence.html#aaa3fd6fe8cb03492cf4f1a22046db02c">AC_Fence::check_fence_circle</a></div><div class="ttdeci">bool check_fence_circle()</div><div class="ttdoc">check_fence_circle - true if circle fence has been newly breached</div></div>
<div class="ttc" id="aclassAC__Fence_html_aaab03c980945563ed9ae79002d7b5b1e"><div class="ttname"><a href="classAC__Fence.html#aaab03c980945563ed9ae79002d7b5b1e">AC_Fence::_enabled</a></div><div class="ttdeci">AP_Int8 _enabled</div><div class="ttdef"><b>Definition</b> <a href="AC__Fence_8h_source.html#l00189">AC_Fence.h:189</a></div></div>
<div class="ttc" id="aclassAC__Fence_html_aab2b6ce40f27cdec68ce7fa26846b6ef"><div class="ttname"><a href="classAC__Fence.html#aab2b6ce40f27cdec68ce7fa26846b6ef">AC_Fence::sys_status_failed</a></div><div class="ttdeci">bool sys_status_failed() const</div><div class="ttdef"><b>Definition</b> <a href="#l00766">AC_Fence.cpp:766</a></div></div>
<div class="ttc" id="aclassAC__Fence_html_aac9c39791792bfc755fceefc4b6c7c80"><div class="ttname"><a href="classAC__Fence.html#aac9c39791792bfc755fceefc4b6c7c80">AC_Fence::var_info</a></div><div class="ttdeci">static const struct AP_Param::GroupInfo var_info[]</div><div class="ttdef"><b>Definition</b> <a href="AC__Fence_8h_source.html#l00741">AC_Fence.h:741</a></div></div>
<div class="ttc" id="aclassAC__Fence_html_ab7efc0e2e81e68b3fbbab7faff3ae63b"><div class="ttname"><a href="classAC__Fence.html#ab7efc0e2e81e68b3fbbab7faff3ae63b">AC_Fence::auto_enabled</a></div><div class="ttdeci">AutoEnable auto_enabled()</div><div class="ttdoc">auto_enabled - automaticaly enable/disable fence depending of flight status</div><div class="ttdef"><b>Definition</b> <a href="AC__Fence_8h_source.html#l00061">AC_Fence.h:61</a></div></div>
<div class="ttc" id="aclassAC__Fence_html_abae8d67d909b67f2ea35aa8ceb70bdaf"><div class="ttname"><a href="classAC__Fence.html#abae8d67d909b67f2ea35aa8ceb70bdaf">AC_Fence::_circle_radius</a></div><div class="ttdeci">AP_Float _circle_radius</div><div class="ttdef"><b>Definition</b> <a href="AC__Fence_8h_source.html#l00195">AC_Fence.h:195</a></div></div>
<div class="ttc" id="aclassAC__Fence_html_abedc694a31751eb8ebc2d72c35cb89e7"><div class="ttname"><a href="classAC__Fence.html#abedc694a31751eb8ebc2d72c35cb89e7">AC_Fence::check</a></div><div class="ttdeci">uint8_t check()</div><div class="ttdoc">check - returns the fence type that has been breached (if any)</div><div class="ttdef"><b>Definition</b> <a href="#l00758">AC_Fence.cpp:758</a></div></div>
<div class="ttc" id="aclassAC__Fence_html_abffb87707643347f6bde6a085f5fec2a"><div class="ttname"><a href="classAC__Fence.html#abffb87707643347f6bde6a085f5fec2a">AC_Fence::clear_breach</a></div><div class="ttdeci">void clear_breach(uint8_t fence_type)</div><div class="ttdoc">clear_breach - update breach bitmask, time and count</div></div>
<div class="ttc" id="aclassAC__Fence_html_ac1a4ce506ac3c4e1819dedaba1915e2b"><div class="ttname"><a href="classAC__Fence.html#ac1a4ce506ac3c4e1819dedaba1915e2b">AC_Fence::_manual_recovery_start_ms</a></div><div class="ttdeci">uint32_t _manual_recovery_start_ms</div><div class="ttdef"><b>Definition</b> <a href="AC__Fence_8h_source.html#l00224">AC_Fence.h:224</a></div></div>
<div class="ttc" id="aclassAC__Fence_html_ac6fe40b20cce08f1c581d13cf67b0f72"><div class="ttname"><a href="classAC__Fence.html#ac6fe40b20cce08f1c581d13cf67b0f72">AC_Fence::enable_floor</a></div><div class="ttdeci">void enable_floor()</div><div class="ttdoc">enable_floor - allows fence floor to be enabled/disabled. Note this does not update the eeprom saved ...</div></div>
<div class="ttc" id="aclassAC__Fence_html_ace571cd8d535e8667da552a0c2a65f4c"><div class="ttname"><a href="classAC__Fence.html#ace571cd8d535e8667da552a0c2a65f4c">AC_Fence::get_singleton</a></div><div class="ttdeci">static AC_Fence * get_singleton()</div><div class="ttdef"><b>Definition</b> <a href="AC__Fence_8h_source.html#l00055">AC_Fence.h:55</a></div></div>
<div class="ttc" id="aclassAC__Fence_html_acfdf8e3bcc8431a10ff7768a99de7149"><div class="ttname"><a href="classAC__Fence.html#acfdf8e3bcc8431a10ff7768a99de7149">AC_Fence::disable_floor</a></div><div class="ttdeci">void disable_floor()</div><div class="ttdoc">disable_floor - allows fence floor to be enabled/disabled. Note this does not update the eeprom saved...</div><div class="ttdef"><b>Definition</b> <a href="#l00747">AC_Fence.cpp:747</a></div></div>
<div class="ttc" id="aclassAC__Fence_html_ad7a09ac5f46a1d5b77c2493e393566af"><div class="ttname"><a href="classAC__Fence.html#ad7a09ac5f46a1d5b77c2493e393566af">AC_Fence::AC_Fence</a></div><div class="ttdeci">AC_Fence()</div><div class="ttdef"><b>Definition</b> <a href="#l00743">AC_Fence.cpp:743</a></div></div>
<div class="ttc" id="aclassAC__Fence_html_ad8c13b275d25491c0a3dcf3eff8dead7"><div class="ttname"><a href="classAC__Fence.html#ad8c13b275d25491c0a3dcf3eff8dead7">AC_Fence::_breach_time</a></div><div class="ttdeci">uint32_t _breach_time</div><div class="ttdef"><b>Definition</b> <a href="AC__Fence_8h_source.html#l00220">AC_Fence.h:220</a></div></div>
<div class="ttc" id="aclassAC__Fence_html_adae81127f1110dd08c7137a6b8aac956"><div class="ttname"><a href="classAC__Fence.html#adae81127f1110dd08c7137a6b8aac956">AC_Fence::check_fence_alt_max</a></div><div class="ttdeci">bool check_fence_alt_max()</div><div class="ttdoc">check_fence_alt_max - true if max alt fence has been newly breached</div></div>
<div class="ttc" id="aclassAC__Fence_html_ae46cc9ba79d869296585e41a2702621e"><div class="ttname"><a href="classAC__Fence.html#ae46cc9ba79d869296585e41a2702621e">AC_Fence::pre_arm_check</a></div><div class="ttdeci">bool pre_arm_check(const char *&amp;fail_msg) const</div><div class="ttdoc">pre_arm_check - returns true if all pre-takeoff checks have completed successfully</div><div class="ttdef"><b>Definition</b> <a href="#l00756">AC_Fence.cpp:756</a></div></div>
<div class="ttc" id="aclassAC__Fence_html_aec25c6879cf00417bb1fb4d48c9ca70f"><div class="ttname"><a href="classAC__Fence.html#aec25c6879cf00417bb1fb4d48c9ca70f">AC_Fence::auto_enable_fence_after_takeoff</a></div><div class="ttdeci">void auto_enable_fence_after_takeoff()</div><div class="ttdoc">auto_enable_fence_on_takeoff - auto enables the fence. Called after takeoff conditions met</div><div class="ttdef"><b>Definition</b> <a href="#l00749">AC_Fence.cpp:749</a></div></div>
<div class="ttc" id="aclassAC__Fence_html_aefa0eacd69a9085a339322033a318ac8"><div class="ttname"><a href="classAC__Fence.html#aefa0eacd69a9085a339322033a318ac8">AC_Fence::_curr_alt</a></div><div class="ttdeci">float _curr_alt</div><div class="ttdef"><b>Definition</b> <a href="AC__Fence_8h_source.html#l00215">AC_Fence.h:215</a></div></div>
<div class="ttc" id="aclassAC__Fence_html_af2ad75b14baad838cb61416a6140b592"><div class="ttname"><a href="classAC__Fence.html#af2ad75b14baad838cb61416a6140b592">AC_Fence::_auto_enabled</a></div><div class="ttdeci">AP_Int8 _auto_enabled</div><div class="ttdef"><b>Definition</b> <a href="AC__Fence_8h_source.html#l00190">AC_Fence.h:190</a></div></div>
<div class="ttc" id="aclassAC__PolyFence__loader_html"><div class="ttname"><a href="classAC__PolyFence__loader.html">AC_PolyFence_loader</a></div><div class="ttdef"><b>Definition</b> <a href="AC__PolyFence__loader_8h_source.html#l00042">AC_PolyFence_loader.h:43</a></div></div>
<div class="ttc" id="aclassAC__PolyFence__loader_html_a1fe32810f46488cdf6aad79c15533b98"><div class="ttname"><a href="classAC__PolyFence__loader.html#a1fe32810f46488cdf6aad79c15533b98">AC_PolyFence_loader::total_fence_count</a></div><div class="ttdeci">uint16_t total_fence_count() const</div><div class="ttdef"><b>Definition</b> <a href="AC__PolyFence__loader_8h_source.html#l00181">AC_PolyFence_loader.h:181</a></div></div>
<div class="ttc" id="aclassAC__PolyFence__loader_html_a38885641f6be9b5e2f507f5abb06e92b"><div class="ttname"><a href="classAC__PolyFence__loader.html#a38885641f6be9b5e2f507f5abb06e92b">AC_PolyFence_loader::loaded</a></div><div class="ttdeci">bool loaded() const WARN_IF_UNUSED</div><div class="ttdef"><b>Definition</b> <a href="AC__PolyFence__loader_8h_source.html#l00145">AC_PolyFence_loader.h:145</a></div></div>
<div class="ttc" id="aclassAC__PolyFence__loader_html_a9573e3ae1c8d2997d85cd081479e895d"><div class="ttname"><a href="classAC__PolyFence__loader.html#a9573e3ae1c8d2997d85cd081479e895d">AC_PolyFence_loader::check_inclusion_circle_margin</a></div><div class="ttdeci">bool check_inclusion_circle_margin(float margin) const</div></div>
<div class="ttc" id="aclassAC__PolyFence__loader_html_adce8261dd60449241bd1014253c88ac8"><div class="ttname"><a href="classAC__PolyFence__loader.html#adce8261dd60449241bd1014253c88ac8">AC_PolyFence_loader::breached</a></div><div class="ttdeci">bool breached() const WARN_IF_UNUSED</div><div class="ttdef"><b>Definition</b> <a href="AC__PolyFence__loader_8cpp_source.html#l01634">AC_PolyFence_loader.cpp:1634</a></div></div>
<div class="ttc" id="aclassAP__AHRS_html_a0ce7fb0e943712be46d2ec00e2c7e7de"><div class="ttname"><a href="classAP__AHRS.html#a0ce7fb0e943712be46d2ec00e2c7e7de">AP_AHRS::get_relative_position_D_home</a></div><div class="ttdeci">void get_relative_position_D_home(float &amp;posD) const</div><div class="ttdef"><b>Definition</b> <a href="AP__AHRS_8cpp_source.html#l01799">AP_AHRS.cpp:1799</a></div></div>
<div class="ttc" id="aclassAP__HAL_1_1HAL_html"><div class="ttname"><a href="classAP__HAL_1_1HAL.html">AP_HAL::HAL</a></div><div class="ttdef"><b>Definition</b> <a href="HAL_8h_source.html#l00021">HAL.h:21</a></div></div>
<div class="ttc" id="aclassAP__JSON_1_1value_html"><div class="ttname"><a href="classAP__JSON_1_1value.html">AP_JSON::value</a></div><div class="ttdef"><b>Definition</b> <a href="AP__JSON_8h_source.html#l00023">AP_JSON.h:24</a></div></div>
<div class="ttc" id="aclassAP__Logger_html_acc819f09dd35b615500c4dec658519d2"><div class="ttname"><a href="classAP__Logger.html#acc819f09dd35b615500c4dec658519d2">AP_Logger::Write_Event</a></div><div class="ttdeci">void Write_Event(LogEvent id)</div><div class="ttdef"><b>Definition</b> <a href="AP__Logger_8cpp_source.html#l01487">AP_Logger.cpp:1487</a></div></div>
<div class="ttc" id="aclassAP__Param_html_a5f6dcfce1c0a79cf5bd81283e22f3201"><div class="ttname"><a href="classAP__Param.html#a5f6dcfce1c0a79cf5bd81283e22f3201">AP_Param::setup_object_defaults</a></div><div class="ttdeci">static void setup_object_defaults(const void *object_pointer, const struct GroupInfo *group_info)</div><div class="ttdef"><b>Definition</b> <a href="main_8cpp_source.html#l00010">main.cpp:10</a></div></div>
<div class="ttc" id="aclassLocation_html"><div class="ttname"><a href="classLocation.html">Location</a></div><div class="ttdef"><b>Definition</b> <a href="Location_8h_source.html#l00007">Location.h:8</a></div></div>
<div class="ttc" id="aclassLocation_html_a0b8a5317ad6b631a7a82c52b258fec1f"><div class="ttname"><a href="classLocation.html#a0b8a5317ad6b631a7a82c52b258fec1f">Location::get_alt_cm</a></div><div class="ttdeci">bool get_alt_cm(AltFrame desired_frame, int32_t &amp;ret_alt_cm) const WARN_IF_UNUSED</div><div class="ttdoc">get altitude in desired frame</div><div class="ttdef"><b>Definition</b> <a href="Location_8cpp_source.html#l00109">Location.cpp:109</a></div></div>
<div class="ttc" id="aclassLocation_html_af494dabb88cd43e0d4efa99f04d31351adc2241348a103ecefcef66579c80336f"><div class="ttname"><a href="classLocation.html#af494dabb88cd43e0d4efa99f04d31351adc2241348a103ecefcef66579c80336f">Location::AltFrame::ABOVE_HOME</a></div><div class="ttdeci">@ ABOVE_HOME</div></div>
<div class="ttc" id="amonocypher_8cpp_html_afa99ec4acc4ecb2dc3c2d05da15d0e3f"><div class="ttname"><a href="monocypher_8cpp.html#afa99ec4acc4ecb2dc3c2d05da15d0e3f">MAX</a></div><div class="ttdeci">#define MAX(a, b)</div><div class="ttdef"><b>Definition</b> <a href="monocypher_8cpp_source.html#l00072">monocypher.cpp:72</a></div></div>
<div class="ttc" id="anamespaceAP__HAL_html_a52edeef7d5ffaa365e1229b87c170307"><div class="ttname"><a href="namespaceAP__HAL.html#a52edeef7d5ffaa365e1229b87c170307">AP_HAL::panic</a></div><div class="ttdeci">void panic(const char *errormsg,...) FMT_PRINTF(1</div><div class="ttdef"><b>Definition</b> <a href="AP__HAL__ChibiOS_2system_8cpp_source.html#l00327">system.cpp:327</a></div></div>
<div class="ttc" id="anamespaceAP__HAL_html_a77dffbb18891996280308e21316ec186"><div class="ttname"><a href="namespaceAP__HAL.html#a77dffbb18891996280308e21316ec186">AP_HAL::millis</a></div><div class="ttdeci">uint32_t millis()</div><div class="ttdef"><b>Definition</b> <a href="AP__HAL__ChibiOS_2system_8cpp_source.html#l00377">system.cpp:377</a></div></div>
<div class="ttc" id="anamespaceAP_html"><div class="ttname"><a href="namespaceAP.html">AP</a></div><div class="ttdef"><b>Definition</b> <a href="AC__Avoid_8cpp_source.html#l01481">AC_Avoid.cpp:1481</a></div></div>
<div class="ttc" id="anamespaceAP_html_a99432cfdb696952c9b7146f155a815aa"><div class="ttname"><a href="namespaceAP.html#a99432cfdb696952c9b7146f155a815aa">AP::ahrs</a></div><div class="ttdeci">AP_AHRS &amp; ahrs()</div><div class="ttdef"><b>Definition</b> <a href="AP__AHRS_8cpp_source.html#l03558">AP_AHRS.cpp:3558</a></div></div>
<div class="ttc" id="anamespaceAP_html_aa35bfac1ea2da16f110e8e72db7b3b20"><div class="ttname"><a href="namespaceAP.html#aa35bfac1ea2da16f110e8e72db7b3b20">AP::logger</a></div><div class="ttdeci">AP_Logger &amp; logger()</div><div class="ttdef"><b>Definition</b> <a href="AP__Logger_8cpp_source.html#l01740">AP_Logger.cpp:1740</a></div></div>
<div class="ttc" id="anamespaceAP_html_ad7eb5eb7d80cfbcb69839b497bff7a46"><div class="ttname"><a href="namespaceAP.html#ad7eb5eb7d80cfbcb69839b497bff7a46">AP::fence</a></div><div class="ttdeci">AC_Fence * fence()</div><div class="ttdef"><b>Definition</b> <a href="#l00785">AC_Fence.cpp:785</a></div></div>
<div class="ttc" id="astructAP__Param_1_1GroupInfo_html"><div class="ttname"><a href="structAP__Param_1_1GroupInfo.html">AP_Param::GroupInfo</a></div><div class="ttdef"><b>Definition</b> <a href="AP__Param_8h_source.html#l00199">AP_Param.h:199</a></div></div>
<div class="ttc" id="astructVector2_html"><div class="ttname"><a href="structVector2.html">Vector2&lt; float &gt;</a></div></div>
<div class="ttc" id="astructVector2_html_aed3cf4803ee803dc1447985ca323178f"><div class="ttname"><a href="structVector2.html#aed3cf4803ee803dc1447985ca323178f">Vector2::length</a></div><div class="ttdeci">T length(void) const</div><div class="ttdef"><b>Definition</b> <a href="vector2_8cpp_source.html#l00030">vector2.cpp:30</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Mar 22 2024 16:14:13 for APM:Libraries by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
