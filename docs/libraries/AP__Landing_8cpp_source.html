<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>APM:Libraries: libraries/AP_Landing/AP_Landing.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">APM:Libraries
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_bc0718b08fb2015b8e59c47b2805f60c.html">libraries</a></li><li class="navelem"><a class="el" href="dir_1713d76cd55ab83d110dbc34eac25f80.html">AP_Landing</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle"><div class="title">AP_Landing.cpp</div></div>
</div><!--header-->
<div class="contents">
<a href="AP__Landing_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">/*</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment">   This program is free software: you can redistribute it and/or modify</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment">   it under the terms of the GNU General Public License as published by</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="comment">   the Free Software Foundation, either version 3 of the License, or</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="comment">   (at your option) any later version.</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="comment"></span> </div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="comment">   This program is distributed in the hope that it will be useful,</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="comment">   but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="comment">   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="comment">   GNU General Public License for more details.</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="comment"></span> </div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="comment">   You should have received a copy of the GNU General Public License</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="comment">   along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="comment"> */</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span> </div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="comment">/*</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="comment"> *   AP_Landing.cpp - Landing logic handler for ArduPlane</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="comment"> */</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span> </div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="preprocessor">#include &quot;<a class="code" href="AP__Landing_8h.html">AP_Landing.h</a>&quot;</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span><span class="preprocessor">#include &lt;<a class="code" href="GCS_8h.html">GCS_MAVLink/GCS.h</a>&gt;</span></div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span><span class="preprocessor">#include &lt;<a class="code" href="AP__AHRS_8h.html">AP_AHRS/AP_AHRS.h</a>&gt;</span></div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span><span class="preprocessor">#include &lt;<a class="code" href="AC__Fence_8h.html">AC_Fence/AC_Fence.h</a>&gt;</span></div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span> </div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span><span class="comment">// table of user settable parameters</span></div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span><span class="keyword">const</span> <a class="code hl_struct" href="structAP__Param_1_1GroupInfo.html">AP_Param::GroupInfo</a> <a class="code hl_variable" href="classAP__Landing.html#afc85fdc4d7271fbd7d0f517907aace30">AP_Landing::var_info</a>[] = {</div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span> </div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span>    <span class="comment">// @Param: SLOPE_RCALC</span></div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span>    <span class="comment">// @DisplayName: Landing slope re-calc threshold</span></div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span>    <span class="comment">// @Description: This parameter is used when using a rangefinder during landing for altitude correction from baro drift (RNGFND_LANDING=1) and the altitude correction indicates your altitude is lower than the intended slope path. This value is the threshold of the correction to re-calculate the landing approach slope. Set to zero to keep the original slope all the way down and any detected baro drift will be corrected by pitching/throttling up to snap back to resume the original slope path. Otherwise, when a rangefinder altitude correction exceeds this threshold it will trigger a slope re-calculate to give a shallower slope. This also smoothes out the approach when flying over objects such as trees. Recommend a value of 2m.</span></div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span>    <span class="comment">// @Range: 0 5</span></div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span>    <span class="comment">// @Units: m</span></div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span>    <span class="comment">// @Increment: 0.5</span></div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;SLOPE_RCALC&quot;</span>, 1, <a class="code hl_class" href="classAP__Landing.html">AP_Landing</a>, slope_recalc_shallow_threshold, 2.0f),</div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span> </div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span>    <span class="comment">// @Param: ABORT_DEG</span></div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span>    <span class="comment">// @DisplayName: Landing auto-abort slope threshold</span></div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span>    <span class="comment">// @Description: This parameter is used when using a rangefinder during landing for altitude correction from baro drift (RNGFND_LANDING=1) and the altitude correction indicates your actual altitude is higher than the intended slope path. Normally it would pitch down steeply but that can result in a crash with high airspeed so this allows remembering the baro offset and self-abort the landing and come around for another landing with the correct baro offset applied for a perfect slope. An auto-abort go-around will only happen once, next attempt will not auto-abort again. This operation happens entirely automatically in AUTO mode. This value is the delta degrees threshold to trigger the go-around compared to the original slope. Example: if set to 5 deg and the mission planned slope is 15 deg then if the new slope is 21 then it will go-around. Set to 0 to disable. Requires LAND_SLOPE_RCALC &gt; 0.</span></div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span>    <span class="comment">// @Range: 0 90</span></div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span>    <span class="comment">// @Units: deg</span></div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span>    <span class="comment">// @Increment: 0.1</span></div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;ABORT_DEG&quot;</span>, 2, <a class="code hl_class" href="classAP__Landing.html">AP_Landing</a>, slope_recalc_steep_threshold_to_abort, 0),</div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span> </div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span>    <span class="comment">// @Param: PITCH_DEG</span></div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span>    <span class="comment">// @DisplayName: Landing Pitch</span></div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span>    <span class="comment">// @Description: Used in autoland to give the minimum pitch in the final stage of landing (after the flare). This parameter can be used to ensure that the final landing attitude is appropriate for the type of undercarriage on the aircraft. Note that it is a minimum pitch only - the landing code will control pitch above this value to try to achieve the configured landing sink rate.</span></div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span>    <span class="comment">// @Units: deg</span></div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span>    <span class="comment">// @Range: -20 20</span></div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span>    <span class="comment">// @Increment: 10</span></div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;PITCH_DEG&quot;</span>, 3, <a class="code hl_class" href="classAP__Landing.html">AP_Landing</a>, pitch_deg, 0),</div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span> </div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span>    <span class="comment">// @Param: FLARE_ALT</span></div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span>    <span class="comment">// @DisplayName: Landing flare altitude</span></div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>    <span class="comment">// @Description: Altitude in autoland at which to lock heading and flare to the LAND_PITCH_DEG pitch. Note that this option is secondary to LAND_FLARE_SEC. For a good landing it preferable that the flare is triggered by LAND_FLARE_SEC.</span></div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span>    <span class="comment">// @Units: m</span></div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span>    <span class="comment">// @Range: 0 30</span></div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>    <span class="comment">// @Increment: 0.1</span></div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;FLARE_ALT&quot;</span>, 4, <a class="code hl_class" href="classAP__Landing.html">AP_Landing</a>, flare_alt, 3.0f),</div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span> </div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>    <span class="comment">// @Param: FLARE_SEC</span></div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>    <span class="comment">// @DisplayName: Landing flare time</span></div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span>    <span class="comment">// @Description: Vertical time before landing point at which to lock heading and flare with the motor stopped. This is vertical time, and is calculated based solely on the current height above the ground and the current descent rate.  Set to 0 if you only wish to flare based on altitude (see LAND_FLARE_ALT).</span></div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>    <span class="comment">// @Units: s</span></div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span>    <span class="comment">// @Range: 0 10</span></div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>    <span class="comment">// @Increment: 0.1</span></div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;FLARE_SEC&quot;</span>, 5, <a class="code hl_class" href="classAP__Landing.html">AP_Landing</a>, flare_sec, 2.0f),</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span> </div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>    <span class="comment">// @Param: PF_ALT</span></div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>    <span class="comment">// @DisplayName: Landing pre-flare altitude</span></div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>    <span class="comment">// @Description: Altitude to trigger pre-flare flight stage where LAND_PF_ARSPD controls airspeed. The pre-flare flight stage trigger works just like LAND_FLARE_ALT but higher. Disabled when LAND_PF_ARSPD is 0.</span></div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>    <span class="comment">// @Units: m</span></div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>    <span class="comment">// @Range: 0 30</span></div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>    <span class="comment">// @Increment: 0.1</span></div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;PF_ALT&quot;</span>, 6, <a class="code hl_class" href="classAP__Landing.html">AP_Landing</a>, pre_flare_alt, 10.0f),</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span> </div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>    <span class="comment">// @Param: PF_SEC</span></div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>    <span class="comment">// @DisplayName: Landing pre-flare time</span></div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>    <span class="comment">// @Description: Vertical time to ground to trigger pre-flare flight stage where LAND_PF_ARSPD controls airspeed. This pre-flare flight stage trigger works just like LAND_FLARE_SEC but earlier. Disabled when LAND_PF_ARSPD is 0.</span></div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>    <span class="comment">// @Units: s</span></div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>    <span class="comment">// @Range: 0 10</span></div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>    <span class="comment">// @Increment: 0.1</span></div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;PF_SEC&quot;</span>, 7, <a class="code hl_class" href="classAP__Landing.html">AP_Landing</a>, pre_flare_sec, 6.0f),</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span> </div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>    <span class="comment">// @Param: PF_ARSPD</span></div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>    <span class="comment">// @DisplayName: Landing pre-flare airspeed</span></div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>    <span class="comment">// @Description: Desired airspeed during pre-flare flight stage. This is useful to reduce airspeed just before the flare. Use 0 to disable.</span></div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>    <span class="comment">// @Units: m/s</span></div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>    <span class="comment">// @Range: 0 30</span></div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>    <span class="comment">// @Increment: 0.1</span></div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;PF_ARSPD&quot;</span>, 8, <a class="code hl_class" href="classAP__Landing.html">AP_Landing</a>, pre_flare_airspeed, 0),</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span> </div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>    <span class="comment">// @Param: THR_SLEW</span></div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span>    <span class="comment">// @DisplayName: Landing throttle slew rate</span></div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>    <span class="comment">// @Description: This parameter sets the slew rate for the throttle during auto landing. When this is zero the THR_SLEWRATE parameter is used during landing. The value is a percentage throttle change per second, so a value of 20 means to advance the throttle over 5 seconds on landing. Values below 50 are not recommended as it may cause a stall when airspeed is low and you can not throttle up fast enough.</span></div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>    <span class="comment">// @Units: %</span></div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>    <span class="comment">// @Range: 0 127</span></div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span>    <span class="comment">// @Increment: 1</span></div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;THR_SLEW&quot;</span>, 9, <a class="code hl_class" href="classAP__Landing.html">AP_Landing</a>, throttle_slewrate, 0),</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span> </div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>    <span class="comment">// @Param: DISARMDELAY</span></div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>    <span class="comment">// @DisplayName: Landing disarm delay</span></div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>    <span class="comment">// @Description: After a landing has completed using a LAND waypoint, automatically disarm after this many seconds have passed. Use 0 to not disarm.</span></div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>    <span class="comment">// @Units: s</span></div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>    <span class="comment">// @Increment: 1</span></div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>    <span class="comment">// @Range: 0 127</span></div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;DISARMDELAY&quot;</span>, 10, <a class="code hl_class" href="classAP__Landing.html">AP_Landing</a>, disarm_delay, 20),</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span> </div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>    <span class="comment">// @Param: THEN_NEUTRL</span></div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>    <span class="comment">// @DisplayName: Set servos to neutral after landing</span></div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>    <span class="comment">// @Description: When enabled, after an autoland and auto-disarm via LAND_DISARMDELAY happens then set all servos to neutral. This is helpful when an aircraft has a rough landing upside down or a crazy angle causing the servos to strain.</span></div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>    <span class="comment">// @Values: 0:Disabled, 1:Servos to Neutral, 2:Servos to Zero PWM</span></div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;THEN_NEUTRL&quot;</span>, 11, <a class="code hl_class" href="classAP__Landing.html">AP_Landing</a>, then_servos_neutral, 0),</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span> </div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>    <span class="comment">// @Param: ABORT_THR</span></div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>    <span class="comment">// @DisplayName: Landing abort using throttle</span></div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>    <span class="comment">// @Description: Allow a landing abort to trigger with an input throttle &gt;= 90%. This works with or without stick-mixing enabled.</span></div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>    <span class="comment">// @Values: 0:Disabled, 1:Enabled</span></div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;ABORT_THR&quot;</span>, 12, <a class="code hl_class" href="classAP__Landing.html">AP_Landing</a>, abort_throttle_enable, 0),</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span> </div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>    <span class="comment">// @Param: FLAP_PERCNT</span></div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>    <span class="comment">// @DisplayName: Landing flap percentage</span></div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>    <span class="comment">// @Description: The amount of flaps (as a percentage) to apply in the landing approach and flare of an automatic landing</span></div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>    <span class="comment">// @Range: 0 100</span></div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>    <span class="comment">// @Units: %</span></div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>    <span class="comment">// @Increment: 1</span></div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;FLAP_PERCNT&quot;</span>, 13, <a class="code hl_class" href="classAP__Landing.html">AP_Landing</a>, flap_percent, 0),</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span> </div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>    <span class="comment">// @Param: OPTIONS</span></div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>    <span class="comment">// @DisplayName: Landing options bitmask</span></div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>    <span class="comment">// @Description: Bitmask of options to use with landing.</span></div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>    <span class="comment">// @Bitmask: 0: honor min throttle during landing flare,1: Increase Target landing airspeed constraint From Trim Airspeed to AIRSPEED_MAX</span></div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;OPTIONS&quot;</span>, 16, <a class="code hl_class" href="classAP__Landing.html">AP_Landing</a>, _options, 0),</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span> </div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>    <span class="comment">// @Param: FLARE_AIM</span></div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>    <span class="comment">// @DisplayName: Flare aim point adjustment percentage.</span></div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>    <span class="comment">// @Description: This parameter controls how much the aim point is moved to allow for the time spent in the flare manoeuvre. When set to 100% the aim point is adjusted on the assumption that the flare sink rate controller instantly achieves the sink rate set by TECS_LAND_SINK. when set to 0%, no aim point adjustment is made. If the plane consistently touches down short of the aim point reduce the parameter and vice verse.</span></div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>    <span class="comment">// @Range: 0 100</span></div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>    <span class="comment">// @Units: %</span></div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>    <span class="comment">// @Increment: 1</span></div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;FLARE_AIM&quot;</span>, 17, <a class="code hl_class" href="classAP__Landing.html">AP_Landing</a>, flare_effectivness_pct, 50),</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span> </div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>    <span class="comment">// @Param: WIND_COMP</span></div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>    <span class="comment">// @DisplayName: Headwind Compensation when Landing</span></div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>    <span class="comment">// @Description: This param controls how much headwind compensation is used when landing.  Headwind speed component multiplied by this parameter is added to TECS_LAND_ARSPD command.  Set to Zero to disable.  Note:  The target landing airspeed command is still limited to AIRSPEED_MAX.</span></div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>    <span class="comment">// @Range: 0 100</span></div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>    <span class="comment">// @Units: %</span></div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>    <span class="comment">// @Increment: 1</span></div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;WIND_COMP&quot;</span>, 18, <a class="code hl_class" href="classAP__Landing.html">AP_Landing</a>, wind_comp, 50),</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span> </div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>    <span class="comment">// @Param: TYPE</span></div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>    <span class="comment">// @DisplayName: Auto-landing type</span></div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>    <span class="comment">// @Description: Specifies the auto-landing type to use</span></div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>    <span class="comment">// @Values: 0:Standard Glide Slope, 1:Deepstall</span></div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>    <a class="code hl_define" href="AP__Param_8h.html#ac24e2eb16c2194e975d27e47ddcb7f1c">AP_GROUPINFO_FLAGS</a>(<span class="stringliteral">&quot;TYPE&quot;</span>,    14, <a class="code hl_class" href="classAP__Landing.html">AP_Landing</a>, <a class="code hl_struct" href="structtype.html">type</a>, TYPE_STANDARD_GLIDE_SLOPE, <a class="code hl_define" href="AP__Param_8h.html#ae25c1c7495435989f8be5781c86be078">AP_PARAM_FLAG_ENABLE</a>),</div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span> </div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span><span class="preprocessor">#if HAL_LANDING_DEEPSTALL_ENABLED</span></div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>    <span class="comment">// @Group: DS_</span></div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>    <span class="comment">// @Path: AP_Landing_Deepstall.cpp</span></div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>    <a class="code hl_define" href="AP__Param_8h.html#a16c360358c5d6a08d34f60921fd916a9">AP_SUBGROUPINFO</a>(deepstall, <span class="stringliteral">&quot;DS_&quot;</span>, 15, <a class="code hl_class" href="classAP__Landing.html">AP_Landing</a>, AP_Landing_Deepstall),</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span> </div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>    <span class="comment">// additional global params should be placed in the list above TYPE to avoid the enable flag hiding the deepstall params</span></div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span> </div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>    <a class="code hl_define" href="AP__Param_8h.html#a0f9acb038a5283b964b862aea8cc5051">AP_GROUPEND</a></div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>};</div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span> </div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>    <span class="comment">// constructor</span></div>
<div class="foldopen" id="foldopen00185" data-start="{" data-end="}">
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno"><a class="line" href="classAP__Landing.html#a6d7e8b7fbf40f7c5be7a2c46b1897177">  185</a></span><a class="code hl_function" href="classAP__Landing.html#a6d7e8b7fbf40f7c5be7a2c46b1897177">AP_Landing::AP_Landing</a>(<a class="code hl_class" href="classAP__Mission.html">AP_Mission</a> &amp;_mission, <a class="code hl_class" href="classAP__AHRS.html">AP_AHRS</a> &amp;_ahrs, <a class="code hl_class" href="classAP__TECS.html">AP_TECS</a> *_tecs_Controller, <a class="code hl_class" href="classAP__Navigation.html">AP_Navigation</a> *_nav_controller, <a class="code hl_struct" href="structAP__FixedWing.html">AP_FixedWing</a> &amp;_aparm,</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>                       set_target_altitude_proportion_fn_t _set_target_altitude_proportion_fn,</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>                       constrain_target_altitude_location_fn_t _constrain_target_altitude_location_fn,</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>                       adjusted_altitude_cm_fn_t _adjusted_altitude_cm_fn,</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>                       adjusted_relative_altitude_cm_fn_t _adjusted_relative_altitude_cm_fn,</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>                       disarm_if_autoland_complete_fn_t _disarm_if_autoland_complete_fn,</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>                       update_flight_stage_fn_t _update_flight_stage_fn) :</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>    mission(_mission)</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>    ,<a class="code hl_variable" href="AHRS__Test_8cpp.html#a1a50ac0ea0e2f27db5b95e9a738d41dc">ahrs</a>(_ahrs)</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>    ,tecs_Controller(_tecs_Controller)</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>    ,nav_controller(_nav_controller)</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>    ,aparm(_aparm)</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>    ,set_target_altitude_proportion_fn(_set_target_altitude_proportion_fn)</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>    ,constrain_target_altitude_location_fn(_constrain_target_altitude_location_fn)</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span>    ,adjusted_altitude_cm_fn(_adjusted_altitude_cm_fn)</div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>    ,adjusted_relative_altitude_cm_fn(_adjusted_relative_altitude_cm_fn)</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>    ,disarm_if_autoland_complete_fn(_disarm_if_autoland_complete_fn)</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>    ,update_flight_stage_fn(_update_flight_stage_fn)</div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>#if <a class="code hl_define" href="AP__Landing__config_8h.html#a06bbe640b9e2cf90c56d58efc6149951">HAL_LANDING_DEEPSTALL_ENABLED</a></div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>    ,deepstall(*this)</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>#endif</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>{</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>    <a class="code hl_function" href="classAP__Param.html#a5f6dcfce1c0a79cf5bd81283e22f3201">AP_Param::setup_object_defaults</a>(<span class="keyword">this</span>, var_info);</div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>}</div>
</div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span> </div>
<div class="foldopen" id="foldopen00210" data-start="{" data-end="}">
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno"><a class="line" href="classAP__Landing.html#ac7cb51eaa69d1bed262223b56ee2c4ce">  210</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classAP__Landing.html#ac7cb51eaa69d1bed262223b56ee2c4ce">AP_Landing::do_land</a>(<span class="keyword">const</span> <a class="code hl_struct" href="structAP__Mission_1_1Mission__Command.html">AP_Mission::Mission_Command</a>&amp; cmd, <span class="keyword">const</span> <span class="keywordtype">float</span> relative_altitude)</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span>{</div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>    <a class="code hl_function" href="classAP__Landing.html#a9b1053b2298592fc9616ff14ef8eeda0">Log</a>(); <span class="comment">// log old state so we get a nice transition from old to new here</span></div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span> </div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>    <a class="code hl_variable" href="classAP__Landing.html#a786bad67b7b42a6e91bba2307d79d6c7">flags</a>.commanded_go_around = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span> </div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>    <span class="keywordflow">switch</span> (<a class="code hl_struct" href="structtype.html">type</a>) {</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAP__Landing.html#a0a738bcc57de16b34b85bbd1ee21211da958522ad716577169da9dee89db979ac">TYPE_STANDARD_GLIDE_SLOPE</a>:</div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>        <a class="code hl_function" href="classAP__Landing.html#af39dd86c5af8eea24ce31fe858b9c26b">type_slope_do_land</a>(cmd, relative_altitude);</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span><span class="preprocessor">#if HAL_LANDING_DEEPSTALL_ENABLED</span></div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>    <span class="keywordflow">case</span> TYPE_DEEPSTALL:</div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>        deepstall.do_land(cmd, relative_altitude);</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>        <span class="comment">// a incorrect type is handled in the verify_land</span></div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>    }</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span> </div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>    <a class="code hl_function" href="classAP__Landing.html#a9b1053b2298592fc9616ff14ef8eeda0">Log</a>();</div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>}</div>
</div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span> </div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span><span class="comment">/*</span></div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span><span class="comment">  update navigation for landing. Called when on landing approach or</span></div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span><span class="comment">  final flare</span></div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span><span class="comment"> */</span></div>
<div class="foldopen" id="foldopen00237" data-start="{" data-end="}">
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno"><a class="line" href="classAP__Landing.html#afdbc34de818b9cb366336c23660fd495">  237</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classAP__Landing.html#afdbc34de818b9cb366336c23660fd495">AP_Landing::verify_land</a>(<span class="keyword">const</span> <a class="code hl_class" href="classLocation.html">Location</a> &amp;prev_WP_loc, <a class="code hl_class" href="classLocation.html">Location</a> &amp;next_WP_loc, <span class="keyword">const</span> <a class="code hl_class" href="classLocation.html">Location</a> &amp;current_loc,</div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>        <span class="keyword">const</span> <span class="keywordtype">float</span> height, <span class="keyword">const</span> <span class="keywordtype">float</span> sink_rate, <span class="keyword">const</span> <span class="keywordtype">float</span> wp_proportion, <span class="keyword">const</span> uint32_t last_flying_ms, <span class="keyword">const</span> <span class="keywordtype">bool</span> is_armed, <span class="keyword">const</span> <span class="keywordtype">bool</span> is_flying, <span class="keyword">const</span> <span class="keywordtype">bool</span> rangefinder_state_in_range)</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>{</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>    <span class="keywordtype">bool</span> success = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span> </div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span>    <span class="keywordflow">switch</span> (<a class="code hl_struct" href="structtype.html">type</a>) {</div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAP__Landing.html#a0a738bcc57de16b34b85bbd1ee21211da958522ad716577169da9dee89db979ac">TYPE_STANDARD_GLIDE_SLOPE</a>:</div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>        success = <a class="code hl_function" href="classAP__Landing.html#a7e884642791e4b1f0b9c396b86055a6a">type_slope_verify_land</a>(prev_WP_loc, next_WP_loc, current_loc,</div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span>                height, sink_rate, wp_proportion, last_flying_ms, is_armed, is_flying, rangefinder_state_in_range);</div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span><span class="preprocessor">#if HAL_LANDING_DEEPSTALL_ENABLED</span></div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>    <span class="keywordflow">case</span> TYPE_DEEPSTALL:</div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>        success = deepstall.verify_land(prev_WP_loc, next_WP_loc, current_loc,</div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>                                             height, sink_rate, wp_proportion, last_flying_ms, is_armed, is_flying, rangefinder_state_in_range);</div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span>        <span class="comment">// returning TRUE while executing verify_land() will increment the</span></div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>        <span class="comment">// mission index which in many cases will trigger an RTL for end-of-mission</span></div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>        <a class="code hl_define" href="GCS_8h.html#a266bfe8eda675e1092f045e93932b4a6">GCS_SEND_TEXT</a>(MAV_SEVERITY_CRITICAL, <span class="stringliteral">&quot;Landing configuration error, invalid LAND_TYPE&quot;</span>);</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>        success = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>    }</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>    <a class="code hl_function" href="classAP__Landing.html#a9b1053b2298592fc9616ff14ef8eeda0">Log</a>();</div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>    <span class="keywordflow">return</span> success;</div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>}</div>
</div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span> </div>
<div class="foldopen" id="foldopen00264" data-start="{" data-end="}">
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno"><a class="line" href="classAP__Landing.html#a23d5d937afe630bfa1d3eeea5d767e4b">  264</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classAP__Landing.html#a23d5d937afe630bfa1d3eeea5d767e4b">AP_Landing::verify_abort_landing</a>(<span class="keyword">const</span> <a class="code hl_class" href="classLocation.html">Location</a> &amp;prev_WP_loc, <a class="code hl_class" href="classLocation.html">Location</a> &amp;next_WP_loc, <span class="keyword">const</span> <a class="code hl_class" href="classLocation.html">Location</a> &amp;current_loc,</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>    <span class="keyword">const</span> int32_t auto_state_takeoff_altitude_rel_cm, <span class="keywordtype">bool</span> &amp;throttle_suppressed)</div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>{</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>    <span class="keywordflow">switch</span> (<a class="code hl_struct" href="structtype.html">type</a>) {</div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAP__Landing.html#a0a738bcc57de16b34b85bbd1ee21211da958522ad716577169da9dee89db979ac">TYPE_STANDARD_GLIDE_SLOPE</a>:</div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>        <a class="code hl_function" href="classAP__Landing.html#a5841a724c504b0b94ab753ca28103291">type_slope_verify_abort_landing</a>(prev_WP_loc, next_WP_loc, throttle_suppressed);</div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span><span class="preprocessor">#if HAL_LANDING_DEEPSTALL_ENABLED</span></div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>    <span class="keywordflow">case</span> TYPE_DEEPSTALL:</div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>        deepstall.verify_abort_landing(prev_WP_loc, next_WP_loc, throttle_suppressed);</div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>    }</div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span> </div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span>    <span class="comment">// see if we have reached abort altitude</span></div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span>     <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__Landing.html#a2f949f51fed94748a47618f70644d534">adjusted_relative_altitude_cm_fn</a>() &gt; auto_state_takeoff_altitude_rel_cm) {</div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>         next_WP_loc = current_loc;</div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span>         <a class="code hl_variable" href="classAP__Landing.html#a659093c823feb4bf500851d144c70daf">mission</a>.<a class="code hl_function" href="classAP__Mission.html#ae6611f2f6aebf5e113e0225977e113f1">stop</a>();</div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span>         <span class="keywordflow">if</span> (<a class="code hl_function" href="classAP__Landing.html#a4cb652398231c274e6061aa6b211366b">restart_landing_sequence</a>()) {</div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>             <a class="code hl_variable" href="classAP__Landing.html#a659093c823feb4bf500851d144c70daf">mission</a>.<a class="code hl_function" href="classAP__Mission.html#af7b8e9db68a2a858e2ecca8d57c2722e">resume</a>();</div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span>         }</div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>         <span class="comment">// else we&#39;re in AUTO with a stopped mission and handle_auto_mode() will set RTL</span></div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span><span class="preprocessor">#if AP_FENCE_ENABLED</span></div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>        <a class="code hl_class" href="classAC__Fence.html">AC_Fence</a> *fence = <a class="code hl_function" href="namespaceAP.html#ad7eb5eb7d80cfbcb69839b497bff7a46">AP::fence</a>();</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>        <span class="keywordflow">if</span> (fence) {</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span>            fence-&gt;<a class="code hl_function" href="classAC__Fence.html#aec25c6879cf00417bb1fb4d48c9ca70f">auto_enable_fence_after_takeoff</a>();</div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>        }</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>     }</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span> </div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>     <a class="code hl_function" href="classAP__Landing.html#a9b1053b2298592fc9616ff14ef8eeda0">Log</a>();</div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span> </div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>     <span class="comment">// make sure to always return false so it leaves the mission index alone</span></div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>     <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>}</div>
</div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span> </div>
<div class="foldopen" id="foldopen00302" data-start="{" data-end="}">
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno"><a class="line" href="classAP__Landing.html#ad9e20c352e37871ea00f2bafea6c32cb">  302</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classAP__Landing.html#ad9e20c352e37871ea00f2bafea6c32cb">AP_Landing::adjust_landing_slope_for_rangefinder_bump</a>(<a class="code hl_struct" href="structAP__FixedWing_1_1Rangefinder__State.html">AP_FixedWing::Rangefinder_State</a> &amp;rangefinder_state, <a class="code hl_class" href="classLocation.html">Location</a> &amp;prev_WP_loc, <a class="code hl_class" href="classLocation.html">Location</a> &amp;next_WP_loc, <span class="keyword">const</span> <a class="code hl_class" href="classLocation.html">Location</a> &amp;current_loc, <span class="keyword">const</span> <span class="keywordtype">float</span> wp_distance, int32_t &amp;target_altitude_offset_cm)</div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>{</div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>    <span class="keywordflow">switch</span> (<a class="code hl_struct" href="structtype.html">type</a>) {</div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAP__Landing.html#a0a738bcc57de16b34b85bbd1ee21211da958522ad716577169da9dee89db979ac">TYPE_STANDARD_GLIDE_SLOPE</a>:</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>        <a class="code hl_function" href="classAP__Landing.html#acd3a2b753c492c662924489dddec561b">type_slope_adjust_landing_slope_for_rangefinder_bump</a>(rangefinder_state, prev_WP_loc, next_WP_loc, current_loc, wp_distance, target_altitude_offset_cm);</div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span><span class="preprocessor">#if HAL_LANDING_DEEPSTALL_ENABLED</span></div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>    <span class="keywordflow">case</span> TYPE_DEEPSTALL:</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>    }</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>}</div>
</div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span> </div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span><span class="comment">// send out any required mavlink messages</span></div>
<div class="foldopen" id="foldopen00317" data-start="{" data-end="}">
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno"><a class="line" href="classAP__Landing.html#a33cdbbd10c6cafbbec2c38eecb934138">  317</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classAP__Landing.html#a33cdbbd10c6cafbbec2c38eecb934138">AP_Landing::send_landing_message</a>(mavlink_channel_t <a class="code hl_variable" href="examples_2AnalogIn_2AnalogIn_8cpp.html#a130f3ebe4c1bb6993e1094760227ad6a">chan</a>) {</div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classAP__Landing.html#a786bad67b7b42a6e91bba2307d79d6c7">flags</a>.in_progress) {</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>    }</div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span> </div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>    <span class="keywordflow">switch</span> (<a class="code hl_struct" href="structtype.html">type</a>) {</div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span><span class="preprocessor">#if HAL_LANDING_DEEPSTALL_ENABLED</span></div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>    <span class="keywordflow">case</span> TYPE_DEEPSTALL:</div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>        <span class="keywordflow">return</span> deepstall.send_deepstall_message(<a class="code hl_variable" href="examples_2AnalogIn_2AnalogIn_8cpp.html#a130f3ebe4c1bb6993e1094760227ad6a">chan</a>);</div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAP__Landing.html#a0a738bcc57de16b34b85bbd1ee21211da958522ad716577169da9dee89db979ac">TYPE_STANDARD_GLIDE_SLOPE</a>:</div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>    }</div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>}</div>
</div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span> </div>
<div class="foldopen" id="foldopen00333" data-start="{" data-end="}">
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno"><a class="line" href="classAP__Landing.html#a5ff74bf65eb1a4083cc783af22276828">  333</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classAP__Landing.html#a5ff74bf65eb1a4083cc783af22276828">AP_Landing::is_flaring</a>(<span class="keywordtype">void</span>)<span class="keyword"> const</span></div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span><span class="keyword"></span>{</div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classAP__Landing.html#a786bad67b7b42a6e91bba2307d79d6c7">flags</a>.in_progress) {</div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>    }</div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span> </div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>    <span class="keywordflow">switch</span> (<a class="code hl_struct" href="structtype.html">type</a>) {</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAP__Landing.html#a0a738bcc57de16b34b85bbd1ee21211da958522ad716577169da9dee89db979ac">TYPE_STANDARD_GLIDE_SLOPE</a>:</div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classAP__Landing.html#ac2dfc670ce0af524cbd4614a6469eb37">type_slope_is_flaring</a>();</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span><span class="preprocessor">#if HAL_LANDING_DEEPSTALL_ENABLED</span></div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>    <span class="keywordflow">case</span> TYPE_DEEPSTALL:</div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>    }</div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>}</div>
</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span> </div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span><span class="comment">// return true while the aircraft is performing a landing approach</span></div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span><span class="comment">// when true the vehicle will:</span></div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span><span class="comment">//   - disable ground steering</span></div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span><span class="comment">//   - call setup_landing_glide_slope() and adjust_landing_slope_for_rangefinder_bump()</span></div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span><span class="comment">//   - will be considered flying if sink rate &gt; 0.2, and can trigger crash detection</span></div>
<div class="foldopen" id="foldopen00355" data-start="{" data-end="}">
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno"><a class="line" href="classAP__Landing.html#a1429174262aa7716b6b00df8eed75e81">  355</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classAP__Landing.html#a1429174262aa7716b6b00df8eed75e81">AP_Landing::is_on_approach</a>(<span class="keywordtype">void</span>)<span class="keyword"> const</span></div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span><span class="keyword"></span>{</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classAP__Landing.html#a786bad67b7b42a6e91bba2307d79d6c7">flags</a>.in_progress) {</div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>    }</div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span> </div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span>    <span class="keywordflow">switch</span> (<a class="code hl_struct" href="structtype.html">type</a>) {</div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAP__Landing.html#a0a738bcc57de16b34b85bbd1ee21211da958522ad716577169da9dee89db979ac">TYPE_STANDARD_GLIDE_SLOPE</a>:</div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classAP__Landing.html#a70411a5eb6fac1e5bb1ef7b6d241871b">type_slope_is_on_approach</a>();</div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span><span class="preprocessor">#if HAL_LANDING_DEEPSTALL_ENABLED</span></div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>    <span class="keywordflow">case</span> TYPE_DEEPSTALL:</div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>        <span class="keywordflow">return</span> deepstall.is_on_approach();</div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>    }</div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span>}</div>
</div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span> </div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span><span class="comment">// return true while the aircraft is allowed to perform ground steering</span></div>
<div class="foldopen" id="foldopen00374" data-start="{" data-end="}">
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno"><a class="line" href="classAP__Landing.html#a6adc2af80954221fc7b7145ed94ee8f5">  374</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classAP__Landing.html#a6adc2af80954221fc7b7145ed94ee8f5">AP_Landing::is_ground_steering_allowed</a>(<span class="keywordtype">void</span>)<span class="keyword"> const</span></div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span><span class="keyword"></span>{</div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classAP__Landing.html#a786bad67b7b42a6e91bba2307d79d6c7">flags</a>.in_progress) {</div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>    }</div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span> </div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>    <span class="keywordflow">switch</span> (<a class="code hl_struct" href="structtype.html">type</a>) {</div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAP__Landing.html#a0a738bcc57de16b34b85bbd1ee21211da958522ad716577169da9dee89db979ac">TYPE_STANDARD_GLIDE_SLOPE</a>:</div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classAP__Landing.html#a70411a5eb6fac1e5bb1ef7b6d241871b">type_slope_is_on_approach</a>();</div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span><span class="preprocessor">#if HAL_LANDING_DEEPSTALL_ENABLED</span></div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span>    <span class="keywordflow">case</span> TYPE_DEEPSTALL:</div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span>    }</div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span>}</div>
</div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span> </div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span><span class="comment">// return true when at the last stages of a land when an impact with the ground is expected soon</span></div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span><span class="comment">// when true is_flying knows that the vehicle was expecting to stop flying, possibly because of a hard impact</span></div>
<div class="foldopen" id="foldopen00394" data-start="{" data-end="}">
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno"><a class="line" href="classAP__Landing.html#a5412aae3a873ca38a8aa14f245c50de2">  394</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classAP__Landing.html#a5412aae3a873ca38a8aa14f245c50de2">AP_Landing::is_expecting_impact</a>(<span class="keywordtype">void</span>)<span class="keyword"> const</span></div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span><span class="keyword"></span>{</div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classAP__Landing.html#a786bad67b7b42a6e91bba2307d79d6c7">flags</a>.in_progress) {</div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span>    }</div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span> </div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span>    <span class="keywordflow">switch</span> (<a class="code hl_struct" href="structtype.html">type</a>) {</div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAP__Landing.html#a0a738bcc57de16b34b85bbd1ee21211da958522ad716577169da9dee89db979ac">TYPE_STANDARD_GLIDE_SLOPE</a>:</div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classAP__Landing.html#a8ca2f627a859f9a71fe88513c5c32ff7">type_slope_is_expecting_impact</a>();</div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span><span class="preprocessor">#if HAL_LANDING_DEEPSTALL_ENABLED</span></div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span>    <span class="keywordflow">case</span> TYPE_DEEPSTALL:</div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span>    }</div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span>}</div>
</div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span> </div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span><span class="comment">// returns true when the landing library has overriden any servos</span></div>
<div class="foldopen" id="foldopen00412" data-start="{" data-end="}">
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno"><a class="line" href="classAP__Landing.html#ab2d71a947b43a822f9b76a29ac4cf901">  412</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classAP__Landing.html#ab2d71a947b43a822f9b76a29ac4cf901">AP_Landing::override_servos</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classAP__Landing.html#a786bad67b7b42a6e91bba2307d79d6c7">flags</a>.in_progress) {</div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span>    }</div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span> </div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span>    <span class="keywordflow">switch</span> (<a class="code hl_struct" href="structtype.html">type</a>) {</div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span><span class="preprocessor">#if HAL_LANDING_DEEPSTALL_ENABLED</span></div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span>    <span class="keywordflow">case</span> TYPE_DEEPSTALL:</div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span>        <span class="keywordflow">return</span> deepstall.override_servos();</div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAP__Landing.html#a0a738bcc57de16b34b85bbd1ee21211da958522ad716577169da9dee89db979ac">TYPE_STANDARD_GLIDE_SLOPE</a>:</div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span>    }</div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span>}</div>
</div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span> </div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span><span class="comment">// returns a PID_Info object if there is one available for the selected landing</span></div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span><span class="comment">// type, otherwise returns a nullptr, indicating no data to be logged/sent</span></div>
<div class="foldopen" id="foldopen00430" data-start="{" data-end="}">
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno"><a class="line" href="classAP__Landing.html#a5cd6ac14ce784b7e5a2ffa97d972fd51">  430</a></span><span class="keyword">const</span> <a class="code hl_struct" href="structAP__PIDInfo.html">AP_PIDInfo</a>* <a class="code hl_function" href="classAP__Landing.html#a5cd6ac14ce784b7e5a2ffa97d972fd51">AP_Landing::get_pid_info</a>(<span class="keywordtype">void</span>)<span class="keyword"> const</span></div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span><span class="keyword"></span>{</div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno">  432</span>    <span class="keywordflow">switch</span> (<a class="code hl_struct" href="structtype.html">type</a>) {</div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span><span class="preprocessor">#if HAL_LANDING_DEEPSTALL_ENABLED</span></div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span>    <span class="keywordflow">case</span> TYPE_DEEPSTALL:</div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span>        <span class="keywordflow">return</span> &amp;deepstall.get_pid_info();</div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAP__Landing.html#a0a738bcc57de16b34b85bbd1ee21211da958522ad716577169da9dee89db979ac">TYPE_STANDARD_GLIDE_SLOPE</a>:</div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span>        <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span>    }</div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span>}</div>
</div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span> </div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span><span class="comment">/*</span></div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span><span class="comment">  a special glide slope calculation for the landing approach</span></div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span><span class="comment"></span> </div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span><span class="comment">  During the land approach use a linear glide slope to a point</span></div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span><span class="comment">  projected through the landing point. We don&#39;t use the landing point</span></div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span><span class="comment">  itself as that leads to discontinuities close to the landing point,</span></div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span><span class="comment">  which can lead to erratic pitch control</span></div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span><span class="comment"> */</span></div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span> </div>
<div class="foldopen" id="foldopen00452" data-start="{" data-end="}">
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno"><a class="line" href="classAP__Landing.html#a5cdce89b787f18c99ced194d501c50ae">  452</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classAP__Landing.html#a5cdce89b787f18c99ced194d501c50ae">AP_Landing::setup_landing_glide_slope</a>(<span class="keyword">const</span> <a class="code hl_class" href="classLocation.html">Location</a> &amp;prev_WP_loc, <span class="keyword">const</span> <a class="code hl_class" href="classLocation.html">Location</a> &amp;next_WP_loc, <span class="keyword">const</span> <a class="code hl_class" href="classLocation.html">Location</a> &amp;current_loc, int32_t &amp;target_altitude_offset_cm)</div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span>{</div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span>    <span class="keywordflow">switch</span> (<a class="code hl_struct" href="structtype.html">type</a>) {</div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAP__Landing.html#a0a738bcc57de16b34b85bbd1ee21211da958522ad716577169da9dee89db979ac">TYPE_STANDARD_GLIDE_SLOPE</a>:</div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span>        <a class="code hl_function" href="classAP__Landing.html#a1dfa510a03baa86e6814acf6b3c75595">type_slope_setup_landing_glide_slope</a>(prev_WP_loc, next_WP_loc, current_loc, target_altitude_offset_cm);</div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span><span class="preprocessor">#if HAL_LANDING_DEEPSTALL_ENABLED</span></div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span>    <span class="keywordflow">case</span> TYPE_DEEPSTALL:</div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno">  460</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span>    }</div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span>}</div>
</div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span> </div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span><span class="comment">/*</span></div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span><span class="comment">     Restart a landing by first checking for a DO_LAND_START and</span></div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span><span class="comment">     jump there. Otherwise decrement waypoint so we would re-start</span></div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span><span class="comment">     from the top with same glide slope. Return true if successful.</span></div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span><span class="comment"> */</span></div>
<div class="foldopen" id="foldopen00471" data-start="{" data-end="}">
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno"><a class="line" href="classAP__Landing.html#a4cb652398231c274e6061aa6b211366b">  471</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classAP__Landing.html#a4cb652398231c274e6061aa6b211366b">AP_Landing::restart_landing_sequence</a>()</div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span>{</div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__Landing.html#a659093c823feb4bf500851d144c70daf">mission</a>.<a class="code hl_function" href="classAP__Mission.html#a4e7d81dd5f779c2a3dab501edbb7bd96">get_current_nav_cmd</a>().<a class="code hl_variable" href="structAP__Mission_1_1Mission__Command.html#a272ab59936fd9d78bb5898b4b53ba688">id</a> != MAV_CMD_NAV_LAND) {</div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span>    }</div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span> </div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span>    uint16_t do_land_start_index = <a class="code hl_variable" href="classAP__Landing.html#a659093c823feb4bf500851d144c70daf">mission</a>.<a class="code hl_function" href="classAP__Mission.html#af895b228640bdf29178d44e00897d10e">get_landing_sequence_start</a>();</div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span>    uint16_t prev_cmd_with_wp_index = <a class="code hl_variable" href="classAP__Landing.html#a659093c823feb4bf500851d144c70daf">mission</a>.<a class="code hl_function" href="classAP__Mission.html#abb0a064445c58bb2d9492561f364c273">get_prev_nav_cmd_with_wp_index</a>();</div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span>    <span class="keywordtype">bool</span> success = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span>    uint16_t current_index = <a class="code hl_variable" href="classAP__Landing.html#a659093c823feb4bf500851d144c70daf">mission</a>.<a class="code hl_function" href="classAP__Mission.html#a631c1e64dcae05e22112360c6f20855f">get_current_nav_index</a>();</div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span>    <a class="code hl_struct" href="structAP__Mission_1_1Mission__Command.html">AP_Mission::Mission_Command</a> cmd;</div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span> </div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__Landing.html#a659093c823feb4bf500851d144c70daf">mission</a>.<a class="code hl_function" href="classAP__Mission.html#aac82471fe961e31cd0fba02ba7783aba">read_cmd_from_storage</a>(current_index+1,cmd) &amp;&amp;</div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span>            cmd.<a class="code hl_variable" href="structAP__Mission_1_1Mission__Command.html#a272ab59936fd9d78bb5898b4b53ba688">id</a> == MAV_CMD_NAV_CONTINUE_AND_CHANGE_ALT &amp;&amp;</div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span>            (cmd.<a class="code hl_variable" href="structAP__Mission_1_1Mission__Command.html#a6b240c9c758f53f14e81be2554a08973">p1</a> == 0 || cmd.<a class="code hl_variable" href="structAP__Mission_1_1Mission__Command.html#a6b240c9c758f53f14e81be2554a08973">p1</a> == 1) &amp;&amp;</div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span>            <a class="code hl_variable" href="classAP__Landing.html#a659093c823feb4bf500851d144c70daf">mission</a>.<a class="code hl_function" href="classAP__Mission.html#ac79a188f81816b3ddfe045b6a0feb6d1">set_current_cmd</a>(current_index+1))</div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span>    {</div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span>        <span class="comment">// if the next immediate command is MAV_CMD_NAV_CONTINUE_AND_CHANGE_ALT to climb, do it</span></div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span>        <a class="code hl_define" href="GCS_8h.html#a266bfe8eda675e1092f045e93932b4a6">GCS_SEND_TEXT</a>(MAV_SEVERITY_NOTICE, <span class="stringliteral">&quot;Restarted landing sequence. Climbing to %dm&quot;</span>, (<span class="keywordtype">signed</span>)cmd.<a class="code hl_variable" href="structAP__Mission_1_1Mission__Command.html#a41a7d992648b468243195e1e0af22f10">content</a>.<a class="code hl_variable" href="unionAP__Mission_1_1Content.html#aec2febddd4c431123ed1a79643376af9">location</a>.<a class="code hl_variable" href="classLocation.html#a89e532f5bcc13db2f51ff9eed667c2b6">alt</a>/100);</div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno">  490</span>        success =  <span class="keyword">true</span>;</div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno">  491</span>    }</div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno">  492</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (do_land_start_index != 0 &amp;&amp;</div>
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span>            <a class="code hl_variable" href="classAP__Landing.html#a659093c823feb4bf500851d144c70daf">mission</a>.<a class="code hl_function" href="classAP__Mission.html#ac79a188f81816b3ddfe045b6a0feb6d1">set_current_cmd</a>(do_land_start_index))</div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span>    {</div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span>        <span class="comment">// look for a DO_LAND_START and use that index</span></div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno">  496</span>        <a class="code hl_define" href="GCS_8h.html#a266bfe8eda675e1092f045e93932b4a6">GCS_SEND_TEXT</a>(MAV_SEVERITY_NOTICE, <span class="stringliteral">&quot;Restarted landing via DO_LAND_START: %d&quot;</span>,do_land_start_index);</div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span>        success =  <span class="keyword">true</span>;</div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno">  498</span>    }</div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (prev_cmd_with_wp_index != <a class="code hl_define" href="AP__Mission_8h.html#a3412b73e4e827504c952e555706826bd">AP_MISSION_CMD_INDEX_NONE</a> &amp;&amp;</div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span>               <a class="code hl_variable" href="classAP__Landing.html#a659093c823feb4bf500851d144c70daf">mission</a>.<a class="code hl_function" href="classAP__Mission.html#ac79a188f81816b3ddfe045b6a0feb6d1">set_current_cmd</a>(prev_cmd_with_wp_index))</div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span>    {</div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span>        <span class="comment">// if a suitable navigation waypoint was just executed, one that contains lat/lng/alt, then</span></div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno">  503</span>        <span class="comment">// repeat that cmd to restart the landing from the top of approach to repeat intended glide slope</span></div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno">  504</span>        <a class="code hl_define" href="GCS_8h.html#a266bfe8eda675e1092f045e93932b4a6">GCS_SEND_TEXT</a>(MAV_SEVERITY_NOTICE, <span class="stringliteral">&quot;Restarted landing sequence at waypoint %d&quot;</span>, prev_cmd_with_wp_index);</div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span>        success =  <span class="keyword">true</span>;</div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span>        <a class="code hl_define" href="GCS_8h.html#a266bfe8eda675e1092f045e93932b4a6">GCS_SEND_TEXT</a>(MAV_SEVERITY_WARNING, <span class="stringliteral">&quot;Unable to restart landing sequence&quot;</span>);</div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span>        success =  <span class="keyword">false</span>;</div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span>    }</div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno">  510</span> </div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span>    <span class="keywordflow">if</span> (success) {</div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span>        <span class="comment">// exit landing stages if we&#39;re no longer executing NAV_LAND</span></div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span>        <a class="code hl_variable" href="classAP__Landing.html#a78862eb43fd7dff08912b3f83352de71">update_flight_stage_fn</a>();</div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span>    }</div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span> </div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno">  516</span>    <a class="code hl_function" href="classAP__Landing.html#a9b1053b2298592fc9616ff14ef8eeda0">Log</a>();</div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span>    <span class="keywordflow">return</span> success;</div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span>}</div>
</div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno">  519</span> </div>
<div class="foldopen" id="foldopen00520" data-start="{" data-end="}">
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno"><a class="line" href="classAP__Landing.html#a3e1337ea94a3a1201eca9b3549fc6ee3">  520</a></span>int32_t <a class="code hl_function" href="classAP__Landing.html#a3e1337ea94a3a1201eca9b3549fc6ee3">AP_Landing::constrain_roll</a>(<span class="keyword">const</span> int32_t desired_roll_cd, <span class="keyword">const</span> int32_t level_roll_limit_cd)</div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno">  521</span>{</div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno">  522</span>    <span class="keywordflow">switch</span> (<a class="code hl_struct" href="structtype.html">type</a>) {</div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAP__Landing.html#a0a738bcc57de16b34b85bbd1ee21211da958522ad716577169da9dee89db979ac">TYPE_STANDARD_GLIDE_SLOPE</a>:</div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno">  524</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classAP__Landing.html#aa55a4c05759d130145bd66bf1107b862">type_slope_constrain_roll</a>(desired_roll_cd, level_roll_limit_cd);</div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno">  525</span><span class="preprocessor">#if HAL_LANDING_DEEPSTALL_ENABLED</span></div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno">  526</span>    <span class="keywordflow">case</span> TYPE_DEEPSTALL:</div>
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno">  527</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno">  528</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno">  529</span>        <span class="keywordflow">return</span> desired_roll_cd;</div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno">  530</span>    }</div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span>}</div>
</div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span> </div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span><span class="comment">// returns true if landing provided a Location structure with the current target altitude</span></div>
<div class="foldopen" id="foldopen00534" data-start="{" data-end="}">
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno"><a class="line" href="classAP__Landing.html#a650c4134c861067c968146d84af86e39">  534</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classAP__Landing.html#a650c4134c861067c968146d84af86e39">AP_Landing::get_target_altitude_location</a>(<a class="code hl_class" href="classLocation.html">Location</a> &amp;<a class="code hl_variable" href="examples_2location_2location_8cpp.html#a236564ebd944c27ac8ef6fe851ac515f">location</a>)</div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span>{</div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classAP__Landing.html#a786bad67b7b42a6e91bba2307d79d6c7">flags</a>.in_progress) {</div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno">  537</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno">  538</span>    }</div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span> </div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno">  540</span>    <span class="keywordflow">switch</span> (<a class="code hl_struct" href="structtype.html">type</a>) {</div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span><span class="preprocessor">#if HAL_LANDING_DEEPSTALL_ENABLED</span></div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span>    <span class="keywordflow">case</span> TYPE_DEEPSTALL:</div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span>        <span class="keywordflow">return</span> deepstall.get_target_altitude_location(<a class="code hl_variable" href="examples_2location_2location_8cpp.html#a236564ebd944c27ac8ef6fe851ac515f">location</a>);</div>
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno">  544</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00545" name="l00545"></a><span class="lineno">  545</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAP__Landing.html#a0a738bcc57de16b34b85bbd1ee21211da958522ad716577169da9dee89db979ac">TYPE_STANDARD_GLIDE_SLOPE</a>:</div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno">  546</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span>    }</div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span>}</div>
</div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span> </div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span><span class="comment">/*</span></div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno">  552</span><span class="comment"> * returns target airspeed in cm/s depending on flight stage</span></div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span><span class="comment"> */</span></div>
<div class="foldopen" id="foldopen00554" data-start="{" data-end="}">
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno"><a class="line" href="classAP__Landing.html#a58a0f972e28c198e3c7feff512d8c896">  554</a></span>int32_t <a class="code hl_function" href="classAP__Landing.html#a58a0f972e28c198e3c7feff512d8c896">AP_Landing::get_target_airspeed_cm</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span>{</div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classAP__Landing.html#a786bad67b7b42a6e91bba2307d79d6c7">flags</a>.in_progress) {</div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span>        <span class="comment">// not landing, use regular cruise airspeed</span></div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="classAP__Landing.html#a750c81a937cf1cc29af2bdc7e0101b45">aparm</a>.<a class="code hl_variable" href="structAP__FixedWing.html#a9787530264fe0198ac8e12d5923e5f20">airspeed_cruise</a>*100;</div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span>    }</div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span> </div>
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno">  561</span>    <span class="keywordflow">switch</span> (<a class="code hl_struct" href="structtype.html">type</a>) {</div>
<div class="line"><a id="l00562" name="l00562"></a><span class="lineno">  562</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAP__Landing.html#a0a738bcc57de16b34b85bbd1ee21211da958522ad716577169da9dee89db979ac">TYPE_STANDARD_GLIDE_SLOPE</a>:</div>
<div class="line"><a id="l00563" name="l00563"></a><span class="lineno">  563</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classAP__Landing.html#a7daff6be77c2fc2412ef3a276f80e059">type_slope_get_target_airspeed_cm</a>();</div>
<div class="line"><a id="l00564" name="l00564"></a><span class="lineno">  564</span><span class="preprocessor">#if HAL_LANDING_DEEPSTALL_ENABLED</span></div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span>    <span class="keywordflow">case</span> TYPE_DEEPSTALL:</div>
<div class="line"><a id="l00566" name="l00566"></a><span class="lineno">  566</span>        <span class="keywordflow">return</span> deepstall.get_target_airspeed_cm();</div>
<div class="line"><a id="l00567" name="l00567"></a><span class="lineno">  567</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00568" name="l00568"></a><span class="lineno">  568</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00569" name="l00569"></a><span class="lineno">  569</span>        <span class="comment">// don&#39;t return the landing airspeed, because if type is invalid we have</span></div>
<div class="line"><a id="l00570" name="l00570"></a><span class="lineno">  570</span>        <span class="comment">// no postive indication that the land airspeed has been configured or</span></div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno">  571</span>        <span class="comment">// how it was meant to be utilized</span></div>
<div class="line"><a id="l00572" name="l00572"></a><span class="lineno">  572</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="classAP__Landing.html#abd273e1df18912f10cf1b3201b5ba013">tecs_Controller</a>-&gt;<a class="code hl_function" href="classAP__TECS.html#a22e88eb1a109a7b6e8ca2897556c184e">get_target_airspeed</a>();</div>
<div class="line"><a id="l00573" name="l00573"></a><span class="lineno">  573</span>    }</div>
<div class="line"><a id="l00574" name="l00574"></a><span class="lineno">  574</span>}</div>
</div>
<div class="line"><a id="l00575" name="l00575"></a><span class="lineno">  575</span> </div>
<div class="line"><a id="l00576" name="l00576"></a><span class="lineno">  576</span><span class="comment">/*</span></div>
<div class="line"><a id="l00577" name="l00577"></a><span class="lineno">  577</span><span class="comment"> * request a landing abort given the landing type</span></div>
<div class="line"><a id="l00578" name="l00578"></a><span class="lineno">  578</span><span class="comment"> * return true on success</span></div>
<div class="line"><a id="l00579" name="l00579"></a><span class="lineno">  579</span><span class="comment"> */</span></div>
<div class="foldopen" id="foldopen00580" data-start="{" data-end="}">
<div class="line"><a id="l00580" name="l00580"></a><span class="lineno"><a class="line" href="classAP__Landing.html#afc506451afaaca18bebe5746f1caf448">  580</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classAP__Landing.html#afc506451afaaca18bebe5746f1caf448">AP_Landing::request_go_around</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l00581" name="l00581"></a><span class="lineno">  581</span>{</div>
<div class="line"><a id="l00582" name="l00582"></a><span class="lineno">  582</span>    <span class="keywordtype">bool</span> success = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00583" name="l00583"></a><span class="lineno">  583</span> </div>
<div class="line"><a id="l00584" name="l00584"></a><span class="lineno">  584</span>    <span class="keywordflow">switch</span> (<a class="code hl_struct" href="structtype.html">type</a>) {</div>
<div class="line"><a id="l00585" name="l00585"></a><span class="lineno">  585</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAP__Landing.html#a0a738bcc57de16b34b85bbd1ee21211da958522ad716577169da9dee89db979ac">TYPE_STANDARD_GLIDE_SLOPE</a>:</div>
<div class="line"><a id="l00586" name="l00586"></a><span class="lineno">  586</span>        success = <a class="code hl_function" href="classAP__Landing.html#a073097b86e69b075fb7814e9c7978dcf">type_slope_request_go_around</a>();</div>
<div class="line"><a id="l00587" name="l00587"></a><span class="lineno">  587</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00588" name="l00588"></a><span class="lineno">  588</span><span class="preprocessor">#if HAL_LANDING_DEEPSTALL_ENABLED</span></div>
<div class="line"><a id="l00589" name="l00589"></a><span class="lineno">  589</span>    <span class="keywordflow">case</span> TYPE_DEEPSTALL:</div>
<div class="line"><a id="l00590" name="l00590"></a><span class="lineno">  590</span>        success = deepstall.request_go_around();</div>
<div class="line"><a id="l00591" name="l00591"></a><span class="lineno">  591</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00592" name="l00592"></a><span class="lineno">  592</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00593" name="l00593"></a><span class="lineno">  593</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00594" name="l00594"></a><span class="lineno">  594</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00595" name="l00595"></a><span class="lineno">  595</span>    }</div>
<div class="line"><a id="l00596" name="l00596"></a><span class="lineno">  596</span> </div>
<div class="line"><a id="l00597" name="l00597"></a><span class="lineno">  597</span>    <a class="code hl_function" href="classAP__Landing.html#a9b1053b2298592fc9616ff14ef8eeda0">Log</a>();</div>
<div class="line"><a id="l00598" name="l00598"></a><span class="lineno">  598</span>    <span class="keywordflow">return</span> success;</div>
<div class="line"><a id="l00599" name="l00599"></a><span class="lineno">  599</span>}</div>
</div>
<div class="line"><a id="l00600" name="l00600"></a><span class="lineno">  600</span> </div>
<div class="foldopen" id="foldopen00601" data-start="{" data-end="}">
<div class="line"><a id="l00601" name="l00601"></a><span class="lineno"><a class="line" href="classAP__Landing.html#a9f6d861fd1bf8df96c061931179095c0">  601</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classAP__Landing.html#a9f6d861fd1bf8df96c061931179095c0">AP_Landing::handle_flight_stage_change</a>(<span class="keyword">const</span> <span class="keywordtype">bool</span> _in_landing_stage)</div>
<div class="line"><a id="l00602" name="l00602"></a><span class="lineno">  602</span>{</div>
<div class="line"><a id="l00603" name="l00603"></a><span class="lineno">  603</span>    <a class="code hl_function" href="classAP__Landing.html#a9b1053b2298592fc9616ff14ef8eeda0">Log</a>(); <span class="comment">// log old value to plot discrete transitions</span></div>
<div class="line"><a id="l00604" name="l00604"></a><span class="lineno">  604</span>    <a class="code hl_variable" href="classAP__Landing.html#a786bad67b7b42a6e91bba2307d79d6c7">flags</a>.in_progress = _in_landing_stage;</div>
<div class="line"><a id="l00605" name="l00605"></a><span class="lineno">  605</span>    <a class="code hl_variable" href="classAP__Landing.html#a786bad67b7b42a6e91bba2307d79d6c7">flags</a>.commanded_go_around = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00606" name="l00606"></a><span class="lineno">  606</span>    <a class="code hl_function" href="classAP__Landing.html#a9b1053b2298592fc9616ff14ef8eeda0">Log</a>();</div>
<div class="line"><a id="l00607" name="l00607"></a><span class="lineno">  607</span>}</div>
</div>
<div class="line"><a id="l00608" name="l00608"></a><span class="lineno">  608</span> </div>
<div class="line"><a id="l00609" name="l00609"></a><span class="lineno">  609</span><span class="comment">/*</span></div>
<div class="line"><a id="l00610" name="l00610"></a><span class="lineno">  610</span><span class="comment"> * returns true when a landing is complete, usually used to disable throttle</span></div>
<div class="line"><a id="l00611" name="l00611"></a><span class="lineno">  611</span><span class="comment"> */</span></div>
<div class="foldopen" id="foldopen00612" data-start="{" data-end="}">
<div class="line"><a id="l00612" name="l00612"></a><span class="lineno"><a class="line" href="classAP__Landing.html#ae5f9638b79301cdf63f4bff728abfe3f">  612</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classAP__Landing.html#ae5f9638b79301cdf63f4bff728abfe3f">AP_Landing::is_complete</a>(<span class="keywordtype">void</span>)<span class="keyword"> const</span></div>
<div class="line"><a id="l00613" name="l00613"></a><span class="lineno">  613</span><span class="keyword"></span>{</div>
<div class="line"><a id="l00614" name="l00614"></a><span class="lineno">  614</span>    <span class="keywordflow">switch</span> (<a class="code hl_struct" href="structtype.html">type</a>) {</div>
<div class="line"><a id="l00615" name="l00615"></a><span class="lineno">  615</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAP__Landing.html#a0a738bcc57de16b34b85bbd1ee21211da958522ad716577169da9dee89db979ac">TYPE_STANDARD_GLIDE_SLOPE</a>:</div>
<div class="line"><a id="l00616" name="l00616"></a><span class="lineno">  616</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classAP__Landing.html#afdd8ba6978ded3f0a9a13191b7be43d7">type_slope_is_complete</a>();</div>
<div class="line"><a id="l00617" name="l00617"></a><span class="lineno">  617</span><span class="preprocessor">#if HAL_LANDING_DEEPSTALL_ENABLED</span></div>
<div class="line"><a id="l00618" name="l00618"></a><span class="lineno">  618</span>    <span class="keywordflow">case</span> TYPE_DEEPSTALL:</div>
<div class="line"><a id="l00619" name="l00619"></a><span class="lineno">  619</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00620" name="l00620"></a><span class="lineno">  620</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00621" name="l00621"></a><span class="lineno">  621</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00622" name="l00622"></a><span class="lineno">  622</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00623" name="l00623"></a><span class="lineno">  623</span>    }</div>
<div class="line"><a id="l00624" name="l00624"></a><span class="lineno">  624</span>}</div>
</div>
<div class="line"><a id="l00625" name="l00625"></a><span class="lineno">  625</span> </div>
<div class="foldopen" id="foldopen00626" data-start="{" data-end="}">
<div class="line"><a id="l00626" name="l00626"></a><span class="lineno"><a class="line" href="classAP__Landing.html#a9b1053b2298592fc9616ff14ef8eeda0">  626</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classAP__Landing.html#a9b1053b2298592fc9616ff14ef8eeda0">AP_Landing::Log</a>(<span class="keywordtype">void</span>)<span class="keyword"> const</span></div>
<div class="line"><a id="l00627" name="l00627"></a><span class="lineno">  627</span><span class="keyword"></span>{</div>
<div class="line"><a id="l00628" name="l00628"></a><span class="lineno">  628</span><span class="preprocessor">#if HAL_LOGGING_ENABLED</span></div>
<div class="line"><a id="l00629" name="l00629"></a><span class="lineno">  629</span>    <span class="keywordflow">switch</span> (<a class="code hl_struct" href="structtype.html">type</a>) {</div>
<div class="line"><a id="l00630" name="l00630"></a><span class="lineno">  630</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAP__Landing.html#a0a738bcc57de16b34b85bbd1ee21211da958522ad716577169da9dee89db979ac">TYPE_STANDARD_GLIDE_SLOPE</a>:</div>
<div class="line"><a id="l00631" name="l00631"></a><span class="lineno">  631</span>        <a class="code hl_function" href="classAP__Landing.html#a4ef76eb501fdcbd3afb2abf041db9ac3">type_slope_log</a>();</div>
<div class="line"><a id="l00632" name="l00632"></a><span class="lineno">  632</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00633" name="l00633"></a><span class="lineno">  633</span><span class="preprocessor">#if HAL_LANDING_DEEPSTALL_ENABLED</span></div>
<div class="line"><a id="l00634" name="l00634"></a><span class="lineno">  634</span>    <span class="keywordflow">case</span> TYPE_DEEPSTALL:</div>
<div class="line"><a id="l00635" name="l00635"></a><span class="lineno">  635</span>        deepstall.Log();</div>
<div class="line"><a id="l00636" name="l00636"></a><span class="lineno">  636</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00637" name="l00637"></a><span class="lineno">  637</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00638" name="l00638"></a><span class="lineno">  638</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00639" name="l00639"></a><span class="lineno">  639</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00640" name="l00640"></a><span class="lineno">  640</span>    }</div>
<div class="line"><a id="l00641" name="l00641"></a><span class="lineno">  641</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00642" name="l00642"></a><span class="lineno">  642</span>}</div>
</div>
<div class="line"><a id="l00643" name="l00643"></a><span class="lineno">  643</span> </div>
<div class="line"><a id="l00644" name="l00644"></a><span class="lineno">  644</span><span class="comment">/*</span></div>
<div class="line"><a id="l00645" name="l00645"></a><span class="lineno">  645</span><span class="comment"> * returns true when throttle should be suppressed while landing</span></div>
<div class="line"><a id="l00646" name="l00646"></a><span class="lineno">  646</span><span class="comment"> */</span></div>
<div class="foldopen" id="foldopen00647" data-start="{" data-end="}">
<div class="line"><a id="l00647" name="l00647"></a><span class="lineno"><a class="line" href="classAP__Landing.html#ac1ae9e055dccfa298d95b2f5b92dd2a3">  647</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classAP__Landing.html#ac1ae9e055dccfa298d95b2f5b92dd2a3">AP_Landing::is_throttle_suppressed</a>(<span class="keywordtype">void</span>)<span class="keyword"> const</span></div>
<div class="line"><a id="l00648" name="l00648"></a><span class="lineno">  648</span><span class="keyword"></span>{</div>
<div class="line"><a id="l00649" name="l00649"></a><span class="lineno">  649</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classAP__Landing.html#a786bad67b7b42a6e91bba2307d79d6c7">flags</a>.in_progress) {</div>
<div class="line"><a id="l00650" name="l00650"></a><span class="lineno">  650</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00651" name="l00651"></a><span class="lineno">  651</span>    }</div>
<div class="line"><a id="l00652" name="l00652"></a><span class="lineno">  652</span> </div>
<div class="line"><a id="l00653" name="l00653"></a><span class="lineno">  653</span>    <span class="keywordflow">switch</span> (<a class="code hl_struct" href="structtype.html">type</a>) {</div>
<div class="line"><a id="l00654" name="l00654"></a><span class="lineno">  654</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAP__Landing.html#a0a738bcc57de16b34b85bbd1ee21211da958522ad716577169da9dee89db979ac">TYPE_STANDARD_GLIDE_SLOPE</a>:</div>
<div class="line"><a id="l00655" name="l00655"></a><span class="lineno">  655</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classAP__Landing.html#a86ec4c41a4d25e06a1359b8f8e96191b">type_slope_is_throttle_suppressed</a>();</div>
<div class="line"><a id="l00656" name="l00656"></a><span class="lineno">  656</span><span class="preprocessor">#if HAL_LANDING_DEEPSTALL_ENABLED</span></div>
<div class="line"><a id="l00657" name="l00657"></a><span class="lineno">  657</span>    <span class="keywordflow">case</span> TYPE_DEEPSTALL:</div>
<div class="line"><a id="l00658" name="l00658"></a><span class="lineno">  658</span>        <span class="keywordflow">return</span> deepstall.is_throttle_suppressed();</div>
<div class="line"><a id="l00659" name="l00659"></a><span class="lineno">  659</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00660" name="l00660"></a><span class="lineno">  660</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00661" name="l00661"></a><span class="lineno">  661</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00662" name="l00662"></a><span class="lineno">  662</span>    }</div>
<div class="line"><a id="l00663" name="l00663"></a><span class="lineno">  663</span>}</div>
</div>
<div class="line"><a id="l00664" name="l00664"></a><span class="lineno">  664</span> </div>
<div class="line"><a id="l00665" name="l00665"></a><span class="lineno">  665</span><span class="comment">//defaults to false, but _options bit zero enables it.</span></div>
<div class="foldopen" id="foldopen00666" data-start="{" data-end="}">
<div class="line"><a id="l00666" name="l00666"></a><span class="lineno"><a class="line" href="classAP__Landing.html#ab1f1e488ffd8fd29824122d09f22a58e">  666</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classAP__Landing.html#ab1f1e488ffd8fd29824122d09f22a58e">AP_Landing::use_thr_min_during_flare</a>(<span class="keywordtype">void</span>)<span class="keyword"> const</span></div>
<div class="line"><a id="l00667" name="l00667"></a><span class="lineno">  667</span><span class="keyword"></span>{</div>
<div class="line"><a id="l00668" name="l00668"></a><span class="lineno">  668</span>    <span class="keywordflow">return</span> (<a class="code hl_enumvalue" href="classAP__Landing.html#a00b857687c1fa38980fb88fa36559c14ac67c0d138c798ead647520a5f8a54ee6">OptionsMask::ON_LANDING_FLARE_USE_THR_MIN</a> &amp; <a class="code hl_variable" href="classAP__Landing.html#a8c980512c90dae68e589da957ef1c041">_options</a>) != 0;</div>
<div class="line"><a id="l00669" name="l00669"></a><span class="lineno">  669</span>}</div>
</div>
<div class="line"><a id="l00670" name="l00670"></a><span class="lineno">  670</span> </div>
<div class="line"><a id="l00671" name="l00671"></a><span class="lineno">  671</span><span class="comment">//defaults to false, but _options bit zero enables it.</span></div>
<div class="foldopen" id="foldopen00672" data-start="{" data-end="}">
<div class="line"><a id="l00672" name="l00672"></a><span class="lineno"><a class="line" href="classAP__Landing.html#af5aa8cb7f6e3303f689cad5a5da15ff4">  672</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classAP__Landing.html#af5aa8cb7f6e3303f689cad5a5da15ff4">AP_Landing::allow_max_airspeed_on_land</a>(<span class="keywordtype">void</span>)<span class="keyword"> const</span></div>
<div class="line"><a id="l00673" name="l00673"></a><span class="lineno">  673</span><span class="keyword"></span>{</div>
<div class="line"><a id="l00674" name="l00674"></a><span class="lineno">  674</span>    <span class="keywordflow">return</span> (<a class="code hl_enumvalue" href="classAP__Landing.html#a00b857687c1fa38980fb88fa36559c14af6d1288cfc70523469e1059a175a64bb">OptionsMask::ON_LANDING_USE_ARSPD_MAX</a> &amp; <a class="code hl_variable" href="classAP__Landing.html#a8c980512c90dae68e589da957ef1c041">_options</a>) != 0;</div>
<div class="line"><a id="l00675" name="l00675"></a><span class="lineno">  675</span>}</div>
</div>
<div class="line"><a id="l00676" name="l00676"></a><span class="lineno">  676</span> </div>
<div class="line"><a id="l00677" name="l00677"></a><span class="lineno">  677</span><span class="comment">/*</span></div>
<div class="line"><a id="l00678" name="l00678"></a><span class="lineno">  678</span><span class="comment"> * returns false when the vehicle might not be flying forward while landing</span></div>
<div class="line"><a id="l00679" name="l00679"></a><span class="lineno">  679</span><span class="comment"> */</span></div>
<div class="foldopen" id="foldopen00680" data-start="{" data-end="}">
<div class="line"><a id="l00680" name="l00680"></a><span class="lineno"><a class="line" href="classAP__Landing.html#abc9d11071cf7a216dfe957aa96797e63">  680</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classAP__Landing.html#abc9d11071cf7a216dfe957aa96797e63">AP_Landing::is_flying_forward</a>(<span class="keywordtype">void</span>)<span class="keyword"> const</span></div>
<div class="line"><a id="l00681" name="l00681"></a><span class="lineno">  681</span><span class="keyword"></span>{</div>
<div class="line"><a id="l00682" name="l00682"></a><span class="lineno">  682</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classAP__Landing.html#a786bad67b7b42a6e91bba2307d79d6c7">flags</a>.in_progress) {</div>
<div class="line"><a id="l00683" name="l00683"></a><span class="lineno">  683</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00684" name="l00684"></a><span class="lineno">  684</span>    }</div>
<div class="line"><a id="l00685" name="l00685"></a><span class="lineno">  685</span> </div>
<div class="line"><a id="l00686" name="l00686"></a><span class="lineno">  686</span>    <span class="keywordflow">switch</span> (<a class="code hl_struct" href="structtype.html">type</a>) {</div>
<div class="line"><a id="l00687" name="l00687"></a><span class="lineno">  687</span><span class="preprocessor">#if HAL_LANDING_DEEPSTALL_ENABLED</span></div>
<div class="line"><a id="l00688" name="l00688"></a><span class="lineno">  688</span>    <span class="keywordflow">case</span> TYPE_DEEPSTALL:</div>
<div class="line"><a id="l00689" name="l00689"></a><span class="lineno">  689</span>        <span class="keywordflow">return</span> deepstall.is_flying_forward();</div>
<div class="line"><a id="l00690" name="l00690"></a><span class="lineno">  690</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00691" name="l00691"></a><span class="lineno">  691</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAP__Landing.html#a0a738bcc57de16b34b85bbd1ee21211da958522ad716577169da9dee89db979ac">TYPE_STANDARD_GLIDE_SLOPE</a>:</div>
<div class="line"><a id="l00692" name="l00692"></a><span class="lineno">  692</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00693" name="l00693"></a><span class="lineno">  693</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00694" name="l00694"></a><span class="lineno">  694</span>    }</div>
<div class="line"><a id="l00695" name="l00695"></a><span class="lineno">  695</span>}</div>
</div>
<div class="line"><a id="l00696" name="l00696"></a><span class="lineno">  696</span> </div>
<div class="line"><a id="l00697" name="l00697"></a><span class="lineno">  697</span><span class="comment">/*</span></div>
<div class="line"><a id="l00698" name="l00698"></a><span class="lineno">  698</span><span class="comment"> * attempt to terminate flight with an immediate landing</span></div>
<div class="line"><a id="l00699" name="l00699"></a><span class="lineno">  699</span><span class="comment"> * returns true if the landing library can and is terminating the landing</span></div>
<div class="line"><a id="l00700" name="l00700"></a><span class="lineno">  700</span><span class="comment"> */</span></div>
<div class="foldopen" id="foldopen00701" data-start="{" data-end="}">
<div class="line"><a id="l00701" name="l00701"></a><span class="lineno"><a class="line" href="classAP__Landing.html#aa04ce62e6126784003d606619b2c74f1">  701</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classAP__Landing.html#aa04ce62e6126784003d606619b2c74f1">AP_Landing::terminate</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a id="l00702" name="l00702"></a><span class="lineno">  702</span>    <span class="keywordflow">switch</span> (<a class="code hl_struct" href="structtype.html">type</a>) {</div>
<div class="line"><a id="l00703" name="l00703"></a><span class="lineno">  703</span><span class="preprocessor">#if HAL_LANDING_DEEPSTALL_ENABLED</span></div>
<div class="line"><a id="l00704" name="l00704"></a><span class="lineno">  704</span>    <span class="keywordflow">case</span> TYPE_DEEPSTALL:</div>
<div class="line"><a id="l00705" name="l00705"></a><span class="lineno">  705</span>        <span class="keywordflow">return</span> deepstall.terminate();</div>
<div class="line"><a id="l00706" name="l00706"></a><span class="lineno">  706</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00707" name="l00707"></a><span class="lineno">  707</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAP__Landing.html#a0a738bcc57de16b34b85bbd1ee21211da958522ad716577169da9dee89db979ac">TYPE_STANDARD_GLIDE_SLOPE</a>:</div>
<div class="line"><a id="l00708" name="l00708"></a><span class="lineno">  708</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00709" name="l00709"></a><span class="lineno">  709</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00710" name="l00710"></a><span class="lineno">  710</span>    }</div>
<div class="line"><a id="l00711" name="l00711"></a><span class="lineno">  711</span>}</div>
</div>
<div class="line"><a id="l00712" name="l00712"></a><span class="lineno">  712</span> </div>
<div class="line"><a id="l00713" name="l00713"></a><span class="lineno">  713</span><span class="comment">/*</span></div>
<div class="line"><a id="l00714" name="l00714"></a><span class="lineno">  714</span><span class="comment">  run parameter conversions</span></div>
<div class="line"><a id="l00715" name="l00715"></a><span class="lineno">  715</span><span class="comment"> */</span></div>
<div class="foldopen" id="foldopen00716" data-start="{" data-end="}">
<div class="line"><a id="l00716" name="l00716"></a><span class="lineno"><a class="line" href="classAP__Landing.html#a3a00792eff433bf082037de2591de9bf">  716</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classAP__Landing.html#a3a00792eff433bf082037de2591de9bf">AP_Landing::convert_parameters</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l00717" name="l00717"></a><span class="lineno">  717</span>{</div>
<div class="line"><a id="l00718" name="l00718"></a><span class="lineno">  718</span>    <span class="comment">// added January 2024</span></div>
<div class="line"><a id="l00719" name="l00719"></a><span class="lineno">  719</span>    <a class="code hl_variable" href="classAP__Landing.html#a8f874e8a10484053566717d799621881">pitch_deg</a>.convert_centi_parameter(<a class="code hl_enumvalue" href="AP__Param_8h.html#ad9ca22a1e508dceea20feda89a344f9aa0b4d6edc70defa90b393a877f6178d42">AP_PARAM_INT16</a>);</div>
<div class="line"><a id="l00720" name="l00720"></a><span class="lineno">  720</span>}</div>
</div>
<div class="ttc" id="aAC__Fence_8h_html"><div class="ttname"><a href="AC__Fence_8h.html">AC_Fence.h</a></div></div>
<div class="ttc" id="aAHRS__Test_8cpp_html_a1a50ac0ea0e2f27db5b95e9a738d41dc"><div class="ttname"><a href="AHRS__Test_8cpp.html#a1a50ac0ea0e2f27db5b95e9a738d41dc">ahrs</a></div><div class="ttdeci">auto &amp; ahrs</div><div class="ttdef"><b>Definition</b> <a href="AHRS__Test_8cpp_source.html#l00054">AHRS_Test.cpp:54</a></div></div>
<div class="ttc" id="aAP__AHRS_8h_html"><div class="ttname"><a href="AP__AHRS_8h.html">AP_AHRS.h</a></div></div>
<div class="ttc" id="aAP__Landing_8h_html"><div class="ttname"><a href="AP__Landing_8h.html">AP_Landing.h</a></div></div>
<div class="ttc" id="aAP__Landing__config_8h_html_a06bbe640b9e2cf90c56d58efc6149951"><div class="ttname"><a href="AP__Landing__config_8h.html#a06bbe640b9e2cf90c56d58efc6149951">HAL_LANDING_DEEPSTALL_ENABLED</a></div><div class="ttdeci">#define HAL_LANDING_DEEPSTALL_ENABLED</div><div class="ttdef"><b>Definition</b> <a href="AP__Landing__config_8h_source.html#l00006">AP_Landing_config.h:6</a></div></div>
<div class="ttc" id="aAP__Mission_8h_html_a3412b73e4e827504c952e555706826bd"><div class="ttname"><a href="AP__Mission_8h.html#a3412b73e4e827504c952e555706826bd">AP_MISSION_CMD_INDEX_NONE</a></div><div class="ttdeci">#define AP_MISSION_CMD_INDEX_NONE</div><div class="ttdef"><b>Definition</b> <a href="AP__Mission_8h_source.html#l00040">AP_Mission.h:40</a></div></div>
<div class="ttc" id="aAP__Param_8h_html_a0f9acb038a5283b964b862aea8cc5051"><div class="ttname"><a href="AP__Param_8h.html#a0f9acb038a5283b964b862aea8cc5051">AP_GROUPEND</a></div><div class="ttdeci">#define AP_GROUPEND</div><div class="ttdef"><b>Definition</b> <a href="AP__Param_8h_source.html#l00163">AP_Param.h:163</a></div></div>
<div class="ttc" id="aAP__Param_8h_html_a16c360358c5d6a08d34f60921fd916a9"><div class="ttname"><a href="AP__Param_8h.html#a16c360358c5d6a08d34f60921fd916a9">AP_SUBGROUPINFO</a></div><div class="ttdeci">#define AP_SUBGROUPINFO(element, name, idx, thisclazz, elclazz)</div><div class="ttdef"><b>Definition</b> <a href="AP__Param_8h_source.html#l00152">AP_Param.h:152</a></div></div>
<div class="ttc" id="aAP__Param_8h_html_a78a408c84f2a1bafde256ac650142e4d"><div class="ttname"><a href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a></div><div class="ttdeci">#define AP_GROUPINFO(name, idx, clazz, element, def)</div><div class="ttdef"><b>Definition</b> <a href="AP__Param_8h_source.html#l00145">AP_Param.h:145</a></div></div>
<div class="ttc" id="aAP__Param_8h_html_ac24e2eb16c2194e975d27e47ddcb7f1c"><div class="ttname"><a href="AP__Param_8h.html#ac24e2eb16c2194e975d27e47ddcb7f1c">AP_GROUPINFO_FLAGS</a></div><div class="ttdeci">#define AP_GROUPINFO_FLAGS(name, idx, clazz, element, def, flags)</div><div class="ttdef"><b>Definition</b> <a href="AP__Param_8h_source.html#l00133">AP_Param.h:133</a></div></div>
<div class="ttc" id="aAP__Param_8h_html_ad9ca22a1e508dceea20feda89a344f9aa0b4d6edc70defa90b393a877f6178d42"><div class="ttname"><a href="AP__Param_8h.html#ad9ca22a1e508dceea20feda89a344f9aa0b4d6edc70defa90b393a877f6178d42">AP_PARAM_INT16</a></div><div class="ttdeci">@ AP_PARAM_INT16</div><div class="ttdef"><b>Definition</b> <a href="AP__Param_8h_source.html#l00181">AP_Param.h:181</a></div></div>
<div class="ttc" id="aAP__Param_8h_html_ae25c1c7495435989f8be5781c86be078"><div class="ttname"><a href="AP__Param_8h.html#ae25c1c7495435989f8be5781c86be078">AP_PARAM_FLAG_ENABLE</a></div><div class="ttdeci">#define AP_PARAM_FLAG_ENABLE</div><div class="ttdef"><b>Definition</b> <a href="AP__Param_8h_source.html#l00087">AP_Param.h:87</a></div></div>
<div class="ttc" id="aGCS_8h_html"><div class="ttname"><a href="GCS_8h.html">GCS.h</a></div><div class="ttdoc">Interface definition for the various Ground Control System.</div></div>
<div class="ttc" id="aGCS_8h_html_a266bfe8eda675e1092f045e93932b4a6"><div class="ttname"><a href="GCS_8h.html#a266bfe8eda675e1092f045e93932b4a6">GCS_SEND_TEXT</a></div><div class="ttdeci">#define GCS_SEND_TEXT(severity, format, args...)</div><div class="ttdef"><b>Definition</b> <a href="GCS_8h_source.html#l01349">GCS.h:1349</a></div></div>
<div class="ttc" id="aclassAC__Fence_html"><div class="ttname"><a href="classAC__Fence.html">AC_Fence</a></div><div class="ttdef"><b>Definition</b> <a href="AC__Fence_8h_source.html#l00032">AC_Fence.h:33</a></div></div>
<div class="ttc" id="aclassAC__Fence_html_aec25c6879cf00417bb1fb4d48c9ca70f"><div class="ttname"><a href="classAC__Fence.html#aec25c6879cf00417bb1fb4d48c9ca70f">AC_Fence::auto_enable_fence_after_takeoff</a></div><div class="ttdeci">void auto_enable_fence_after_takeoff()</div><div class="ttdoc">auto_enable_fence_on_takeoff - auto enables the fence. Called after takeoff conditions met</div><div class="ttdef"><b>Definition</b> <a href="AC__Fence_8cpp_source.html#l00749">AC_Fence.cpp:749</a></div></div>
<div class="ttc" id="aclassAP__AHRS_html"><div class="ttname"><a href="classAP__AHRS.html">AP_AHRS</a></div><div class="ttdef"><b>Definition</b> <a href="AP__AHRS_8h_source.html#l00046">AP_AHRS.h:46</a></div></div>
<div class="ttc" id="aclassAP__Landing_html"><div class="ttname"><a href="classAP__Landing.html">AP_Landing</a></div><div class="ttdoc">Class managing ArduPlane landing methods.</div><div class="ttdef"><b>Definition</b> <a href="AP__Landing_8h_source.html#l00028">AP_Landing.h:28</a></div></div>
<div class="ttc" id="aclassAP__Landing_html_a00b857687c1fa38980fb88fa36559c14ac67c0d138c798ead647520a5f8a54ee6"><div class="ttname"><a href="classAP__Landing.html#a00b857687c1fa38980fb88fa36559c14ac67c0d138c798ead647520a5f8a54ee6">AP_Landing::ON_LANDING_FLARE_USE_THR_MIN</a></div><div class="ttdeci">@ ON_LANDING_FLARE_USE_THR_MIN</div><div class="ttdef"><b>Definition</b> <a href="AP__Landing_8h_source.html#l00063">AP_Landing.h:63</a></div></div>
<div class="ttc" id="aclassAP__Landing_html_a00b857687c1fa38980fb88fa36559c14af6d1288cfc70523469e1059a175a64bb"><div class="ttname"><a href="classAP__Landing.html#a00b857687c1fa38980fb88fa36559c14af6d1288cfc70523469e1059a175a64bb">AP_Landing::ON_LANDING_USE_ARSPD_MAX</a></div><div class="ttdeci">@ ON_LANDING_USE_ARSPD_MAX</div><div class="ttdef"><b>Definition</b> <a href="AP__Landing_8h_source.html#l00064">AP_Landing.h:64</a></div></div>
<div class="ttc" id="aclassAP__Landing_html_a073097b86e69b075fb7814e9c7978dcf"><div class="ttname"><a href="classAP__Landing.html#a073097b86e69b075fb7814e9c7978dcf">AP_Landing::type_slope_request_go_around</a></div><div class="ttdeci">bool type_slope_request_go_around(void)</div><div class="ttdef"><b>Definition</b> <a href="AP__Landing__Slope_8cpp_source.html#l00239">AP_Landing_Slope.cpp:239</a></div></div>
<div class="ttc" id="aclassAP__Landing_html_a0a738bcc57de16b34b85bbd1ee21211da958522ad716577169da9dee89db979ac"><div class="ttname"><a href="classAP__Landing.html#a0a738bcc57de16b34b85bbd1ee21211da958522ad716577169da9dee89db979ac">AP_Landing::TYPE_STANDARD_GLIDE_SLOPE</a></div><div class="ttdeci">@ TYPE_STANDARD_GLIDE_SLOPE</div><div class="ttdef"><b>Definition</b> <a href="AP__Landing_8h_source.html#l00053">AP_Landing.h:53</a></div></div>
<div class="ttc" id="aclassAP__Landing_html_a1429174262aa7716b6b00df8eed75e81"><div class="ttname"><a href="classAP__Landing.html#a1429174262aa7716b6b00df8eed75e81">AP_Landing::is_on_approach</a></div><div class="ttdeci">bool is_on_approach(void) const</div><div class="ttdef"><b>Definition</b> <a href="#l00355">AP_Landing.cpp:355</a></div></div>
<div class="ttc" id="aclassAP__Landing_html_a1dfa510a03baa86e6814acf6b3c75595"><div class="ttname"><a href="classAP__Landing.html#a1dfa510a03baa86e6814acf6b3c75595">AP_Landing::type_slope_setup_landing_glide_slope</a></div><div class="ttdeci">void type_slope_setup_landing_glide_slope(const Location &amp;prev_WP_loc, const Location &amp;next_WP_loc, const Location &amp;current_loc, int32_t &amp;target_altitude_offset_cm)</div><div class="ttdef"><b>Definition</b> <a href="AP__Landing__Slope_8cpp_source.html#l00253">AP_Landing_Slope.cpp:253</a></div></div>
<div class="ttc" id="aclassAP__Landing_html_a23d5d937afe630bfa1d3eeea5d767e4b"><div class="ttname"><a href="classAP__Landing.html#a23d5d937afe630bfa1d3eeea5d767e4b">AP_Landing::verify_abort_landing</a></div><div class="ttdeci">bool verify_abort_landing(const Location &amp;prev_WP_loc, Location &amp;next_WP_loc, const Location &amp;current_loc, const int32_t auto_state_takeoff_altitude_rel_cm, bool &amp;throttle_suppressed)</div><div class="ttdef"><b>Definition</b> <a href="#l00264">AP_Landing.cpp:264</a></div></div>
<div class="ttc" id="aclassAP__Landing_html_a2f949f51fed94748a47618f70644d534"><div class="ttname"><a href="classAP__Landing.html#a2f949f51fed94748a47618f70644d534">AP_Landing::adjusted_relative_altitude_cm_fn</a></div><div class="ttdeci">adjusted_relative_altitude_cm_fn_t adjusted_relative_altitude_cm_fn</div><div class="ttdef"><b>Definition</b> <a href="AP__Landing_8h_source.html#l00147">AP_Landing.h:147</a></div></div>
<div class="ttc" id="aclassAP__Landing_html_a33cdbbd10c6cafbbec2c38eecb934138"><div class="ttname"><a href="classAP__Landing.html#a33cdbbd10c6cafbbec2c38eecb934138">AP_Landing::send_landing_message</a></div><div class="ttdeci">bool send_landing_message(mavlink_channel_t chan)</div><div class="ttdef"><b>Definition</b> <a href="#l00317">AP_Landing.cpp:317</a></div></div>
<div class="ttc" id="aclassAP__Landing_html_a3a00792eff433bf082037de2591de9bf"><div class="ttname"><a href="classAP__Landing.html#a3a00792eff433bf082037de2591de9bf">AP_Landing::convert_parameters</a></div><div class="ttdeci">void convert_parameters(void)</div><div class="ttdef"><b>Definition</b> <a href="#l00716">AP_Landing.cpp:716</a></div></div>
<div class="ttc" id="aclassAP__Landing_html_a3e1337ea94a3a1201eca9b3549fc6ee3"><div class="ttname"><a href="classAP__Landing.html#a3e1337ea94a3a1201eca9b3549fc6ee3">AP_Landing::constrain_roll</a></div><div class="ttdeci">int32_t constrain_roll(const int32_t desired_roll_cd, const int32_t level_roll_limit_cd)</div><div class="ttdef"><b>Definition</b> <a href="#l00520">AP_Landing.cpp:520</a></div></div>
<div class="ttc" id="aclassAP__Landing_html_a4cb652398231c274e6061aa6b211366b"><div class="ttname"><a href="classAP__Landing.html#a4cb652398231c274e6061aa6b211366b">AP_Landing::restart_landing_sequence</a></div><div class="ttdeci">bool restart_landing_sequence(void)</div><div class="ttdef"><b>Definition</b> <a href="#l00471">AP_Landing.cpp:471</a></div></div>
<div class="ttc" id="aclassAP__Landing_html_a4ef76eb501fdcbd3afb2abf041db9ac3"><div class="ttname"><a href="classAP__Landing.html#a4ef76eb501fdcbd3afb2abf041db9ac3">AP_Landing::type_slope_log</a></div><div class="ttdeci">void type_slope_log(void) const</div></div>
<div class="ttc" id="aclassAP__Landing_html_a5412aae3a873ca38a8aa14f245c50de2"><div class="ttname"><a href="classAP__Landing.html#a5412aae3a873ca38a8aa14f245c50de2">AP_Landing::is_expecting_impact</a></div><div class="ttdeci">bool is_expecting_impact(void) const</div><div class="ttdef"><b>Definition</b> <a href="#l00394">AP_Landing.cpp:394</a></div></div>
<div class="ttc" id="aclassAP__Landing_html_a5841a724c504b0b94ab753ca28103291"><div class="ttname"><a href="classAP__Landing.html#a5841a724c504b0b94ab753ca28103291">AP_Landing::type_slope_verify_abort_landing</a></div><div class="ttdeci">void type_slope_verify_abort_landing(const Location &amp;prev_WP_loc, Location &amp;next_WP_loc, bool &amp;throttle_suppressed)</div><div class="ttdef"><b>Definition</b> <a href="AP__Landing__Slope_8cpp_source.html#l00044">AP_Landing_Slope.cpp:44</a></div></div>
<div class="ttc" id="aclassAP__Landing_html_a58a0f972e28c198e3c7feff512d8c896"><div class="ttname"><a href="classAP__Landing.html#a58a0f972e28c198e3c7feff512d8c896">AP_Landing::get_target_airspeed_cm</a></div><div class="ttdeci">int32_t get_target_airspeed_cm(void)</div><div class="ttdef"><b>Definition</b> <a href="#l00554">AP_Landing.cpp:554</a></div></div>
<div class="ttc" id="aclassAP__Landing_html_a5cd6ac14ce784b7e5a2ffa97d972fd51"><div class="ttname"><a href="classAP__Landing.html#a5cd6ac14ce784b7e5a2ffa97d972fd51">AP_Landing::get_pid_info</a></div><div class="ttdeci">const class AP_PIDInfo * get_pid_info(void) const</div><div class="ttdef"><b>Definition</b> <a href="#l00430">AP_Landing.cpp:430</a></div></div>
<div class="ttc" id="aclassAP__Landing_html_a5cdce89b787f18c99ced194d501c50ae"><div class="ttname"><a href="classAP__Landing.html#a5cdce89b787f18c99ced194d501c50ae">AP_Landing::setup_landing_glide_slope</a></div><div class="ttdeci">void setup_landing_glide_slope(const Location &amp;prev_WP_loc, const Location &amp;next_WP_loc, const Location &amp;current_loc, int32_t &amp;target_altitude_offset_cm)</div><div class="ttdef"><b>Definition</b> <a href="#l00452">AP_Landing.cpp:452</a></div></div>
<div class="ttc" id="aclassAP__Landing_html_a5ff74bf65eb1a4083cc783af22276828"><div class="ttname"><a href="classAP__Landing.html#a5ff74bf65eb1a4083cc783af22276828">AP_Landing::is_flaring</a></div><div class="ttdeci">bool is_flaring(void) const</div><div class="ttdef"><b>Definition</b> <a href="#l00333">AP_Landing.cpp:333</a></div></div>
<div class="ttc" id="aclassAP__Landing_html_a650c4134c861067c968146d84af86e39"><div class="ttname"><a href="classAP__Landing.html#a650c4134c861067c968146d84af86e39">AP_Landing::get_target_altitude_location</a></div><div class="ttdeci">bool get_target_altitude_location(Location &amp;location)</div><div class="ttdef"><b>Definition</b> <a href="#l00534">AP_Landing.cpp:534</a></div></div>
<div class="ttc" id="aclassAP__Landing_html_a659093c823feb4bf500851d144c70daf"><div class="ttname"><a href="classAP__Landing.html#a659093c823feb4bf500851d144c70daf">AP_Landing::mission</a></div><div class="ttdeci">AP_Mission &amp; mission</div><div class="ttdef"><b>Definition</b> <a href="AP__Landing_8h_source.html#l00137">AP_Landing.h:137</a></div></div>
<div class="ttc" id="aclassAP__Landing_html_a6adc2af80954221fc7b7145ed94ee8f5"><div class="ttname"><a href="classAP__Landing.html#a6adc2af80954221fc7b7145ed94ee8f5">AP_Landing::is_ground_steering_allowed</a></div><div class="ttdeci">bool is_ground_steering_allowed(void) const</div><div class="ttdef"><b>Definition</b> <a href="#l00374">AP_Landing.cpp:374</a></div></div>
<div class="ttc" id="aclassAP__Landing_html_a6d7e8b7fbf40f7c5be7a2c46b1897177"><div class="ttname"><a href="classAP__Landing.html#a6d7e8b7fbf40f7c5be7a2c46b1897177">AP_Landing::AP_Landing</a></div><div class="ttdeci">AP_Landing(AP_Mission &amp;_mission, AP_AHRS &amp;_ahrs, AP_TECS *_tecs_Controller, AP_Navigation *_nav_controller, AP_FixedWing &amp;_aparm, set_target_altitude_proportion_fn_t _set_target_altitude_proportion_fn, constrain_target_altitude_location_fn_t _constrain_target_altitude_location_fn, adjusted_altitude_cm_fn_t _adjusted_altitude_cm_fn, adjusted_relative_altitude_cm_fn_t _adjusted_relative_altitude_cm_fn, disarm_if_autoland_complete_fn_t _disarm_if_autoland_complete_fn, update_flight_stage_fn_t _update_flight_stage_fn)</div><div class="ttdef"><b>Definition</b> <a href="#l00185">AP_Landing.cpp:185</a></div></div>
<div class="ttc" id="aclassAP__Landing_html_a70411a5eb6fac1e5bb1ef7b6d241871b"><div class="ttname"><a href="classAP__Landing.html#a70411a5eb6fac1e5bb1ef7b6d241871b">AP_Landing::type_slope_is_on_approach</a></div><div class="ttdeci">bool type_slope_is_on_approach(void) const</div><div class="ttdef"><b>Definition</b> <a href="AP__Landing__Slope_8cpp_source.html#l00393">AP_Landing_Slope.cpp:393</a></div></div>
<div class="ttc" id="aclassAP__Landing_html_a750c81a937cf1cc29af2bdc7e0101b45"><div class="ttname"><a href="classAP__Landing.html#a750c81a937cf1cc29af2bdc7e0101b45">AP_Landing::aparm</a></div><div class="ttdeci">AP_FixedWing &amp; aparm</div><div class="ttdef"><b>Definition</b> <a href="AP__Landing_8h_source.html#l00142">AP_Landing.h:142</a></div></div>
<div class="ttc" id="aclassAP__Landing_html_a786bad67b7b42a6e91bba2307d79d6c7"><div class="ttname"><a href="classAP__Landing.html#a786bad67b7b42a6e91bba2307d79d6c7">AP_Landing::flags</a></div><div class="ttdeci">struct AP_Landing::@96 flags</div></div>
<div class="ttc" id="aclassAP__Landing_html_a78862eb43fd7dff08912b3f83352de71"><div class="ttname"><a href="classAP__Landing.html#a78862eb43fd7dff08912b3f83352de71">AP_Landing::update_flight_stage_fn</a></div><div class="ttdeci">update_flight_stage_fn_t update_flight_stage_fn</div><div class="ttdef"><b>Definition</b> <a href="AP__Landing_8h_source.html#l00149">AP_Landing.h:149</a></div></div>
<div class="ttc" id="aclassAP__Landing_html_a7daff6be77c2fc2412ef3a276f80e059"><div class="ttname"><a href="classAP__Landing.html#a7daff6be77c2fc2412ef3a276f80e059">AP_Landing::type_slope_get_target_airspeed_cm</a></div><div class="ttdeci">int32_t type_slope_get_target_airspeed_cm(void)</div><div class="ttdef"><b>Definition</b> <a href="AP__Landing__Slope_8cpp_source.html#l00342">AP_Landing_Slope.cpp:342</a></div></div>
<div class="ttc" id="aclassAP__Landing_html_a7e884642791e4b1f0b9c396b86055a6a"><div class="ttname"><a href="classAP__Landing.html#a7e884642791e4b1f0b9c396b86055a6a">AP_Landing::type_slope_verify_land</a></div><div class="ttdeci">bool type_slope_verify_land(const Location &amp;prev_WP_loc, Location &amp;next_WP_loc, const Location &amp;current_loc, const float height, const float sink_rate, const float wp_proportion, const uint32_t last_flying_ms, const bool is_armed, const bool is_flying, const bool rangefinder_state_in_range)</div><div class="ttdef"><b>Definition</b> <a href="AP__Landing__Slope_8cpp_source.html#l00056">AP_Landing_Slope.cpp:56</a></div></div>
<div class="ttc" id="aclassAP__Landing_html_a86ec4c41a4d25e06a1359b8f8e96191b"><div class="ttname"><a href="classAP__Landing.html#a86ec4c41a4d25e06a1359b8f8e96191b">AP_Landing::type_slope_is_throttle_suppressed</a></div><div class="ttdeci">bool type_slope_is_throttle_suppressed(void) const</div><div class="ttdef"><b>Definition</b> <a href="AP__Landing__Slope_8cpp_source.html#l00435">AP_Landing_Slope.cpp:435</a></div></div>
<div class="ttc" id="aclassAP__Landing_html_a8c980512c90dae68e589da957ef1c041"><div class="ttname"><a href="classAP__Landing.html#a8c980512c90dae68e589da957ef1c041">AP_Landing::_options</a></div><div class="ttdeci">AP_Int16 _options</div><div class="ttdef"><b>Definition</b> <a href="AP__Landing_8h_source.html#l00127">AP_Landing.h:127</a></div></div>
<div class="ttc" id="aclassAP__Landing_html_a8ca2f627a859f9a71fe88513c5c32ff7"><div class="ttname"><a href="classAP__Landing.html#a8ca2f627a859f9a71fe88513c5c32ff7">AP_Landing::type_slope_is_expecting_impact</a></div><div class="ttdeci">bool type_slope_is_expecting_impact(void) const</div><div class="ttdef"><b>Definition</b> <a href="AP__Landing__Slope_8cpp_source.html#l00399">AP_Landing_Slope.cpp:399</a></div></div>
<div class="ttc" id="aclassAP__Landing_html_a8f874e8a10484053566717d799621881"><div class="ttname"><a href="classAP__Landing.html#a8f874e8a10484053566717d799621881">AP_Landing::pitch_deg</a></div><div class="ttdeci">AP_Float pitch_deg</div><div class="ttdef"><b>Definition</b> <a href="AP__Landing_8h_source.html#l00156">AP_Landing.h:156</a></div></div>
<div class="ttc" id="aclassAP__Landing_html_a9b1053b2298592fc9616ff14ef8eeda0"><div class="ttname"><a href="classAP__Landing.html#a9b1053b2298592fc9616ff14ef8eeda0">AP_Landing::Log</a></div><div class="ttdeci">void Log(void) const</div><div class="ttdef"><b>Definition</b> <a href="#l00626">AP_Landing.cpp:626</a></div></div>
<div class="ttc" id="aclassAP__Landing_html_a9f6d861fd1bf8df96c061931179095c0"><div class="ttname"><a href="classAP__Landing.html#a9f6d861fd1bf8df96c061931179095c0">AP_Landing::handle_flight_stage_change</a></div><div class="ttdeci">void handle_flight_stage_change(const bool _in_landing_stage)</div><div class="ttdef"><b>Definition</b> <a href="#l00601">AP_Landing.cpp:601</a></div></div>
<div class="ttc" id="aclassAP__Landing_html_aa04ce62e6126784003d606619b2c74f1"><div class="ttname"><a href="classAP__Landing.html#aa04ce62e6126784003d606619b2c74f1">AP_Landing::terminate</a></div><div class="ttdeci">bool terminate(void)</div><div class="ttdef"><b>Definition</b> <a href="#l00701">AP_Landing.cpp:701</a></div></div>
<div class="ttc" id="aclassAP__Landing_html_aa55a4c05759d130145bd66bf1107b862"><div class="ttname"><a href="classAP__Landing.html#aa55a4c05759d130145bd66bf1107b862">AP_Landing::type_slope_constrain_roll</a></div><div class="ttdeci">int32_t type_slope_constrain_roll(const int32_t desired_roll_cd, const int32_t level_roll_limit_cd)</div><div class="ttdef"><b>Definition</b> <a href="AP__Landing__Slope_8cpp_source.html#l00379">AP_Landing_Slope.cpp:379</a></div></div>
<div class="ttc" id="aclassAP__Landing_html_ab1f1e488ffd8fd29824122d09f22a58e"><div class="ttname"><a href="classAP__Landing.html#ab1f1e488ffd8fd29824122d09f22a58e">AP_Landing::use_thr_min_during_flare</a></div><div class="ttdeci">bool use_thr_min_during_flare(void) const</div><div class="ttdef"><b>Definition</b> <a href="#l00666">AP_Landing.cpp:666</a></div></div>
<div class="ttc" id="aclassAP__Landing_html_ab2d71a947b43a822f9b76a29ac4cf901"><div class="ttname"><a href="classAP__Landing.html#ab2d71a947b43a822f9b76a29ac4cf901">AP_Landing::override_servos</a></div><div class="ttdeci">bool override_servos(void)</div><div class="ttdef"><b>Definition</b> <a href="#l00412">AP_Landing.cpp:412</a></div></div>
<div class="ttc" id="aclassAP__Landing_html_abc9d11071cf7a216dfe957aa96797e63"><div class="ttname"><a href="classAP__Landing.html#abc9d11071cf7a216dfe957aa96797e63">AP_Landing::is_flying_forward</a></div><div class="ttdeci">bool is_flying_forward(void) const</div><div class="ttdef"><b>Definition</b> <a href="#l00680">AP_Landing.cpp:680</a></div></div>
<div class="ttc" id="aclassAP__Landing_html_abd273e1df18912f10cf1b3201b5ba013"><div class="ttname"><a href="classAP__Landing.html#abd273e1df18912f10cf1b3201b5ba013">AP_Landing::tecs_Controller</a></div><div class="ttdeci">AP_TECS * tecs_Controller</div><div class="ttdef"><b>Definition</b> <a href="AP__Landing_8h_source.html#l00139">AP_Landing.h:139</a></div></div>
<div class="ttc" id="aclassAP__Landing_html_ac1ae9e055dccfa298d95b2f5b92dd2a3"><div class="ttname"><a href="classAP__Landing.html#ac1ae9e055dccfa298d95b2f5b92dd2a3">AP_Landing::is_throttle_suppressed</a></div><div class="ttdeci">bool is_throttle_suppressed(void) const</div><div class="ttdef"><b>Definition</b> <a href="#l00647">AP_Landing.cpp:647</a></div></div>
<div class="ttc" id="aclassAP__Landing_html_ac2dfc670ce0af524cbd4614a6469eb37"><div class="ttname"><a href="classAP__Landing.html#ac2dfc670ce0af524cbd4614a6469eb37">AP_Landing::type_slope_is_flaring</a></div><div class="ttdeci">bool type_slope_is_flaring(void) const</div><div class="ttdef"><b>Definition</b> <a href="AP__Landing__Slope_8cpp_source.html#l00388">AP_Landing_Slope.cpp:388</a></div></div>
<div class="ttc" id="aclassAP__Landing_html_ac7cb51eaa69d1bed262223b56ee2c4ce"><div class="ttname"><a href="classAP__Landing.html#ac7cb51eaa69d1bed262223b56ee2c4ce">AP_Landing::do_land</a></div><div class="ttdeci">void do_land(const AP_Mission::Mission_Command &amp;cmd, const float relative_altitude)</div><div class="ttdef"><b>Definition</b> <a href="#l00210">AP_Landing.cpp:210</a></div></div>
<div class="ttc" id="aclassAP__Landing_html_acd3a2b753c492c662924489dddec561b"><div class="ttname"><a href="classAP__Landing.html#acd3a2b753c492c662924489dddec561b">AP_Landing::type_slope_adjust_landing_slope_for_rangefinder_bump</a></div><div class="ttdeci">void type_slope_adjust_landing_slope_for_rangefinder_bump(AP_FixedWing::Rangefinder_State &amp;rangefinder_state, Location &amp;prev_WP_loc, Location &amp;next_WP_loc, const Location &amp;current_loc, const float wp_distance, int32_t &amp;target_altitude_offset_cm)</div><div class="ttdef"><b>Definition</b> <a href="AP__Landing__Slope_8cpp_source.html#l00190">AP_Landing_Slope.cpp:190</a></div></div>
<div class="ttc" id="aclassAP__Landing_html_ad9e20c352e37871ea00f2bafea6c32cb"><div class="ttname"><a href="classAP__Landing.html#ad9e20c352e37871ea00f2bafea6c32cb">AP_Landing::adjust_landing_slope_for_rangefinder_bump</a></div><div class="ttdeci">void adjust_landing_slope_for_rangefinder_bump(AP_FixedWing::Rangefinder_State &amp;rangefinder_state, Location &amp;prev_WP_loc, Location &amp;next_WP_loc, const Location &amp;current_loc, const float wp_distance, int32_t &amp;target_altitude_offset_cm)</div><div class="ttdef"><b>Definition</b> <a href="#l00302">AP_Landing.cpp:302</a></div></div>
<div class="ttc" id="aclassAP__Landing_html_ae5f9638b79301cdf63f4bff728abfe3f"><div class="ttname"><a href="classAP__Landing.html#ae5f9638b79301cdf63f4bff728abfe3f">AP_Landing::is_complete</a></div><div class="ttdeci">bool is_complete(void) const</div><div class="ttdef"><b>Definition</b> <a href="#l00612">AP_Landing.cpp:612</a></div></div>
<div class="ttc" id="aclassAP__Landing_html_af39dd86c5af8eea24ce31fe858b9c26b"><div class="ttname"><a href="classAP__Landing.html#af39dd86c5af8eea24ce31fe858b9c26b">AP_Landing::type_slope_do_land</a></div><div class="ttdeci">void type_slope_do_land(const AP_Mission::Mission_Command &amp;cmd, const float relative_altitude)</div><div class="ttdef"><b>Definition</b> <a href="AP__Landing__Slope_8cpp_source.html#l00032">AP_Landing_Slope.cpp:32</a></div></div>
<div class="ttc" id="aclassAP__Landing_html_af5aa8cb7f6e3303f689cad5a5da15ff4"><div class="ttname"><a href="classAP__Landing.html#af5aa8cb7f6e3303f689cad5a5da15ff4">AP_Landing::allow_max_airspeed_on_land</a></div><div class="ttdeci">bool allow_max_airspeed_on_land(void) const</div><div class="ttdef"><b>Definition</b> <a href="#l00672">AP_Landing.cpp:672</a></div></div>
<div class="ttc" id="aclassAP__Landing_html_afc506451afaaca18bebe5746f1caf448"><div class="ttname"><a href="classAP__Landing.html#afc506451afaaca18bebe5746f1caf448">AP_Landing::request_go_around</a></div><div class="ttdeci">bool request_go_around(void)</div><div class="ttdef"><b>Definition</b> <a href="#l00580">AP_Landing.cpp:580</a></div></div>
<div class="ttc" id="aclassAP__Landing_html_afc85fdc4d7271fbd7d0f517907aace30"><div class="ttname"><a href="classAP__Landing.html#afc85fdc4d7271fbd7d0f517907aace30">AP_Landing::var_info</a></div><div class="ttdeci">static const struct AP_Param::GroupInfo var_info[]</div><div class="ttdef"><b>Definition</b> <a href="AP__Landing_8h_source.html#l00026">AP_Landing.h:26</a></div></div>
<div class="ttc" id="aclassAP__Landing_html_afdbc34de818b9cb366336c23660fd495"><div class="ttname"><a href="classAP__Landing.html#afdbc34de818b9cb366336c23660fd495">AP_Landing::verify_land</a></div><div class="ttdeci">bool verify_land(const Location &amp;prev_WP_loc, Location &amp;next_WP_loc, const Location &amp;current_loc, const float height, const float sink_rate, const float wp_proportion, const uint32_t last_flying_ms, const bool is_armed, const bool is_flying, const bool rangefinder_state_in_range)</div><div class="ttdef"><b>Definition</b> <a href="#l00237">AP_Landing.cpp:237</a></div></div>
<div class="ttc" id="aclassAP__Landing_html_afdd8ba6978ded3f0a9a13191b7be43d7"><div class="ttname"><a href="classAP__Landing.html#afdd8ba6978ded3f0a9a13191b7be43d7">AP_Landing::type_slope_is_complete</a></div><div class="ttdeci">bool type_slope_is_complete(void) const</div><div class="ttdef"><b>Definition</b> <a href="AP__Landing__Slope_8cpp_source.html#l00405">AP_Landing_Slope.cpp:405</a></div></div>
<div class="ttc" id="aclassAP__Mission_html"><div class="ttname"><a href="classAP__Mission.html">AP_Mission</a></div><div class="ttdoc">Object managing Mission.</div><div class="ttdef"><b>Definition</b> <a href="AP__Mission_8h_source.html#l00065">AP_Mission.h:66</a></div></div>
<div class="ttc" id="aclassAP__Mission_html_a4e7d81dd5f779c2a3dab501edbb7bd96"><div class="ttname"><a href="classAP__Mission.html#a4e7d81dd5f779c2a3dab501edbb7bd96">AP_Mission::get_current_nav_cmd</a></div><div class="ttdeci">const Mission_Command &amp; get_current_nav_cmd() const</div><div class="ttdoc">get_current_nav_cmd - returns the current &quot;navigation&quot; command</div><div class="ttdef"><b>Definition</b> <a href="AP__Mission_8h_source.html#l00551">AP_Mission.h:551</a></div></div>
<div class="ttc" id="aclassAP__Mission_html_a631c1e64dcae05e22112360c6f20855f"><div class="ttname"><a href="classAP__Mission.html#a631c1e64dcae05e22112360c6f20855f">AP_Mission::get_current_nav_index</a></div><div class="ttdeci">uint16_t get_current_nav_index() const</div><div class="ttdef"><b>Definition</b> <a href="AP__Mission_8h_source.html#l00559">AP_Mission.h:559</a></div></div>
<div class="ttc" id="aclassAP__Mission_html_aac82471fe961e31cd0fba02ba7783aba"><div class="ttname"><a href="classAP__Mission.html#aac82471fe961e31cd0fba02ba7783aba">AP_Mission::read_cmd_from_storage</a></div><div class="ttdeci">bool read_cmd_from_storage(uint16_t index, Mission_Command &amp;cmd) const</div></div>
<div class="ttc" id="aclassAP__Mission_html_abb0a064445c58bb2d9492561f364c273"><div class="ttname"><a href="classAP__Mission.html#abb0a064445c58bb2d9492561f364c273">AP_Mission::get_prev_nav_cmd_with_wp_index</a></div><div class="ttdeci">uint16_t get_prev_nav_cmd_with_wp_index() const</div><div class="ttdef"><b>Definition</b> <a href="AP__Mission_8h_source.html#l00589">AP_Mission.h:589</a></div></div>
<div class="ttc" id="aclassAP__Mission_html_ac79a188f81816b3ddfe045b6a0feb6d1"><div class="ttname"><a href="classAP__Mission.html#ac79a188f81816b3ddfe045b6a0feb6d1">AP_Mission::set_current_cmd</a></div><div class="ttdeci">bool set_current_cmd(uint16_t index)</div></div>
<div class="ttc" id="aclassAP__Mission_html_ae6611f2f6aebf5e113e0225977e113f1"><div class="ttname"><a href="classAP__Mission.html#ae6611f2f6aebf5e113e0225977e113f1">AP_Mission::stop</a></div><div class="ttdeci">void stop()</div><div class="ttdoc">stop - stops mission execution. subsequent calls to update() will have no effect until the mission is...</div></div>
<div class="ttc" id="aclassAP__Mission_html_af7b8e9db68a2a858e2ecca8d57c2722e"><div class="ttname"><a href="classAP__Mission.html#af7b8e9db68a2a858e2ecca8d57c2722e">AP_Mission::resume</a></div><div class="ttdeci">void resume()</div></div>
<div class="ttc" id="aclassAP__Mission_html_af895b228640bdf29178d44e00897d10e"><div class="ttname"><a href="classAP__Mission.html#af895b228640bdf29178d44e00897d10e">AP_Mission::get_landing_sequence_start</a></div><div class="ttdeci">uint16_t get_landing_sequence_start()</div></div>
<div class="ttc" id="aclassAP__Navigation_html"><div class="ttname"><a href="classAP__Navigation.html">AP_Navigation</a></div><div class="ttdef"><b>Definition</b> <a href="AP__Navigation_8h_source.html#l00014">AP_Navigation.h:14</a></div></div>
<div class="ttc" id="aclassAP__Param_html_a5f6dcfce1c0a79cf5bd81283e22f3201"><div class="ttname"><a href="classAP__Param.html#a5f6dcfce1c0a79cf5bd81283e22f3201">AP_Param::setup_object_defaults</a></div><div class="ttdeci">static void setup_object_defaults(const void *object_pointer, const struct GroupInfo *group_info)</div><div class="ttdef"><b>Definition</b> <a href="main_8cpp_source.html#l00010">main.cpp:10</a></div></div>
<div class="ttc" id="aclassAP__TECS_html"><div class="ttname"><a href="classAP__TECS.html">AP_TECS</a></div><div class="ttdef"><b>Definition</b> <a href="AP__TECS_8h_source.html#l00027">AP_TECS.h:27</a></div></div>
<div class="ttc" id="aclassAP__TECS_html_a22e88eb1a109a7b6e8ca2897556c184e"><div class="ttname"><a href="classAP__TECS.html#a22e88eb1a109a7b6e8ca2897556c184e">AP_TECS::get_target_airspeed</a></div><div class="ttdeci">float get_target_airspeed(void) const</div><div class="ttdef"><b>Definition</b> <a href="AP__TECS_8h_source.html#l00076">AP_TECS.h:76</a></div></div>
<div class="ttc" id="aclassLocation_html"><div class="ttname"><a href="classLocation.html">Location</a></div><div class="ttdef"><b>Definition</b> <a href="Location_8h_source.html#l00007">Location.h:8</a></div></div>
<div class="ttc" id="aclassLocation_html_a89e532f5bcc13db2f51ff9eed667c2b6"><div class="ttname"><a href="classLocation.html#a89e532f5bcc13db2f51ff9eed667c2b6">Location::alt</a></div><div class="ttdeci">int32_t alt</div><div class="ttdef"><b>Definition</b> <a href="Location_8h_source.html#l00018">Location.h:18</a></div></div>
<div class="ttc" id="aexamples_2AnalogIn_2AnalogIn_8cpp_html_a130f3ebe4c1bb6993e1094760227ad6a"><div class="ttname"><a href="examples_2AnalogIn_2AnalogIn_8cpp.html#a130f3ebe4c1bb6993e1094760227ad6a">chan</a></div><div class="ttdeci">AP_HAL::AnalogSource * chan</div><div class="ttdef"><b>Definition</b> <a href="examples_2AnalogIn_2AnalogIn_8cpp_source.html#l00025">AnalogIn.cpp:25</a></div></div>
<div class="ttc" id="aexamples_2location_2location_8cpp_html_a236564ebd944c27ac8ef6fe851ac515f"><div class="ttname"><a href="examples_2location_2location_8cpp.html#a236564ebd944c27ac8ef6fe851ac515f">location</a></div><div class="ttdeci">Vector2f location</div><div class="ttdef"><b>Definition</b> <a href="examples_2location_2location_8cpp_source.html#l00017">location.cpp:17</a></div></div>
<div class="ttc" id="anamespaceAP_html_ad7eb5eb7d80cfbcb69839b497bff7a46"><div class="ttname"><a href="namespaceAP.html#ad7eb5eb7d80cfbcb69839b497bff7a46">AP::fence</a></div><div class="ttdeci">AC_Fence * fence()</div><div class="ttdef"><b>Definition</b> <a href="AC__Fence_8cpp_source.html#l00785">AC_Fence.cpp:785</a></div></div>
<div class="ttc" id="astructAP__FixedWing_1_1Rangefinder__State_html"><div class="ttname"><a href="structAP__FixedWing_1_1Rangefinder__State.html">AP_FixedWing::Rangefinder_State</a></div><div class="ttdef"><b>Definition</b> <a href="AP__FixedWing_8h_source.html#l00028">AP_FixedWing.h:28</a></div></div>
<div class="ttc" id="astructAP__FixedWing_html"><div class="ttname"><a href="structAP__FixedWing.html">AP_FixedWing</a></div><div class="ttdef"><b>Definition</b> <a href="AP__FixedWing_8h_source.html#l00008">AP_FixedWing.h:8</a></div></div>
<div class="ttc" id="astructAP__FixedWing_html_a9787530264fe0198ac8e12d5923e5f20"><div class="ttname"><a href="structAP__FixedWing.html#a9787530264fe0198ac8e12d5923e5f20">AP_FixedWing::airspeed_cruise</a></div><div class="ttdeci">AP_Float airspeed_cruise</div><div class="ttdef"><b>Definition</b> <a href="AP__FixedWing_8h_source.html#l00016">AP_FixedWing.h:16</a></div></div>
<div class="ttc" id="astructAP__Mission_1_1Mission__Command_html"><div class="ttname"><a href="structAP__Mission_1_1Mission__Command.html">AP_Mission::Mission_Command</a></div><div class="ttdef"><b>Definition</b> <a href="AP__Mission_8h_source.html#l00402">AP_Mission.h:402</a></div></div>
<div class="ttc" id="astructAP__Mission_1_1Mission__Command_html_a272ab59936fd9d78bb5898b4b53ba688"><div class="ttname"><a href="structAP__Mission_1_1Mission__Command.html#a272ab59936fd9d78bb5898b4b53ba688">AP_Mission::Mission_Command::id</a></div><div class="ttdeci">uint16_t id</div><div class="ttdef"><b>Definition</b> <a href="AP__Mission_8h_source.html#l00404">AP_Mission.h:404</a></div></div>
<div class="ttc" id="astructAP__Mission_1_1Mission__Command_html_a41a7d992648b468243195e1e0af22f10"><div class="ttname"><a href="structAP__Mission_1_1Mission__Command.html#a41a7d992648b468243195e1e0af22f10">AP_Mission::Mission_Command::content</a></div><div class="ttdeci">Content content</div><div class="ttdef"><b>Definition</b> <a href="AP__Mission_8h_source.html#l00406">AP_Mission.h:406</a></div></div>
<div class="ttc" id="astructAP__Mission_1_1Mission__Command_html_a6b240c9c758f53f14e81be2554a08973"><div class="ttname"><a href="structAP__Mission_1_1Mission__Command.html#a6b240c9c758f53f14e81be2554a08973">AP_Mission::Mission_Command::p1</a></div><div class="ttdeci">uint16_t p1</div><div class="ttdef"><b>Definition</b> <a href="AP__Mission_8h_source.html#l00405">AP_Mission.h:405</a></div></div>
<div class="ttc" id="astructAP__PIDInfo_html"><div class="ttname"><a href="structAP__PIDInfo.html">AP_PIDInfo</a></div><div class="ttdef"><b>Definition</b> <a href="AP__PIDInfo_8h_source.html#l00009">AP_PIDInfo.h:9</a></div></div>
<div class="ttc" id="astructAP__Param_1_1GroupInfo_html"><div class="ttname"><a href="structAP__Param_1_1GroupInfo.html">AP_Param::GroupInfo</a></div><div class="ttdef"><b>Definition</b> <a href="AP__Param_8h_source.html#l00199">AP_Param.h:199</a></div></div>
<div class="ttc" id="astructtype_html"><div class="ttname"><a href="structtype.html">type</a></div><div class="ttdef"><b>Definition</b> <a href="AP__Scripting_2generator_2src_2main_8c_source.html#l00163">main.c:163</a></div></div>
<div class="ttc" id="aunionAP__Mission_1_1Content_html_aec2febddd4c431123ed1a79643376af9"><div class="ttname"><a href="unionAP__Mission_1_1Content.html#aec2febddd4c431123ed1a79643376af9">AP_Mission::Content::location</a></div><div class="ttdeci">Location location</div><div class="ttdef"><b>Definition</b> <a href="AP__Mission_8h_source.html#l00398">AP_Mission.h:398</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Mar 22 2024 16:14:14 for APM:Libraries by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
