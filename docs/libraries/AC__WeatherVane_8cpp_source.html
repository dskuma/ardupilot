<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>APM:Libraries: libraries/AC_AttitudeControl/AC_WeatherVane.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">APM:Libraries
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_bc0718b08fb2015b8e59c47b2805f60c.html">libraries</a></li><li class="navelem"><a class="el" href="dir_c50d09644f1928d7bdd0d8bb236183c6.html">AC_AttitudeControl</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle"><div class="title">AC_WeatherVane.cpp</div></div>
</div><!--header-->
<div class="contents">
<a href="AC__WeatherVane_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">/*</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment"> * Aircraft Weathervane options common to vtol plane and copters</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment"> */</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="preprocessor">#include &lt;<a class="code" href="AP__Vehicle__Type_8h.html">AP_Vehicle/AP_Vehicle_Type.h</a>&gt;</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="preprocessor">#include &quot;<a class="code" href="AC__WeatherVane_8h.html">AC_WeatherVane.h</a>&quot;</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="preprocessor">#include &lt;<a class="code" href="GCS_8h.html">GCS_MAVLink/GCS.h</a>&gt;</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="preprocessor">#include &lt;<a class="code" href="AP__AHRS_8h.html">AP_AHRS/AP_AHRS.h</a>&gt;</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span> </div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="preprocessor">#if APM_BUILD_TYPE(APM_BUILD_ArduPlane)</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="preprocessor">    #define WVANE_PARAM_ENABLED 1</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="preprocessor">    #define WVANE_PARAM_SPD_MAX_DEFAULT 0</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="preprocessor">    #define WVANE_PARAM_VELZ_MAX_DEFAULT 0</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="preprocessor">    #define WVANE_PARAM_GAIN_DEFAULT 0</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno"><a class="line" href="AC__WeatherVane_8cpp.html#a2a5608567a2fa2ef8af0dc9a39a594aa">   15</a></span><span class="preprocessor">    #define WVANE_PARAM_ENABLED 0</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno"><a class="line" href="AC__WeatherVane_8cpp.html#a7174c7515dac0d3bbb6da1a33051388d">   16</a></span><span class="preprocessor">    #define WVANE_PARAM_SPD_MAX_DEFAULT 2</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno"><a class="line" href="AC__WeatherVane_8cpp.html#a76fd339a796fc3c1a3fe51de63b0776c">   17</a></span><span class="preprocessor">    #define WVANE_PARAM_VELZ_MAX_DEFAULT 1</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno"><a class="line" href="AC__WeatherVane_8cpp.html#aef1a05e51e0c3e9f730d719d6f33ed3e">   18</a></span><span class="preprocessor">    #define WVANE_PARAM_GAIN_DEFAULT 1</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span> </div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span> </div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span><span class="keyword">const</span> <a class="code hl_struct" href="structAP__Param_1_1GroupInfo.html">AP_Param::GroupInfo</a> <a class="code hl_variable" href="classAC__WeatherVane.html#ac1cbb12c1abf974b3cb35e3c2f5ee374">AC_WeatherVane::var_info</a>[] = {</div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span> </div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span>    <span class="comment">// @Param: ENABLE</span></div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span>    <span class="comment">// @DisplayName: Enable</span></div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span>    <span class="comment">// @Description: Enable weather vaning.  When active, the aircraft will automatically yaw into wind when in a VTOL position controlled mode. Pilot yaw commands override the weathervaning action.</span></div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span>    <span class="comment">// @Values: -1:Only use during takeoffs or landing see weathervane takeoff and land override parameters,0:Disabled,1:Nose into wind,2:Nose or tail into wind,3:Side into wind,4:tail into wind</span></div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span>    <a class="code hl_define" href="AP__Param_8h.html#ac24e2eb16c2194e975d27e47ddcb7f1c">AP_GROUPINFO_FLAGS</a>(<span class="stringliteral">&quot;ENABLE&quot;</span>, 1, <a class="code hl_class" href="classAC__WeatherVane.html">AC_WeatherVane</a>, _direction, <a class="code hl_define" href="AC__WeatherVane_8cpp.html#a2a5608567a2fa2ef8af0dc9a39a594aa">WVANE_PARAM_ENABLED</a>, <a class="code hl_define" href="AP__Param_8h.html#ae25c1c7495435989f8be5781c86be078">AP_PARAM_FLAG_ENABLE</a>),</div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span> </div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span>    <span class="comment">// @Param: GAIN</span></div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span>    <span class="comment">// @DisplayName: Weathervaning gain</span></div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span>    <span class="comment">// @Description: This converts the target roll/pitch angle of the aircraft into the correcting (into wind) yaw rate. e.g. Gain = 2, roll = 30 deg, pitch = 0 deg, yaw rate = 60 deg/s.</span></div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span>    <span class="comment">// @Range: 0.5 4</span></div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span>    <span class="comment">// @Increment: 0.1</span></div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;GAIN&quot;</span>, 2, <a class="code hl_class" href="classAC__WeatherVane.html">AC_WeatherVane</a>, _gain, <a class="code hl_define" href="AC__WeatherVane_8cpp.html#aef1a05e51e0c3e9f730d719d6f33ed3e">WVANE_PARAM_GAIN_DEFAULT</a>),</div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span> </div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span>    <span class="comment">// @Param: ANG_MIN</span></div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span>    <span class="comment">// @DisplayName: Weathervaning min angle</span></div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span>    <span class="comment">// @Description: The minimum target roll/pitch angle before active weathervaning will start.  This provides a dead zone that is particularly useful for poorly trimmed quadplanes.</span></div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span>    <span class="comment">// @Units: deg</span></div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span>    <span class="comment">// @Range: 0 10</span></div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span>    <span class="comment">// @Increment: 0.1</span></div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;ANG_MIN&quot;</span>, 3, <a class="code hl_class" href="classAC__WeatherVane.html">AC_WeatherVane</a>, _min_dz_ang_deg, 1.0),</div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span> </div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span>    <span class="comment">// @Param: HGT_MIN</span></div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span>    <span class="comment">// @DisplayName: Weathervaning min height</span></div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span>    <span class="comment">// @Description: Above this height weathervaning is permitted.  If a range finder is fitted or if terrain is enabled, this parameter sets height AGL.  Otherwise, this parameter sets height above home.  Set zero to ignore minimum height requirement to activate weathervaning.</span></div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span>    <span class="comment">// @Description{Plane}: Above this height weathervaning is permitted.  If RNGFND_LANDING is enabled or terrain is enabled then this parameter sets height AGL. Otherwise this parameter sets height above home.  Set zero to ignore minimum height requirement to activate weathervaning</span></div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span>    <span class="comment">// @Units: m</span></div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span>    <span class="comment">// @Range: 0 50</span></div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span>    <span class="comment">// @Increment: 1</span></div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;HGT_MIN&quot;</span>, 4, <a class="code hl_class" href="classAC__WeatherVane.html">AC_WeatherVane</a>, _min_height, 0.0),</div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span> </div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span>    <span class="comment">// @Param: SPD_MAX</span></div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span>    <span class="comment">// @DisplayName: Weathervaning max ground speed</span></div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>    <span class="comment">// @Description: Below this ground speed weathervaning is permitted. Set to 0 to ignore this condition when checking if vehicle should weathervane.</span></div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>    <span class="comment">// @Units: m/s</span></div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span>    <span class="comment">// @Range: 0 50</span></div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span>    <span class="comment">// @Increment: 0.1</span></div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;SPD_MAX&quot;</span>, 5, <a class="code hl_class" href="classAC__WeatherVane.html">AC_WeatherVane</a>, _max_vel_xy, <a class="code hl_define" href="AC__WeatherVane_8cpp.html#a7174c7515dac0d3bbb6da1a33051388d">WVANE_PARAM_SPD_MAX_DEFAULT</a>),</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span> </div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>    <span class="comment">// @Param: VELZ_MAX</span></div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span>    <span class="comment">// @DisplayName: Weathervaning max vertical speed</span></div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>    <span class="comment">// @Description: The maximum climb or descent speed that the vehicle will still attempt to weathervane. Set to 0 to ignore this condition to get the aircraft to weathervane at any climb/descent rate.  This is particularly useful for aircraft with low disc loading that struggle with yaw control in decent.</span></div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span>    <span class="comment">// @Units: m/s</span></div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>    <span class="comment">// @Range: 0 5</span></div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>    <span class="comment">// @Increment: 0.1</span></div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;VELZ_MAX&quot;</span>, 6, <a class="code hl_class" href="classAC__WeatherVane.html">AC_WeatherVane</a>, _max_vel_z, <a class="code hl_define" href="AC__WeatherVane_8cpp.html#a76fd339a796fc3c1a3fe51de63b0776c">WVANE_PARAM_VELZ_MAX_DEFAULT</a>),</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span> </div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>    <span class="comment">// @Param: TAKEOFF</span></div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>    <span class="comment">// @DisplayName: Takeoff override</span></div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>    <span class="comment">// @Description: Override the weather vaning behaviour when in takeoffs</span></div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>    <span class="comment">// @Values: -1:No override,0:Disabled,1:Nose into wind,2:Nose or tail into wind,3:Side into wind,4:tail into wind</span></div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;TAKEOFF&quot;</span>, 7, <a class="code hl_class" href="classAC__WeatherVane.html">AC_WeatherVane</a>, _takeoff_direction, -1),</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span> </div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>    <span class="comment">// @Param: LAND</span></div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>    <span class="comment">// @DisplayName: Landing override</span></div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>    <span class="comment">// @Description: Override the weather vaning behaviour when in landing</span></div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>    <span class="comment">// @Values: -1:No override,0:Disabled,1:Nose into wind,2:Nose or tail into wind,3:Side into wind,4:tail into wind</span></div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;LAND&quot;</span>, 8, <a class="code hl_class" href="classAC__WeatherVane.html">AC_WeatherVane</a>, _landing_direction, -1),</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span> </div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>    <span class="comment">// @Param: OPTIONS</span></div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>    <span class="comment">// @DisplayName: Weathervaning options</span></div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>    <span class="comment">// @Description: Options impacting weathervaning behaviour</span></div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>    <span class="comment">// @Bitmask: 0:Use pitch when nose or tail-in for faster weathervaning</span></div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;OPTIONS&quot;</span>, 9, <a class="code hl_class" href="classAC__WeatherVane.html">AC_WeatherVane</a>, _options, 0),</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>    </div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>    <a class="code hl_define" href="AP__Param_8h.html#a0f9acb038a5283b964b862aea8cc5051">AP_GROUPEND</a></div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>};</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span> </div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span> </div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span><span class="comment">// Constructor</span></div>
<div class="foldopen" id="foldopen00102" data-start="{" data-end="}">
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno"><a class="line" href="classAC__WeatherVane.html#a0733c64c8710b4426577a542498e8fb8">  102</a></span><a class="code hl_function" href="classAC__WeatherVane.html#a0733c64c8710b4426577a542498e8fb8">AC_WeatherVane::AC_WeatherVane</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>{</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>    <a class="code hl_function" href="classAP__Param.html#a5f6dcfce1c0a79cf5bd81283e22f3201">AP_Param::setup_object_defaults</a>(<span class="keyword">this</span>, var_info);</div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span>}</div>
</div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span> </div>
<div class="foldopen" id="foldopen00107" data-start="{" data-end="}">
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno"><a class="line" href="classAC__WeatherVane.html#a43fc3713b8ef7306f48b0267bdaf5e41">  107</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classAC__WeatherVane.html#a43fc3713b8ef7306f48b0267bdaf5e41">AC_WeatherVane::get_yaw_out</a>(<span class="keywordtype">float</span> &amp;yaw_output, <span class="keyword">const</span> int16_t pilot_yaw, <span class="keyword">const</span> <span class="keywordtype">float</span> hgt, <span class="keyword">const</span> <span class="keywordtype">float</span> roll_cdeg, <span class="keyword">const</span> <span class="keywordtype">float</span> pitch_cdeg, <span class="keyword">const</span> <span class="keywordtype">bool</span> is_takeoff, <span class="keyword">const</span> <span class="keywordtype">bool</span> is_landing)</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>{</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>    <a class="code hl_enumeration" href="classAC__WeatherVane.html#a19292b2bdc3c5daefc230ba53139b656">Direction</a> dir = (<a class="code hl_enumeration" href="classAC__WeatherVane.html#a19292b2bdc3c5daefc230ba53139b656">Direction</a>)<a class="code hl_variable" href="classAC__WeatherVane.html#a45922fa2a2b4736f66c180655b4f70c5">_direction</a>.get();</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>    <span class="keywordflow">if</span> ((dir == <a class="code hl_enumvalue" href="classAC__WeatherVane.html#a19292b2bdc3c5daefc230ba53139b656a88559a0cfd8250c9d65970cc145c92d4">Direction::OFF</a>) || !<a class="code hl_variable" href="classAC__WeatherVane.html#acea3f9ce423f81d174449d399a575032">allowed</a> || (pilot_yaw != 0) || !<a class="code hl_function" href="AP__Math_8h.html#a4e3ae698e8f99cec214348ad233e3c41">is_positive</a>(<a class="code hl_variable" href="classAC__WeatherVane.html#a4a94a169a7a257b12c5520e37fc7a76d">_gain</a>)) {</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>        <span class="comment">// parameter disabled, or 0 gain</span></div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>        <span class="comment">// disabled temporarily</span></div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>        <span class="comment">// dont&#39;t override pilot</span></div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>        <a class="code hl_function" href="classAC__WeatherVane.html#a82984880306eb954b484cc64378b8679">reset</a>();</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>    }</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span> </div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>    <span class="comment">// override direction when in takeoff for landing</span></div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>    <span class="keywordflow">if</span> (is_takeoff &amp;&amp; (<a class="code hl_variable" href="classAC__WeatherVane.html#a15734d9f84b6e6f0703ef9974bdda079">_takeoff_direction</a> &gt;= 0)) {</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>        dir = (<a class="code hl_enumeration" href="classAC__WeatherVane.html#a19292b2bdc3c5daefc230ba53139b656">Direction</a>)<a class="code hl_variable" href="classAC__WeatherVane.html#a15734d9f84b6e6f0703ef9974bdda079">_takeoff_direction</a>.get();</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>    }</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>    <span class="keywordflow">if</span> (is_landing &amp;&amp; (<a class="code hl_variable" href="classAC__WeatherVane.html#ab045e6f81ff63aa899c2ba997b0508d9">_landing_direction</a> &gt;= 0)) {</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>        dir = (<a class="code hl_enumeration" href="classAC__WeatherVane.html#a19292b2bdc3c5daefc230ba53139b656">Direction</a>)<a class="code hl_variable" href="classAC__WeatherVane.html#ab045e6f81ff63aa899c2ba997b0508d9">_landing_direction</a>.get();</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>    }</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>    <span class="keywordflow">if</span> (dir == <a class="code hl_enumvalue" href="classAC__WeatherVane.html#a19292b2bdc3c5daefc230ba53139b656a88559a0cfd8250c9d65970cc145c92d4">Direction::OFF</a> || (dir == <a class="code hl_enumvalue" href="classAC__WeatherVane.html#a19292b2bdc3c5daefc230ba53139b656a66cd6d3e3faaa36dacf20fd096bdbcfe">Direction::TAKEOFF_OR_LAND_ONLY</a>)) {</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>        <span class="comment">// Disabled for takeoff or landing</span></div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>        <span class="comment">// Disabled if in flight and dir = -1</span></div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>        <a class="code hl_function" href="classAC__WeatherVane.html#a82984880306eb954b484cc64378b8679">reset</a>();</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>    }</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span> </div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>    <span class="comment">// Check if we are above the minimum height to weather vane</span></div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="AP__Math_8h.html#a4e3ae698e8f99cec214348ad233e3c41">is_positive</a>(<a class="code hl_variable" href="classAC__WeatherVane.html#a99a153ec62a7c6c256e3319a2797fa94">_min_height</a>) &amp;&amp; (hgt &lt;= <a class="code hl_variable" href="classAC__WeatherVane.html#a99a153ec62a7c6c256e3319a2797fa94">_min_height</a>)) {</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>        <a class="code hl_function" href="classAC__WeatherVane.html#a82984880306eb954b484cc64378b8679">reset</a>();</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>    }</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span> </div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>    <span class="comment">// Check if we meet the velocity thresholds to allow weathervaning</span></div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="AP__Math_8h.html#a4e3ae698e8f99cec214348ad233e3c41">is_positive</a>(<a class="code hl_variable" href="classAC__WeatherVane.html#a6c002758c847b485d7f58b94e9074733">_max_vel_xy</a>) || <a class="code hl_function" href="AP__Math_8h.html#a4e3ae698e8f99cec214348ad233e3c41">is_positive</a>(<a class="code hl_variable" href="classAC__WeatherVane.html#a898aca9089b4923700842b26d03e6d1c">_max_vel_z</a>)) {</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>        <a class="code hl_class" href="classVector3.html">Vector3f</a> vel_ned;</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="namespaceAP.html#a99432cfdb696952c9b7146f155a815aa">AP::ahrs</a>().get_velocity_NED(vel_ned) || <span class="comment">// need speed estimate</span></div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>                (<a class="code hl_function" href="AP__Math_8h.html#a4e3ae698e8f99cec214348ad233e3c41">is_positive</a>(<a class="code hl_variable" href="classAC__WeatherVane.html#a6c002758c847b485d7f58b94e9074733">_max_vel_xy</a>) &amp;&amp; (vel_ned.<a class="code hl_function" href="classVector3.html#abcf8b89285b9966932d1aceeeadb21d3">xy</a>().<a class="code hl_function" href="structVector2.html#a563aab6b2f2b992ab7a4699891a99ae5">length_squared</a>() &gt; (<a class="code hl_variable" href="classAC__WeatherVane.html#a6c002758c847b485d7f58b94e9074733">_max_vel_xy</a>*<a class="code hl_variable" href="classAC__WeatherVane.html#a6c002758c847b485d7f58b94e9074733">_max_vel_xy</a>))) || <span class="comment">// check xy speed</span></div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>                (<a class="code hl_function" href="AP__Math_8h.html#a4e3ae698e8f99cec214348ad233e3c41">is_positive</a>(<a class="code hl_variable" href="classAC__WeatherVane.html#a898aca9089b4923700842b26d03e6d1c">_max_vel_z</a>) &amp;&amp; (fabsf(vel_ned.<a class="code hl_variable" href="classVector3.html#ab3e7f5401dd6e951978bfa746809f74f">z</a>) &gt; <a class="code hl_variable" href="classAC__WeatherVane.html#a898aca9089b4923700842b26d03e6d1c">_max_vel_z</a>))) { <span class="comment">// check z speed</span></div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>            <a class="code hl_function" href="classAC__WeatherVane.html#a82984880306eb954b484cc64378b8679">reset</a>();</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>        }</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>    }</div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span> </div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>    <span class="keyword">const</span> uint32_t now = <a class="code hl_function" href="namespaceAP__HAL.html#a77dffbb18891996280308e21316ec186">AP_HAL::millis</a>();</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>    <span class="keywordflow">if</span> (now - <a class="code hl_variable" href="classAC__WeatherVane.html#acc320053fa921ce153d55f3f7e717f2a">last_check_ms</a> &gt; 250) {</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>        <span class="comment">// not run this function or reset recently</span></div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>        <a class="code hl_function" href="classAC__WeatherVane.html#a82984880306eb954b484cc64378b8679">reset</a>();</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>    }</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>    <a class="code hl_variable" href="classAC__WeatherVane.html#acc320053fa921ce153d55f3f7e717f2a">last_check_ms</a> = now;</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span> </div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>    <span class="comment">/*</span></div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span><span class="comment">      Use a 2 second buffer to ensure weathervaning occurs once the vehicle has</span></div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span><span class="comment">      clearly achieved an acceptable condition.</span></div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span><span class="comment">    */</span></div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAC__WeatherVane.html#a5356b50044a27fcf3c1638776760561f">first_activate_ms</a> == 0) {</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>        <a class="code hl_variable" href="classAC__WeatherVane.html#a5356b50044a27fcf3c1638776760561f">first_activate_ms</a> = now;</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>    }</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>    <span class="keywordflow">if</span> (now - <a class="code hl_variable" href="classAC__WeatherVane.html#a5356b50044a27fcf3c1638776760561f">first_activate_ms</a> &lt; 2000) {</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>    }</div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span> </div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>    <span class="keyword">const</span> <span class="keywordtype">float</span> deadzone_cdeg = <a class="code hl_variable" href="classAC__WeatherVane.html#a3c398f67f77d52c91008c36dca75221e">_min_dz_ang_deg</a>*100.0;</div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>    <span class="keywordtype">float</span> <a class="code hl_variable" href="luac_8c.html#a5a832fe6e2412dfabb93a2adae30e745">output</a> = 0.0;</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>    <span class="keyword">const</span> <span class="keywordtype">char</span>* dir_string = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span> </div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>    <span class="comment">// should we enable pitch input for nose-in and tail-in?</span></div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> pitch_enable = (uint8_t(<a class="code hl_variable" href="classAC__WeatherVane.html#ae88418ac5c73cdebf68db87c820dfef9">_options</a>.get()) &amp; uint8_t(<a class="code hl_enumvalue" href="classAC__WeatherVane.html#ae7c4b58240aa1870dc2efb2f13dd6a93affcd0d573d9677b54ca8e49141a23abd">Options::PITCH_ENABLE</a>)) != 0;</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span> </div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>    <span class="keywordflow">switch</span> (dir) {</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAC__WeatherVane.html#a19292b2bdc3c5daefc230ba53139b656a88559a0cfd8250c9d65970cc145c92d4">Direction::OFF</a>:</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAC__WeatherVane.html#a19292b2bdc3c5daefc230ba53139b656a66cd6d3e3faaa36dacf20fd096bdbcfe">Direction::TAKEOFF_OR_LAND_ONLY</a>:</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>            <a class="code hl_function" href="classAC__WeatherVane.html#a82984880306eb954b484cc64378b8679">reset</a>();</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span> </div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAC__WeatherVane.html#a19292b2bdc3c5daefc230ba53139b656a58721ebffc26482c130e11b969b511ab">Direction::NOSE_IN</a>:</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>            <span class="keywordflow">if</span> (pitch_enable &amp;&amp; <a class="code hl_function" href="AP__Math_8h.html#a4e3ae698e8f99cec214348ad233e3c41">is_positive</a>(pitch_cdeg - deadzone_cdeg)) {</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>                <a class="code hl_variable" href="luac_8c.html#a5a832fe6e2412dfabb93a2adae30e745">output</a> = fabsf(roll_cdeg) + (pitch_cdeg - deadzone_cdeg);</div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>                <a class="code hl_variable" href="luac_8c.html#a5a832fe6e2412dfabb93a2adae30e745">output</a> = <a class="code hl_define" href="monocypher_8cpp.html#afa99ec4acc4ecb2dc3c2d05da15d0e3f">MAX</a>(fabsf(roll_cdeg) - deadzone_cdeg, 0.0);</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>            }</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="AP__Math_8h.html#a8b6f71a42818d74fd8bfe348108942fa">is_negative</a>(roll_cdeg)) {</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>                <a class="code hl_variable" href="luac_8c.html#a5a832fe6e2412dfabb93a2adae30e745">output</a> *= -1.0;</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>            }</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>            dir_string = <span class="stringliteral">&quot;nose in&quot;</span>;</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span> </div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAC__WeatherVane.html#a19292b2bdc3c5daefc230ba53139b656ad846b073854010d71dd7e4d1240a9af2">Direction::NOSE_OR_TAIL_IN</a>:</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>            <a class="code hl_variable" href="luac_8c.html#a5a832fe6e2412dfabb93a2adae30e745">output</a> = <a class="code hl_define" href="monocypher_8cpp.html#afa99ec4acc4ecb2dc3c2d05da15d0e3f">MAX</a>(fabsf(roll_cdeg) - deadzone_cdeg, 0.0);</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="AP__Math_8h.html#a8b6f71a42818d74fd8bfe348108942fa">is_negative</a>(roll_cdeg) != <a class="code hl_function" href="AP__Math_8h.html#a4e3ae698e8f99cec214348ad233e3c41">is_positive</a>(pitch_cdeg)) {</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>                <a class="code hl_variable" href="luac_8c.html#a5a832fe6e2412dfabb93a2adae30e745">output</a> *= -1.0;</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>            }</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>            dir_string = <span class="stringliteral">&quot;nose or tail in&quot;</span>;</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span> </div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAC__WeatherVane.html#a19292b2bdc3c5daefc230ba53139b656a6a842f253a6e4f3079e217a0fdbd4120">Direction::SIDE_IN</a>:</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>            <a class="code hl_variable" href="luac_8c.html#a5a832fe6e2412dfabb93a2adae30e745">output</a> = <a class="code hl_define" href="monocypher_8cpp.html#afa99ec4acc4ecb2dc3c2d05da15d0e3f">MAX</a>(fabsf(pitch_cdeg) - deadzone_cdeg, 0.0);</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="AP__Math_8h.html#a4e3ae698e8f99cec214348ad233e3c41">is_positive</a>(pitch_cdeg) != <a class="code hl_function" href="AP__Math_8h.html#a4e3ae698e8f99cec214348ad233e3c41">is_positive</a>(roll_cdeg)) {</div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>                <a class="code hl_variable" href="luac_8c.html#a5a832fe6e2412dfabb93a2adae30e745">output</a> *= -1.0;</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>            }</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>            dir_string = <span class="stringliteral">&quot;side in&quot;</span>;</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span> </div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAC__WeatherVane.html#a19292b2bdc3c5daefc230ba53139b656aac536479abaaea7d9c2ed20a2d06bb28">Direction::TAIL_IN</a>:</div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>            <span class="keywordflow">if</span> (pitch_enable &amp;&amp; <a class="code hl_function" href="AP__Math_8h.html#a8b6f71a42818d74fd8bfe348108942fa">is_negative</a>(pitch_cdeg + deadzone_cdeg)) {</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>                <a class="code hl_variable" href="luac_8c.html#a5a832fe6e2412dfabb93a2adae30e745">output</a> = fabsf(roll_cdeg) - (pitch_cdeg + deadzone_cdeg);</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>                <a class="code hl_variable" href="luac_8c.html#a5a832fe6e2412dfabb93a2adae30e745">output</a> = <a class="code hl_define" href="monocypher_8cpp.html#afa99ec4acc4ecb2dc3c2d05da15d0e3f">MAX</a>(fabsf(roll_cdeg) - deadzone_cdeg, 0.0);</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>            }</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="AP__Math_8h.html#a4e3ae698e8f99cec214348ad233e3c41">is_positive</a>(roll_cdeg)) {</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>                <a class="code hl_variable" href="luac_8c.html#a5a832fe6e2412dfabb93a2adae30e745">output</a> *= -1.0;</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>            }</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>            dir_string = <span class="stringliteral">&quot;tail in&quot;</span>;</div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>    }</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span> </div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classAC__WeatherVane.html#aa0308358bb258b7146494dda3dd4ec42">active_msg_sent</a>) {</div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>        <a class="code hl_define" href="GCS_8h.html#a266bfe8eda675e1092f045e93932b4a6">GCS_SEND_TEXT</a>(MAV_SEVERITY_INFO, <span class="stringliteral">&quot;Weathervane Active: %s&quot;</span>, dir_string);</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>        (void)dir_string;  <span class="comment">// in case GCS is disabled</span></div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>        <a class="code hl_variable" href="classAC__WeatherVane.html#aa0308358bb258b7146494dda3dd4ec42">active_msg_sent</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>    }</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span> </div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>    <span class="comment">// Slew output and apply gain</span></div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>    <a class="code hl_variable" href="classAC__WeatherVane.html#a8c1a95329cea3cc65ff38fb999b6d991">last_output</a> = 0.98 * <a class="code hl_variable" href="classAC__WeatherVane.html#a8c1a95329cea3cc65ff38fb999b6d991">last_output</a> + 0.02 * <a class="code hl_variable" href="luac_8c.html#a5a832fe6e2412dfabb93a2adae30e745">output</a> * <a class="code hl_variable" href="classAC__WeatherVane.html#a4a94a169a7a257b12c5520e37fc7a76d">_gain</a>;</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>    yaw_output = <a class="code hl_variable" href="classAC__WeatherVane.html#a8c1a95329cea3cc65ff38fb999b6d991">last_output</a>;</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>}</div>
</div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span> </div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span><span class="comment">// Reset the weathervane controller</span></div>
<div class="foldopen" id="foldopen00234" data-start="{" data-end="}">
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno"><a class="line" href="classAC__WeatherVane.html#a82984880306eb954b484cc64378b8679">  234</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classAC__WeatherVane.html#a82984880306eb954b484cc64378b8679">AC_WeatherVane::reset</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>{</div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>    <a class="code hl_variable" href="classAC__WeatherVane.html#a8c1a95329cea3cc65ff38fb999b6d991">last_output</a> = 0;</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>    <a class="code hl_variable" href="classAC__WeatherVane.html#aa0308358bb258b7146494dda3dd4ec42">active_msg_sent</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>    <a class="code hl_variable" href="classAC__WeatherVane.html#a5356b50044a27fcf3c1638776760561f">first_activate_ms</a> = 0;</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>    <a class="code hl_variable" href="classAC__WeatherVane.html#acc320053fa921ce153d55f3f7e717f2a">last_check_ms</a> = <a class="code hl_function" href="namespaceAP__HAL.html#a77dffbb18891996280308e21316ec186">AP_HAL::millis</a>();</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>}</div>
</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span> </div>
<div class="ttc" id="aAC__WeatherVane_8cpp_html_a2a5608567a2fa2ef8af0dc9a39a594aa"><div class="ttname"><a href="AC__WeatherVane_8cpp.html#a2a5608567a2fa2ef8af0dc9a39a594aa">WVANE_PARAM_ENABLED</a></div><div class="ttdeci">#define WVANE_PARAM_ENABLED</div><div class="ttdef"><b>Definition</b> <a href="#l00015">AC_WeatherVane.cpp:15</a></div></div>
<div class="ttc" id="aAC__WeatherVane_8cpp_html_a7174c7515dac0d3bbb6da1a33051388d"><div class="ttname"><a href="AC__WeatherVane_8cpp.html#a7174c7515dac0d3bbb6da1a33051388d">WVANE_PARAM_SPD_MAX_DEFAULT</a></div><div class="ttdeci">#define WVANE_PARAM_SPD_MAX_DEFAULT</div><div class="ttdef"><b>Definition</b> <a href="#l00016">AC_WeatherVane.cpp:16</a></div></div>
<div class="ttc" id="aAC__WeatherVane_8cpp_html_a76fd339a796fc3c1a3fe51de63b0776c"><div class="ttname"><a href="AC__WeatherVane_8cpp.html#a76fd339a796fc3c1a3fe51de63b0776c">WVANE_PARAM_VELZ_MAX_DEFAULT</a></div><div class="ttdeci">#define WVANE_PARAM_VELZ_MAX_DEFAULT</div><div class="ttdef"><b>Definition</b> <a href="#l00017">AC_WeatherVane.cpp:17</a></div></div>
<div class="ttc" id="aAC__WeatherVane_8cpp_html_aef1a05e51e0c3e9f730d719d6f33ed3e"><div class="ttname"><a href="AC__WeatherVane_8cpp.html#aef1a05e51e0c3e9f730d719d6f33ed3e">WVANE_PARAM_GAIN_DEFAULT</a></div><div class="ttdeci">#define WVANE_PARAM_GAIN_DEFAULT</div><div class="ttdef"><b>Definition</b> <a href="#l00018">AC_WeatherVane.cpp:18</a></div></div>
<div class="ttc" id="aAC__WeatherVane_8h_html"><div class="ttname"><a href="AC__WeatherVane_8h.html">AC_WeatherVane.h</a></div></div>
<div class="ttc" id="aAP__AHRS_8h_html"><div class="ttname"><a href="AP__AHRS_8h.html">AP_AHRS.h</a></div></div>
<div class="ttc" id="aAP__Math_8h_html_a4e3ae698e8f99cec214348ad233e3c41"><div class="ttname"><a href="AP__Math_8h.html#a4e3ae698e8f99cec214348ad233e3c41">is_positive</a></div><div class="ttdeci">bool is_positive(const T fVal1)</div><div class="ttdef"><b>Definition</b> <a href="AP__Math_8h_source.html#l00063">AP_Math.h:63</a></div></div>
<div class="ttc" id="aAP__Math_8h_html_a8b6f71a42818d74fd8bfe348108942fa"><div class="ttname"><a href="AP__Math_8h.html#a8b6f71a42818d74fd8bfe348108942fa">is_negative</a></div><div class="ttdeci">bool is_negative(const T fVal1)</div><div class="ttdef"><b>Definition</b> <a href="AP__Math_8h_source.html#l00074">AP_Math.h:74</a></div></div>
<div class="ttc" id="aAP__Param_8h_html_a0f9acb038a5283b964b862aea8cc5051"><div class="ttname"><a href="AP__Param_8h.html#a0f9acb038a5283b964b862aea8cc5051">AP_GROUPEND</a></div><div class="ttdeci">#define AP_GROUPEND</div><div class="ttdef"><b>Definition</b> <a href="AP__Param_8h_source.html#l00163">AP_Param.h:163</a></div></div>
<div class="ttc" id="aAP__Param_8h_html_a78a408c84f2a1bafde256ac650142e4d"><div class="ttname"><a href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a></div><div class="ttdeci">#define AP_GROUPINFO(name, idx, clazz, element, def)</div><div class="ttdef"><b>Definition</b> <a href="AP__Param_8h_source.html#l00145">AP_Param.h:145</a></div></div>
<div class="ttc" id="aAP__Param_8h_html_ac24e2eb16c2194e975d27e47ddcb7f1c"><div class="ttname"><a href="AP__Param_8h.html#ac24e2eb16c2194e975d27e47ddcb7f1c">AP_GROUPINFO_FLAGS</a></div><div class="ttdeci">#define AP_GROUPINFO_FLAGS(name, idx, clazz, element, def, flags)</div><div class="ttdef"><b>Definition</b> <a href="AP__Param_8h_source.html#l00133">AP_Param.h:133</a></div></div>
<div class="ttc" id="aAP__Param_8h_html_ae25c1c7495435989f8be5781c86be078"><div class="ttname"><a href="AP__Param_8h.html#ae25c1c7495435989f8be5781c86be078">AP_PARAM_FLAG_ENABLE</a></div><div class="ttdeci">#define AP_PARAM_FLAG_ENABLE</div><div class="ttdef"><b>Definition</b> <a href="AP__Param_8h_source.html#l00087">AP_Param.h:87</a></div></div>
<div class="ttc" id="aAP__Vehicle__Type_8h_html"><div class="ttname"><a href="AP__Vehicle__Type_8h.html">AP_Vehicle_Type.h</a></div></div>
<div class="ttc" id="aGCS_8h_html"><div class="ttname"><a href="GCS_8h.html">GCS.h</a></div><div class="ttdoc">Interface definition for the various Ground Control System.</div></div>
<div class="ttc" id="aGCS_8h_html_a266bfe8eda675e1092f045e93932b4a6"><div class="ttname"><a href="GCS_8h.html#a266bfe8eda675e1092f045e93932b4a6">GCS_SEND_TEXT</a></div><div class="ttdeci">#define GCS_SEND_TEXT(severity, format, args...)</div><div class="ttdef"><b>Definition</b> <a href="GCS_8h_source.html#l01349">GCS.h:1349</a></div></div>
<div class="ttc" id="aclassAC__WeatherVane_html"><div class="ttname"><a href="classAC__WeatherVane.html">AC_WeatherVane</a></div><div class="ttdef"><b>Definition</b> <a href="AC__WeatherVane_8h_source.html#l00004">AC_WeatherVane.h:4</a></div></div>
<div class="ttc" id="aclassAC__WeatherVane_html_a0733c64c8710b4426577a542498e8fb8"><div class="ttname"><a href="classAC__WeatherVane.html#a0733c64c8710b4426577a542498e8fb8">AC_WeatherVane::AC_WeatherVane</a></div><div class="ttdeci">AC_WeatherVane(void)</div><div class="ttdef"><b>Definition</b> <a href="#l00102">AC_WeatherVane.cpp:102</a></div></div>
<div class="ttc" id="aclassAC__WeatherVane_html_a15734d9f84b6e6f0703ef9974bdda079"><div class="ttname"><a href="classAC__WeatherVane.html#a15734d9f84b6e6f0703ef9974bdda079">AC_WeatherVane::_takeoff_direction</a></div><div class="ttdeci">AP_Int8 _takeoff_direction</div><div class="ttdef"><b>Definition</b> <a href="AC__WeatherVane_8h_source.html#l00047">AC_WeatherVane.h:47</a></div></div>
<div class="ttc" id="aclassAC__WeatherVane_html_a19292b2bdc3c5daefc230ba53139b656"><div class="ttname"><a href="classAC__WeatherVane.html#a19292b2bdc3c5daefc230ba53139b656">AC_WeatherVane::Direction</a></div><div class="ttdeci">Direction</div><div class="ttdef"><b>Definition</b> <a href="AC__WeatherVane_8h_source.html#l00026">AC_WeatherVane.h:26</a></div></div>
<div class="ttc" id="aclassAC__WeatherVane_html_a19292b2bdc3c5daefc230ba53139b656a58721ebffc26482c130e11b969b511ab"><div class="ttname"><a href="classAC__WeatherVane.html#a19292b2bdc3c5daefc230ba53139b656a58721ebffc26482c130e11b969b511ab">AC_WeatherVane::Direction::NOSE_IN</a></div><div class="ttdeci">@ NOSE_IN</div></div>
<div class="ttc" id="aclassAC__WeatherVane_html_a19292b2bdc3c5daefc230ba53139b656a66cd6d3e3faaa36dacf20fd096bdbcfe"><div class="ttname"><a href="classAC__WeatherVane.html#a19292b2bdc3c5daefc230ba53139b656a66cd6d3e3faaa36dacf20fd096bdbcfe">AC_WeatherVane::Direction::TAKEOFF_OR_LAND_ONLY</a></div><div class="ttdeci">@ TAKEOFF_OR_LAND_ONLY</div></div>
<div class="ttc" id="aclassAC__WeatherVane_html_a19292b2bdc3c5daefc230ba53139b656a6a842f253a6e4f3079e217a0fdbd4120"><div class="ttname"><a href="classAC__WeatherVane.html#a19292b2bdc3c5daefc230ba53139b656a6a842f253a6e4f3079e217a0fdbd4120">AC_WeatherVane::Direction::SIDE_IN</a></div><div class="ttdeci">@ SIDE_IN</div></div>
<div class="ttc" id="aclassAC__WeatherVane_html_a19292b2bdc3c5daefc230ba53139b656a88559a0cfd8250c9d65970cc145c92d4"><div class="ttname"><a href="classAC__WeatherVane.html#a19292b2bdc3c5daefc230ba53139b656a88559a0cfd8250c9d65970cc145c92d4">AC_WeatherVane::Direction::OFF</a></div><div class="ttdeci">@ OFF</div></div>
<div class="ttc" id="aclassAC__WeatherVane_html_a19292b2bdc3c5daefc230ba53139b656aac536479abaaea7d9c2ed20a2d06bb28"><div class="ttname"><a href="classAC__WeatherVane.html#a19292b2bdc3c5daefc230ba53139b656aac536479abaaea7d9c2ed20a2d06bb28">AC_WeatherVane::Direction::TAIL_IN</a></div><div class="ttdeci">@ TAIL_IN</div></div>
<div class="ttc" id="aclassAC__WeatherVane_html_a19292b2bdc3c5daefc230ba53139b656ad846b073854010d71dd7e4d1240a9af2"><div class="ttname"><a href="classAC__WeatherVane.html#a19292b2bdc3c5daefc230ba53139b656ad846b073854010d71dd7e4d1240a9af2">AC_WeatherVane::Direction::NOSE_OR_TAIL_IN</a></div><div class="ttdeci">@ NOSE_OR_TAIL_IN</div></div>
<div class="ttc" id="aclassAC__WeatherVane_html_a3c398f67f77d52c91008c36dca75221e"><div class="ttname"><a href="classAC__WeatherVane.html#a3c398f67f77d52c91008c36dca75221e">AC_WeatherVane::_min_dz_ang_deg</a></div><div class="ttdeci">AP_Float _min_dz_ang_deg</div><div class="ttdef"><b>Definition</b> <a href="AC__WeatherVane_8h_source.html#l00042">AC_WeatherVane.h:42</a></div></div>
<div class="ttc" id="aclassAC__WeatherVane_html_a43fc3713b8ef7306f48b0267bdaf5e41"><div class="ttname"><a href="classAC__WeatherVane.html#a43fc3713b8ef7306f48b0267bdaf5e41">AC_WeatherVane::get_yaw_out</a></div><div class="ttdeci">bool get_yaw_out(float &amp;yaw_output, const int16_t pilot_yaw, const float hgt, const float roll_cdeg, const float pitch_cdeg, const bool is_takeoff, const bool is_landing)</div><div class="ttdef"><b>Definition</b> <a href="#l00107">AC_WeatherVane.cpp:107</a></div></div>
<div class="ttc" id="aclassAC__WeatherVane_html_a45922fa2a2b4736f66c180655b4f70c5"><div class="ttname"><a href="classAC__WeatherVane.html#a45922fa2a2b4736f66c180655b4f70c5">AC_WeatherVane::_direction</a></div><div class="ttdeci">AP_Int8 _direction</div><div class="ttdef"><b>Definition</b> <a href="AC__WeatherVane_8h_source.html#l00040">AC_WeatherVane.h:40</a></div></div>
<div class="ttc" id="aclassAC__WeatherVane_html_a4a94a169a7a257b12c5520e37fc7a76d"><div class="ttname"><a href="classAC__WeatherVane.html#a4a94a169a7a257b12c5520e37fc7a76d">AC_WeatherVane::_gain</a></div><div class="ttdeci">AP_Float _gain</div><div class="ttdef"><b>Definition</b> <a href="AC__WeatherVane_8h_source.html#l00041">AC_WeatherVane.h:41</a></div></div>
<div class="ttc" id="aclassAC__WeatherVane_html_a5356b50044a27fcf3c1638776760561f"><div class="ttname"><a href="classAC__WeatherVane.html#a5356b50044a27fcf3c1638776760561f">AC_WeatherVane::first_activate_ms</a></div><div class="ttdeci">uint32_t first_activate_ms</div><div class="ttdef"><b>Definition</b> <a href="AC__WeatherVane_8h_source.html#l00052">AC_WeatherVane.h:52</a></div></div>
<div class="ttc" id="aclassAC__WeatherVane_html_a6c002758c847b485d7f58b94e9074733"><div class="ttname"><a href="classAC__WeatherVane.html#a6c002758c847b485d7f58b94e9074733">AC_WeatherVane::_max_vel_xy</a></div><div class="ttdeci">AP_Float _max_vel_xy</div><div class="ttdef"><b>Definition</b> <a href="AC__WeatherVane_8h_source.html#l00044">AC_WeatherVane.h:44</a></div></div>
<div class="ttc" id="aclassAC__WeatherVane_html_a82984880306eb954b484cc64378b8679"><div class="ttname"><a href="classAC__WeatherVane.html#a82984880306eb954b484cc64378b8679">AC_WeatherVane::reset</a></div><div class="ttdeci">void reset(void)</div><div class="ttdef"><b>Definition</b> <a href="#l00234">AC_WeatherVane.cpp:234</a></div></div>
<div class="ttc" id="aclassAC__WeatherVane_html_a898aca9089b4923700842b26d03e6d1c"><div class="ttname"><a href="classAC__WeatherVane.html#a898aca9089b4923700842b26d03e6d1c">AC_WeatherVane::_max_vel_z</a></div><div class="ttdeci">AP_Float _max_vel_z</div><div class="ttdef"><b>Definition</b> <a href="AC__WeatherVane_8h_source.html#l00045">AC_WeatherVane.h:45</a></div></div>
<div class="ttc" id="aclassAC__WeatherVane_html_a8c1a95329cea3cc65ff38fb999b6d991"><div class="ttname"><a href="classAC__WeatherVane.html#a8c1a95329cea3cc65ff38fb999b6d991">AC_WeatherVane::last_output</a></div><div class="ttdeci">float last_output</div><div class="ttdef"><b>Definition</b> <a href="AC__WeatherVane_8h_source.html#l00050">AC_WeatherVane.h:50</a></div></div>
<div class="ttc" id="aclassAC__WeatherVane_html_a99a153ec62a7c6c256e3319a2797fa94"><div class="ttname"><a href="classAC__WeatherVane.html#a99a153ec62a7c6c256e3319a2797fa94">AC_WeatherVane::_min_height</a></div><div class="ttdeci">AP_Float _min_height</div><div class="ttdef"><b>Definition</b> <a href="AC__WeatherVane_8h_source.html#l00043">AC_WeatherVane.h:43</a></div></div>
<div class="ttc" id="aclassAC__WeatherVane_html_aa0308358bb258b7146494dda3dd4ec42"><div class="ttname"><a href="classAC__WeatherVane.html#aa0308358bb258b7146494dda3dd4ec42">AC_WeatherVane::active_msg_sent</a></div><div class="ttdeci">bool active_msg_sent</div><div class="ttdef"><b>Definition</b> <a href="AC__WeatherVane_8h_source.html#l00051">AC_WeatherVane.h:51</a></div></div>
<div class="ttc" id="aclassAC__WeatherVane_html_ab045e6f81ff63aa899c2ba997b0508d9"><div class="ttname"><a href="classAC__WeatherVane.html#ab045e6f81ff63aa899c2ba997b0508d9">AC_WeatherVane::_landing_direction</a></div><div class="ttdeci">AP_Int8 _landing_direction</div><div class="ttdef"><b>Definition</b> <a href="AC__WeatherVane_8h_source.html#l00046">AC_WeatherVane.h:46</a></div></div>
<div class="ttc" id="aclassAC__WeatherVane_html_ac1cbb12c1abf974b3cb35e3c2f5ee374"><div class="ttname"><a href="classAC__WeatherVane.html#ac1cbb12c1abf974b3cb35e3c2f5ee374">AC_WeatherVane::var_info</a></div><div class="ttdeci">static const struct AP_Param::GroupInfo var_info[]</div><div class="ttdef"><b>Definition</b> <a href="AC__WeatherVane_8h_source.html#l00022">AC_WeatherVane.h:22</a></div></div>
<div class="ttc" id="aclassAC__WeatherVane_html_acc320053fa921ce153d55f3f7e717f2a"><div class="ttname"><a href="classAC__WeatherVane.html#acc320053fa921ce153d55f3f7e717f2a">AC_WeatherVane::last_check_ms</a></div><div class="ttdeci">uint32_t last_check_ms</div><div class="ttdef"><b>Definition</b> <a href="AC__WeatherVane_8h_source.html#l00053">AC_WeatherVane.h:53</a></div></div>
<div class="ttc" id="aclassAC__WeatherVane_html_acea3f9ce423f81d174449d399a575032"><div class="ttname"><a href="classAC__WeatherVane.html#acea3f9ce423f81d174449d399a575032">AC_WeatherVane::allowed</a></div><div class="ttdeci">bool allowed</div><div class="ttdef"><b>Definition</b> <a href="AC__WeatherVane_8h_source.html#l00056">AC_WeatherVane.h:56</a></div></div>
<div class="ttc" id="aclassAC__WeatherVane_html_ae7c4b58240aa1870dc2efb2f13dd6a93affcd0d573d9677b54ca8e49141a23abd"><div class="ttname"><a href="classAC__WeatherVane.html#ae7c4b58240aa1870dc2efb2f13dd6a93affcd0d573d9677b54ca8e49141a23abd">AC_WeatherVane::Options::PITCH_ENABLE</a></div><div class="ttdeci">@ PITCH_ENABLE</div></div>
<div class="ttc" id="aclassAC__WeatherVane_html_ae88418ac5c73cdebf68db87c820dfef9"><div class="ttname"><a href="classAC__WeatherVane.html#ae88418ac5c73cdebf68db87c820dfef9">AC_WeatherVane::_options</a></div><div class="ttdeci">AP_Int16 _options</div><div class="ttdef"><b>Definition</b> <a href="AC__WeatherVane_8h_source.html#l00048">AC_WeatherVane.h:48</a></div></div>
<div class="ttc" id="aclassAP__Param_html_a5f6dcfce1c0a79cf5bd81283e22f3201"><div class="ttname"><a href="classAP__Param.html#a5f6dcfce1c0a79cf5bd81283e22f3201">AP_Param::setup_object_defaults</a></div><div class="ttdeci">static void setup_object_defaults(const void *object_pointer, const struct GroupInfo *group_info)</div><div class="ttdef"><b>Definition</b> <a href="main_8cpp_source.html#l00010">main.cpp:10</a></div></div>
<div class="ttc" id="aclassVector3_html"><div class="ttname"><a href="classVector3.html">Vector3&lt; float &gt;</a></div></div>
<div class="ttc" id="aclassVector3_html_ab3e7f5401dd6e951978bfa746809f74f"><div class="ttname"><a href="classVector3.html#ab3e7f5401dd6e951978bfa746809f74f">Vector3::z</a></div><div class="ttdeci">T z</div><div class="ttdef"><b>Definition</b> <a href="vector3_8h_source.html#l00076">vector3.h:76</a></div></div>
<div class="ttc" id="aclassVector3_html_abcf8b89285b9966932d1aceeeadb21d3"><div class="ttname"><a href="classVector3.html#abcf8b89285b9966932d1aceeeadb21d3">Vector3::xy</a></div><div class="ttdeci">const Vector2&lt; T &gt; &amp; xy() const</div><div class="ttdef"><b>Definition</b> <a href="vector3_8h_source.html#l00203">vector3.h:203</a></div></div>
<div class="ttc" id="aluac_8c_html_a5a832fe6e2412dfabb93a2adae30e745"><div class="ttname"><a href="luac_8c.html#a5a832fe6e2412dfabb93a2adae30e745">output</a></div><div class="ttdeci">static const char * output</div><div class="ttdef"><b>Definition</b> <a href="luac_8c_source.html#l00035">luac.c:35</a></div></div>
<div class="ttc" id="amonocypher_8cpp_html_afa99ec4acc4ecb2dc3c2d05da15d0e3f"><div class="ttname"><a href="monocypher_8cpp.html#afa99ec4acc4ecb2dc3c2d05da15d0e3f">MAX</a></div><div class="ttdeci">#define MAX(a, b)</div><div class="ttdef"><b>Definition</b> <a href="monocypher_8cpp_source.html#l00072">monocypher.cpp:72</a></div></div>
<div class="ttc" id="anamespaceAP__HAL_html_a77dffbb18891996280308e21316ec186"><div class="ttname"><a href="namespaceAP__HAL.html#a77dffbb18891996280308e21316ec186">AP_HAL::millis</a></div><div class="ttdeci">uint32_t millis()</div><div class="ttdef"><b>Definition</b> <a href="AP__HAL__ChibiOS_2system_8cpp_source.html#l00377">system.cpp:377</a></div></div>
<div class="ttc" id="anamespaceAP_html_a99432cfdb696952c9b7146f155a815aa"><div class="ttname"><a href="namespaceAP.html#a99432cfdb696952c9b7146f155a815aa">AP::ahrs</a></div><div class="ttdeci">AP_AHRS &amp; ahrs()</div><div class="ttdef"><b>Definition</b> <a href="AP__AHRS_8cpp_source.html#l03558">AP_AHRS.cpp:3558</a></div></div>
<div class="ttc" id="astructAP__Param_1_1GroupInfo_html"><div class="ttname"><a href="structAP__Param_1_1GroupInfo.html">AP_Param::GroupInfo</a></div><div class="ttdef"><b>Definition</b> <a href="AP__Param_8h_source.html#l00199">AP_Param.h:199</a></div></div>
<div class="ttc" id="astructVector2_html_a563aab6b2f2b992ab7a4699891a99ae5"><div class="ttname"><a href="structVector2.html#a563aab6b2f2b992ab7a4699891a99ae5">Vector2::length_squared</a></div><div class="ttdeci">T length_squared() const</div><div class="ttdef"><b>Definition</b> <a href="vector2_8cpp_source.html#l00024">vector2.cpp:24</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Mar 22 2024 16:14:13 for APM:Libraries by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
