<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>APM:Libraries: libraries/AP_Motors/AP_MotorsHeli_RSC.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">APM:Libraries
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_bc0718b08fb2015b8e59c47b2805f60c.html">libraries</a></li><li class="navelem"><a class="el" href="dir_e2208a4dfd218f697a2a26cf1e819f73.html">AP_Motors</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle"><div class="title">AP_MotorsHeli_RSC.cpp</div></div>
</div><!--header-->
<div class="contents">
<a href="AP__MotorsHeli__RSC_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">/*</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment">   This program is free software: you can redistribute it and/or modify</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment">   it under the terms of the GNU General Public License as published by</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="comment">   the Free Software Foundation, either version 3 of the License, or</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="comment">   (at your option) any later version.</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="comment"></span> </div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="comment">   This program is distributed in the hope that it will be useful,</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="comment">   but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="comment">   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="comment">   GNU General Public License for more details.</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="comment"></span> </div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="comment">   You should have received a copy of the GNU General Public License</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="comment">   along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="comment"> */</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span> </div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="preprocessor">#include &lt;<a class="code" href="AP__HAL_8h.html">AP_HAL/AP_HAL.h</a>&gt;</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="preprocessor">#include &lt;<a class="code" href="GCS_8h.html">GCS_MAVLink/GCS.h</a>&gt;</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="preprocessor">#include &quot;<a class="code" href="AP__MotorsHeli__RSC_8h.html">AP_MotorsHeli_RSC.h</a>&quot;</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="preprocessor">#include &lt;<a class="code" href="AP__RPM_8h.html">AP_RPM/AP_RPM.h</a>&gt;</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span> </div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span><span class="keyword">extern</span> <span class="keyword">const</span> <a class="code hl_class" href="classAP__HAL_1_1HAL.html">AP_HAL::HAL</a>&amp; <a class="code hl_variable" href="AP__MotorsHeli__RSC_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>;</div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span> </div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span><span class="keyword">const</span> <a class="code hl_struct" href="structAP__Param_1_1GroupInfo.html">AP_Param::GroupInfo</a> <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a0fefe2b33e65929df2e926aa1902eaf6">AP_MotorsHeli_RSC::var_info</a>[] = {</div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span> </div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span>    <span class="comment">// @Param: SETPOINT</span></div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span>    <span class="comment">// @DisplayName: External Motor Governor Setpoint</span></div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span>    <span class="comment">// @Description: Throttle (HeliRSC Servo) output in percent to the external motor governor when motor interlock enabled (throttle hold off).</span></div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span>    <span class="comment">// @Range: 0 100</span></div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span>    <span class="comment">// @Units: %</span></div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span>    <span class="comment">// @Increment: 1</span></div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;SETPOINT&quot;</span>, 1, <a class="code hl_class" href="classAP__MotorsHeli__RSC.html">AP_MotorsHeli_RSC</a>, _rsc_setpoint, <a class="code hl_define" href="AP__MotorsHeli__RSC_8h.html#ac7b43b0a749e341bfec2c4c8d3f28cfc">AP_MOTORS_HELI_RSC_SETPOINT</a>),</div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span> </div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span>    <span class="comment">// @Param: MODE</span></div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span>    <span class="comment">// @DisplayName: Rotor Speed Control Mode</span></div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span>    <span class="comment">// @Description: Selects the type of rotor speed control used to determine throttle output to the HeliRSC servo channel when motor interlock is enabled (throttle hold off). RC Passthrough sends the input from the RC Motor Interlock channel as throttle output.  External Gov SetPoint sends the RSC SetPoint parameter value as throttle output.  Throttle Curve uses the 5 point throttle curve to determine throttle output based on the collective output.  AutoThrottle requires a rotor speed sensor, contains an advanced autothrottle governor and is primarily for piston and turbine engines. WARNING: Throttle ramp time and throttle curve MUST be tuned properly using Throttle Curve mode before using AutoThrottle</span></div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span>    <span class="comment">// @Values: 1:RC Passthrough, 2:External Gov SetPoint, 3:Throttle Curve, 4:AutoThrottle</span></div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;MODE&quot;</span>, 2, <a class="code hl_class" href="classAP__MotorsHeli__RSC.html">AP_MotorsHeli_RSC</a>, _rsc_mode, (int8_t)<a class="code hl_enumvalue" href="AP__MotorsHeli__RSC_8h.html#a36de13430db64e7068d0522f9dc24b96aa5b5fd2bad4ef9c0c5020ba10e9d2386">ROTOR_CONTROL_MODE_PASSTHROUGH</a>),</div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span> </div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span>    <span class="comment">// @Param: RAMP_TIME</span></div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span>    <span class="comment">// @DisplayName: Throttle Ramp Time</span></div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span>    <span class="comment">// @Description: Time in seconds for throttle output (HeliRSC servo) to ramp from ground idle (RSC_IDLE) to flight idle throttle setting when motor interlock is enabled (throttle hold off).</span></div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span>    <span class="comment">// @Range: 0 60</span></div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span>    <span class="comment">// @Units: s</span></div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;RAMP_TIME&quot;</span>, 3, <a class="code hl_class" href="classAP__MotorsHeli__RSC.html">AP_MotorsHeli_RSC</a>, _ramp_time, <a class="code hl_define" href="AP__MotorsHeli__RSC_8h.html#afb216abe43d373c16d708291695b4247">AP_MOTORS_HELI_RSC_RAMP_TIME</a>),</div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span> </div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span>    <span class="comment">// @Param: RUNUP_TIME</span></div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span>    <span class="comment">// @DisplayName: Rotor Runup Time</span></div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span>    <span class="comment">// @Description: Actual time in seconds for the main rotor to reach full speed after motor interlock is enabled (throttle hold off). Must be at least one second longer than the Throttle Ramp Time that is set with RSC_RAMP_TIME. WARNING: For AutoThrottle users with piston and turbine engines it is VERY important to know how long it takes to warm up your engine and reach full rotor speed when throttle switch is turned ON. This timer should be set for at least the amount of time it takes to get your helicopter to full flight power, ready for takeoff. Failure to heed this warning could result in the auto-takeoff mode attempting to lift up into hover before the engine has reached full power, and subsequent loss of control</span></div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span>    <span class="comment">// @Range: 0 60</span></div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span>    <span class="comment">// @Units: s</span></div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;RUNUP_TIME&quot;</span>, 4, <a class="code hl_class" href="classAP__MotorsHeli__RSC.html">AP_MotorsHeli_RSC</a>, _runup_time, <a class="code hl_define" href="AP__MotorsHeli__RSC_8h.html#aab2e1c053c6fe072fd0000c1c8ec9377">AP_MOTORS_HELI_RSC_RUNUP_TIME</a>),</div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span> </div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span>    <span class="comment">// @Param: CRITICAL</span></div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span>    <span class="comment">// @DisplayName: Critical Rotor Speed</span></div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>    <span class="comment">// @Description: Percentage of normal rotor speed where flight is no longer possible. However currently the rotor runup/rundown is estimated using the RSC_RUNUP_TIME parameter.   Estimated rotor speed increases/decreases between 0 (rotor stopped) to 1 (rotor at normal speed) in the RSC_RUNUP_TIME in seconds. This parameter should be set so that the estimated rotor speed goes below critical in approximately 3 seconds.  So if you had a 10 second runup time then set RSC_CRITICAL to 70%.</span></div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>    <span class="comment">// @Range: 0 100</span></div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span>    <span class="comment">// @Units: %</span></div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span>    <span class="comment">// @Increment: 1</span></div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;CRITICAL&quot;</span>, 5, <a class="code hl_class" href="classAP__MotorsHeli__RSC.html">AP_MotorsHeli_RSC</a>, _critical_speed, <a class="code hl_define" href="AP__MotorsHeli__RSC_8h.html#a05558a12b5ce8238173c81e9d1181ad3">AP_MOTORS_HELI_RSC_CRITICAL</a>),</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span> </div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>    <span class="comment">// @Param: IDLE</span></div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span>    <span class="comment">// @DisplayName: Throttle Output at Idle</span></div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>    <span class="comment">// @Description: Throttle output (HeliRSC Servo) in percent while armed but motor interlock is disabled (throttle hold on). FOR COMBUSTION ENGINES. Sets the engine ground idle throttle percentage with clutch disengaged. This must be set to zero for electric helicopters under most situations. If the ESC has an autorotation window this can be set to keep the autorotation window open in the ESC. Consult the operating manual for your ESC to set it properly for this purpose</span></div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span>    <span class="comment">// @Range: 0 50</span></div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>    <span class="comment">// @Units: %</span></div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>    <span class="comment">// @Increment: 1</span></div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;IDLE&quot;</span>, 6, <a class="code hl_class" href="classAP__MotorsHeli__RSC.html">AP_MotorsHeli_RSC</a>, _idle_output, <a class="code hl_define" href="AP__MotorsHeli__RSC_8h.html#ab0ed7f8f760963c0454d0380e80a1216">AP_MOTORS_HELI_RSC_IDLE_DEFAULT</a>),</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span> </div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>    <span class="comment">// @Param: SLEWRATE</span></div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>    <span class="comment">// @DisplayName: Throttle Slew Rate</span></div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>    <span class="comment">// @Description: This controls the maximum rate at which the throttle output (HeliRSC servo) can change, as a percentage per second. A value of 100 means the throttle can change over its full range in one second. A value of zero gives unlimited slew rate.</span></div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>    <span class="comment">// @Range: 0 500</span></div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>    <span class="comment">// @Increment: 10</span></div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;SLEWRATE&quot;</span>, 7, <a class="code hl_class" href="classAP__MotorsHeli__RSC.html">AP_MotorsHeli_RSC</a>, _power_slewrate, 0),</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span> </div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>    <span class="comment">// @Param: THRCRV_0</span></div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>    <span class="comment">// @DisplayName: Throttle Curve at 0% Coll</span></div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>    <span class="comment">// @Description: Sets the throttle output (HeliRSC servo) in percent for the throttle curve at the minimum collective pitch position. The 0 percent collective is defined by H_COL_MIN. Example: if the setup has -2 degree to +10 degree collective pitch setup, this setting would correspond to -2 degree of pitch.</span></div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>    <span class="comment">// @Range: 0 100</span></div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>    <span class="comment">// @Units: %</span></div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>    <span class="comment">// @Increment: 1</span></div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;THRCRV_0&quot;</span>, 8, <a class="code hl_class" href="classAP__MotorsHeli__RSC.html">AP_MotorsHeli_RSC</a>, _thrcrv[0], <a class="code hl_define" href="AP__MotorsHeli__RSC_8h.html#a572f1a478ae3f785f932bf412fddf83a">AP_MOTORS_HELI_RSC_THRCRV_0_DEFAULT</a>),</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span> </div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>    <span class="comment">// @Param: THRCRV_25</span></div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>    <span class="comment">// @DisplayName: Throttle Curve at 25% Coll</span></div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>    <span class="comment">// @Description: Sets the throttle output (HeliRSC servo) in percent for the throttle curve at 25% of full collective travel where he 0 percent collective is defined by H_COL_MIN and 100 percent collective is defined by H_COL_MAX.  Example: if the setup has -2 degree to +10 degree collective pitch setup, the total range is 12 degrees. 25% of 12 degrees is 3 degrees, so this setting would correspond to +1 degree of pitch.</span></div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>    <span class="comment">// @Range: 0 100</span></div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>    <span class="comment">// @Units: %</span></div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>    <span class="comment">// @Increment: 1</span></div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;THRCRV_25&quot;</span>, 9, <a class="code hl_class" href="classAP__MotorsHeli__RSC.html">AP_MotorsHeli_RSC</a>, _thrcrv[1], <a class="code hl_define" href="AP__MotorsHeli__RSC_8h.html#a721ed001a96e0fcdd8fe494f21bf3961">AP_MOTORS_HELI_RSC_THRCRV_25_DEFAULT</a>),</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span> </div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>    <span class="comment">// @Param: THRCRV_50</span></div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>    <span class="comment">// @DisplayName: Throttle Curve at 50% Coll</span></div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>    <span class="comment">// @Description: Sets the throttle output (HeliRSC servo) in percent for the throttle curve at 50% of full collective travel where he 0 percent collective is defined by H_COL_MIN and 100 percent collective is defined by H_COL_MAX.  Example: if the setup has -2 degree to +10 degree collective pitch setup, the total range is 12 degrees. 50% of 12 degrees is 6 degrees, so this setting would correspond to +4 degree of pitch.</span></div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span>    <span class="comment">// @Range: 0 100</span></div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>    <span class="comment">// @Units: %</span></div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>    <span class="comment">// @Increment: 1</span></div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;THRCRV_50&quot;</span>, 10, <a class="code hl_class" href="classAP__MotorsHeli__RSC.html">AP_MotorsHeli_RSC</a>, _thrcrv[2], <a class="code hl_define" href="AP__MotorsHeli__RSC_8h.html#a43090dc67863b008bfca29ebcea483eb">AP_MOTORS_HELI_RSC_THRCRV_50_DEFAULT</a>),</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span> </div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>    <span class="comment">// @Param: THRCRV_75</span></div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>    <span class="comment">// @DisplayName: Throttle Curve at 75% Coll</span></div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>    <span class="comment">// @Description: Sets the throttle output (HeliRSC servo) in percent for the throttle curve at 75% of full collective travel where he 0 percent collective is defined by H_COL_MIN and 100 percent collective is defined by H_COL_MAX.  Example: if the setup has -2 degree to +10 degree collective pitch setup, the total range is 12 degrees. 75% of 12 degrees is 9 degrees, so this setting would correspond to +7 degree of pitch.</span></div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>    <span class="comment">// @Range: 0 100</span></div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>    <span class="comment">// @Units: %</span></div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>    <span class="comment">// @Increment: 1</span></div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;THRCRV_75&quot;</span>, 11, <a class="code hl_class" href="classAP__MotorsHeli__RSC.html">AP_MotorsHeli_RSC</a>, _thrcrv[3], <a class="code hl_define" href="AP__MotorsHeli__RSC_8h.html#af43ed21e778cfd1c1d117a96aac4749f">AP_MOTORS_HELI_RSC_THRCRV_75_DEFAULT</a>),</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span> </div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>    <span class="comment">// @Param: THRCRV_100</span></div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>    <span class="comment">// @DisplayName: Throttle Curve at 100% Coll</span></div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>    <span class="comment">// @Description: Sets the throttle output (HeliRSC servo) in percent for the throttle curve at the minimum collective pitch position. The 100 percent collective is defined by H_COL_MAX.  Example: if the setup has -2 degree to +10 degree collective pitch setup, this setting would correspond to +10 degree of pitch.</span></div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>    <span class="comment">// @Range: 0 100</span></div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>    <span class="comment">// @Units: %</span></div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>    <span class="comment">// @Increment: 1</span></div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;THRCRV_100&quot;</span>, 12, <a class="code hl_class" href="classAP__MotorsHeli__RSC.html">AP_MotorsHeli_RSC</a>, _thrcrv[4], <a class="code hl_define" href="AP__MotorsHeli__RSC_8h.html#af1dcf4d30e56da103805c431bf42c466">AP_MOTORS_HELI_RSC_THRCRV_100_DEFAULT</a>),</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span> </div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>    <span class="comment">// Indices 13 thru 16 have been re-assigned and should not be used in the future</span></div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span> </div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>    <span class="comment">// @Param: GOV_RANGE</span></div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>    <span class="comment">// @DisplayName: Governor Operational Range</span></div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>    <span class="comment">// @Description: RPM range +/- governor rpm reference setting where governor is operational. If speed sensor fails or rpm falls outside of this range, the governor will disengage and return to throttle curve. Recommended range is 100</span></div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>    <span class="comment">// @Range: 50 200</span></div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>    <span class="comment">// @Units: RPM</span></div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>    <span class="comment">// @Increment: 10</span></div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;GOV_RANGE&quot;</span>, 17, <a class="code hl_class" href="classAP__MotorsHeli__RSC.html">AP_MotorsHeli_RSC</a>, _governor_range, <a class="code hl_define" href="AP__MotorsHeli__RSC_8h.html#a8d261bf00472436e2b0793ae95f28b58">AP_MOTORS_HELI_RSC_GOVERNOR_RANGE_DEFAULT</a>),</div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span> </div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>    <span class="comment">// Index 18 was renamed from AROT_PCT to AROT_IDLE</span></div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span> </div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>    <span class="comment">// @Param: CLDWN_TIME</span></div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>    <span class="comment">// @DisplayName: Cooldown Time</span></div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>    <span class="comment">// @Description: Will provide a fast idle for engine cooldown by raising the Ground Idle speed setting by 50% for the number of seconds the timer is set for. A setting of zero disables the fast idle. This feature will only apply after the runup complete has been declared. This will not extend the time before ground idle is declared, which triggers engine shutdown for autonomous landings.</span></div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>    <span class="comment">// @Range: 0 120</span></div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>    <span class="comment">// @Units: s</span></div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>    <span class="comment">// @Increment: 1</span></div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;CLDWN_TIME&quot;</span>, 19, <a class="code hl_class" href="classAP__MotorsHeli__RSC.html">AP_MotorsHeli_RSC</a>, _cooldown_time, 0),</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span> </div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>    <span class="comment">// @Param: GOV_COMP</span></div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>    <span class="comment">// @DisplayName: Governor Torque Compensator</span></div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>    <span class="comment">// @Description: Adjusts the autothrottle governor torque compensator that determines how fast the governor will adjust the base torque reference to compensate for changes in density altitude. If RPM is low or high by more than 2-5 RPM, increase this setting by 1% at a time until the governor speed matches your RPM setting. Setting the compensator too high can result in surging and throttle &quot;hunting&quot;. Do not make large adjustments at one time</span></div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>    <span class="comment">// @Range: 0 70</span></div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>    <span class="comment">// @Units: %</span></div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>    <span class="comment">// @Increment: 0.1</span></div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;GOV_COMP&quot;</span>, 20, <a class="code hl_class" href="classAP__MotorsHeli__RSC.html">AP_MotorsHeli_RSC</a>, _governor_compensator, 25),</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span> </div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>    <span class="comment">// @Param: GOV_DROOP</span></div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>    <span class="comment">// @DisplayName: Governor Droop Compensator</span></div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>    <span class="comment">// @Description: AutoThrottle governor droop response under load, normal settings of 0-50%. Higher value is quicker response to large speed changes due to load but may cause surging. Adjust this to be as aggressive as possible without getting surging or RPM over-run when the governor responds to large load changes on the rotor system</span></div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>    <span class="comment">// @Range: 0 100</span></div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>    <span class="comment">// @Units: %</span></div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>    <span class="comment">// @Increment: 0.1</span></div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;GOV_DROOP&quot;</span>, 21, <a class="code hl_class" href="classAP__MotorsHeli__RSC.html">AP_MotorsHeli_RSC</a>, _governor_droop_response, 25),</div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span> </div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>    <span class="comment">// @Param: GOV_FF</span></div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>    <span class="comment">// @DisplayName: Governor Feedforward</span></div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>    <span class="comment">// @Description: Feedforward governor gain to throttle response during sudden loading/unloading of the rotor system. If RPM drops excessively during full collective climb with the droop response set correctly, increase the governor feedforward.</span></div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>    <span class="comment">// @Range: 0 100</span></div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>    <span class="comment">// @Units: %</span></div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>    <span class="comment">// @Increment: 0.1</span></div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;GOV_FF&quot;</span>, 22, <a class="code hl_class" href="classAP__MotorsHeli__RSC.html">AP_MotorsHeli_RSC</a>, _governor_ff, 50),</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span> </div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>    <span class="comment">// @Param: GOV_RPM</span></div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>    <span class="comment">// @DisplayName: Rotor RPM Setting</span></div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>    <span class="comment">// @Description: Main rotor RPM that governor maintains when engaged</span></div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>    <span class="comment">// @Range: 800 3500</span></div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>    <span class="comment">// @Units: RPM</span></div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>    <span class="comment">// @Increment: 10</span></div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;GOV_RPM&quot;</span>, 23, <a class="code hl_class" href="classAP__MotorsHeli__RSC.html">AP_MotorsHeli_RSC</a>, _governor_rpm, 1500),</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span> </div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>    <span class="comment">// @Param: GOV_TORQUE</span></div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>    <span class="comment">// @DisplayName: Governor Torque Limiter</span></div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>    <span class="comment">// @Description: Adjusts the engine&#39;s percentage of torque rise on autothrottle during ramp-up to governor speed. The torque rise will determine how fast the rotor speed will ramp up when rotor speed reaches 50% of the rotor RPM setting. The sequence of events engaging the governor is as follows: Throttle ramp time will engage the clutch and start the main rotor turning. The collective should be at flat pitch and the throttle curve set to provide at least 50% of normal RPM at flat pitch. The autothrottle torque limiter will automatically activate and start accelerating the main rotor. If the autothrottle consistently fails to accelerate the main rotor during ramp-in due to engine tune or other factors, then increase the torque limiter setting. NOTE: throttle ramp time and throttle curve should be tuned using RSC_MODE Throttle Curve before using RSC_MODE AutoThrottle</span></div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>    <span class="comment">// @Range: 10 60</span></div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>    <span class="comment">// @Units: %</span></div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>    <span class="comment">// @Increment: 1</span></div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;GOV_TORQUE&quot;</span>, 24, <a class="code hl_class" href="classAP__MotorsHeli__RSC.html">AP_MotorsHeli_RSC</a>, _governor_torque, 30),</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span> </div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>    <span class="comment">// @Param: AROT_ENG_T</span></div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>    <span class="comment">// @DisplayName: Time for in-flight power re-engagement</span></div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>    <span class="comment">// @Description: amount of seconds to move throttle output from idle to throttle curve position during manual autorotations</span></div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span>    <span class="comment">// @Range: 0 10</span></div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>    <span class="comment">// @Units: %</span></div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>    <span class="comment">// @Increment: 0.5</span></div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;AROT_ENG_T&quot;</span>, 25, <a class="code hl_class" href="classAP__MotorsHeli__RSC.html">AP_MotorsHeli_RSC</a>, _rsc_arot_engage_time, <a class="code hl_define" href="AP__MotorsHeli__RSC_8h.html#a5c6ef78a7abcdc7e62c868a0e0520fd3">AP_MOTORS_HELI_RSC_AROT_ENGAGE_TIME</a>),</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span> </div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>    <span class="comment">// @Param: AROT_MN_EN</span></div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>    <span class="comment">// @DisplayName: Enable Manual Autorotations</span></div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>    <span class="comment">// @Description: Allows you to enable (1) or disable (0) the manual autorotation capability.</span></div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>    <span class="comment">// @Values: 0:Disabled,1:Enabled</span></div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;AROT_MN_EN&quot;</span>, 26, <a class="code hl_class" href="classAP__MotorsHeli__RSC.html">AP_MotorsHeli_RSC</a>, _rsc_arot_man_enable, 0),</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span> </div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>    <span class="comment">// @Param: AROT_IDLE</span></div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>    <span class="comment">// @DisplayName: Idle Throttle Percentage during Autorotation</span></div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>    <span class="comment">// @Description: Idle throttle used for all RSC modes.  For external governors, this would be set to signal it to enable fast spool-up, when bailing out of an autorotation.  Set 0 to disable. If also using a tail rotor of type DDVP with external governor then this value must lie within the autorotation window of both governors.</span></div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>    <span class="comment">// @Range: 0 40</span></div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>    <span class="comment">// @Units: %</span></div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>    <span class="comment">// @Increment: 1</span></div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;AROT_IDLE&quot;</span>, 27, <a class="code hl_class" href="classAP__MotorsHeli__RSC.html">AP_MotorsHeli_RSC</a>, _arot_idle_output, <a class="code hl_define" href="AP__MotorsHeli__RSC_8h.html#a3c3199d1010f0fbd222a9353e96e1da6">AP_MOTORS_HELI_RSC_AROT_IDLE</a>),</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span> </div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>    <a class="code hl_define" href="AP__Param_8h.html#a0f9acb038a5283b964b862aea8cc5051">AP_GROUPEND</a></div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>};</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span> </div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span><span class="comment">// init_servo - servo initialization on start-up</span></div>
<div class="foldopen" id="foldopen00225" data-start="{" data-end="}">
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno"><a class="line" href="classAP__MotorsHeli__RSC.html#aeb6143de2bc88e0540acd68349f61c73">  225</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classAP__MotorsHeli__RSC.html#aeb6143de2bc88e0540acd68349f61c73">AP_MotorsHeli_RSC::init_servo</a>()</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>{</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>    <span class="comment">// setup RSC on specified channel by default</span></div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>    <a class="code hl_function" href="classSRV__Channels.html#a97577ca02c12e3b851cd5d563d32b640">SRV_Channels::set_aux_channel_default</a>(<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a07de7f2e07bedcff45425018318ee372">_aux_fn</a>, <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a51c1e6ae10202b68f11b9da049406808">_default_channel</a>);</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span> </div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>}</div>
</div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span> </div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span><span class="comment">// set_power_output_range</span></div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span><span class="comment">// TODO: Look at possibly calling this at a slower rate.  Doesn&#39;t need to be called every cycle.</span></div>
<div class="foldopen" id="foldopen00234" data-start="{" data-end="}">
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno"><a class="line" href="classAP__MotorsHeli__RSC.html#a897f34035252d1ce89f564d38ab35dea">  234</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classAP__MotorsHeli__RSC.html#a897f34035252d1ce89f564d38ab35dea">AP_MotorsHeli_RSC::set_throttle_curve</a>()</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>{</div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>    <span class="keywordtype">float</span> thrcrv[5];</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>    <span class="comment">// Ensure user inputs are within parameter limits</span></div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>    <span class="comment">// Scale throttle curve parameters</span></div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>    <span class="keywordflow">for</span> (uint8_t i = 0; i &lt; 5; i++) {</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>        thrcrv[i] = <a class="code hl_define" href="AP__Math_8h.html#a5256308fd38a7098b8f95607aa56888f">constrain_float</a>(<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a2d1b08fe8799f087b6e2a9e988f62214">_thrcrv</a>[i] * 0.01f, 0.0f, 1.0f);</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>    }</div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span>    <span class="comment">// Calculate the spline polynomials for the throttle curve</span></div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>    <a class="code hl_function" href="spline5_8cpp.html#a612a0aade79b929f0031b3167ebedf9b">splinterp5</a>(thrcrv,<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a57f0b28d6a1b23c02c4fa8b26766f532">_thrcrv_poly</a>);</div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>}</div>
</div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span> </div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span><span class="comment">// output - update value to send to ESC/Servo</span></div>
<div class="foldopen" id="foldopen00247" data-start="{" data-end="}">
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno"><a class="line" href="classAP__MotorsHeli__RSC.html#ab23a1aebfd83a9e76acf076a2f15841b">  247</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classAP__MotorsHeli__RSC.html#ab23a1aebfd83a9e76acf076a2f15841b">AP_MotorsHeli_RSC::output</a>(<a class="code hl_enumeration" href="classAP__MotorsHeli__RSC.html#aedbcba02e003b6a77f71d6112723e28e">RotorControlState</a> <a class="code hl_variable" href="AP__Scripting_2generator_2src_2main_8c.html#a8d04d02fe8bb190484bba202fee18f5c">state</a>)</div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>{</div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>    <span class="comment">// _rotor_RPM available to the RSC output</span></div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span><span class="preprocessor">#if AP_RPM_ENABLED</span></div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>    <span class="keyword">const</span> <a class="code hl_class" href="classAP__RPM.html">AP_RPM</a> *rpm = <a class="code hl_function" href="classAP__RPM.html#aabe92c25c7c97521568e00edcd51903c">AP_RPM::get_singleton</a>();</div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>    <span class="keywordflow">if</span> (rpm != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>        <span class="keywordflow">if</span> (!rpm-&gt;<a class="code hl_function" href="classAP__RPM.html#aa6da697806e00e9173c36ed0c97cf175">get_rpm</a>(0, <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a44aaa05623e15100d45ec0d6ba5d89d9">_rotor_rpm</a>)) {</div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span>            <span class="comment">// No valid RPM data</span></div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>            <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a44aaa05623e15100d45ec0d6ba5d89d9">_rotor_rpm</a> = -1;</div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>        }</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>        <span class="comment">// No RPM because pointer is null</span></div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>        <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a44aaa05623e15100d45ec0d6ba5d89d9">_rotor_rpm</a> = -1;</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>    }</div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>    <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a44aaa05623e15100d45ec0d6ba5d89d9">_rotor_rpm</a> = -1;</div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span> </div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>    <span class="keywordtype">float</span> dt;</div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>    uint64_t now = <a class="code hl_function" href="namespaceAP__HAL.html#a7aa0ce7625c9680e30ff4a99940907a5">AP_HAL::micros64</a>();</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>    <span class="keywordtype">float</span> last_control_output = <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a06b4a8eb3f3c0c9ab5b4069a4c17e574">_control_output</a>;</div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span> </div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a3a15dfa9030fc0761bb2b71c9167ed33">_last_update_us</a> == 0) {</div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>        <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a3a15dfa9030fc0761bb2b71c9167ed33">_last_update_us</a> = now;</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>        dt = 0.001f;</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>        dt = 1.0e-6f * (now - <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a3a15dfa9030fc0761bb2b71c9167ed33">_last_update_us</a>);</div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>        <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a3a15dfa9030fc0761bb2b71c9167ed33">_last_update_us</a> = now;</div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span>    }</div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span> </div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>    <span class="keywordflow">switch</span> (<a class="code hl_variable" href="AP__Scripting_2generator_2src_2main_8c.html#a8d04d02fe8bb190484bba202fee18f5c">state</a>) {</div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAP__MotorsHeli__RSC.html#aedbcba02e003b6a77f71d6112723e28ea615a46af313786fc4e349f34118be111">RotorControlState::STOP</a>:</div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>        <span class="comment">// set rotor ramp to decrease speed to zero, this happens instantly inside update_rotor_ramp()</span></div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span>        <a class="code hl_function" href="classAP__MotorsHeli__RSC.html#a8c338a29acf0a61d814af3a298f89594">update_rotor_ramp</a>(0.0f, dt);</div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span> </div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>        <span class="comment">// control output forced to zero</span></div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span>        <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a06b4a8eb3f3c0c9ab5b4069a4c17e574">_control_output</a> = 0.0f;</div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span> </div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>        <span class="comment">// governor is forced to disengage status and reset outputs</span></div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span>        <a class="code hl_function" href="classAP__MotorsHeli__RSC.html#a41e7c2ac8d0ddd1f01fd1eb63a0133a7">governor_reset</a>();</div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>        <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#ae0eebf36c02ae72fa95777d7901d43a6">_autothrottle</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span>        <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a3588e09ff00219036550c233e4c9434a">_governor_fault</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>        <span class="comment">//turbine start flag on</span></div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>        <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a050369045bea413a5261d8a2b76511cb">_starting</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span>        <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#acef475a87f3a42fe394851c91890dcee">_autorotating</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>        <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a0b7d49b2257ee2ee40d15611c167cf80">_bailing_out</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>        <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#ac46ecbac3fbcdacd5ad214f1bd3b22ab">_gov_bailing_out</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span> </div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>        <span class="comment">// ensure _idle_throttle not set to invalid value</span></div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>        <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a60d9f4e59f81fb5154266775434b55ee">_idle_throttle</a> = <a class="code hl_function" href="classAP__MotorsHeli__RSC.html#a9380697f739256f1bc6b32ed61f98322">get_idle_output</a>();</div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span> </div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAP__MotorsHeli__RSC.html#aedbcba02e003b6a77f71d6112723e28eaa5daf7f2ebbba4975d61dab1c40188c7">RotorControlState::IDLE</a>:</div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>        <span class="comment">// set rotor ramp to decrease speed to zero</span></div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>        <a class="code hl_function" href="classAP__MotorsHeli__RSC.html#a8c338a29acf0a61d814af3a298f89594">update_rotor_ramp</a>(0.0f, dt);</div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span> </div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>        <span class="comment">// set rotor control speed to engine idle and ensure governor is reset, if used</span></div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>        <a class="code hl_function" href="classAP__MotorsHeli__RSC.html#a41e7c2ac8d0ddd1f01fd1eb63a0133a7">governor_reset</a>();</div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>        <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#ae0eebf36c02ae72fa95777d7901d43a6">_autothrottle</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>        <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a3588e09ff00219036550c233e4c9434a">_governor_fault</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#af31603dd79dc8384adebd49645334073">_in_autorotation</a>) {</div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span>            <span class="comment">// if in autorotation, set the output to idle for autorotation. This will tell an external governor to use fast ramp for spool up.</span></div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>            <span class="comment">// if autorotation idle is set to zero then default to the RSC idle value.</span></div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#ae0395f872657dd9b8b45955e890bbb35">_arot_idle_output</a> == 0) {</div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>                <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a60d9f4e59f81fb5154266775434b55ee">_idle_throttle</a> = <a class="code hl_function" href="classAP__MotorsHeli__RSC.html#a9380697f739256f1bc6b32ed61f98322">get_idle_output</a>();</div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>                <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a60d9f4e59f81fb5154266775434b55ee">_idle_throttle</a> = <a class="code hl_define" href="AP__Math_8h.html#a5256308fd38a7098b8f95607aa56888f">constrain_float</a>( <a class="code hl_function" href="classAP__MotorsHeli__RSC.html#ae547cfd9379b0064039308e778a57ae7">get_arot_idle_output</a>(), 0.0f, 0.4f);</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>            }</div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>            <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#acef475a87f3a42fe394851c91890dcee">_autorotating</a>) {</div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>                <a class="code hl_define" href="GCS_8h.html#a266bfe8eda675e1092f045e93932b4a6">GCS_SEND_TEXT</a>(MAV_SEVERITY_CRITICAL, <span class="stringliteral">&quot;Autorotation&quot;</span>);</div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>                <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#acef475a87f3a42fe394851c91890dcee">_autorotating</a> =<span class="keyword">true</span>;</div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>            }</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#acef475a87f3a42fe394851c91890dcee">_autorotating</a>) {</div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span>                <a class="code hl_define" href="GCS_8h.html#a266bfe8eda675e1092f045e93932b4a6">GCS_SEND_TEXT</a>(MAV_SEVERITY_CRITICAL, <span class="stringliteral">&quot;Autorotation Stopped&quot;</span>);</div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>                <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#acef475a87f3a42fe394851c91890dcee">_autorotating</a> =<span class="keyword">false</span>;</div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span>            }</div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>            <span class="comment">// set rotor control speed to idle speed parameter, this happens instantly and ignores ramping</span></div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a399ec262b9547f60aea217fdab3367d4">_turbine_start</a> &amp;&amp; <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a050369045bea413a5261d8a2b76511cb">_starting</a> == <span class="keyword">true</span> ) {</div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>                <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a60d9f4e59f81fb5154266775434b55ee">_idle_throttle</a> += 0.001f;</div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a06b4a8eb3f3c0c9ab5b4069a4c17e574">_control_output</a> &gt;= 1.0f) {</div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>                    <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a60d9f4e59f81fb5154266775434b55ee">_idle_throttle</a> = <a class="code hl_function" href="classAP__MotorsHeli__RSC.html#a9380697f739256f1bc6b32ed61f98322">get_idle_output</a>();</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>                    <a class="code hl_define" href="GCS_8h.html#a266bfe8eda675e1092f045e93932b4a6">GCS_SEND_TEXT</a>(MAV_SEVERITY_INFO, <span class="stringliteral">&quot;Turbine startup&quot;</span>);</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>                    <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a050369045bea413a5261d8a2b76511cb">_starting</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>                }</div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a15f4fd29272aefc6ce9701b5c173bcee">_cooldown_time</a> &gt; 0) {</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>                    <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a60d9f4e59f81fb5154266775434b55ee">_idle_throttle</a> = <a class="code hl_function" href="classAP__MotorsHeli__RSC.html#a9380697f739256f1bc6b32ed61f98322">get_idle_output</a>() * 1.5f;</div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span>                    <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#ae7b510a50aba64e559f444159a8df85e">_fast_idle_timer</a> += dt;</div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>                    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#ae7b510a50aba64e559f444159a8df85e">_fast_idle_timer</a> &gt; (<span class="keywordtype">float</span>)<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a15f4fd29272aefc6ce9701b5c173bcee">_cooldown_time</a>) {</div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>                        <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#ae7b510a50aba64e559f444159a8df85e">_fast_idle_timer</a> = 0.0f;</div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>                    }</div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>                    <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a60d9f4e59f81fb5154266775434b55ee">_idle_throttle</a> = <a class="code hl_function" href="classAP__MotorsHeli__RSC.html#a9380697f739256f1bc6b32ed61f98322">get_idle_output</a>();</div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>                }</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>            }</div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>            <span class="comment">// this resets the bailout feature if the aircraft has landed.</span></div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>            <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a1b8da4af09e651af63a6c707d7e0c902">_use_bailout_ramp</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>            <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a0b7d49b2257ee2ee40d15611c167cf80">_bailing_out</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>            <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#ac46ecbac3fbcdacd5ad214f1bd3b22ab">_gov_bailing_out</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>        }</div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>        <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a06b4a8eb3f3c0c9ab5b4069a4c17e574">_control_output</a> = <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a60d9f4e59f81fb5154266775434b55ee">_idle_throttle</a>;</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span> </div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAP__MotorsHeli__RSC.html#aedbcba02e003b6a77f71d6112723e28ea18ff74f43da410c5529f7d6fca84f115">RotorControlState::ACTIVE</a>:</div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span>        <span class="comment">// set main rotor ramp to increase to full speed</span></div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span>        <a class="code hl_function" href="classAP__MotorsHeli__RSC.html#a8c338a29acf0a61d814af3a298f89594">update_rotor_ramp</a>(1.0f, dt);</div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span> </div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span>        <span class="comment">// ensure _idle_throttle not set to invalid value due to premature switch out of turbine start</span></div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a050369045bea413a5261d8a2b76511cb">_starting</a>) {</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>            <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a60d9f4e59f81fb5154266775434b55ee">_idle_throttle</a> = <a class="code hl_function" href="classAP__MotorsHeli__RSC.html#a9380697f739256f1bc6b32ed61f98322">get_idle_output</a>();</div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span>        }</div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>        <span class="comment">// if turbine engine started without using start sequence, set starting flag just to be sure it can&#39;t be triggered when back in idle</span></div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span>        <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a050369045bea413a5261d8a2b76511cb">_starting</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span>        <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#acef475a87f3a42fe394851c91890dcee">_autorotating</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span> </div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span>        <span class="keywordflow">if</span> ((<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a3d10c147436ec37bff6f60308cd5903c">_control_mode</a> == <a class="code hl_enumvalue" href="AP__MotorsHeli__RSC_8h.html#a36de13430db64e7068d0522f9dc24b96aa5b5fd2bad4ef9c0c5020ba10e9d2386">ROTOR_CONTROL_MODE_PASSTHROUGH</a>) || (<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a3d10c147436ec37bff6f60308cd5903c">_control_mode</a> == <a class="code hl_enumvalue" href="AP__MotorsHeli__RSC_8h.html#a36de13430db64e7068d0522f9dc24b96ab4d215852d45fa88aa8a4d674f828a81">ROTOR_CONTROL_MODE_SETPOINT</a>)) {</div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>            <span class="comment">// set control rotor speed to ramp slewed value between idle and desired speed</span></div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>            <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a06b4a8eb3f3c0c9ab5b4069a4c17e574">_control_output</a> = <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a60d9f4e59f81fb5154266775434b55ee">_idle_throttle</a> + (<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a438d0f3ab3ec2f11b8beedf05d72dbb4">_rotor_ramp_output</a> * (<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a30a21afe8ee1690d2a60e81c0b82df4c">_desired_speed</a> - <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a60d9f4e59f81fb5154266775434b55ee">_idle_throttle</a>));</div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a3d10c147436ec37bff6f60308cd5903c">_control_mode</a> == <a class="code hl_enumvalue" href="AP__MotorsHeli__RSC_8h.html#a36de13430db64e7068d0522f9dc24b96a7433b022b4d35a121548001f3ec5cf9e">ROTOR_CONTROL_MODE_THROTTLECURVE</a>) {</div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span>            <span class="comment">// throttle output from throttle curve based on collective position</span></div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span>            <span class="keywordtype">float</span> throttlecurve = <a class="code hl_function" href="classAP__MotorsHeli__RSC.html#aa811c01c1afe27b1ec1ebb1386dba597">calculate_throttlecurve</a>(<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a96030fe9edba894c9b2cb2ed39c00ac7">_collective_in</a>);</div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span>            <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a06b4a8eb3f3c0c9ab5b4069a4c17e574">_control_output</a> = <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a60d9f4e59f81fb5154266775434b55ee">_idle_throttle</a> + (<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a438d0f3ab3ec2f11b8beedf05d72dbb4">_rotor_ramp_output</a> * (throttlecurve - <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a60d9f4e59f81fb5154266775434b55ee">_idle_throttle</a>));</div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a3d10c147436ec37bff6f60308cd5903c">_control_mode</a> == <a class="code hl_enumvalue" href="AP__MotorsHeli__RSC_8h.html#a36de13430db64e7068d0522f9dc24b96a3aecae8a93464861924e151011a67619">ROTOR_CONTROL_MODE_AUTOTHROTTLE</a>) {</div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span>            <a class="code hl_function" href="classAP__MotorsHeli__RSC.html#a133b68621aa2e63397451e8fe3b6c596">autothrottle_run</a>();</div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>        }</div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>    }</div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span> </div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>    <span class="comment">// update rotor speed run-up estimate</span></div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>    <a class="code hl_function" href="classAP__MotorsHeli__RSC.html#a8f17785d86c9527b3a3d868a7dd21f42">update_rotor_runup</a>(dt);</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span> </div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a910b3ca75d0171754e66c36bdd63cfdc">_power_slewrate</a> &gt; 0) {</div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>        <span class="comment">// implement slew rate for throttle</span></div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span>        <span class="keywordtype">float</span> max_delta = dt * <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a910b3ca75d0171754e66c36bdd63cfdc">_power_slewrate</a> * 0.01f;</div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span>        <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a06b4a8eb3f3c0c9ab5b4069a4c17e574">_control_output</a> = <a class="code hl_define" href="AP__Math_8h.html#a5256308fd38a7098b8f95607aa56888f">constrain_float</a>(<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a06b4a8eb3f3c0c9ab5b4069a4c17e574">_control_output</a>, last_control_output-max_delta, last_control_output+max_delta);</div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span>    }</div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span> </div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>    <span class="comment">// output to rsc servo</span></div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span>    <a class="code hl_function" href="classAP__MotorsHeli__RSC.html#a15973f14ea1331c8def95e6cde3ad1db">write_rsc</a>(<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a06b4a8eb3f3c0c9ab5b4069a4c17e574">_control_output</a>);</div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span>}</div>
</div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span> </div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span><span class="comment">// update_rotor_ramp - slews rotor output scalar between 0 and 1, outputs float scalar to _rotor_ramp_output</span></div>
<div class="foldopen" id="foldopen00390" data-start="{" data-end="}">
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno"><a class="line" href="classAP__MotorsHeli__RSC.html#a8c338a29acf0a61d814af3a298f89594">  390</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classAP__MotorsHeli__RSC.html#a8c338a29acf0a61d814af3a298f89594">AP_MotorsHeli_RSC::update_rotor_ramp</a>(<span class="keywordtype">float</span> rotor_ramp_input, <span class="keywordtype">float</span> dt)</div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span>{</div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span>    int8_t ramp_time;</div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span>    int8_t bailout_time;</div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span>    <span class="comment">// sanity check ramp time and enable bailout if set</span></div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a99ac103562c8bc8e4ad793cc57a22a5e">_ramp_time</a> &lt;= 0) {</div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span>        ramp_time = 1;</div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span>        ramp_time = <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a99ac103562c8bc8e4ad793cc57a22a5e">_ramp_time</a>;</div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span>    }</div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span> </div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a14305475afe062865e7f768809a65bd1">_rsc_arot_engage_time</a> &lt;= 0) {</div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span>        bailout_time = 1;</div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span>        bailout_time = <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a14305475afe062865e7f768809a65bd1">_rsc_arot_engage_time</a>;</div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span>    }</div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span> </div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span>    <span class="comment">// ramp output upwards towards target</span></div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a438d0f3ab3ec2f11b8beedf05d72dbb4">_rotor_ramp_output</a> &lt; rotor_ramp_input) {</div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a1b8da4af09e651af63a6c707d7e0c902">_use_bailout_ramp</a>) {</div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span>            <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a0b7d49b2257ee2ee40d15611c167cf80">_bailing_out</a>) {</div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span>                <a class="code hl_define" href="GCS_8h.html#a266bfe8eda675e1092f045e93932b4a6">GCS_SEND_TEXT</a>(MAV_SEVERITY_CRITICAL, <span class="stringliteral">&quot;bailing_out&quot;</span>);</div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span>                <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a0b7d49b2257ee2ee40d15611c167cf80">_bailing_out</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a3d10c147436ec37bff6f60308cd5903c">_control_mode</a> == <a class="code hl_enumvalue" href="AP__MotorsHeli__RSC_8h.html#a36de13430db64e7068d0522f9dc24b96a3aecae8a93464861924e151011a67619">ROTOR_CONTROL_MODE_AUTOTHROTTLE</a>) {<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#ac46ecbac3fbcdacd5ad214f1bd3b22ab">_gov_bailing_out</a> = <span class="keyword">true</span>;}</div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span>            }</div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span>            <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a438d0f3ab3ec2f11b8beedf05d72dbb4">_rotor_ramp_output</a> += (dt / bailout_time);</div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span>            <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a438d0f3ab3ec2f11b8beedf05d72dbb4">_rotor_ramp_output</a> += (dt / ramp_time);</div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span>        }</div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a438d0f3ab3ec2f11b8beedf05d72dbb4">_rotor_ramp_output</a> &gt; rotor_ramp_input) {</div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span>            <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a438d0f3ab3ec2f11b8beedf05d72dbb4">_rotor_ramp_output</a> = rotor_ramp_input;</div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span>            <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a0b7d49b2257ee2ee40d15611c167cf80">_bailing_out</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span>            <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a1b8da4af09e651af63a6c707d7e0c902">_use_bailout_ramp</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span>        }</div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span>        <span class="comment">// ramping down happens instantly</span></div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span>        <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a438d0f3ab3ec2f11b8beedf05d72dbb4">_rotor_ramp_output</a> = rotor_ramp_input;</div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span>    }</div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span>}</div>
</div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span> </div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span><span class="comment">// update_rotor_runup - function to slew rotor runup scalar, outputs float scalar to _rotor_runup_ouptut</span></div>
<div class="foldopen" id="foldopen00431" data-start="{" data-end="}">
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno"><a class="line" href="classAP__MotorsHeli__RSC.html#a8f17785d86c9527b3a3d868a7dd21f42">  431</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classAP__MotorsHeli__RSC.html#a8f17785d86c9527b3a3d868a7dd21f42">AP_MotorsHeli_RSC::update_rotor_runup</a>(<span class="keywordtype">float</span> dt)</div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno">  432</span>{</div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span>    int8_t runup_time = <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#af5ad3a88652248723b4431d2c9dee51f">_runup_time</a>;</div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span>    <span class="comment">// sanity check runup time</span></div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span>    runup_time = <a class="code hl_define" href="monocypher_8cpp.html#afa99ec4acc4ecb2dc3c2d05da15d0e3f">MAX</a>(<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a99ac103562c8bc8e4ad793cc57a22a5e">_ramp_time</a>+1,runup_time);</div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span> </div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span>    <span class="comment">// adjust rotor runup when bailing out</span></div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a1b8da4af09e651af63a6c707d7e0c902">_use_bailout_ramp</a>) {</div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span>        <span class="comment">// maintain same delta as set in parameters</span></div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span>        runup_time = <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#af5ad3a88652248723b4431d2c9dee51f">_runup_time</a>-<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a99ac103562c8bc8e4ad793cc57a22a5e">_ramp_time</a>+1;</div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span>    }</div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span> </div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span>    <span class="comment">// protect against divide by zero</span></div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span>    runup_time = <a class="code hl_define" href="monocypher_8cpp.html#afa99ec4acc4ecb2dc3c2d05da15d0e3f">MAX</a>(1,runup_time);</div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span> </div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span>    <span class="comment">// ramp speed estimate towards control out</span></div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span>    <span class="keywordtype">float</span> runup_increment = dt / runup_time;</div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a94c896094d9b49bfc77e341b536b46f1">_rotor_runup_output</a> &lt; <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a438d0f3ab3ec2f11b8beedf05d72dbb4">_rotor_ramp_output</a>) {</div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span>        <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a94c896094d9b49bfc77e341b536b46f1">_rotor_runup_output</a> += runup_increment;</div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a94c896094d9b49bfc77e341b536b46f1">_rotor_runup_output</a> &gt; <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a438d0f3ab3ec2f11b8beedf05d72dbb4">_rotor_ramp_output</a>) {</div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span>            <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a94c896094d9b49bfc77e341b536b46f1">_rotor_runup_output</a> = <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a438d0f3ab3ec2f11b8beedf05d72dbb4">_rotor_ramp_output</a>;</div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span>        }</div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span>        <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a94c896094d9b49bfc77e341b536b46f1">_rotor_runup_output</a> -= runup_increment;</div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a94c896094d9b49bfc77e341b536b46f1">_rotor_runup_output</a> &lt; <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a438d0f3ab3ec2f11b8beedf05d72dbb4">_rotor_ramp_output</a>) {</div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span>            <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a94c896094d9b49bfc77e341b536b46f1">_rotor_runup_output</a> = <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a438d0f3ab3ec2f11b8beedf05d72dbb4">_rotor_ramp_output</a>;</div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span>        }</div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span>    }</div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span>    <span class="comment">// if in autorotation, don&#39;t let rotor_runup_output go less than critical speed to keep</span></div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno">  460</span>    <span class="comment">// runup complete flag from being set to false</span></div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#acef475a87f3a42fe394851c91890dcee">_autorotating</a> &amp;&amp; !<a class="code hl_function" href="classAP__MotorsHeli__RSC.html#a43cd4d18aae3432980b19d5a9188fe23">rotor_speed_above_critical</a>()) {</div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span>        <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a94c896094d9b49bfc77e341b536b46f1">_rotor_runup_output</a> = <a class="code hl_function" href="classAP__MotorsHeli__RSC.html#adfeff93b86ddb370b4b9162d223bb7fa">get_critical_speed</a>();</div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span>    }</div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span> </div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span>    <span class="comment">// update run-up complete flag</span></div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span> </div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span>    <span class="comment">// if control mode is disabled, then run-up complete always returns true</span></div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span>    <span class="keywordflow">if</span> ( <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a3d10c147436ec37bff6f60308cd5903c">_control_mode</a> == <a class="code hl_enumvalue" href="AP__MotorsHeli__RSC_8h.html#a36de13430db64e7068d0522f9dc24b96a8ac5d4e5f2ced1033f42e77703c03d82">ROTOR_CONTROL_MODE_DISABLED</a> ) {</div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span>        <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#ad14034f3abef523b48d016aef5f3fe6a">_runup_complete</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span>    }</div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span> </div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span>    <span class="comment">// if rotor ramp and runup are both at full speed, then run-up has been completed</span></div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#ad14034f3abef523b48d016aef5f3fe6a">_runup_complete</a> &amp;&amp; (<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a438d0f3ab3ec2f11b8beedf05d72dbb4">_rotor_ramp_output</a> &gt;= 1.0f) &amp;&amp; (<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a94c896094d9b49bfc77e341b536b46f1">_rotor_runup_output</a> &gt;= 1.0f)) {</div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span>        <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#ad14034f3abef523b48d016aef5f3fe6a">_runup_complete</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span>    }</div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span>    <span class="comment">// if rotor speed is less than critical speed, then run-up is not complete</span></div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span>    <span class="comment">// this will prevent the case where the target rotor speed is less than critical speed</span></div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#ad14034f3abef523b48d016aef5f3fe6a">_runup_complete</a> &amp;&amp; !<a class="code hl_function" href="classAP__MotorsHeli__RSC.html#a43cd4d18aae3432980b19d5a9188fe23">rotor_speed_above_critical</a>()) {</div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span>        <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#ad14034f3abef523b48d016aef5f3fe6a">_runup_complete</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span>    }</div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span>    <span class="comment">// if rotor estimated speed is zero, then spooldown has been completed</span></div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="classAP__MotorsHeli__RSC.html#afcadabdd0a897bed905a1f178011d094">get_rotor_speed</a>() &lt;= 0.0f) {</div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span>        <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a066c824957b46a96298fae23514fd2b5">_spooldown_complete</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span>        <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a066c824957b46a96298fae23514fd2b5">_spooldown_complete</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span>    }</div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span>}</div>
</div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span> </div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno">  490</span><span class="comment">// get_rotor_speed - gets rotor speed either as an estimate, or (ToDO) a measured value</span></div>
<div class="foldopen" id="foldopen00491" data-start="{" data-end="}">
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno"><a class="line" href="classAP__MotorsHeli__RSC.html#afcadabdd0a897bed905a1f178011d094">  491</a></span><span class="keywordtype">float</span> <a class="code hl_function" href="classAP__MotorsHeli__RSC.html#afcadabdd0a897bed905a1f178011d094">AP_MotorsHeli_RSC::get_rotor_speed</a>()<span class="keyword"> const</span></div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno">  492</span><span class="keyword"></span>{</div>
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span>    <span class="comment">// if no actual measured rotor speed is available, estimate speed based on rotor runup scalar.</span></div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a94c896094d9b49bfc77e341b536b46f1">_rotor_runup_output</a>;</div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span>}</div>
</div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno">  496</span> </div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span><span class="comment">// write_rsc - outputs pwm onto output rsc channel</span></div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno">  498</span><span class="comment">// servo_out parameter is of the range 0 ~ 1</span></div>
<div class="foldopen" id="foldopen00499" data-start="{" data-end="}">
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno"><a class="line" href="classAP__MotorsHeli__RSC.html#a15973f14ea1331c8def95e6cde3ad1db">  499</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classAP__MotorsHeli__RSC.html#a15973f14ea1331c8def95e6cde3ad1db">AP_MotorsHeli_RSC::write_rsc</a>(<span class="keywordtype">float</span> <a class="code hl_variable" href="minimal_8cpp.html#a938675a93ca92045b225831be68de65a">servo_out</a>)</div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span>{</div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a3d10c147436ec37bff6f60308cd5903c">_control_mode</a> == <a class="code hl_enumvalue" href="AP__MotorsHeli__RSC_8h.html#a36de13430db64e7068d0522f9dc24b96a8ac5d4e5f2ced1033f42e77703c03d82">ROTOR_CONTROL_MODE_DISABLED</a>) {</div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span>        <span class="comment">// do not do servo output to avoid conflicting with other output on the channel</span></div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno">  503</span>        <span class="comment">// ToDo: We should probably use RC_Channel_Aux to avoid this problem</span></div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno">  504</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span>        <a class="code hl_function" href="classSRV__Channels.html#a06cf1d6d4bd8b1971c333184bb4bcb55">SRV_Channels::set_output_scaled</a>(<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a07de7f2e07bedcff45425018318ee372">_aux_fn</a>, <a class="code hl_variable" href="minimal_8cpp.html#a938675a93ca92045b225831be68de65a">servo_out</a> * 1000);</div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span>    }</div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span>}</div>
</div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span> </div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno">  510</span><span class="comment">// Return mask of output channels which the RSC is outputting on</span></div>
<div class="foldopen" id="foldopen00511" data-start="{" data-end="}">
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno"><a class="line" href="classAP__MotorsHeli__RSC.html#ac295567cd6824fbf86be7e34ec8845c0">  511</a></span>uint32_t <a class="code hl_function" href="classAP__MotorsHeli__RSC.html#ac295567cd6824fbf86be7e34ec8845c0">AP_MotorsHeli_RSC::get_output_mask</a>()<span class="keyword"> const</span></div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span><span class="keyword"></span>{</div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a3d10c147436ec37bff6f60308cd5903c">_control_mode</a> == <a class="code hl_enumvalue" href="AP__MotorsHeli__RSC_8h.html#a36de13430db64e7068d0522f9dc24b96a8ac5d4e5f2ced1033f42e77703c03d82">ROTOR_CONTROL_MODE_DISABLED</a>) {</div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span>    }</div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno">  516</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classSRV__Channels.html#acdb0bd5d2defc4c7bcb51137f15e289d">SRV_Channels::get_output_channel_mask</a>(<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a07de7f2e07bedcff45425018318ee372">_aux_fn</a>);</div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span>}</div>
</div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span> </div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno">  519</span><span class="comment">// calculate_throttlecurve - uses throttle curve and collective input to determine throttle setting</span></div>
<div class="foldopen" id="foldopen00520" data-start="{" data-end="}">
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno"><a class="line" href="classAP__MotorsHeli__RSC.html#aa811c01c1afe27b1ec1ebb1386dba597">  520</a></span><span class="keywordtype">float</span> <a class="code hl_function" href="classAP__MotorsHeli__RSC.html#aa811c01c1afe27b1ec1ebb1386dba597">AP_MotorsHeli_RSC::calculate_throttlecurve</a>(<span class="keywordtype">float</span> collective_in)</div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno">  521</span>{</div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno">  522</span>    <span class="keyword">const</span> <span class="keywordtype">float</span> inpt = collective_in * 4.0f + 1.0f;</div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span>    uint8_t idx = <a class="code hl_function" href="AP__Math_8h.html#a68558c4f79a8582543daefde13c64abc">constrain_int16</a>(int8_t(collective_in * 4), 0, 3);</div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno">  524</span>    <span class="keyword">const</span> <span class="keywordtype">float</span> a = inpt - (idx + 1.0f);</div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno">  525</span>    <span class="keyword">const</span> <span class="keywordtype">float</span> b = (idx + 1.0f) - inpt + 1.0f;</div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno">  526</span>    <span class="keywordtype">float</span> throttle = <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a57f0b28d6a1b23c02c4fa8b26766f532">_thrcrv_poly</a>[idx][0] * a + <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a57f0b28d6a1b23c02c4fa8b26766f532">_thrcrv_poly</a>[idx][1] * b + <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a57f0b28d6a1b23c02c4fa8b26766f532">_thrcrv_poly</a>[idx][2] * (powf(a,3.0f) - a) / 6.0f + <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a57f0b28d6a1b23c02c4fa8b26766f532">_thrcrv_poly</a>[idx][3] * (powf(b,3.0f) - b) / 6.0f;</div>
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno">  527</span> </div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno">  528</span>    throttle = <a class="code hl_define" href="AP__Math_8h.html#a5256308fd38a7098b8f95607aa56888f">constrain_float</a>(throttle, 0.0f, 1.0f);</div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno">  529</span>    <span class="keywordflow">return</span> throttle;</div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno">  530</span> </div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span>}</div>
</div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span> </div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span><span class="comment">// autothrottle_run - calculate throttle output for governor controlled throttle</span></div>
<div class="foldopen" id="foldopen00534" data-start="{" data-end="}">
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno"><a class="line" href="classAP__MotorsHeli__RSC.html#a133b68621aa2e63397451e8fe3b6c596">  534</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classAP__MotorsHeli__RSC.html#a133b68621aa2e63397451e8fe3b6c596">AP_MotorsHeli_RSC::autothrottle_run</a>()</div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span>{</div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span>    <span class="keywordtype">float</span> throttlecurve = <a class="code hl_function" href="classAP__MotorsHeli__RSC.html#aa811c01c1afe27b1ec1ebb1386dba597">calculate_throttlecurve</a>(<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a96030fe9edba894c9b2cb2ed39c00ac7">_collective_in</a>);</div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno">  537</span>    <span class="keywordtype">float</span> <span class="keyword">const</span> torque_ref_error_rpm = 2.0f;</div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno">  538</span> </div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span>    <span class="comment">// if the desired governor RPM is zero, use the throttle curve only and exit</span></div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno">  540</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a029b8c00be23c2412faeec55adaba933">_governor_rpm</a> == 0) {</div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span>        <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a06b4a8eb3f3c0c9ab5b4069a4c17e574">_control_output</a> = <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a60d9f4e59f81fb5154266775434b55ee">_idle_throttle</a> + (<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a438d0f3ab3ec2f11b8beedf05d72dbb4">_rotor_ramp_output</a> * (throttlecurve - <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a60d9f4e59f81fb5154266775434b55ee">_idle_throttle</a>));</div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span>    }</div>
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno">  544</span> </div>
<div class="line"><a id="l00545" name="l00545"></a><span class="lineno">  545</span>    <span class="comment">// autothrottle main power loop with governor</span></div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno">  546</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#ac82842d7cf52e991362c090181a50ef2">_governor_engage</a> &amp;&amp; !<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a3588e09ff00219036550c233e4c9434a">_governor_fault</a>) {</div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span>        <span class="comment">// calculate droop - difference between actual and desired speed</span></div>
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span>        <span class="keywordtype">float</span> governor_droop = ((float)<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a029b8c00be23c2412faeec55adaba933">_governor_rpm</a> - <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a44aaa05623e15100d45ec0d6ba5d89d9">_rotor_rpm</a>) * <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#ad2c1b83bcacb987bd4d710429fff805e">_governor_droop_response</a> * 0.0001f;</div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span>        <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a87cfae6a8e1787eb74a0ea5f48b9cb4f">_governor_output</a> = governor_droop + ((throttlecurve - <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a77e68723634b245f5c2cb66ffc93b3a7">_governor_torque_reference</a>) * <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#adceba445df02cdaac666b43bf9cb41fa">_governor_ff</a> * 0.01);</div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a44aaa05623e15100d45ec0d6ba5d89d9">_rotor_rpm</a> &lt; ((<span class="keywordtype">float</span>)<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a029b8c00be23c2412faeec55adaba933">_governor_rpm</a> - torque_ref_error_rpm)) {</div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span>            <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a77e68723634b245f5c2cb66ffc93b3a7">_governor_torque_reference</a> += <a class="code hl_function" href="classAP__MotorsHeli__RSC.html#a54c97ba911c203578d055cf8927577d1">get_governor_compensator</a>();   <span class="comment">// torque compensator</span></div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno">  552</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a44aaa05623e15100d45ec0d6ba5d89d9">_rotor_rpm</a> &gt; ((<span class="keywordtype">float</span>)<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a029b8c00be23c2412faeec55adaba933">_governor_rpm</a> + torque_ref_error_rpm)) {</div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span>            <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a77e68723634b245f5c2cb66ffc93b3a7">_governor_torque_reference</a> -= <a class="code hl_function" href="classAP__MotorsHeli__RSC.html#a54c97ba911c203578d055cf8927577d1">get_governor_compensator</a>();</div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno">  554</span>        }</div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span>        <span class="comment">// throttle output uses droop + torque compensation to maintain proper rotor speed</span></div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span>        <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a06b4a8eb3f3c0c9ab5b4069a4c17e574">_control_output</a> = <a class="code hl_define" href="AP__Math_8h.html#a5256308fd38a7098b8f95607aa56888f">constrain_float</a>((<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a77e68723634b245f5c2cb66ffc93b3a7">_governor_torque_reference</a> + <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a87cfae6a8e1787eb74a0ea5f48b9cb4f">_governor_output</a>), (<a class="code hl_function" href="classAP__MotorsHeli__RSC.html#a9380697f739256f1bc6b32ed61f98322">get_idle_output</a>() * 1.5f), 1.0f);</div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span>        <span class="comment">// governor and speed sensor fault detection - must maintain RPM within governor range</span></div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span>        <span class="comment">// speed fault detector will allow a fault to persist for 200 contiguous governor updates</span></div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span>        <span class="comment">// this is failsafe for bad speed sensor or severely mis-adjusted governor</span></div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span>        <span class="keywordflow">if</span> ((<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a44aaa05623e15100d45ec0d6ba5d89d9">_rotor_rpm</a> &lt;= (<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a029b8c00be23c2412faeec55adaba933">_governor_rpm</a> - <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a8e1f21565271476483e9449fbaa04654">_governor_range</a>)) || (<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a44aaa05623e15100d45ec0d6ba5d89d9">_rotor_rpm</a> &gt;= (<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a029b8c00be23c2412faeec55adaba933">_governor_rpm</a> + <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a8e1f21565271476483e9449fbaa04654">_governor_range</a>))) {</div>
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno">  561</span>            <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#af092722b4105d4a9930b098ed072fd6c">_governor_fault_count</a>++;</div>
<div class="line"><a id="l00562" name="l00562"></a><span class="lineno">  562</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#af092722b4105d4a9930b098ed072fd6c">_governor_fault_count</a> &gt; 200) {</div>
<div class="line"><a id="l00563" name="l00563"></a><span class="lineno">  563</span>                <a class="code hl_function" href="classAP__MotorsHeli__RSC.html#a41e7c2ac8d0ddd1f01fd1eb63a0133a7">governor_reset</a>();</div>
<div class="line"><a id="l00564" name="l00564"></a><span class="lineno">  564</span>                <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a3588e09ff00219036550c233e4c9434a">_governor_fault</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a44aaa05623e15100d45ec0d6ba5d89d9">_rotor_rpm</a> &gt;= (<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a029b8c00be23c2412faeec55adaba933">_governor_rpm</a> + <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a8e1f21565271476483e9449fbaa04654">_governor_range</a>)) {</div>
<div class="line"><a id="l00566" name="l00566"></a><span class="lineno">  566</span>                    <a class="code hl_define" href="GCS_8h.html#a266bfe8eda675e1092f045e93932b4a6">GCS_SEND_TEXT</a>(MAV_SEVERITY_WARNING, <span class="stringliteral">&quot;Governor Fault: Rotor Overspeed&quot;</span>);</div>
<div class="line"><a id="l00567" name="l00567"></a><span class="lineno">  567</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00568" name="l00568"></a><span class="lineno">  568</span>                    <a class="code hl_define" href="GCS_8h.html#a266bfe8eda675e1092f045e93932b4a6">GCS_SEND_TEXT</a>(MAV_SEVERITY_WARNING, <span class="stringliteral">&quot;Governor Fault: Rotor Underspeed&quot;</span>);</div>
<div class="line"><a id="l00569" name="l00569"></a><span class="lineno">  569</span>                }</div>
<div class="line"><a id="l00570" name="l00570"></a><span class="lineno">  570</span>            }</div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno">  571</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00572" name="l00572"></a><span class="lineno">  572</span>            <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#af092722b4105d4a9930b098ed072fd6c">_governor_fault_count</a> = 0;   <span class="comment">// reset fault count if the fault doesn&#39;t persist</span></div>
<div class="line"><a id="l00573" name="l00573"></a><span class="lineno">  573</span>        }</div>
<div class="line"><a id="l00574" name="l00574"></a><span class="lineno">  574</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#ac82842d7cf52e991362c090181a50ef2">_governor_engage</a> &amp;&amp; !<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a3588e09ff00219036550c233e4c9434a">_governor_fault</a>) {</div>
<div class="line"><a id="l00575" name="l00575"></a><span class="lineno">  575</span>        <span class="comment">// if governor is not engaged and rotor is overspeeding by more than governor range due to </span></div>
<div class="line"><a id="l00576" name="l00576"></a><span class="lineno">  576</span>        <span class="comment">// misconfigured throttle curve or stuck throttle, set a fault and governor will not operate</span></div>
<div class="line"><a id="l00577" name="l00577"></a><span class="lineno">  577</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a44aaa05623e15100d45ec0d6ba5d89d9">_rotor_rpm</a> &gt; (<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a029b8c00be23c2412faeec55adaba933">_governor_rpm</a> + <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a8e1f21565271476483e9449fbaa04654">_governor_range</a>) &amp;&amp; !<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#ac46ecbac3fbcdacd5ad214f1bd3b22ab">_gov_bailing_out</a>) {</div>
<div class="line"><a id="l00578" name="l00578"></a><span class="lineno">  578</span>            <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a3588e09ff00219036550c233e4c9434a">_governor_fault</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00579" name="l00579"></a><span class="lineno">  579</span>            <a class="code hl_function" href="classAP__MotorsHeli__RSC.html#a41e7c2ac8d0ddd1f01fd1eb63a0133a7">governor_reset</a>();</div>
<div class="line"><a id="l00580" name="l00580"></a><span class="lineno">  580</span>            <a class="code hl_define" href="GCS_8h.html#a266bfe8eda675e1092f045e93932b4a6">GCS_SEND_TEXT</a>(MAV_SEVERITY_WARNING, <span class="stringliteral">&quot;Governor Fault: Rotor Overspeed&quot;</span>);</div>
<div class="line"><a id="l00581" name="l00581"></a><span class="lineno">  581</span>            <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a87cfae6a8e1787eb74a0ea5f48b9cb4f">_governor_output</a> = 0.0f;</div>
<div class="line"><a id="l00582" name="l00582"></a><span class="lineno">  582</span> </div>
<div class="line"><a id="l00583" name="l00583"></a><span class="lineno">  583</span>        <span class="comment">// when performing power recovery from autorotation, this waits for user to load rotor in order to </span></div>
<div class="line"><a id="l00584" name="l00584"></a><span class="lineno">  584</span>        <span class="comment">// engage the governor</span></div>
<div class="line"><a id="l00585" name="l00585"></a><span class="lineno">  585</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a44aaa05623e15100d45ec0d6ba5d89d9">_rotor_rpm</a> &gt; <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a029b8c00be23c2412faeec55adaba933">_governor_rpm</a> &amp;&amp; <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#ac46ecbac3fbcdacd5ad214f1bd3b22ab">_gov_bailing_out</a>) {</div>
<div class="line"><a id="l00586" name="l00586"></a><span class="lineno">  586</span>            <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a87cfae6a8e1787eb74a0ea5f48b9cb4f">_governor_output</a> = 0.0f;</div>
<div class="line"><a id="l00587" name="l00587"></a><span class="lineno">  587</span> </div>
<div class="line"><a id="l00588" name="l00588"></a><span class="lineno">  588</span>            <span class="comment">// torque rise limiter accelerates rotor to the reference speed</span></div>
<div class="line"><a id="l00589" name="l00589"></a><span class="lineno">  589</span>            <span class="comment">// this limits the max torque rise the governor could call for from the main power loop</span></div>
<div class="line"><a id="l00590" name="l00590"></a><span class="lineno">  590</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a44aaa05623e15100d45ec0d6ba5d89d9">_rotor_rpm</a> &gt;= (<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a029b8c00be23c2412faeec55adaba933">_governor_rpm</a> * 0.5f)) {</div>
<div class="line"><a id="l00591" name="l00591"></a><span class="lineno">  591</span>            <span class="keywordtype">float</span> torque_limit = (<a class="code hl_function" href="classAP__MotorsHeli__RSC.html#ac96116ebbbd33ea3e8bf42a8c5241c5e">get_governor_torque</a>() * <a class="code hl_function" href="classAP__MotorsHeli__RSC.html#ac96116ebbbd33ea3e8bf42a8c5241c5e">get_governor_torque</a>());</div>
<div class="line"><a id="l00592" name="l00592"></a><span class="lineno">  592</span>            <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a87cfae6a8e1787eb74a0ea5f48b9cb4f">_governor_output</a> = (<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a44aaa05623e15100d45ec0d6ba5d89d9">_rotor_rpm</a> / (float)<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a029b8c00be23c2412faeec55adaba933">_governor_rpm</a>) * torque_limit;</div>
<div class="line"><a id="l00593" name="l00593"></a><span class="lineno">  593</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a44aaa05623e15100d45ec0d6ba5d89d9">_rotor_rpm</a> &gt;= ((<span class="keywordtype">float</span>)<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a029b8c00be23c2412faeec55adaba933">_governor_rpm</a> - torque_ref_error_rpm)) {</div>
<div class="line"><a id="l00594" name="l00594"></a><span class="lineno">  594</span>                <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#ac82842d7cf52e991362c090181a50ef2">_governor_engage</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00595" name="l00595"></a><span class="lineno">  595</span>                <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#ae0eebf36c02ae72fa95777d7901d43a6">_autothrottle</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00596" name="l00596"></a><span class="lineno">  596</span>                <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#ac46ecbac3fbcdacd5ad214f1bd3b22ab">_gov_bailing_out</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00597" name="l00597"></a><span class="lineno">  597</span>                <a class="code hl_define" href="GCS_8h.html#a266bfe8eda675e1092f045e93932b4a6">GCS_SEND_TEXT</a>(MAV_SEVERITY_NOTICE, <span class="stringliteral">&quot;Governor Engaged&quot;</span>);</div>
<div class="line"><a id="l00598" name="l00598"></a><span class="lineno">  598</span>            }</div>
<div class="line"><a id="l00599" name="l00599"></a><span class="lineno">  599</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00600" name="l00600"></a><span class="lineno">  600</span>            <span class="comment">// temporary use of throttle curve and ramp timer to accelerate rotor to governor min torque rise speed</span></div>
<div class="line"><a id="l00601" name="l00601"></a><span class="lineno">  601</span>            <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a87cfae6a8e1787eb74a0ea5f48b9cb4f">_governor_output</a> = 0.0f;</div>
<div class="line"><a id="l00602" name="l00602"></a><span class="lineno">  602</span>        }</div>
<div class="line"><a id="l00603" name="l00603"></a><span class="lineno">  603</span>        <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a06b4a8eb3f3c0c9ab5b4069a4c17e574">_control_output</a> = <a class="code hl_define" href="AP__Math_8h.html#a5256308fd38a7098b8f95607aa56888f">constrain_float</a>(<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a60d9f4e59f81fb5154266775434b55ee">_idle_throttle</a> + (<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a438d0f3ab3ec2f11b8beedf05d72dbb4">_rotor_ramp_output</a> * (throttlecurve + <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a87cfae6a8e1787eb74a0ea5f48b9cb4f">_governor_output</a> - <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a60d9f4e59f81fb5154266775434b55ee">_idle_throttle</a>)), 0.0f, 1.0f);</div>
<div class="line"><a id="l00604" name="l00604"></a><span class="lineno">  604</span>        <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a77e68723634b245f5c2cb66ffc93b3a7">_governor_torque_reference</a> = <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a06b4a8eb3f3c0c9ab5b4069a4c17e574">_control_output</a>;  <span class="comment">// increment torque setting to be passed to main power loop</span></div>
<div class="line"><a id="l00605" name="l00605"></a><span class="lineno">  605</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00606" name="l00606"></a><span class="lineno">  606</span>        <span class="comment">// failsafe - if governor has faulted use throttle curve</span></div>
<div class="line"><a id="l00607" name="l00607"></a><span class="lineno">  607</span>        <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a06b4a8eb3f3c0c9ab5b4069a4c17e574">_control_output</a> = <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a60d9f4e59f81fb5154266775434b55ee">_idle_throttle</a> + (<a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a438d0f3ab3ec2f11b8beedf05d72dbb4">_rotor_ramp_output</a> * (throttlecurve - <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a60d9f4e59f81fb5154266775434b55ee">_idle_throttle</a>));</div>
<div class="line"><a id="l00608" name="l00608"></a><span class="lineno">  608</span>    }</div>
<div class="line"><a id="l00609" name="l00609"></a><span class="lineno">  609</span>}</div>
</div>
<div class="line"><a id="l00610" name="l00610"></a><span class="lineno">  610</span> </div>
<div class="line"><a id="l00611" name="l00611"></a><span class="lineno">  611</span><span class="comment">// governor_reset - disengages governor and resets outputs</span></div>
<div class="foldopen" id="foldopen00612" data-start="{" data-end="}">
<div class="line"><a id="l00612" name="l00612"></a><span class="lineno"><a class="line" href="classAP__MotorsHeli__RSC.html#a41e7c2ac8d0ddd1f01fd1eb63a0133a7">  612</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classAP__MotorsHeli__RSC.html#a41e7c2ac8d0ddd1f01fd1eb63a0133a7">AP_MotorsHeli_RSC::governor_reset</a>()</div>
<div class="line"><a id="l00613" name="l00613"></a><span class="lineno">  613</span>{</div>
<div class="line"><a id="l00614" name="l00614"></a><span class="lineno">  614</span>    <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a87cfae6a8e1787eb74a0ea5f48b9cb4f">_governor_output</a> = 0.0f;</div>
<div class="line"><a id="l00615" name="l00615"></a><span class="lineno">  615</span>    <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#a77e68723634b245f5c2cb66ffc93b3a7">_governor_torque_reference</a> = 0.0f;</div>
<div class="line"><a id="l00616" name="l00616"></a><span class="lineno">  616</span>    <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#ac82842d7cf52e991362c090181a50ef2">_governor_engage</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00617" name="l00617"></a><span class="lineno">  617</span>    <a class="code hl_variable" href="classAP__MotorsHeli__RSC.html#af092722b4105d4a9930b098ed072fd6c">_governor_fault_count</a> = 0;   <span class="comment">// reset fault count when governor reset</span></div>
<div class="line"><a id="l00618" name="l00618"></a><span class="lineno">  618</span>}</div>
</div>
<div class="ttc" id="aAP__HAL_8h_html"><div class="ttname"><a href="AP__HAL_8h.html">AP_HAL.h</a></div></div>
<div class="ttc" id="aAP__Math_8h_html_a5256308fd38a7098b8f95607aa56888f"><div class="ttname"><a href="AP__Math_8h.html#a5256308fd38a7098b8f95607aa56888f">constrain_float</a></div><div class="ttdeci">#define constrain_float(amt, low, high)</div><div class="ttdef"><b>Definition</b> <a href="AP__Math_8h_source.html#l00174">AP_Math.h:174</a></div></div>
<div class="ttc" id="aAP__Math_8h_html_a68558c4f79a8582543daefde13c64abc"><div class="ttname"><a href="AP__Math_8h.html#a68558c4f79a8582543daefde13c64abc">constrain_int16</a></div><div class="ttdeci">int16_t constrain_int16(const int16_t amt, const int16_t low, const int16_t high)</div><div class="ttdef"><b>Definition</b> <a href="AP__Math_8h_source.html#l00177">AP_Math.h:177</a></div></div>
<div class="ttc" id="aAP__MotorsHeli__RSC_8cpp_html_ae08c3ca4ba26b63cda0bb3e3c6c02785"><div class="ttname"><a href="AP__MotorsHeli__RSC_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a></div><div class="ttdeci">const AP_HAL::HAL &amp; hal</div><div class="ttdef"><b>Definition</b> <a href="AC__PID__test_8cpp_source.html#l00021">AC_PID_test.cpp:21</a></div></div>
<div class="ttc" id="aAP__MotorsHeli__RSC_8h_html"><div class="ttname"><a href="AP__MotorsHeli__RSC_8h.html">AP_MotorsHeli_RSC.h</a></div></div>
<div class="ttc" id="aAP__MotorsHeli__RSC_8h_html_a05558a12b5ce8238173c81e9d1181ad3"><div class="ttname"><a href="AP__MotorsHeli__RSC_8h.html#a05558a12b5ce8238173c81e9d1181ad3">AP_MOTORS_HELI_RSC_CRITICAL</a></div><div class="ttdeci">#define AP_MOTORS_HELI_RSC_CRITICAL</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00012">AP_MotorsHeli_RSC.h:12</a></div></div>
<div class="ttc" id="aAP__MotorsHeli__RSC_8h_html_a36de13430db64e7068d0522f9dc24b96a3aecae8a93464861924e151011a67619"><div class="ttname"><a href="AP__MotorsHeli__RSC_8h.html#a36de13430db64e7068d0522f9dc24b96a3aecae8a93464861924e151011a67619">ROTOR_CONTROL_MODE_AUTOTHROTTLE</a></div><div class="ttdeci">@ ROTOR_CONTROL_MODE_AUTOTHROTTLE</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00040">AP_MotorsHeli_RSC.h:39</a></div></div>
<div class="ttc" id="aAP__MotorsHeli__RSC_8h_html_a36de13430db64e7068d0522f9dc24b96a7433b022b4d35a121548001f3ec5cf9e"><div class="ttname"><a href="AP__MotorsHeli__RSC_8h.html#a36de13430db64e7068d0522f9dc24b96a7433b022b4d35a121548001f3ec5cf9e">ROTOR_CONTROL_MODE_THROTTLECURVE</a></div><div class="ttdeci">@ ROTOR_CONTROL_MODE_THROTTLECURVE</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00038">AP_MotorsHeli_RSC.h:38</a></div></div>
<div class="ttc" id="aAP__MotorsHeli__RSC_8h_html_a36de13430db64e7068d0522f9dc24b96a8ac5d4e5f2ced1033f42e77703c03d82"><div class="ttname"><a href="AP__MotorsHeli__RSC_8h.html#a36de13430db64e7068d0522f9dc24b96a8ac5d4e5f2ced1033f42e77703c03d82">ROTOR_CONTROL_MODE_DISABLED</a></div><div class="ttdeci">@ ROTOR_CONTROL_MODE_DISABLED</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00035">AP_MotorsHeli_RSC.h:35</a></div></div>
<div class="ttc" id="aAP__MotorsHeli__RSC_8h_html_a36de13430db64e7068d0522f9dc24b96aa5b5fd2bad4ef9c0c5020ba10e9d2386"><div class="ttname"><a href="AP__MotorsHeli__RSC_8h.html#a36de13430db64e7068d0522f9dc24b96aa5b5fd2bad4ef9c0c5020ba10e9d2386">ROTOR_CONTROL_MODE_PASSTHROUGH</a></div><div class="ttdeci">@ ROTOR_CONTROL_MODE_PASSTHROUGH</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00036">AP_MotorsHeli_RSC.h:36</a></div></div>
<div class="ttc" id="aAP__MotorsHeli__RSC_8h_html_a36de13430db64e7068d0522f9dc24b96ab4d215852d45fa88aa8a4d674f828a81"><div class="ttname"><a href="AP__MotorsHeli__RSC_8h.html#a36de13430db64e7068d0522f9dc24b96ab4d215852d45fa88aa8a4d674f828a81">ROTOR_CONTROL_MODE_SETPOINT</a></div><div class="ttdeci">@ ROTOR_CONTROL_MODE_SETPOINT</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00037">AP_MotorsHeli_RSC.h:37</a></div></div>
<div class="ttc" id="aAP__MotorsHeli__RSC_8h_html_a3c3199d1010f0fbd222a9353e96e1da6"><div class="ttname"><a href="AP__MotorsHeli__RSC_8h.html#a3c3199d1010f0fbd222a9353e96e1da6">AP_MOTORS_HELI_RSC_AROT_IDLE</a></div><div class="ttdeci">#define AP_MOTORS_HELI_RSC_AROT_IDLE</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00021">AP_MotorsHeli_RSC.h:21</a></div></div>
<div class="ttc" id="aAP__MotorsHeli__RSC_8h_html_a43090dc67863b008bfca29ebcea483eb"><div class="ttname"><a href="AP__MotorsHeli__RSC_8h.html#a43090dc67863b008bfca29ebcea483eb">AP_MOTORS_HELI_RSC_THRCRV_50_DEFAULT</a></div><div class="ttdeci">#define AP_MOTORS_HELI_RSC_THRCRV_50_DEFAULT</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00026">AP_MotorsHeli_RSC.h:26</a></div></div>
<div class="ttc" id="aAP__MotorsHeli__RSC_8h_html_a572f1a478ae3f785f932bf412fddf83a"><div class="ttname"><a href="AP__MotorsHeli__RSC_8h.html#a572f1a478ae3f785f932bf412fddf83a">AP_MOTORS_HELI_RSC_THRCRV_0_DEFAULT</a></div><div class="ttdeci">#define AP_MOTORS_HELI_RSC_THRCRV_0_DEFAULT</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00024">AP_MotorsHeli_RSC.h:24</a></div></div>
<div class="ttc" id="aAP__MotorsHeli__RSC_8h_html_a5c6ef78a7abcdc7e62c868a0e0520fd3"><div class="ttname"><a href="AP__MotorsHeli__RSC_8h.html#a5c6ef78a7abcdc7e62c868a0e0520fd3">AP_MOTORS_HELI_RSC_AROT_ENGAGE_TIME</a></div><div class="ttdeci">#define AP_MOTORS_HELI_RSC_AROT_ENGAGE_TIME</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00020">AP_MotorsHeli_RSC.h:20</a></div></div>
<div class="ttc" id="aAP__MotorsHeli__RSC_8h_html_a721ed001a96e0fcdd8fe494f21bf3961"><div class="ttname"><a href="AP__MotorsHeli__RSC_8h.html#a721ed001a96e0fcdd8fe494f21bf3961">AP_MOTORS_HELI_RSC_THRCRV_25_DEFAULT</a></div><div class="ttdeci">#define AP_MOTORS_HELI_RSC_THRCRV_25_DEFAULT</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00025">AP_MotorsHeli_RSC.h:25</a></div></div>
<div class="ttc" id="aAP__MotorsHeli__RSC_8h_html_a8d261bf00472436e2b0793ae95f28b58"><div class="ttname"><a href="AP__MotorsHeli__RSC_8h.html#a8d261bf00472436e2b0793ae95f28b58">AP_MOTORS_HELI_RSC_GOVERNOR_RANGE_DEFAULT</a></div><div class="ttdeci">#define AP_MOTORS_HELI_RSC_GOVERNOR_RANGE_DEFAULT</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00031">AP_MotorsHeli_RSC.h:31</a></div></div>
<div class="ttc" id="aAP__MotorsHeli__RSC_8h_html_aab2e1c053c6fe072fd0000c1c8ec9377"><div class="ttname"><a href="AP__MotorsHeli__RSC_8h.html#aab2e1c053c6fe072fd0000c1c8ec9377">AP_MOTORS_HELI_RSC_RUNUP_TIME</a></div><div class="ttdeci">#define AP_MOTORS_HELI_RSC_RUNUP_TIME</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00019">AP_MotorsHeli_RSC.h:19</a></div></div>
<div class="ttc" id="aAP__MotorsHeli__RSC_8h_html_ab0ed7f8f760963c0454d0380e80a1216"><div class="ttname"><a href="AP__MotorsHeli__RSC_8h.html#ab0ed7f8f760963c0454d0380e80a1216">AP_MOTORS_HELI_RSC_IDLE_DEFAULT</a></div><div class="ttdeci">#define AP_MOTORS_HELI_RSC_IDLE_DEFAULT</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00015">AP_MotorsHeli_RSC.h:15</a></div></div>
<div class="ttc" id="aAP__MotorsHeli__RSC_8h_html_ac7b43b0a749e341bfec2c4c8d3f28cfc"><div class="ttname"><a href="AP__MotorsHeli__RSC_8h.html#ac7b43b0a749e341bfec2c4c8d3f28cfc">AP_MOTORS_HELI_RSC_SETPOINT</a></div><div class="ttdeci">#define AP_MOTORS_HELI_RSC_SETPOINT</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00009">AP_MotorsHeli_RSC.h:9</a></div></div>
<div class="ttc" id="aAP__MotorsHeli__RSC_8h_html_af1dcf4d30e56da103805c431bf42c466"><div class="ttname"><a href="AP__MotorsHeli__RSC_8h.html#af1dcf4d30e56da103805c431bf42c466">AP_MOTORS_HELI_RSC_THRCRV_100_DEFAULT</a></div><div class="ttdeci">#define AP_MOTORS_HELI_RSC_THRCRV_100_DEFAULT</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00028">AP_MotorsHeli_RSC.h:28</a></div></div>
<div class="ttc" id="aAP__MotorsHeli__RSC_8h_html_af43ed21e778cfd1c1d117a96aac4749f"><div class="ttname"><a href="AP__MotorsHeli__RSC_8h.html#af43ed21e778cfd1c1d117a96aac4749f">AP_MOTORS_HELI_RSC_THRCRV_75_DEFAULT</a></div><div class="ttdeci">#define AP_MOTORS_HELI_RSC_THRCRV_75_DEFAULT</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00027">AP_MotorsHeli_RSC.h:27</a></div></div>
<div class="ttc" id="aAP__MotorsHeli__RSC_8h_html_afb216abe43d373c16d708291695b4247"><div class="ttname"><a href="AP__MotorsHeli__RSC_8h.html#afb216abe43d373c16d708291695b4247">AP_MOTORS_HELI_RSC_RAMP_TIME</a></div><div class="ttdeci">#define AP_MOTORS_HELI_RSC_RAMP_TIME</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00018">AP_MotorsHeli_RSC.h:18</a></div></div>
<div class="ttc" id="aAP__Param_8h_html_a0f9acb038a5283b964b862aea8cc5051"><div class="ttname"><a href="AP__Param_8h.html#a0f9acb038a5283b964b862aea8cc5051">AP_GROUPEND</a></div><div class="ttdeci">#define AP_GROUPEND</div><div class="ttdef"><b>Definition</b> <a href="AP__Param_8h_source.html#l00163">AP_Param.h:163</a></div></div>
<div class="ttc" id="aAP__Param_8h_html_a78a408c84f2a1bafde256ac650142e4d"><div class="ttname"><a href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a></div><div class="ttdeci">#define AP_GROUPINFO(name, idx, clazz, element, def)</div><div class="ttdef"><b>Definition</b> <a href="AP__Param_8h_source.html#l00145">AP_Param.h:145</a></div></div>
<div class="ttc" id="aAP__RPM_8h_html"><div class="ttname"><a href="AP__RPM_8h.html">AP_RPM.h</a></div></div>
<div class="ttc" id="aAP__Scripting_2generator_2src_2main_8c_html_a8d04d02fe8bb190484bba202fee18f5c"><div class="ttname"><a href="AP__Scripting_2generator_2src_2main_8c.html#a8d04d02fe8bb190484bba202fee18f5c">state</a></div><div class="ttdeci">static struct generator_state state</div><div class="ttdef"><b>Definition</b> <a href="AP__Scripting_2generator_2src_2main_8c_source.html#l00087">main.c:87</a></div></div>
<div class="ttc" id="aGCS_8h_html"><div class="ttname"><a href="GCS_8h.html">GCS.h</a></div><div class="ttdoc">Interface definition for the various Ground Control System.</div></div>
<div class="ttc" id="aGCS_8h_html_a266bfe8eda675e1092f045e93932b4a6"><div class="ttname"><a href="GCS_8h.html#a266bfe8eda675e1092f045e93932b4a6">GCS_SEND_TEXT</a></div><div class="ttdeci">#define GCS_SEND_TEXT(severity, format, args...)</div><div class="ttdef"><b>Definition</b> <a href="GCS_8h_source.html#l01349">GCS.h:1349</a></div></div>
<div class="ttc" id="aclassAP__HAL_1_1HAL_html"><div class="ttname"><a href="classAP__HAL_1_1HAL.html">AP_HAL::HAL</a></div><div class="ttdef"><b>Definition</b> <a href="HAL_8h_source.html#l00021">HAL.h:21</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html">AP_MotorsHeli_RSC</a></div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00042">AP_MotorsHeli_RSC.h:42</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_a029b8c00be23c2412faeec55adaba933"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a029b8c00be23c2412faeec55adaba933">AP_MotorsHeli_RSC::_governor_rpm</a></div><div class="ttdeci">AP_Int16 _governor_rpm</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00197">AP_MotorsHeli_RSC.h:197</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_a050369045bea413a5261d8a2b76511cb"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a050369045bea413a5261d8a2b76511cb">AP_MotorsHeli_RSC::_starting</a></div><div class="ttdeci">bool _starting</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00166">AP_MotorsHeli_RSC.h:166</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_a066c824957b46a96298fae23514fd2b5"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a066c824957b46a96298fae23514fd2b5">AP_MotorsHeli_RSC::_spooldown_complete</a></div><div class="ttdeci">bool _spooldown_complete</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00173">AP_MotorsHeli_RSC.h:173</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_a06b4a8eb3f3c0c9ab5b4069a4c17e574"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a06b4a8eb3f3c0c9ab5b4069a4c17e574">AP_MotorsHeli_RSC::_control_output</a></div><div class="ttdeci">float _control_output</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00158">AP_MotorsHeli_RSC.h:158</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_a07de7f2e07bedcff45425018318ee372"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a07de7f2e07bedcff45425018318ee372">AP_MotorsHeli_RSC::_aux_fn</a></div><div class="ttdeci">SRV_Channel::Aux_servo_function_t _aux_fn</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00152">AP_MotorsHeli_RSC.h:152</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_a0b7d49b2257ee2ee40d15611c167cf80"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a0b7d49b2257ee2ee40d15611c167cf80">AP_MotorsHeli_RSC::_bailing_out</a></div><div class="ttdeci">bool _bailing_out</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00178">AP_MotorsHeli_RSC.h:178</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_a0fefe2b33e65929df2e926aa1902eaf6"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a0fefe2b33e65929df2e926aa1902eaf6">AP_MotorsHeli_RSC::var_info</a></div><div class="ttdeci">static const struct AP_Param::GroupInfo var_info[]</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00024">AP_MotorsHeli_RSC.h:24</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_a133b68621aa2e63397451e8fe3b6c596"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a133b68621aa2e63397451e8fe3b6c596">AP_MotorsHeli_RSC::autothrottle_run</a></div><div class="ttdeci">void autothrottle_run()</div><div class="ttdef"><b>Definition</b> <a href="#l00534">AP_MotorsHeli_RSC.cpp:534</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_a14305475afe062865e7f768809a65bd1"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a14305475afe062865e7f768809a65bd1">AP_MotorsHeli_RSC::_rsc_arot_engage_time</a></div><div class="ttdeci">AP_Int8 _rsc_arot_engage_time</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00145">AP_MotorsHeli_RSC.h:145</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_a15973f14ea1331c8def95e6cde3ad1db"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a15973f14ea1331c8def95e6cde3ad1db">AP_MotorsHeli_RSC::write_rsc</a></div><div class="ttdeci">void write_rsc(float servo_out)</div><div class="ttdef"><b>Definition</b> <a href="#l00499">AP_MotorsHeli_RSC.cpp:499</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_a15f4fd29272aefc6ce9701b5c173bcee"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a15f4fd29272aefc6ce9701b5c173bcee">AP_MotorsHeli_RSC::_cooldown_time</a></div><div class="ttdeci">AP_Int16 _cooldown_time</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00203">AP_MotorsHeli_RSC.h:203</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_a1b8da4af09e651af63a6c707d7e0c902"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a1b8da4af09e651af63a6c707d7e0c902">AP_MotorsHeli_RSC::_use_bailout_ramp</a></div><div class="ttdeci">bool _use_bailout_ramp</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00171">AP_MotorsHeli_RSC.h:171</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_a2d1b08fe8799f087b6e2a9e988f62214"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a2d1b08fe8799f087b6e2a9e988f62214">AP_MotorsHeli_RSC::_thrcrv</a></div><div class="ttdeci">AP_Int16 _thrcrv[5]</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00196">AP_MotorsHeli_RSC.h:196</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_a30a21afe8ee1690d2a60e81c0b82df4c"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a30a21afe8ee1690d2a60e81c0b82df4c">AP_MotorsHeli_RSC::_desired_speed</a></div><div class="ttdeci">float _desired_speed</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00157">AP_MotorsHeli_RSC.h:157</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_a3588e09ff00219036550c233e4c9434a"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a3588e09ff00219036550c233e4c9434a">AP_MotorsHeli_RSC::_governor_fault</a></div><div class="ttdeci">bool _governor_fault</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00170">AP_MotorsHeli_RSC.h:170</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_a399ec262b9547f60aea217fdab3367d4"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a399ec262b9547f60aea217fdab3367d4">AP_MotorsHeli_RSC::_turbine_start</a></div><div class="ttdeci">bool _turbine_start</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00165">AP_MotorsHeli_RSC.h:165</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_a3a15dfa9030fc0761bb2b71c9167ed33"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a3a15dfa9030fc0761bb2b71c9167ed33">AP_MotorsHeli_RSC::_last_update_us</a></div><div class="ttdeci">uint64_t _last_update_us</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00149">AP_MotorsHeli_RSC.h:149</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_a3d10c147436ec37bff6f60308cd5903c"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a3d10c147436ec37bff6f60308cd5903c">AP_MotorsHeli_RSC::_control_mode</a></div><div class="ttdeci">RotorControlMode _control_mode</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00156">AP_MotorsHeli_RSC.h:156</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_a41e7c2ac8d0ddd1f01fd1eb63a0133a7"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a41e7c2ac8d0ddd1f01fd1eb63a0133a7">AP_MotorsHeli_RSC::governor_reset</a></div><div class="ttdeci">void governor_reset()</div><div class="ttdef"><b>Definition</b> <a href="#l00612">AP_MotorsHeli_RSC.cpp:612</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_a438d0f3ab3ec2f11b8beedf05d72dbb4"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a438d0f3ab3ec2f11b8beedf05d72dbb4">AP_MotorsHeli_RSC::_rotor_ramp_output</a></div><div class="ttdeci">float _rotor_ramp_output</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00159">AP_MotorsHeli_RSC.h:159</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_a43cd4d18aae3432980b19d5a9188fe23"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a43cd4d18aae3432980b19d5a9188fe23">AP_MotorsHeli_RSC::rotor_speed_above_critical</a></div><div class="ttdeci">bool rotor_speed_above_critical(void) const</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00132">AP_MotorsHeli_RSC.h:132</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_a44aaa05623e15100d45ec0d6ba5d89d9"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a44aaa05623e15100d45ec0d6ba5d89d9">AP_MotorsHeli_RSC::_rotor_rpm</a></div><div class="ttdeci">float _rotor_rpm</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00164">AP_MotorsHeli_RSC.h:164</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_a51c1e6ae10202b68f11b9da049406808"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a51c1e6ae10202b68f11b9da049406808">AP_MotorsHeli_RSC::_default_channel</a></div><div class="ttdeci">uint8_t _default_channel</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00153">AP_MotorsHeli_RSC.h:153</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_a54c97ba911c203578d055cf8927577d1"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a54c97ba911c203578d055cf8927577d1">AP_MotorsHeli_RSC::get_governor_compensator</a></div><div class="ttdeci">float get_governor_compensator() const</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00209">AP_MotorsHeli_RSC.h:209</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_a57f0b28d6a1b23c02c4fa8b26766f532"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a57f0b28d6a1b23c02c4fa8b26766f532">AP_MotorsHeli_RSC::_thrcrv_poly</a></div><div class="ttdeci">float _thrcrv_poly[4][4]</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00162">AP_MotorsHeli_RSC.h:162</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_a60d9f4e59f81fb5154266775434b55ee"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a60d9f4e59f81fb5154266775434b55ee">AP_MotorsHeli_RSC::_idle_throttle</a></div><div class="ttdeci">float _idle_throttle</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00179">AP_MotorsHeli_RSC.h:179</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_a77e68723634b245f5c2cb66ffc93b3a7"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a77e68723634b245f5c2cb66ffc93b3a7">AP_MotorsHeli_RSC::_governor_torque_reference</a></div><div class="ttdeci">float _governor_torque_reference</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00176">AP_MotorsHeli_RSC.h:176</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_a87cfae6a8e1787eb74a0ea5f48b9cb4f"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a87cfae6a8e1787eb74a0ea5f48b9cb4f">AP_MotorsHeli_RSC::_governor_output</a></div><div class="ttdeci">float _governor_output</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00167">AP_MotorsHeli_RSC.h:167</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_a897f34035252d1ce89f564d38ab35dea"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a897f34035252d1ce89f564d38ab35dea">AP_MotorsHeli_RSC::set_throttle_curve</a></div><div class="ttdeci">void set_throttle_curve()</div><div class="ttdef"><b>Definition</b> <a href="#l00234">AP_MotorsHeli_RSC.cpp:234</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_a8c338a29acf0a61d814af3a298f89594"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a8c338a29acf0a61d814af3a298f89594">AP_MotorsHeli_RSC::update_rotor_ramp</a></div><div class="ttdeci">void update_rotor_ramp(float rotor_ramp_input, float dt)</div><div class="ttdef"><b>Definition</b> <a href="#l00390">AP_MotorsHeli_RSC.cpp:390</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_a8e1f21565271476483e9449fbaa04654"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a8e1f21565271476483e9449fbaa04654">AP_MotorsHeli_RSC::_governor_range</a></div><div class="ttdeci">AP_Float _governor_range</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00202">AP_MotorsHeli_RSC.h:202</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_a8f17785d86c9527b3a3d868a7dd21f42"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a8f17785d86c9527b3a3d868a7dd21f42">AP_MotorsHeli_RSC::update_rotor_runup</a></div><div class="ttdeci">void update_rotor_runup(float dt)</div><div class="ttdef"><b>Definition</b> <a href="#l00431">AP_MotorsHeli_RSC.cpp:431</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_a910b3ca75d0171754e66c36bdd63cfdc"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a910b3ca75d0171754e66c36bdd63cfdc">AP_MotorsHeli_RSC::_power_slewrate</a></div><div class="ttdeci">AP_Int16 _power_slewrate</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00195">AP_MotorsHeli_RSC.h:195</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_a9380697f739256f1bc6b32ed61f98322"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a9380697f739256f1bc6b32ed61f98322">AP_MotorsHeli_RSC::get_idle_output</a></div><div class="ttdeci">float get_idle_output() const</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00207">AP_MotorsHeli_RSC.h:207</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_a94c896094d9b49bfc77e341b536b46f1"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a94c896094d9b49bfc77e341b536b46f1">AP_MotorsHeli_RSC::_rotor_runup_output</a></div><div class="ttdeci">float _rotor_runup_output</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00160">AP_MotorsHeli_RSC.h:160</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_a96030fe9edba894c9b2cb2ed39c00ac7"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a96030fe9edba894c9b2cb2ed39c00ac7">AP_MotorsHeli_RSC::_collective_in</a></div><div class="ttdeci">float _collective_in</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00163">AP_MotorsHeli_RSC.h:163</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_a99ac103562c8bc8e4ad793cc57a22a5e"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#a99ac103562c8bc8e4ad793cc57a22a5e">AP_MotorsHeli_RSC::_ramp_time</a></div><div class="ttdeci">AP_Int8 _ramp_time</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00140">AP_MotorsHeli_RSC.h:140</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_aa811c01c1afe27b1ec1ebb1386dba597"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#aa811c01c1afe27b1ec1ebb1386dba597">AP_MotorsHeli_RSC::calculate_throttlecurve</a></div><div class="ttdeci">float calculate_throttlecurve(float collective_in)</div><div class="ttdef"><b>Definition</b> <a href="#l00520">AP_MotorsHeli_RSC.cpp:520</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_ab23a1aebfd83a9e76acf076a2f15841b"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#ab23a1aebfd83a9e76acf076a2f15841b">AP_MotorsHeli_RSC::output</a></div><div class="ttdeci">void output(RotorControlState state)</div><div class="ttdef"><b>Definition</b> <a href="#l00247">AP_MotorsHeli_RSC.cpp:247</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_ac295567cd6824fbf86be7e34ec8845c0"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#ac295567cd6824fbf86be7e34ec8845c0">AP_MotorsHeli_RSC::get_output_mask</a></div><div class="ttdeci">uint32_t get_output_mask() const</div><div class="ttdef"><b>Definition</b> <a href="#l00511">AP_MotorsHeli_RSC.cpp:511</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_ac46ecbac3fbcdacd5ad214f1bd3b22ab"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#ac46ecbac3fbcdacd5ad214f1bd3b22ab">AP_MotorsHeli_RSC::_gov_bailing_out</a></div><div class="ttdeci">bool _gov_bailing_out</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00180">AP_MotorsHeli_RSC.h:180</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_ac82842d7cf52e991362c090181a50ef2"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#ac82842d7cf52e991362c090181a50ef2">AP_MotorsHeli_RSC::_governor_engage</a></div><div class="ttdeci">bool _governor_engage</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00168">AP_MotorsHeli_RSC.h:168</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_ac96116ebbbd33ea3e8bf42a8c5241c5e"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#ac96116ebbbd33ea3e8bf42a8c5241c5e">AP_MotorsHeli_RSC::get_governor_torque</a></div><div class="ttdeci">float get_governor_torque() const</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00208">AP_MotorsHeli_RSC.h:208</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_acef475a87f3a42fe394851c91890dcee"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#acef475a87f3a42fe394851c91890dcee">AP_MotorsHeli_RSC::_autorotating</a></div><div class="ttdeci">bool _autorotating</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00177">AP_MotorsHeli_RSC.h:177</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_ad14034f3abef523b48d016aef5f3fe6a"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#ad14034f3abef523b48d016aef5f3fe6a">AP_MotorsHeli_RSC::_runup_complete</a></div><div class="ttdeci">bool _runup_complete</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00161">AP_MotorsHeli_RSC.h:161</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_ad2c1b83bcacb987bd4d710429fff805e"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#ad2c1b83bcacb987bd4d710429fff805e">AP_MotorsHeli_RSC::_governor_droop_response</a></div><div class="ttdeci">AP_Float _governor_droop_response</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00200">AP_MotorsHeli_RSC.h:200</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_adceba445df02cdaac666b43bf9cb41fa"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#adceba445df02cdaac666b43bf9cb41fa">AP_MotorsHeli_RSC::_governor_ff</a></div><div class="ttdeci">AP_Float _governor_ff</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00201">AP_MotorsHeli_RSC.h:201</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_adfeff93b86ddb370b4b9162d223bb7fa"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#adfeff93b86ddb370b4b9162d223bb7fa">AP_MotorsHeli_RSC::get_critical_speed</a></div><div class="ttdeci">float get_critical_speed() const</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00206">AP_MotorsHeli_RSC.h:206</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_ae0395f872657dd9b8b45955e890bbb35"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#ae0395f872657dd9b8b45955e890bbb35">AP_MotorsHeli_RSC::_arot_idle_output</a></div><div class="ttdeci">AP_Int16 _arot_idle_output</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00144">AP_MotorsHeli_RSC.h:144</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_ae0eebf36c02ae72fa95777d7901d43a6"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#ae0eebf36c02ae72fa95777d7901d43a6">AP_MotorsHeli_RSC::_autothrottle</a></div><div class="ttdeci">bool _autothrottle</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00169">AP_MotorsHeli_RSC.h:169</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_ae547cfd9379b0064039308e778a57ae7"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#ae547cfd9379b0064039308e778a57ae7">AP_MotorsHeli_RSC::get_arot_idle_output</a></div><div class="ttdeci">float get_arot_idle_output() const</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00210">AP_MotorsHeli_RSC.h:210</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_ae7b510a50aba64e559f444159a8df85e"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#ae7b510a50aba64e559f444159a8df85e">AP_MotorsHeli_RSC::_fast_idle_timer</a></div><div class="ttdeci">float _fast_idle_timer</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00174">AP_MotorsHeli_RSC.h:174</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_aeb6143de2bc88e0540acd68349f61c73"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#aeb6143de2bc88e0540acd68349f61c73">AP_MotorsHeli_RSC::init_servo</a></div><div class="ttdeci">void init_servo()</div><div class="ttdef"><b>Definition</b> <a href="#l00225">AP_MotorsHeli_RSC.cpp:225</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_aedbcba02e003b6a77f71d6112723e28e"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#aedbcba02e003b6a77f71d6112723e28e">AP_MotorsHeli_RSC::RotorControlState</a></div><div class="ttdeci">RotorControlState</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00057">AP_MotorsHeli_RSC.h:57</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_aedbcba02e003b6a77f71d6112723e28ea18ff74f43da410c5529f7d6fca84f115"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#aedbcba02e003b6a77f71d6112723e28ea18ff74f43da410c5529f7d6fca84f115">AP_MotorsHeli_RSC::RotorControlState::ACTIVE</a></div><div class="ttdeci">@ ACTIVE</div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_aedbcba02e003b6a77f71d6112723e28ea615a46af313786fc4e349f34118be111"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#aedbcba02e003b6a77f71d6112723e28ea615a46af313786fc4e349f34118be111">AP_MotorsHeli_RSC::RotorControlState::STOP</a></div><div class="ttdeci">@ STOP</div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_aedbcba02e003b6a77f71d6112723e28eaa5daf7f2ebbba4975d61dab1c40188c7"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#aedbcba02e003b6a77f71d6112723e28eaa5daf7f2ebbba4975d61dab1c40188c7">AP_MotorsHeli_RSC::RotorControlState::IDLE</a></div><div class="ttdeci">@ IDLE</div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_af092722b4105d4a9930b098ed072fd6c"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#af092722b4105d4a9930b098ed072fd6c">AP_MotorsHeli_RSC::_governor_fault_count</a></div><div class="ttdeci">uint8_t _governor_fault_count</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00175">AP_MotorsHeli_RSC.h:175</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_af31603dd79dc8384adebd49645334073"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#af31603dd79dc8384adebd49645334073">AP_MotorsHeli_RSC::_in_autorotation</a></div><div class="ttdeci">bool _in_autorotation</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00172">AP_MotorsHeli_RSC.h:172</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_af5ad3a88652248723b4431d2c9dee51f"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#af5ad3a88652248723b4431d2c9dee51f">AP_MotorsHeli_RSC::_runup_time</a></div><div class="ttdeci">AP_Int8 _runup_time</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsHeli__RSC_8h_source.html#l00141">AP_MotorsHeli_RSC.h:141</a></div></div>
<div class="ttc" id="aclassAP__MotorsHeli__RSC_html_afcadabdd0a897bed905a1f178011d094"><div class="ttname"><a href="classAP__MotorsHeli__RSC.html#afcadabdd0a897bed905a1f178011d094">AP_MotorsHeli_RSC::get_rotor_speed</a></div><div class="ttdeci">float get_rotor_speed() const</div><div class="ttdef"><b>Definition</b> <a href="#l00491">AP_MotorsHeli_RSC.cpp:491</a></div></div>
<div class="ttc" id="aclassAP__RPM_html"><div class="ttname"><a href="classAP__RPM.html">AP_RPM</a></div><div class="ttdef"><b>Definition</b> <a href="AP__RPM_8h_source.html#l00029">AP_RPM.h:30</a></div></div>
<div class="ttc" id="aclassAP__RPM_html_aa6da697806e00e9173c36ed0c97cf175"><div class="ttname"><a href="classAP__RPM.html#aa6da697806e00e9173c36ed0c97cf175">AP_RPM::get_rpm</a></div><div class="ttdeci">bool get_rpm(uint8_t instance, float &amp;rpm_value) const</div><div class="ttdef"><b>Definition</b> <a href="AP__RPM_8cpp_source.html#l00252">AP_RPM.cpp:252</a></div></div>
<div class="ttc" id="aclassAP__RPM_html_aabe92c25c7c97521568e00edcd51903c"><div class="ttname"><a href="classAP__RPM.html#aabe92c25c7c97521568e00edcd51903c">AP_RPM::get_singleton</a></div><div class="ttdeci">static AP_RPM * get_singleton()</div><div class="ttdef"><b>Definition</b> <a href="AP__RPM_8h_source.html#l00102">AP_RPM.h:102</a></div></div>
<div class="ttc" id="aclassSRV__Channels_html_a06cf1d6d4bd8b1971c333184bb4bcb55"><div class="ttname"><a href="classSRV__Channels.html#a06cf1d6d4bd8b1971c333184bb4bcb55">SRV_Channels::set_output_scaled</a></div><div class="ttdeci">static void set_output_scaled(SRV_Channel::Aux_servo_function_t function, float value)</div><div class="ttdef"><b>Definition</b> <a href="SRV__Channel__aux_8cpp_source.html#l00592">SRV_Channel_aux.cpp:592</a></div></div>
<div class="ttc" id="aclassSRV__Channels_html_a97577ca02c12e3b851cd5d563d32b640"><div class="ttname"><a href="classSRV__Channels.html#a97577ca02c12e3b851cd5d563d32b640">SRV_Channels::set_aux_channel_default</a></div><div class="ttdeci">static bool set_aux_channel_default(SRV_Channel::Aux_servo_function_t function, uint8_t channel)</div><div class="ttdef"><b>Definition</b> <a href="SRV__Channel__aux_8cpp_source.html#l00540">SRV_Channel_aux.cpp:540</a></div></div>
<div class="ttc" id="aclassSRV__Channels_html_acdb0bd5d2defc4c7bcb51137f15e289d"><div class="ttname"><a href="classSRV__Channels.html#acdb0bd5d2defc4c7bcb51137f15e289d">SRV_Channels::get_output_channel_mask</a></div><div class="ttdeci">static uint32_t get_output_channel_mask(SRV_Channel::Aux_servo_function_t function)</div><div class="ttdef"><b>Definition</b> <a href="SRV__Channel__aux_8cpp_source.html#l00630">SRV_Channel_aux.cpp:630</a></div></div>
<div class="ttc" id="aminimal_8cpp_html_a938675a93ca92045b225831be68de65a"><div class="ttname"><a href="minimal_8cpp.html#a938675a93ca92045b225831be68de65a">servo_out</a></div><div class="ttdeci">uint16_t servo_out[16]</div><div class="ttdef"><b>Definition</b> <a href="minimal_8cpp_source.html#l00025">minimal.cpp:25</a></div></div>
<div class="ttc" id="amonocypher_8cpp_html_afa99ec4acc4ecb2dc3c2d05da15d0e3f"><div class="ttname"><a href="monocypher_8cpp.html#afa99ec4acc4ecb2dc3c2d05da15d0e3f">MAX</a></div><div class="ttdeci">#define MAX(a, b)</div><div class="ttdef"><b>Definition</b> <a href="monocypher_8cpp_source.html#l00072">monocypher.cpp:72</a></div></div>
<div class="ttc" id="anamespaceAP__HAL_html_a7aa0ce7625c9680e30ff4a99940907a5"><div class="ttname"><a href="namespaceAP__HAL.html#a7aa0ce7625c9680e30ff4a99940907a5">AP_HAL::micros64</a></div><div class="ttdeci">uint64_t micros64()</div><div class="ttdef"><b>Definition</b> <a href="AP__HAL__ChibiOS_2system_8cpp_source.html#l00387">system.cpp:387</a></div></div>
<div class="ttc" id="aspline5_8cpp_html_a612a0aade79b929f0031b3167ebedf9b"><div class="ttname"><a href="spline5_8cpp.html#a612a0aade79b929f0031b3167ebedf9b">splinterp5</a></div><div class="ttdeci">void splinterp5(const float x[5], float out[4][4])</div><div class="ttdef"><b>Definition</b> <a href="spline5_8cpp_source.html#l00027">spline5.cpp:27</a></div></div>
<div class="ttc" id="astructAP__Param_1_1GroupInfo_html"><div class="ttname"><a href="structAP__Param_1_1GroupInfo.html">AP_Param::GroupInfo</a></div><div class="ttdef"><b>Definition</b> <a href="AP__Param_8h_source.html#l00199">AP_Param.h:199</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Mar 22 2024 16:14:14 for APM:Libraries by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
