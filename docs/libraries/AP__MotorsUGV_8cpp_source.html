<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>APM:Libraries: libraries/AR_Motors/AP_MotorsUGV.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">APM:Libraries
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_bc0718b08fb2015b8e59c47b2805f60c.html">libraries</a></li><li class="navelem"><a class="el" href="dir_09458369f5a9d651b613d40ac468002d.html">AR_Motors</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle"><div class="title">AP_MotorsUGV.cpp</div></div>
</div><!--header-->
<div class="contents">
<a href="AP__MotorsUGV_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">/*</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment">   This program is free software: you can redistribute it and/or modify</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment">   it under the terms of the GNU General Public License as published by</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="comment">   the Free Software Foundation, either version 3 of the License, or</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="comment">   (at your option) any later version.</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="comment">   This program is distributed in the hope that it will be useful,</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="comment">   but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="comment">   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="comment">   GNU General Public License for more details.</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="comment">   You should have received a copy of the GNU General Public License</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="comment">   along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="comment"> */</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span> </div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="preprocessor">#include &lt;<a class="code" href="AP__HAL_8h.html">AP_HAL/AP_HAL.h</a>&gt;</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="preprocessor">#include &lt;<a class="code" href="AP__Math_8h.html">AP_Math/AP_Math.h</a>&gt;</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="preprocessor">#include &lt;<a class="code" href="SRV__Channel_8h.html">SRV_Channel/SRV_Channel.h</a>&gt;</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="preprocessor">#include &lt;<a class="code" href="GCS_8h.html">GCS_MAVLink/GCS.h</a>&gt;</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="preprocessor">#include &quot;<a class="code" href="AP__MotorsUGV_8h.html">AP_MotorsUGV.h</a>&quot;</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="preprocessor">#include &lt;<a class="code" href="AP__Relay_8h.html">AP_Relay/AP_Relay.h</a>&gt;</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span> </div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno"><a class="line" href="AP__MotorsUGV_8cpp.html#a458215e61949d9180bc820b5eff66d0b">   21</a></span><span class="preprocessor">#define SERVO_MAX 4500  </span><span class="comment">// This value represents 45 degrees and is just an arbitrary representation of servo max travel.</span></div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span> </div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span><span class="keyword">extern</span> <span class="keyword">const</span> <a class="code hl_class" href="classAP__HAL_1_1HAL.html">AP_HAL::HAL</a>&amp; <a class="code hl_variable" href="AP__MotorsUGV_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>;</div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span> </div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span><span class="comment">// singleton instance</span></div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span><a class="code hl_class" href="classAP__MotorsUGV.html">AP_MotorsUGV</a> *<a class="code hl_variable" href="classAP__MotorsUGV.html#a5b611f284a2c2cd3e9b6aaf98f10c74b">AP_MotorsUGV::_singleton</a>;</div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span> </div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span><span class="comment">// parameters for the motor class</span></div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span><span class="keyword">const</span> <a class="code hl_struct" href="structAP__Param_1_1GroupInfo.html">AP_Param::GroupInfo</a> <a class="code hl_variable" href="classAP__MotorsUGV.html#ab1d1490b3786f9b000f48cb3ecea6b1b">AP_MotorsUGV::var_info</a>[] = {</div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span>    <span class="comment">// @Param: PWM_TYPE</span></div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span>    <span class="comment">// @DisplayName: Motor Output PWM type</span></div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span>    <span class="comment">// @Description: This selects the output PWM type as regular PWM, OneShot, Brushed motor support using PWM (duty cycle) with separated direction signal, Brushed motor support with separate throttle and direction PWM (duty cyle)</span></div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span>    <span class="comment">// @Values: 0:Normal,1:OneShot,2:OneShot125,3:BrushedWithRelay,4:BrushedBiPolar,5:DShot150,6:DShot300,7:DShot600,8:DShot1200</span></div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span>    <span class="comment">// @RebootRequired: True</span></div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;PWM_TYPE&quot;</span>, 1, <a class="code hl_class" href="classAP__MotorsUGV.html">AP_MotorsUGV</a>, _pwm_type, PWM_TYPE_NORMAL),</div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span> </div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span>    <span class="comment">// @Param: PWM_FREQ</span></div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span>    <span class="comment">// @DisplayName: Motor Output PWM freq for brushed motors</span></div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span>    <span class="comment">// @Description: Motor Output PWM freq for brushed motors</span></div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span>    <span class="comment">// @Units: kHz</span></div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span>    <span class="comment">// @Range: 1 20</span></div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span>    <span class="comment">// @Increment: 1</span></div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span>    <span class="comment">// @RebootRequired: True</span></div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;PWM_FREQ&quot;</span>, 2, <a class="code hl_class" href="classAP__MotorsUGV.html">AP_MotorsUGV</a>, _pwm_freq, 16),</div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span> </div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span>    <span class="comment">// @Param: SAFE_DISARM</span></div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span>    <span class="comment">// @DisplayName: Motor PWM output disabled when disarmed</span></div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span>    <span class="comment">// @Description: Disables motor PWM output when disarmed</span></div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span>    <span class="comment">// @Values: 0:PWM enabled while disarmed, 1:PWM disabled while disarmed</span></div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;SAFE_DISARM&quot;</span>, 3, <a class="code hl_class" href="classAP__MotorsUGV.html">AP_MotorsUGV</a>, _disarm_disable_pwm, 0),</div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span> </div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span>    <span class="comment">// @Param: THR_MIN</span></div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span>    <span class="comment">// @DisplayName: Throttle minimum</span></div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>    <span class="comment">// @Description: Throttle minimum percentage the autopilot will apply. This is useful for handling a deadzone around low throttle and for preventing internal combustion motors cutting out during missions.</span></div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span>    <span class="comment">// @Units: %</span></div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span>    <span class="comment">// @Range: 0 20</span></div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>    <span class="comment">// @Increment: 1</span></div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;THR_MIN&quot;</span>, 5, <a class="code hl_class" href="classAP__MotorsUGV.html">AP_MotorsUGV</a>, _throttle_min, 0),</div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span> </div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>    <span class="comment">// @Param: THR_MAX</span></div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>    <span class="comment">// @DisplayName: Throttle maximum</span></div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span>    <span class="comment">// @Description: Throttle maximum percentage the autopilot will apply. This can be used to prevent overheating an ESC or motor on an electric rover</span></div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>    <span class="comment">// @Units: %</span></div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span>    <span class="comment">// @Range: 30 100</span></div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>    <span class="comment">// @Increment: 1</span></div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;THR_MAX&quot;</span>, 6, <a class="code hl_class" href="classAP__MotorsUGV.html">AP_MotorsUGV</a>, _throttle_max, 100),</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span> </div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>    <span class="comment">// @Param: SLEWRATE</span></div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>    <span class="comment">// @DisplayName: Throttle slew rate</span></div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>    <span class="comment">// @Description: Throttle slew rate as a percentage of total range per second. A value of 100 allows the motor to change over its full range in one second.  A value of zero disables the limit.  Note some NiMH powered rovers require a lower setting of 40 to reduce current demand to avoid brownouts.</span></div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>    <span class="comment">// @Units: %/s</span></div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>    <span class="comment">// @Range: 0 1000</span></div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>    <span class="comment">// @Increment: 1</span></div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;SLEWRATE&quot;</span>, 8, <a class="code hl_class" href="classAP__MotorsUGV.html">AP_MotorsUGV</a>, _slew_rate, 100),</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span> </div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>    <span class="comment">// @Param: THST_EXPO</span></div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>    <span class="comment">// @DisplayName: Thrust Curve Expo</span></div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>    <span class="comment">// @Description: Thrust curve exponent (-1 to +1 with 0 being linear)</span></div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>    <span class="comment">// @Range: -1.0 1.0</span></div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;THST_EXPO&quot;</span>, 9, <a class="code hl_class" href="classAP__MotorsUGV.html">AP_MotorsUGV</a>, _thrust_curve_expo, 0.0f),</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span> </div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>    <span class="comment">// 10 was VEC_THR_BASE</span></div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span> </div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>    <span class="comment">// @Param: SPD_SCA_BASE</span></div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>    <span class="comment">// @DisplayName: Motor speed scaling base speed</span></div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>    <span class="comment">// @Description: Speed above which steering is scaled down when using regular steering/throttle vehicles.  zero to disable speed scaling</span></div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>    <span class="comment">// @Units: m/s</span></div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>    <span class="comment">// @Range: 0 10</span></div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;SPD_SCA_BASE&quot;</span>, 11, <a class="code hl_class" href="classAP__MotorsUGV.html">AP_MotorsUGV</a>, _speed_scale_base, 1.0f),</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span> </div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>    <span class="comment">// @Param: STR_THR_MIX</span></div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>    <span class="comment">// @DisplayName: Motor steering vs throttle prioritisation</span></div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span>    <span class="comment">// @Description: Steering vs Throttle priorisation.  Higher numbers prioritise steering, lower numbers prioritise throttle.  Only valid for Skid Steering vehicles</span></div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>    <span class="comment">// @Range: 0.2 1.0</span></div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;STR_THR_MIX&quot;</span>, 12, <a class="code hl_class" href="classAP__MotorsUGV.html">AP_MotorsUGV</a>, _steering_throttle_mix, 0.5f),</div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span> </div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>    <span class="comment">// @Param: VEC_ANGLEMAX</span></div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>    <span class="comment">// @DisplayName: Vector thrust angle max</span></div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>    <span class="comment">// @Description: The angle between steering&#39;s middle position and maximum position when using vectored thrust (boats only)</span></div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>    <span class="comment">// @Units: deg</span></div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>    <span class="comment">// @Range: 0 90</span></div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;VEC_ANGLEMAX&quot;</span>, 13, <a class="code hl_class" href="classAP__MotorsUGV.html">AP_MotorsUGV</a>, _vector_angle_max, 0.0f),</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span> </div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>    <span class="comment">// @Param: THST_ASYM</span></div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>    <span class="comment">// @DisplayName: Motor Thrust Asymmetry</span></div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>    <span class="comment">// @Description: Thrust Asymetry. Used for skid-steering. 2.0 means your motors move twice as fast forward than they do backwards.</span></div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>    <span class="comment">// @Range: 1.0 10.0</span></div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;THST_ASYM&quot;</span>, 14, <a class="code hl_class" href="classAP__MotorsUGV.html">AP_MotorsUGV</a>, _thrust_asymmetry, 1.0f),</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span> </div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>    <a class="code hl_define" href="AP__Param_8h.html#a0f9acb038a5283b964b862aea8cc5051">AP_GROUPEND</a></div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>};</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span> </div>
<div class="foldopen" id="foldopen00124" data-start="{" data-end="}">
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno"><a class="line" href="classAP__MotorsUGV.html#a99fd777fbb4bd462c5446991b96f68f9">  124</a></span><a class="code hl_function" href="classAP__MotorsUGV.html#a99fd777fbb4bd462c5446991b96f68f9">AP_MotorsUGV::AP_MotorsUGV</a>(<a class="code hl_class" href="classAP__WheelRateControl.html">AP_WheelRateControl</a>&amp; rate_controller) :</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>    _rate_controller(rate_controller)</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>{</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>    <a class="code hl_function" href="classAP__Param.html#a5f6dcfce1c0a79cf5bd81283e22f3201">AP_Param::setup_object_defaults</a>(<span class="keyword">this</span>, var_info);</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>    <a class="code hl_variable" href="classAP__MotorsUGV.html#a5b611f284a2c2cd3e9b6aaf98f10c74b">_singleton</a> = <span class="keyword">this</span>;</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>}</div>
</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span> </div>
<div class="foldopen" id="foldopen00131" data-start="{" data-end="}">
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno"><a class="line" href="classAP__MotorsUGV.html#a1c5e16c084e3a1b2255bdfea8a7efb71">  131</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classAP__MotorsUGV.html#a1c5e16c084e3a1b2255bdfea8a7efb71">AP_MotorsUGV::init</a>(uint8_t frtype)</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>{</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>    <a class="code hl_variable" href="classAP__MotorsUGV.html#a8fc45391d0e3ca2206741af6cc314b53">_frame_type</a> = <a class="code hl_enumeration" href="classAP__MotorsUGV.html#a39112be7cfaa9679ae45c5014aeb63bc">frame_type</a>(frtype);</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span> </div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>    <span class="comment">// setup servo output</span></div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>    <a class="code hl_function" href="classAP__MotorsUGV.html#a702499ded67a098a022e3457279c30db">setup_servo_output</a>();</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span> </div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>    <span class="comment">// setup pwm type</span></div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>    <a class="code hl_function" href="classAP__MotorsUGV.html#ad6bff94ef4f16c46677ffdda08d7c4ae">setup_pwm_type</a>();</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span> </div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>    <span class="comment">// set safety output</span></div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>    <a class="code hl_function" href="classAP__MotorsUGV.html#ab9980d91aa26e0e8c4ccac7f666e2fe3">setup_safety_output</a>();</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span> </div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>    <span class="comment">// setup for omni vehicles</span></div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__MotorsUGV.html#a8fc45391d0e3ca2206741af6cc314b53">_frame_type</a> != <a class="code hl_enumvalue" href="classAP__MotorsUGV.html#a39112be7cfaa9679ae45c5014aeb63bca32848fe6cc0e74cad4866a95e214cc48">FRAME_TYPE_UNDEFINED</a>) {</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>        <a class="code hl_function" href="classAP__MotorsUGV.html#abd435bb6c1dfb06e54efd524199e875f">setup_omni</a>();</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>    }</div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>}</div>
</div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span> </div>
<div class="foldopen" id="foldopen00150" data-start="{" data-end="}">
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno"><a class="line" href="classAP__MotorsUGV.html#ad170a29352c1d547b3602f2f8e644cbe">  150</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classAP__MotorsUGV.html#ad170a29352c1d547b3602f2f8e644cbe">AP_MotorsUGV::get_legacy_relay_index</a>(int8_t &amp;index1, int8_t &amp;index2, int8_t &amp;index3, int8_t &amp;index4)<span class="keyword"> const</span></div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span><span class="keyword"></span>{</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__MotorsUGV.html#ab33a40ca42efb7032c3abb8e57721aa4">_pwm_type</a> != <a class="code hl_enumvalue" href="classAP__MotorsUGV.html#a27611cd34d855dc865aeb7c9cd9d6ddaac8189d0426c8a7f5b318116b344b19ce">PWM_TYPE_BRUSHED_WITH_RELAY</a>) {</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>        <span class="comment">// Relays only used if PWM type is set to brushed with relay</span></div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>    }</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span> </div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>    <span class="comment">// First relay is always used, throttle, throttle left or motor 1</span></div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>    index1 = 0;</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span> </div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>    <span class="comment">// Second relay is used for right throttle on skid steer and motor 2 for omni</span></div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="classAP__MotorsUGV.html#a3c13ea4a9949243234dce823c2fa961d">have_skid_steering</a>()) {</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>        index2 = 1;</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>    }</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span> </div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>    <span class="comment">// Omni can have a variable number of motors</span></div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="classAP__MotorsUGV.html#a40780e22d82105192d5adae466b4c461">is_omni</a>()) {</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>        <span class="comment">// Omni has at least 3 motors</span></div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>        index2 = 2;</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__MotorsUGV.html#a435c1d9805d846f9d6989d65c0203697">_motors_num</a> &gt;= 4) {</div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>            index2 = 3;</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>        }</div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>    }</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span> </div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>}</div>
</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span> </div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span><span class="comment">// setup output in case of main CPU failure</span></div>
<div class="foldopen" id="foldopen00178" data-start="{" data-end="}">
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno"><a class="line" href="classAP__MotorsUGV.html#ab9980d91aa26e0e8c4ccac7f666e2fe3">  178</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classAP__MotorsUGV.html#ab9980d91aa26e0e8c4ccac7f666e2fe3">AP_MotorsUGV::setup_safety_output</a>()</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>{</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__MotorsUGV.html#ab33a40ca42efb7032c3abb8e57721aa4">_pwm_type</a> == <a class="code hl_enumvalue" href="classAP__MotorsUGV.html#a27611cd34d855dc865aeb7c9cd9d6ddaac8189d0426c8a7f5b318116b344b19ce">PWM_TYPE_BRUSHED_WITH_RELAY</a>) {</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>        <span class="comment">// set trim to min to set duty cycle range (0 - 100%) to servo range</span></div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>        <span class="comment">// ignore servo revese flag, it is used by the relay</span></div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>        <a class="code hl_function" href="classSRV__Channels.html#a8a1fa528af872fbd9070367dbd977484">SRV_Channels::set_trim_to_min_for</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a2b2f8365b3776f0a588082805cd9acbe">SRV_Channel::k_throttle</a>, <span class="keyword">true</span>);</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>        <a class="code hl_function" href="classSRV__Channels.html#a8a1fa528af872fbd9070367dbd977484">SRV_Channels::set_trim_to_min_for</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a44f85b5c346aea6379642a4970f0a0a2">SRV_Channel::k_throttleLeft</a>, <span class="keyword">true</span>);</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>        <a class="code hl_function" href="classSRV__Channels.html#a8a1fa528af872fbd9070367dbd977484">SRV_Channels::set_trim_to_min_for</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a5ab419baae8c0128be85cf73b068eeef">SRV_Channel::k_throttleRight</a>, <span class="keyword">true</span>);</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>    }</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span> </div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>    <span class="comment">// stop sending pwm if main CPU fails</span></div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>    <a class="code hl_function" href="classSRV__Channels.html#a9afbece0e8571daa8d682e287f24191f">SRV_Channels::set_failsafe_limit</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a2b2f8365b3776f0a588082805cd9acbe">SRV_Channel::k_throttle</a>, <a class="code hl_enumvalue" href="classSRV__Channel.html#a86fdf4fa1eaa8f844eccb555359aa129a5441ed3109cdb5a732375bf05a74e111">SRV_Channel::Limit::ZERO_PWM</a>);</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>    <a class="code hl_function" href="classSRV__Channels.html#a9afbece0e8571daa8d682e287f24191f">SRV_Channels::set_failsafe_limit</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a44f85b5c346aea6379642a4970f0a0a2">SRV_Channel::k_throttleLeft</a>, <a class="code hl_enumvalue" href="classSRV__Channel.html#a86fdf4fa1eaa8f844eccb555359aa129a5441ed3109cdb5a732375bf05a74e111">SRV_Channel::Limit::ZERO_PWM</a>);</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>    <a class="code hl_function" href="classSRV__Channels.html#a9afbece0e8571daa8d682e287f24191f">SRV_Channels::set_failsafe_limit</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a5ab419baae8c0128be85cf73b068eeef">SRV_Channel::k_throttleRight</a>, <a class="code hl_enumvalue" href="classSRV__Channel.html#a86fdf4fa1eaa8f844eccb555359aa129a5441ed3109cdb5a732375bf05a74e111">SRV_Channel::Limit::ZERO_PWM</a>);</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>}</div>
</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span> </div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span><span class="comment">// setup servo output ranges</span></div>
<div class="foldopen" id="foldopen00195" data-start="{" data-end="}">
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno"><a class="line" href="classAP__MotorsUGV.html#a702499ded67a098a022e3457279c30db">  195</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classAP__MotorsUGV.html#a702499ded67a098a022e3457279c30db">AP_MotorsUGV::setup_servo_output</a>()</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>{</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>    <span class="comment">// k_steering are limited to -45;45 degree</span></div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>    <a class="code hl_function" href="classSRV__Channels.html#a7522c0412b2174273d656caec3c55317">SRV_Channels::set_angle</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a17b07ea85c29e2b07e8ab73568cf4fd2">SRV_Channel::k_steering</a>, <a class="code hl_define" href="AP__MotorsUGV_8cpp.html#a458215e61949d9180bc820b5eff66d0b">SERVO_MAX</a>);</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span> </div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>    <span class="comment">// k_throttle are in power percent so -100 ... 100</span></div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>    <a class="code hl_function" href="classSRV__Channels.html#a7522c0412b2174273d656caec3c55317">SRV_Channels::set_angle</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a2b2f8365b3776f0a588082805cd9acbe">SRV_Channel::k_throttle</a>, 100);</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span> </div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>    <span class="comment">// skid steering left/right throttle as -1000 to 1000 values</span></div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>    <a class="code hl_function" href="classSRV__Channels.html#a7522c0412b2174273d656caec3c55317">SRV_Channels::set_angle</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a44f85b5c346aea6379642a4970f0a0a2">SRV_Channel::k_throttleLeft</a>,  1000);</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>    <a class="code hl_function" href="classSRV__Channels.html#a7522c0412b2174273d656caec3c55317">SRV_Channels::set_angle</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a5ab419baae8c0128be85cf73b068eeef">SRV_Channel::k_throttleRight</a>, 1000);</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span> </div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>    <span class="comment">// omni motors set in power percent so -100 ... 100</span></div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>    <span class="keywordflow">for</span> (uint8_t i=0; i&lt;<a class="code hl_variable" href="classAP__MotorsUGV.html#a57fb04e0223dc86ef38e04e0190c19ed">AP_MOTORS_NUM_MOTORS_MAX</a>; i++) {</div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>        <a class="code hl_enumeration" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68">SRV_Channel::Aux_servo_function_t</a> function = <a class="code hl_function" href="classSRV__Channels.html#acab9e1aba9fcbde6e598169af5b3181f">SRV_Channels::get_motor_function</a>(i);</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>        <a class="code hl_function" href="classSRV__Channels.html#a7522c0412b2174273d656caec3c55317">SRV_Channels::set_angle</a>(function, 100);</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span>    }</div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span> </div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>    <span class="comment">// mainsail range from 0 to 100</span></div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>    <a class="code hl_function" href="classSRV__Channels.html#adba039e2df3bb2c744f8b8590581827f">SRV_Channels::set_range</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68ae5af5177edb37a7244e0be6c9473efe5">SRV_Channel::k_mainsail_sheet</a>, 100);</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>    <span class="comment">// wing sail -100 to 100</span></div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>    <a class="code hl_function" href="classSRV__Channels.html#a7522c0412b2174273d656caec3c55317">SRV_Channels::set_angle</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a82f89fbb32946473c1cef4433c0e0218">SRV_Channel::k_wingsail_elevator</a>, 100);</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>    <span class="comment">// mast rotation -100 to 100</span></div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>    <a class="code hl_function" href="classSRV__Channels.html#a7522c0412b2174273d656caec3c55317">SRV_Channels::set_angle</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a2840d80d2769326d143edbf53834d269">SRV_Channel::k_mast_rotation</a>, 100);</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span> </div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>}</div>
</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span> </div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span><span class="comment">// set steering as a value from -4500 to +4500</span></div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span><span class="comment">//   apply_scaling should be set to false for manual modes where</span></div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span><span class="comment">//   no scaling by speed or angle should be performed</span></div>
<div class="foldopen" id="foldopen00225" data-start="{" data-end="}">
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno"><a class="line" href="classAP__MotorsUGV.html#ad962f64af80f94519b7e5de9f2973046">  225</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classAP__MotorsUGV.html#ad962f64af80f94519b7e5de9f2973046">AP_MotorsUGV::set_steering</a>(<span class="keywordtype">float</span> steering, <span class="keywordtype">bool</span> apply_scaling)</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>{</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>    <a class="code hl_variable" href="classAP__MotorsUGV.html#a44a5b389f5f47e42bffac0dc5acb4f6b">_steering</a> = steering;</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>    <a class="code hl_variable" href="classAP__MotorsUGV.html#a863105d4e480d2f916b545076db31bf2">_scale_steering</a> = apply_scaling;</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>}</div>
</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span> </div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span><span class="comment">// set throttle as a value from -100 to 100</span></div>
<div class="foldopen" id="foldopen00232" data-start="{" data-end="}">
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno"><a class="line" href="classAP__MotorsUGV.html#ad51931763e093262c254c2338e92f813">  232</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classAP__MotorsUGV.html#ad51931763e093262c254c2338e92f813">AP_MotorsUGV::set_throttle</a>(<span class="keywordtype">float</span> throttle)</div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>{</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>    <span class="comment">// only allow setting throttle if armed</span></div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="AC__AttitudeControl_8cpp.html#a240c1a4ae2a70d1855f91e4a0b1ac938">hal</a>.<a class="code hl_variable" href="classAP__HAL_1_1HAL.html#a9337a60383f4264fa96a20dbe43a4e2e">util</a>-&gt;<a class="code hl_function" href="classAP__HAL_1_1Util.html#a287a2b82fa30b92c8d52aad61d4d27b7">get_soft_armed</a>()) {</div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>    }</div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span> </div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>    <span class="comment">// check throttle is between -_throttle_max and  +_throttle_max</span></div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>    <a class="code hl_variable" href="classAP__MotorsUGV.html#a92a62eaaf0df1e20247b06fe456f298c">_throttle</a> = <a class="code hl_define" href="AP__Math_8h.html#a5256308fd38a7098b8f95607aa56888f">constrain_float</a>(throttle, -<a class="code hl_variable" href="classAP__MotorsUGV.html#a1899ae8b286e235041609a84cc0f9d8d">_throttle_max</a>, <a class="code hl_variable" href="classAP__MotorsUGV.html#a1899ae8b286e235041609a84cc0f9d8d">_throttle_max</a>);</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>}</div>
</div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span> </div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span><span class="comment">// set lateral input as a value from -100 to +100</span></div>
<div class="foldopen" id="foldopen00244" data-start="{" data-end="}">
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno"><a class="line" href="classAP__MotorsUGV.html#a32f1794ebf9887243f5c869bfbe834d3">  244</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classAP__MotorsUGV.html#a32f1794ebf9887243f5c869bfbe834d3">AP_MotorsUGV::set_lateral</a>(<span class="keywordtype">float</span> lateral)</div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span>{</div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>    <a class="code hl_variable" href="classAP__MotorsUGV.html#afb6ba2ed5993134dd5be96bd52c15f41">_lateral</a> = <a class="code hl_define" href="AP__Math_8h.html#a5256308fd38a7098b8f95607aa56888f">constrain_float</a>(lateral, -100.0f, 100.0f);</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>}</div>
</div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span> </div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span><span class="comment">// set roll input as a value from -1 to +1</span></div>
<div class="foldopen" id="foldopen00250" data-start="{" data-end="}">
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno"><a class="line" href="classAP__MotorsUGV.html#ad13aed5dbfc0214c35bb24b777b4ea7e">  250</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classAP__MotorsUGV.html#ad13aed5dbfc0214c35bb24b777b4ea7e">AP_MotorsUGV::set_roll</a>(<span class="keywordtype">float</span> roll)</div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>{</div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>    <a class="code hl_variable" href="classAP__MotorsUGV.html#a58e5a82ba46fdc153af9f218f82ec537">_roll</a> = <a class="code hl_define" href="AP__Math_8h.html#a5256308fd38a7098b8f95607aa56888f">constrain_float</a>(roll, -1.0f, 1.0f);</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>}</div>
</div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span> </div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span><span class="comment">// set pitch input as a value from -1 to +1</span></div>
<div class="foldopen" id="foldopen00256" data-start="{" data-end="}">
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno"><a class="line" href="classAP__MotorsUGV.html#a593a56481b5ed86f43e6286659c78766">  256</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classAP__MotorsUGV.html#a593a56481b5ed86f43e6286659c78766">AP_MotorsUGV::set_pitch</a>(<span class="keywordtype">float</span> pitch)</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>{</div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>    <a class="code hl_variable" href="classAP__MotorsUGV.html#a71c35953b77d745524e249daeb4859a4">_pitch</a> = <a class="code hl_define" href="AP__Math_8h.html#a5256308fd38a7098b8f95607aa56888f">constrain_float</a>(pitch, -1.0f, 1.0f);</div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>}</div>
</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span> </div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span><span class="comment">// set walking_height input as a value from -1 to +1</span></div>
<div class="foldopen" id="foldopen00262" data-start="{" data-end="}">
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno"><a class="line" href="classAP__MotorsUGV.html#ac5a7d82e985adab5654108bcc8d8a8d4">  262</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classAP__MotorsUGV.html#ac5a7d82e985adab5654108bcc8d8a8d4">AP_MotorsUGV::set_walking_height</a>(<span class="keywordtype">float</span> walking_height)</div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>{</div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>    <a class="code hl_variable" href="classAP__MotorsUGV.html#a6eacfd575127dce150089c5ece89a253">_walking_height</a> = <a class="code hl_define" href="AP__Math_8h.html#a5256308fd38a7098b8f95607aa56888f">constrain_float</a>(walking_height, -1.0f, 1.0f);</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>}</div>
</div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span> </div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span><span class="comment">// set mainsail input as a value from 0 to 100</span></div>
<div class="foldopen" id="foldopen00268" data-start="{" data-end="}">
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno"><a class="line" href="classAP__MotorsUGV.html#a0bba981606c09e5759b6f3c653e1f2aa">  268</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classAP__MotorsUGV.html#a0bba981606c09e5759b6f3c653e1f2aa">AP_MotorsUGV::set_mainsail</a>(<span class="keywordtype">float</span> mainsail)</div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>{</div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>    <a class="code hl_variable" href="classAP__MotorsUGV.html#a1ffd5739c17022c664080ea128810fd3">_mainsail</a> = <a class="code hl_define" href="AP__Math_8h.html#a5256308fd38a7098b8f95607aa56888f">constrain_float</a>(mainsail, 0.0f, 100.0f);</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>}</div>
</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span> </div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span><span class="comment">// set wingsail input as a value from -100 to 100</span></div>
<div class="foldopen" id="foldopen00274" data-start="{" data-end="}">
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno"><a class="line" href="classAP__MotorsUGV.html#ab2c9f7d76c85a5899e7ed8d24ec9beda">  274</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classAP__MotorsUGV.html#ab2c9f7d76c85a5899e7ed8d24ec9beda">AP_MotorsUGV::set_wingsail</a>(<span class="keywordtype">float</span> wingsail)</div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span>{</div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>    <a class="code hl_variable" href="classAP__MotorsUGV.html#a297e34207c9bc335318c9f1698b7ee85">_wingsail</a> = <a class="code hl_define" href="AP__Math_8h.html#a5256308fd38a7098b8f95607aa56888f">constrain_float</a>(wingsail, -100.0f, 100.0f);</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>}</div>
</div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span> </div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span><span class="comment">// set mast rotation input as a value from -100 to 100</span></div>
<div class="foldopen" id="foldopen00280" data-start="{" data-end="}">
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno"><a class="line" href="classAP__MotorsUGV.html#ad57aa417a039591759e5430d456ec4aa">  280</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classAP__MotorsUGV.html#ad57aa417a039591759e5430d456ec4aa">AP_MotorsUGV::set_mast_rotation</a>(<span class="keywordtype">float</span> mast_rotation)</div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span>{</div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>    <a class="code hl_variable" href="classAP__MotorsUGV.html#a1236ffe326fed8e0299a2e67e65d9dc7">_mast_rotation</a> = <a class="code hl_define" href="AP__Math_8h.html#a5256308fd38a7098b8f95607aa56888f">constrain_float</a>(mast_rotation, -100.0f, 100.0f);</div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span>}</div>
</div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span> </div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span><span class="comment">// get slew limited throttle</span></div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span><span class="comment">// used by manual mode to avoid bad steering behaviour during transitions from forward to reverse</span></div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span><span class="comment">// same as private slew_limit_throttle method (see below) but does not update throttle state</span></div>
<div class="foldopen" id="foldopen00288" data-start="{" data-end="}">
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno"><a class="line" href="classAP__MotorsUGV.html#aa5d7f743ab1b268aa6693444bfcb973c">  288</a></span><span class="keywordtype">float</span> <a class="code hl_function" href="classAP__MotorsUGV.html#aa5d7f743ab1b268aa6693444bfcb973c">AP_MotorsUGV::get_slew_limited_throttle</a>(<span class="keywordtype">float</span> throttle, <span class="keywordtype">float</span> dt)<span class="keyword"> const</span></div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span><span class="keyword"></span>{</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__MotorsUGV.html#afcbfb99a2b4f6ef9709e32e1b3ba8c8a">_slew_rate</a> &lt;= 0) {</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span>        <span class="keywordflow">return</span> throttle;</div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>    }</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span> </div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>    <span class="keyword">const</span> <span class="keywordtype">float</span> throttle_change_max = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(<a class="code hl_variable" href="classAP__MotorsUGV.html#afcbfb99a2b4f6ef9709e32e1b3ba8c8a">_slew_rate</a>) * dt;</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>    <span class="keywordflow">return</span> <a class="code hl_define" href="AP__Math_8h.html#a5256308fd38a7098b8f95607aa56888f">constrain_float</a>(throttle, <a class="code hl_variable" href="classAP__MotorsUGV.html#a16f779fadf5c976587d51d9fd02d00da">_throttle_prev</a> - throttle_change_max, <a class="code hl_variable" href="classAP__MotorsUGV.html#a16f779fadf5c976587d51d9fd02d00da">_throttle_prev</a> + throttle_change_max);</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>}</div>
</div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span> </div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span><span class="comment">/*</span></div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span><span class="comment">  work out if skid steering is available</span></div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span><span class="comment"> */</span></div>
<div class="foldopen" id="foldopen00301" data-start="{" data-end="}">
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno"><a class="line" href="classAP__MotorsUGV.html#a3c13ea4a9949243234dce823c2fa961d">  301</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classAP__MotorsUGV.html#a3c13ea4a9949243234dce823c2fa961d">AP_MotorsUGV::have_skid_steering</a>()<span class="keyword"> const</span></div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span><span class="keyword"></span>{</div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>    <span class="keywordflow">return</span> (<a class="code hl_function" href="classSRV__Channels.html#a378e0022237c196e6107c9e79f340285">SRV_Channels::function_assigned</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a44f85b5c346aea6379642a4970f0a0a2">SRV_Channel::k_throttleLeft</a>) &amp;&amp; <a class="code hl_function" href="classSRV__Channels.html#a378e0022237c196e6107c9e79f340285">SRV_Channels::function_assigned</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a5ab419baae8c0128be85cf73b068eeef">SRV_Channel::k_throttleRight</a>)) || <a class="code hl_function" href="classAP__MotorsUGV.html#a40780e22d82105192d5adae466b4c461">is_omni</a>();</div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>}</div>
</div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span> </div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span><span class="comment">// true if the vehicle has a mainsail</span></div>
<div class="foldopen" id="foldopen00307" data-start="{" data-end="}">
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno"><a class="line" href="classAP__MotorsUGV.html#ac993a856521fd85525bce7007982f3d5">  307</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classAP__MotorsUGV.html#ac993a856521fd85525bce7007982f3d5">AP_MotorsUGV::has_sail</a>()<span class="keyword"> const</span></div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span><span class="keyword"></span>{</div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classSRV__Channels.html#a378e0022237c196e6107c9e79f340285">SRV_Channels::function_assigned</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68ae5af5177edb37a7244e0be6c9473efe5">SRV_Channel::k_mainsail_sheet</a>) || <a class="code hl_function" href="classSRV__Channels.html#a378e0022237c196e6107c9e79f340285">SRV_Channels::function_assigned</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a82f89fbb32946473c1cef4433c0e0218">SRV_Channel::k_wingsail_elevator</a>) || <a class="code hl_function" href="classSRV__Channels.html#a378e0022237c196e6107c9e79f340285">SRV_Channels::function_assigned</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a2840d80d2769326d143edbf53834d269">SRV_Channel::k_mast_rotation</a>);</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>}</div>
</div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span> </div>
<div class="foldopen" id="foldopen00312" data-start="{" data-end="}">
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno"><a class="line" href="classAP__MotorsUGV.html#aa030840d7598fc6302c3d523979b4b5b">  312</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classAP__MotorsUGV.html#aa030840d7598fc6302c3d523979b4b5b">AP_MotorsUGV::output</a>(<span class="keywordtype">bool</span> armed, <span class="keywordtype">float</span> ground_speed, <span class="keywordtype">float</span> dt)</div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>{</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>    <span class="comment">// soft-armed overrides passed in armed status</span></div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="AC__AttitudeControl_8cpp.html#a240c1a4ae2a70d1855f91e4a0b1ac938">hal</a>.<a class="code hl_variable" href="classAP__HAL_1_1HAL.html#a9337a60383f4264fa96a20dbe43a4e2e">util</a>-&gt;<a class="code hl_function" href="classAP__HAL_1_1Util.html#a287a2b82fa30b92c8d52aad61d4d27b7">get_soft_armed</a>()) {</div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>        armed = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>        <a class="code hl_variable" href="classAP__MotorsUGV.html#a92a62eaaf0df1e20247b06fe456f298c">_throttle</a> = 0.0f;</div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>    }</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span> </div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>    <span class="comment">// clear limit flags</span></div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span>    <span class="comment">// output_ methods are responsible for setting them to true if required on each iteration</span></div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>    <a class="code hl_variable" href="classAP__MotorsUGV.html#a88abdedf1b1220d748e4a5dc595bcdba">limit</a>.<a class="code hl_variable" href="structAP__MotorsUGV_1_1AP__MotorsUGV__limit.html#ac4a751ead8632497191684c0de727331">steer_left</a> = <a class="code hl_variable" href="classAP__MotorsUGV.html#a88abdedf1b1220d748e4a5dc595bcdba">limit</a>.<a class="code hl_variable" href="structAP__MotorsUGV_1_1AP__MotorsUGV__limit.html#a62dd8a7d50dc33039bf2aef718829007">steer_right</a> = <a class="code hl_variable" href="classAP__MotorsUGV.html#a88abdedf1b1220d748e4a5dc595bcdba">limit</a>.<a class="code hl_variable" href="structAP__MotorsUGV_1_1AP__MotorsUGV__limit.html#a1a4e8eb4ca5a5cbb9805805b787422a8">throttle_lower</a> = <a class="code hl_variable" href="classAP__MotorsUGV.html#a88abdedf1b1220d748e4a5dc595bcdba">limit</a>.<a class="code hl_variable" href="structAP__MotorsUGV_1_1AP__MotorsUGV__limit.html#a36d067b02d9d960d439ef1ab40dcc812">throttle_upper</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span> </div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>    <span class="comment">// sanity check parameters</span></div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>    <a class="code hl_function" href="classAP__MotorsUGV.html#ae865bf6f4d58e187e73bd156ffae97b7">sanity_check_parameters</a>();</div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span> </div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>    <span class="comment">// slew limit throttle</span></div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>    <a class="code hl_function" href="classAP__MotorsUGV.html#ab23ba8e3ee4a209bf43a7de7c5deab95">slew_limit_throttle</a>(dt);</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span> </div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>    <span class="comment">// output for regular steering/throttle style frames</span></div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>    <a class="code hl_function" href="classAP__MotorsUGV.html#af72da5854381c77f10a70d4000cf3cbd">output_regular</a>(armed, ground_speed, <a class="code hl_variable" href="classAP__MotorsUGV.html#a44a5b389f5f47e42bffac0dc5acb4f6b">_steering</a>, <a class="code hl_variable" href="classAP__MotorsUGV.html#a92a62eaaf0df1e20247b06fe456f298c">_throttle</a>);</div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span> </div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>    <span class="comment">// output for skid steering style frames</span></div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>    <a class="code hl_function" href="classAP__MotorsUGV.html#ac6a939c7d6afae6228ac9447c08c195b">output_skid_steering</a>(armed, <a class="code hl_variable" href="classAP__MotorsUGV.html#a44a5b389f5f47e42bffac0dc5acb4f6b">_steering</a>, <a class="code hl_variable" href="classAP__MotorsUGV.html#a92a62eaaf0df1e20247b06fe456f298c">_throttle</a>, dt);</div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span> </div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>    <span class="comment">// output for omni frames</span></div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>    <a class="code hl_function" href="classAP__MotorsUGV.html#af70a7aca5f94dea1ba7acf978a2a3d4b">output_omni</a>(armed, <a class="code hl_variable" href="classAP__MotorsUGV.html#a44a5b389f5f47e42bffac0dc5acb4f6b">_steering</a>, <a class="code hl_variable" href="classAP__MotorsUGV.html#a92a62eaaf0df1e20247b06fe456f298c">_throttle</a>, <a class="code hl_variable" href="classAP__MotorsUGV.html#afb6ba2ed5993134dd5be96bd52c15f41">_lateral</a>);</div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span> </div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>    <span class="comment">// output to sails</span></div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>    <a class="code hl_function" href="classAP__MotorsUGV.html#a8297191e477046bd6e326fd37668490d">output_sail</a>();</div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span> </div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>    <span class="comment">// send values to the PWM timers for output</span></div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>    <a class="code hl_function" href="classSRV__Channels.html#ade6632e078eb500dfab7910b28513ade">SRV_Channels::calc_pwm</a>();</div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>    <a class="code hl_function" href="classSRV__Channels.html#a6bdc435846b87498670af6018e094f64">SRV_Channels::cork</a>();</div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>    <a class="code hl_function" href="classSRV__Channels.html#a2b72ba29ad254568159a1f6951ee9013">SRV_Channels::output_ch_all</a>();</div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>    <a class="code hl_function" href="classSRV__Channels.html#a3d06352d58d90ae7934ef500505b937f">SRV_Channels::push</a>();</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>}</div>
</div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span> </div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span><span class="comment">// test steering or throttle output as a percentage of the total (range -100 to +100)</span></div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span><span class="comment">// used in response to DO_MOTOR_TEST mavlink command</span></div>
<div class="foldopen" id="foldopen00351" data-start="{" data-end="}">
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno"><a class="line" href="classAP__MotorsUGV.html#a91d747bc014f8d8c125c69b6eb598251">  351</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classAP__MotorsUGV.html#a91d747bc014f8d8c125c69b6eb598251">AP_MotorsUGV::output_test_pct</a>(<a class="code hl_enumeration" href="classAP__MotorsUGV.html#a3f57c8a316743b33c1a513fd5ffc2c4a">motor_test_order</a> motor_seq, <span class="keywordtype">float</span> pct)</div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span>{</div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span>    <span class="comment">// check if the motor_seq is valid</span></div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>    <span class="keywordflow">if</span> (motor_seq &gt;= <a class="code hl_enumvalue" href="classAP__MotorsUGV.html#a3f57c8a316743b33c1a513fd5ffc2c4aa0fd805669e357a44afda70af63002352">MOTOR_TEST_LAST</a>) {</div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>    }</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>    pct = <a class="code hl_define" href="AP__Math_8h.html#a5256308fd38a7098b8f95607aa56888f">constrain_float</a>(pct, -100.0f, 100.0f);</div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span> </div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>    <span class="keywordflow">switch</span> (motor_seq) {</div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAP__MotorsUGV.html#a3f57c8a316743b33c1a513fd5ffc2c4aa0cae54d5256db765ee1d95ceb638638e">MOTOR_TEST_THROTTLE</a>: {</div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="classSRV__Channels.html#a378e0022237c196e6107c9e79f340285">SRV_Channels::function_assigned</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a74936c58237562ed4619d556fa89f46f">SRV_Channel::k_motor1</a>)) {</div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span>                <a class="code hl_function" href="classAP__MotorsUGV.html#acdbf927cf3077332d0ce32a2d8829848">output_throttle</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a74936c58237562ed4619d556fa89f46f">SRV_Channel::k_motor1</a>, pct);</div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span>            }</div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="classSRV__Channels.html#a378e0022237c196e6107c9e79f340285">SRV_Channels::function_assigned</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a2b2f8365b3776f0a588082805cd9acbe">SRV_Channel::k_throttle</a>)) {</div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>                <a class="code hl_function" href="classAP__MotorsUGV.html#acdbf927cf3077332d0ce32a2d8829848">output_throttle</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a2b2f8365b3776f0a588082805cd9acbe">SRV_Channel::k_throttle</a>, pct);</div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>            }</div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span>        }</div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAP__MotorsUGV.html#a3f57c8a316743b33c1a513fd5ffc2c4aa34d5c0fe61f953eef03d85aa35ffc498">MOTOR_TEST_STEERING</a>: {</div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="classSRV__Channels.html#a378e0022237c196e6107c9e79f340285">SRV_Channels::function_assigned</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a09b6db431dcbb99e23883eb7c4d51df2">SRV_Channel::k_motor2</a>)) {</div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span>                <a class="code hl_function" href="classAP__MotorsUGV.html#acdbf927cf3077332d0ce32a2d8829848">output_throttle</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a09b6db431dcbb99e23883eb7c4d51df2">SRV_Channel::k_motor2</a>, pct);</div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>            }</div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="classSRV__Channels.html#a378e0022237c196e6107c9e79f340285">SRV_Channels::function_assigned</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a17b07ea85c29e2b07e8ab73568cf4fd2">SRV_Channel::k_steering</a>)) {</div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>                <a class="code hl_function" href="classSRV__Channels.html#a06cf1d6d4bd8b1971c333184bb4bcb55">SRV_Channels::set_output_scaled</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a17b07ea85c29e2b07e8ab73568cf4fd2">SRV_Channel::k_steering</a>, pct * 45.0f);</div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span>            }</div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>        }</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAP__MotorsUGV.html#a3f57c8a316743b33c1a513fd5ffc2c4aab369237f35aa9df97e162cdda12d80bc">MOTOR_TEST_THROTTLE_LEFT</a>: {</div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="classSRV__Channels.html#a378e0022237c196e6107c9e79f340285">SRV_Channels::function_assigned</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68aafba4604bc5488854e78ac238fb859b6">SRV_Channel::k_motor3</a>)) {</div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>                <a class="code hl_function" href="classAP__MotorsUGV.html#acdbf927cf3077332d0ce32a2d8829848">output_throttle</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68aafba4604bc5488854e78ac238fb859b6">SRV_Channel::k_motor3</a>, pct);</div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span>            }</div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="classSRV__Channels.html#a378e0022237c196e6107c9e79f340285">SRV_Channels::function_assigned</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a44f85b5c346aea6379642a4970f0a0a2">SRV_Channel::k_throttleLeft</a>)) {</div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span>                <a class="code hl_function" href="classAP__MotorsUGV.html#acdbf927cf3077332d0ce32a2d8829848">output_throttle</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a44f85b5c346aea6379642a4970f0a0a2">SRV_Channel::k_throttleLeft</a>, pct);</div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span>            }</div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span>        }</div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAP__MotorsUGV.html#a3f57c8a316743b33c1a513fd5ffc2c4aaf990a43d195b02b25a2347b211345b2e">MOTOR_TEST_THROTTLE_RIGHT</a>: {</div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="classSRV__Channels.html#a378e0022237c196e6107c9e79f340285">SRV_Channels::function_assigned</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a323602c02b20f75a236c749e83dcb3c3">SRV_Channel::k_motor4</a>)) {</div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span>                <a class="code hl_function" href="classAP__MotorsUGV.html#acdbf927cf3077332d0ce32a2d8829848">output_throttle</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a323602c02b20f75a236c749e83dcb3c3">SRV_Channel::k_motor4</a>, pct);</div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span>            }</div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="classSRV__Channels.html#a378e0022237c196e6107c9e79f340285">SRV_Channels::function_assigned</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a5ab419baae8c0128be85cf73b068eeef">SRV_Channel::k_throttleRight</a>)) {</div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span>                <a class="code hl_function" href="classAP__MotorsUGV.html#acdbf927cf3077332d0ce32a2d8829848">output_throttle</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a5ab419baae8c0128be85cf73b068eeef">SRV_Channel::k_throttleRight</a>, pct);</div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span>            }</div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span>        }</div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAP__MotorsUGV.html#a3f57c8a316743b33c1a513fd5ffc2c4aa7b8a18b0f88a468b5df77a1c9f2011ac">MOTOR_TEST_MAINSAIL</a>: {</div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="classSRV__Channels.html#a378e0022237c196e6107c9e79f340285">SRV_Channels::function_assigned</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68ae5af5177edb37a7244e0be6c9473efe5">SRV_Channel::k_mainsail_sheet</a>)) {</div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span>                <a class="code hl_function" href="classSRV__Channels.html#a06cf1d6d4bd8b1971c333184bb4bcb55">SRV_Channels::set_output_scaled</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68ae5af5177edb37a7244e0be6c9473efe5">SRV_Channel::k_mainsail_sheet</a>, pct);</div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span>            }</div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="classSRV__Channels.html#a378e0022237c196e6107c9e79f340285">SRV_Channels::function_assigned</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a82f89fbb32946473c1cef4433c0e0218">SRV_Channel::k_wingsail_elevator</a>)) {</div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span>                <a class="code hl_function" href="classSRV__Channels.html#a06cf1d6d4bd8b1971c333184bb4bcb55">SRV_Channels::set_output_scaled</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a82f89fbb32946473c1cef4433c0e0218">SRV_Channel::k_wingsail_elevator</a>, pct);</div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span>            }</div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="classSRV__Channels.html#a378e0022237c196e6107c9e79f340285">SRV_Channels::function_assigned</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a2840d80d2769326d143edbf53834d269">SRV_Channel::k_mast_rotation</a>)) {</div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span>                <a class="code hl_function" href="classSRV__Channels.html#a06cf1d6d4bd8b1971c333184bb4bcb55">SRV_Channels::set_output_scaled</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a2840d80d2769326d143edbf53834d269">SRV_Channel::k_mast_rotation</a>, pct);</div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span>            }</div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span>        }</div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAP__MotorsUGV.html#a3f57c8a316743b33c1a513fd5ffc2c4aa0fd805669e357a44afda70af63002352">MOTOR_TEST_LAST</a>:</div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span>    }</div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span>    <a class="code hl_function" href="classSRV__Channels.html#ade6632e078eb500dfab7910b28513ade">SRV_Channels::calc_pwm</a>();</div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span>    <a class="code hl_function" href="classSRV__Channels.html#a6bdc435846b87498670af6018e094f64">SRV_Channels::cork</a>();</div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>    <a class="code hl_function" href="classSRV__Channels.html#a2b72ba29ad254568159a1f6951ee9013">SRV_Channels::output_ch_all</a>();</div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span>    <a class="code hl_function" href="classSRV__Channels.html#a3d06352d58d90ae7934ef500505b937f">SRV_Channels::push</a>();</div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span>}</div>
</div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span> </div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span><span class="comment">// test steering or throttle output using a pwm value</span></div>
<div class="foldopen" id="foldopen00419" data-start="{" data-end="}">
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno"><a class="line" href="classAP__MotorsUGV.html#aaa3219d6621f65d47b93b2af2fef51c5">  419</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classAP__MotorsUGV.html#aaa3219d6621f65d47b93b2af2fef51c5">AP_MotorsUGV::output_test_pwm</a>(<a class="code hl_enumeration" href="classAP__MotorsUGV.html#a3f57c8a316743b33c1a513fd5ffc2c4a">motor_test_order</a> motor_seq, <span class="keywordtype">float</span> <a class="code hl_variable" href="AP__HAL_2examples_2RCOutput_2RCOutput_8cpp.html#a319168d2f969cabd35a4adcc01975c20">pwm</a>)</div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span>{</div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span>    <span class="comment">// check if the motor_seq is valid</span></div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span>    <span class="keywordflow">if</span> (motor_seq &gt; <a class="code hl_enumvalue" href="classAP__MotorsUGV.html#a3f57c8a316743b33c1a513fd5ffc2c4aaf990a43d195b02b25a2347b211345b2e">MOTOR_TEST_THROTTLE_RIGHT</a>) {</div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span>    }</div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span>    <span class="keywordflow">switch</span> (motor_seq) {</div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAP__MotorsUGV.html#a3f57c8a316743b33c1a513fd5ffc2c4aa0cae54d5256db765ee1d95ceb638638e">MOTOR_TEST_THROTTLE</a>: {</div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="classSRV__Channels.html#a378e0022237c196e6107c9e79f340285">SRV_Channels::function_assigned</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a74936c58237562ed4619d556fa89f46f">SRV_Channel::k_motor1</a>)) {</div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span>                <a class="code hl_function" href="classSRV__Channels.html#a6ec155ae75e3d22a0de00e21e5b330a9">SRV_Channels::set_output_pwm</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a74936c58237562ed4619d556fa89f46f">SRV_Channel::k_motor1</a>, <a class="code hl_variable" href="AP__HAL_2examples_2RCOutput_2RCOutput_8cpp.html#a319168d2f969cabd35a4adcc01975c20">pwm</a>);</div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span>            }</div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="classSRV__Channels.html#a378e0022237c196e6107c9e79f340285">SRV_Channels::function_assigned</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a2b2f8365b3776f0a588082805cd9acbe">SRV_Channel::k_throttle</a>)) {</div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span>                <a class="code hl_function" href="classSRV__Channels.html#a6ec155ae75e3d22a0de00e21e5b330a9">SRV_Channels::set_output_pwm</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a2b2f8365b3776f0a588082805cd9acbe">SRV_Channel::k_throttle</a>, <a class="code hl_variable" href="AP__HAL_2examples_2RCOutput_2RCOutput_8cpp.html#a319168d2f969cabd35a4adcc01975c20">pwm</a>);</div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno">  432</span>            }</div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span>        }</div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAP__MotorsUGV.html#a3f57c8a316743b33c1a513fd5ffc2c4aa34d5c0fe61f953eef03d85aa35ffc498">MOTOR_TEST_STEERING</a>: {</div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="classSRV__Channels.html#a378e0022237c196e6107c9e79f340285">SRV_Channels::function_assigned</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a09b6db431dcbb99e23883eb7c4d51df2">SRV_Channel::k_motor2</a>)) {</div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span>                <a class="code hl_function" href="classSRV__Channels.html#a6ec155ae75e3d22a0de00e21e5b330a9">SRV_Channels::set_output_pwm</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a09b6db431dcbb99e23883eb7c4d51df2">SRV_Channel::k_motor2</a>, <a class="code hl_variable" href="AP__HAL_2examples_2RCOutput_2RCOutput_8cpp.html#a319168d2f969cabd35a4adcc01975c20">pwm</a>);</div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span>            }</div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="classSRV__Channels.html#a378e0022237c196e6107c9e79f340285">SRV_Channels::function_assigned</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a17b07ea85c29e2b07e8ab73568cf4fd2">SRV_Channel::k_steering</a>)) {</div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span>                <a class="code hl_function" href="classSRV__Channels.html#a6ec155ae75e3d22a0de00e21e5b330a9">SRV_Channels::set_output_pwm</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a17b07ea85c29e2b07e8ab73568cf4fd2">SRV_Channel::k_steering</a>, <a class="code hl_variable" href="AP__HAL_2examples_2RCOutput_2RCOutput_8cpp.html#a319168d2f969cabd35a4adcc01975c20">pwm</a>);</div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span>            }</div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span>        }</div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAP__MotorsUGV.html#a3f57c8a316743b33c1a513fd5ffc2c4aab369237f35aa9df97e162cdda12d80bc">MOTOR_TEST_THROTTLE_LEFT</a>: {</div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="classSRV__Channels.html#a378e0022237c196e6107c9e79f340285">SRV_Channels::function_assigned</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68aafba4604bc5488854e78ac238fb859b6">SRV_Channel::k_motor3</a>)) {</div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span>                <a class="code hl_function" href="classSRV__Channels.html#a6ec155ae75e3d22a0de00e21e5b330a9">SRV_Channels::set_output_pwm</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68aafba4604bc5488854e78ac238fb859b6">SRV_Channel::k_motor3</a>, <a class="code hl_variable" href="AP__HAL_2examples_2RCOutput_2RCOutput_8cpp.html#a319168d2f969cabd35a4adcc01975c20">pwm</a>);</div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span>            }</div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="classSRV__Channels.html#a378e0022237c196e6107c9e79f340285">SRV_Channels::function_assigned</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a44f85b5c346aea6379642a4970f0a0a2">SRV_Channel::k_throttleLeft</a>)) {</div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span>                <a class="code hl_function" href="classSRV__Channels.html#a6ec155ae75e3d22a0de00e21e5b330a9">SRV_Channels::set_output_pwm</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a44f85b5c346aea6379642a4970f0a0a2">SRV_Channel::k_throttleLeft</a>, <a class="code hl_variable" href="AP__HAL_2examples_2RCOutput_2RCOutput_8cpp.html#a319168d2f969cabd35a4adcc01975c20">pwm</a>);</div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span>            }</div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span>        }</div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAP__MotorsUGV.html#a3f57c8a316743b33c1a513fd5ffc2c4aaf990a43d195b02b25a2347b211345b2e">MOTOR_TEST_THROTTLE_RIGHT</a>: {</div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="classSRV__Channels.html#a378e0022237c196e6107c9e79f340285">SRV_Channels::function_assigned</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a323602c02b20f75a236c749e83dcb3c3">SRV_Channel::k_motor4</a>)) {</div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span>                <a class="code hl_function" href="classSRV__Channels.html#a6ec155ae75e3d22a0de00e21e5b330a9">SRV_Channels::set_output_pwm</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a323602c02b20f75a236c749e83dcb3c3">SRV_Channel::k_motor4</a>, <a class="code hl_variable" href="AP__HAL_2examples_2RCOutput_2RCOutput_8cpp.html#a319168d2f969cabd35a4adcc01975c20">pwm</a>);</div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span>            }</div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="classSRV__Channels.html#a378e0022237c196e6107c9e79f340285">SRV_Channels::function_assigned</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a5ab419baae8c0128be85cf73b068eeef">SRV_Channel::k_throttleRight</a>)) {</div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span>                <a class="code hl_function" href="classSRV__Channels.html#a6ec155ae75e3d22a0de00e21e5b330a9">SRV_Channels::set_output_pwm</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a5ab419baae8c0128be85cf73b068eeef">SRV_Channel::k_throttleRight</a>, <a class="code hl_variable" href="AP__HAL_2examples_2RCOutput_2RCOutput_8cpp.html#a319168d2f969cabd35a4adcc01975c20">pwm</a>);</div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span>            }</div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno">  460</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span>        }</div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAP__MotorsUGV.html#a3f57c8a316743b33c1a513fd5ffc2c4aa7b8a18b0f88a468b5df77a1c9f2011ac">MOTOR_TEST_MAINSAIL</a>: {</div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="classSRV__Channels.html#a378e0022237c196e6107c9e79f340285">SRV_Channels::function_assigned</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68ae5af5177edb37a7244e0be6c9473efe5">SRV_Channel::k_mainsail_sheet</a>)) {</div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span>                <a class="code hl_function" href="classSRV__Channels.html#a6ec155ae75e3d22a0de00e21e5b330a9">SRV_Channels::set_output_pwm</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68ae5af5177edb37a7244e0be6c9473efe5">SRV_Channel::k_mainsail_sheet</a>, <a class="code hl_variable" href="AP__HAL_2examples_2RCOutput_2RCOutput_8cpp.html#a319168d2f969cabd35a4adcc01975c20">pwm</a>);</div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span>            }</div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="classSRV__Channels.html#a378e0022237c196e6107c9e79f340285">SRV_Channels::function_assigned</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a82f89fbb32946473c1cef4433c0e0218">SRV_Channel::k_wingsail_elevator</a>)) {</div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span>                <a class="code hl_function" href="classSRV__Channels.html#a6ec155ae75e3d22a0de00e21e5b330a9">SRV_Channels::set_output_pwm</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a82f89fbb32946473c1cef4433c0e0218">SRV_Channel::k_wingsail_elevator</a>, <a class="code hl_variable" href="AP__HAL_2examples_2RCOutput_2RCOutput_8cpp.html#a319168d2f969cabd35a4adcc01975c20">pwm</a>);</div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span>            }</div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="classSRV__Channels.html#a378e0022237c196e6107c9e79f340285">SRV_Channels::function_assigned</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a2840d80d2769326d143edbf53834d269">SRV_Channel::k_mast_rotation</a>)) {</div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span>                <a class="code hl_function" href="classSRV__Channels.html#a6ec155ae75e3d22a0de00e21e5b330a9">SRV_Channels::set_output_pwm</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a2840d80d2769326d143edbf53834d269">SRV_Channel::k_mast_rotation</a>, <a class="code hl_variable" href="AP__HAL_2examples_2RCOutput_2RCOutput_8cpp.html#a319168d2f969cabd35a4adcc01975c20">pwm</a>);</div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span>            }</div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span>        }</div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span>    }</div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span>    <a class="code hl_function" href="classSRV__Channels.html#ade6632e078eb500dfab7910b28513ade">SRV_Channels::calc_pwm</a>();</div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span>    <a class="code hl_function" href="classSRV__Channels.html#a6bdc435846b87498670af6018e094f64">SRV_Channels::cork</a>();</div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span>    <a class="code hl_function" href="classSRV__Channels.html#a2b72ba29ad254568159a1f6951ee9013">SRV_Channels::output_ch_all</a>();</div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span>    <a class="code hl_function" href="classSRV__Channels.html#a3d06352d58d90ae7934ef500505b937f">SRV_Channels::push</a>();</div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span>}</div>
</div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span> </div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span><span class="comment">//  returns true if checks pass, false if they fail.  report should be true to send text messages to GCS</span></div>
<div class="foldopen" id="foldopen00485" data-start="{" data-end="}">
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno"><a class="line" href="classAP__MotorsUGV.html#a85827508e66eefbeee6b28051b494a72">  485</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classAP__MotorsUGV.html#a85827508e66eefbeee6b28051b494a72">AP_MotorsUGV::pre_arm_check</a>(<span class="keywordtype">bool</span> report)<span class="keyword"> const</span></div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span><span class="keyword"></span>{</div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> have_throttle = <a class="code hl_function" href="classSRV__Channels.html#a378e0022237c196e6107c9e79f340285">SRV_Channels::function_assigned</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a2b2f8365b3776f0a588082805cd9acbe">SRV_Channel::k_throttle</a>);</div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> have_throttle_left = <a class="code hl_function" href="classSRV__Channels.html#a378e0022237c196e6107c9e79f340285">SRV_Channels::function_assigned</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a44f85b5c346aea6379642a4970f0a0a2">SRV_Channel::k_throttleLeft</a>);</div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> have_throttle_right = <a class="code hl_function" href="classSRV__Channels.html#a378e0022237c196e6107c9e79f340285">SRV_Channels::function_assigned</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a5ab419baae8c0128be85cf73b068eeef">SRV_Channel::k_throttleRight</a>);</div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno">  490</span> </div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno">  491</span>    <span class="comment">// check that there&#39;s defined outputs, inc scripting and sail</span></div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno">  492</span>    <span class="keywordflow">if</span>(!have_throttle_left &amp;&amp;</div>
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span>       !have_throttle_right &amp;&amp;</div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span>       !have_throttle &amp;&amp;</div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span>       !<a class="code hl_function" href="classSRV__Channels.html#a378e0022237c196e6107c9e79f340285">SRV_Channels::function_assigned</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a17b07ea85c29e2b07e8ab73568cf4fd2">SRV_Channel::k_steering</a>) &amp;&amp;</div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno">  496</span>       !<a class="code hl_function" href="classSRV__Channels.html#a378e0022237c196e6107c9e79f340285">SRV_Channels::function_assigned</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a40e3244188d87ac960a949a64096d2b4">SRV_Channel::k_scripting1</a>) &amp;&amp;</div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span>       !<a class="code hl_function" href="classAP__MotorsUGV.html#ac993a856521fd85525bce7007982f3d5">has_sail</a>() &amp;&amp;</div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno">  498</span>       !<a class="code hl_function" href="classAP__MotorsUGV.html#a40780e22d82105192d5adae466b4c461">is_omni</a>()) {</div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span>        <span class="keywordflow">if</span> (report) {</div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span>            <a class="code hl_define" href="GCS_8h.html#a266bfe8eda675e1092f045e93932b4a6">GCS_SEND_TEXT</a>(MAV_SEVERITY_CRITICAL, <span class="stringliteral">&quot;PreArm: no motor, sail or scripting outputs defined&quot;</span>);</div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span>        }</div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno">  503</span>    }</div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno">  504</span>    <span class="comment">// check if only one of skid-steering output has been configured</span></div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span>    <span class="keywordflow">if</span> (have_throttle_left != have_throttle_right) {</div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span>        <span class="keywordflow">if</span> (report) {</div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span>            <a class="code hl_define" href="GCS_8h.html#a266bfe8eda675e1092f045e93932b4a6">GCS_SEND_TEXT</a>(MAV_SEVERITY_CRITICAL, <span class="stringliteral">&quot;PreArm: check skid steering config&quot;</span>);</div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span>        }</div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno">  510</span>    }</div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span>    <span class="comment">// check if only one of throttle or steering outputs has been configured, if has a sail allow no throttle</span></div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span>    <span class="keywordflow">if</span> ((<a class="code hl_function" href="classAP__MotorsUGV.html#ac993a856521fd85525bce7007982f3d5">has_sail</a>() || have_throttle) != <a class="code hl_function" href="classSRV__Channels.html#a378e0022237c196e6107c9e79f340285">SRV_Channels::function_assigned</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a17b07ea85c29e2b07e8ab73568cf4fd2">SRV_Channel::k_steering</a>)) {</div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span>        <span class="keywordflow">if</span> (report) {</div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span>            <a class="code hl_define" href="GCS_8h.html#a266bfe8eda675e1092f045e93932b4a6">GCS_SEND_TEXT</a>(MAV_SEVERITY_CRITICAL, <span class="stringliteral">&quot;PreArm: check steering and throttle config&quot;</span>);</div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span>        }</div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno">  516</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span>    }</div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span>    <span class="comment">// check all omni motor outputs have been configured</span></div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno">  519</span>    <span class="keywordflow">for</span> (uint8_t i=0; i&lt;<a class="code hl_variable" href="classAP__MotorsUGV.html#a435c1d9805d846f9d6989d65c0203697">_motors_num</a>; i++) {</div>
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno">  520</span>        <a class="code hl_enumeration" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68">SRV_Channel::Aux_servo_function_t</a> function = <a class="code hl_function" href="classSRV__Channels.html#acab9e1aba9fcbde6e598169af5b3181f">SRV_Channels::get_motor_function</a>(i);</div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno">  521</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="classSRV__Channels.html#a378e0022237c196e6107c9e79f340285">SRV_Channels::function_assigned</a>(function)) {</div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno">  522</span>            <span class="keywordflow">if</span> (report) {</div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span>                <a class="code hl_define" href="GCS_8h.html#a266bfe8eda675e1092f045e93932b4a6">GCS_SEND_TEXT</a>(MAV_SEVERITY_CRITICAL, <span class="stringliteral">&quot;PreArm: servo function %u unassigned&quot;</span>, function);</div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno">  524</span>            }</div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno">  525</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno">  526</span>        }</div>
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno">  527</span>    }</div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno">  528</span> </div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno">  529</span>    <span class="comment">// Check relays are configured for brushed with relay outputs</span></div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno">  530</span><span class="preprocessor">#if AP_RELAY_ENABLED</span></div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span>    <a class="code hl_class" href="classAP__Relay.html">AP_Relay</a>*<a class="code hl_variable" href="AP__Parachute__test_8cpp.html#a1b01eb2a0239e74c68c0190c5a24bd6d">relay</a> = <a class="code hl_function" href="namespaceAP.html#a730acdb902fce56b0e171368b2d2036b">AP::relay</a>();</div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span>    <span class="keywordflow">if</span> ((<a class="code hl_variable" href="classAP__MotorsUGV.html#ab33a40ca42efb7032c3abb8e57721aa4">_pwm_type</a> == <a class="code hl_enumvalue" href="classAP__MotorsUGV.html#a27611cd34d855dc865aeb7c9cd9d6ddaac8189d0426c8a7f5b318116b344b19ce">PWM_TYPE_BRUSHED_WITH_RELAY</a>) &amp;&amp; (<a class="code hl_variable" href="AP__Parachute__test_8cpp.html#a1b01eb2a0239e74c68c0190c5a24bd6d">relay</a> != <span class="keyword">nullptr</span>)) {</div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span>        <span class="comment">// If a output is configured its relay must be enabled</span></div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno">  534</span>        <span class="keyword">struct </span>RelayTable {</div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span>            <span class="keywordtype">bool</span> output_assigned;</div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span>            <a class="code hl_enumeration" href="classAP__Relay__Params.html#a73c0886b439cc9c4dcc660f5a084f042">AP_Relay_Params::FUNCTION</a> fun;</div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno">  537</span>        };</div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno">  538</span> </div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span>        <span class="keyword">const</span> RelayTable relay_table[] = {</div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno">  540</span>            { have_throttle || have_throttle_left || (<a class="code hl_function" href="classSRV__Channels.html#a378e0022237c196e6107c9e79f340285">SRV_Channels::function_assigned</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a74936c58237562ed4619d556fa89f46f">SRV_Channel::k_motor1</a>) &amp;&amp; (<a class="code hl_variable" href="classAP__MotorsUGV.html#a435c1d9805d846f9d6989d65c0203697">_motors_num</a> &gt;= 1)), <a class="code hl_enumvalue" href="classAP__Relay__Params.html#a73c0886b439cc9c4dcc660f5a084f042af60abc9f854f5ce172befbcf599f95ce">AP_Relay_Params::FUNCTION::BRUSHED_REVERSE_1</a> },</div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span>            { have_throttle_right || (<a class="code hl_function" href="classSRV__Channels.html#a378e0022237c196e6107c9e79f340285">SRV_Channels::function_assigned</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a09b6db431dcbb99e23883eb7c4d51df2">SRV_Channel::k_motor2</a>) &amp;&amp; (<a class="code hl_variable" href="classAP__MotorsUGV.html#a435c1d9805d846f9d6989d65c0203697">_motors_num</a> &gt;= 2)),                 <a class="code hl_enumvalue" href="classAP__Relay__Params.html#a73c0886b439cc9c4dcc660f5a084f042a8c3dc0ef2b1605d9b06cc1abd6bf1071">AP_Relay_Params::FUNCTION::BRUSHED_REVERSE_2</a> },</div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span>            { <a class="code hl_function" href="classSRV__Channels.html#a378e0022237c196e6107c9e79f340285">SRV_Channels::function_assigned</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68aafba4604bc5488854e78ac238fb859b6">SRV_Channel::k_motor3</a>) &amp;&amp; (<a class="code hl_variable" href="classAP__MotorsUGV.html#a435c1d9805d846f9d6989d65c0203697">_motors_num</a> &gt;= 3),                                          <a class="code hl_enumvalue" href="classAP__Relay__Params.html#a73c0886b439cc9c4dcc660f5a084f042ae913deb5d84069b3d82be268cc233c3c">AP_Relay_Params::FUNCTION::BRUSHED_REVERSE_3</a> },</div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span>            { <a class="code hl_function" href="classSRV__Channels.html#a378e0022237c196e6107c9e79f340285">SRV_Channels::function_assigned</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a323602c02b20f75a236c749e83dcb3c3">SRV_Channel::k_motor4</a>) &amp;&amp; (<a class="code hl_variable" href="classAP__MotorsUGV.html#a435c1d9805d846f9d6989d65c0203697">_motors_num</a> &gt;= 4),                                          <a class="code hl_enumvalue" href="classAP__Relay__Params.html#a73c0886b439cc9c4dcc660f5a084f042a40282f88062d751f82ce55dddb3bfddd">AP_Relay_Params::FUNCTION::BRUSHED_REVERSE_4</a> },</div>
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno">  544</span>        };</div>
<div class="line"><a id="l00545" name="l00545"></a><span class="lineno">  545</span> </div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno">  546</span>        <span class="keywordflow">for</span> (uint8_t i=0; i&lt;<a class="code hl_define" href="AP__Common_8h.html#a121caf32c5b5d704ef3453f0885a9ea5">ARRAY_SIZE</a>(relay_table); i++) {</div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span>            <span class="keywordflow">if</span> (relay_table[i].output_assigned &amp;&amp; !<a class="code hl_variable" href="AP__Parachute__test_8cpp.html#a1b01eb2a0239e74c68c0190c5a24bd6d">relay</a>-&gt;<a class="code hl_function" href="classAP__Relay.html#a20a1e855cfd9ff8c6d4fbec26d44add8">enabled</a>(relay_table[i].fun)) {</div>
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span>                <span class="keywordflow">if</span> (report) {</div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span>                    <a class="code hl_function" href="GCS_8h.html#ab53f292b698f9a6a3f029dfdbd5a43de">gcs</a>().<a class="code hl_function" href="classGCS.html#a2f099d18721b0874af08fde3f6aae6b6">send_text</a>(MAV_SEVERITY_CRITICAL, <span class="stringliteral">&quot;PreArm: relay function %u unassigned&quot;</span>, uint8_t(relay_table[i].fun));</div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span>                }</div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno">  552</span>            }</div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span>        }</div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno">  554</span>    }</div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span> </div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span>}</div>
</div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span> </div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span><span class="comment">// sanity check parameters</span></div>
<div class="foldopen" id="foldopen00561" data-start="{" data-end="}">
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno"><a class="line" href="classAP__MotorsUGV.html#ae865bf6f4d58e187e73bd156ffae97b7">  561</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classAP__MotorsUGV.html#ae865bf6f4d58e187e73bd156ffae97b7">AP_MotorsUGV::sanity_check_parameters</a>()</div>
<div class="line"><a id="l00562" name="l00562"></a><span class="lineno">  562</span>{</div>
<div class="line"><a id="l00563" name="l00563"></a><span class="lineno">  563</span>    <a class="code hl_variable" href="classAP__MotorsUGV.html#ad34c71675d53bb34a38e363889110ebe">_throttle_min</a>.set(<a class="code hl_function" href="AP__Math_8h.html#a68558c4f79a8582543daefde13c64abc">constrain_int16</a>(<a class="code hl_variable" href="classAP__MotorsUGV.html#ad34c71675d53bb34a38e363889110ebe">_throttle_min</a>, 0, 20));</div>
<div class="line"><a id="l00564" name="l00564"></a><span class="lineno">  564</span>    <a class="code hl_variable" href="classAP__MotorsUGV.html#a1899ae8b286e235041609a84cc0f9d8d">_throttle_max</a>.set(<a class="code hl_function" href="AP__Math_8h.html#a68558c4f79a8582543daefde13c64abc">constrain_int16</a>(<a class="code hl_variable" href="classAP__MotorsUGV.html#a1899ae8b286e235041609a84cc0f9d8d">_throttle_max</a>, 30, 100));</div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span>    <a class="code hl_variable" href="classAP__MotorsUGV.html#a399fad8e84efcc630fe4bc204e001968">_vector_angle_max</a>.set(<a class="code hl_define" href="AP__Math_8h.html#a5256308fd38a7098b8f95607aa56888f">constrain_float</a>(<a class="code hl_variable" href="classAP__MotorsUGV.html#a399fad8e84efcc630fe4bc204e001968">_vector_angle_max</a>, 0.0f, 90.0f));</div>
<div class="line"><a id="l00566" name="l00566"></a><span class="lineno">  566</span>}</div>
</div>
<div class="line"><a id="l00567" name="l00567"></a><span class="lineno">  567</span> </div>
<div class="line"><a id="l00568" name="l00568"></a><span class="lineno">  568</span><span class="comment">// setup pwm output type</span></div>
<div class="foldopen" id="foldopen00569" data-start="{" data-end="}">
<div class="line"><a id="l00569" name="l00569"></a><span class="lineno"><a class="line" href="classAP__MotorsUGV.html#ad6bff94ef4f16c46677ffdda08d7c4ae">  569</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classAP__MotorsUGV.html#ad6bff94ef4f16c46677ffdda08d7c4ae">AP_MotorsUGV::setup_pwm_type</a>()</div>
<div class="line"><a id="l00570" name="l00570"></a><span class="lineno">  570</span>{</div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno">  571</span>    <a class="code hl_variable" href="classAP__MotorsUGV.html#a96b40cb1f4f6e535a7922a7df4ba6e06">_motor_mask</a> = 0;</div>
<div class="line"><a id="l00572" name="l00572"></a><span class="lineno">  572</span> </div>
<div class="line"><a id="l00573" name="l00573"></a><span class="lineno">  573</span>    <a class="code hl_variable" href="AC__AttitudeControl_8cpp.html#a240c1a4ae2a70d1855f91e4a0b1ac938">hal</a>.<a class="code hl_variable" href="classAP__HAL_1_1HAL.html#aa6daf2df3dfc0b9f0f503db64a52b0cc">rcout</a>-&gt;<a class="code hl_function" href="classAP__HAL_1_1RCOutput.html#a622e13fac840e64e722fa475180c36d5">set_dshot_esc_type</a>(<a class="code hl_function" href="classSRV__Channels.html#aa2e6bde03389f5e2946d27393e86a10b">SRV_Channels::get_dshot_esc_type</a>());</div>
<div class="line"><a id="l00574" name="l00574"></a><span class="lineno">  574</span> </div>
<div class="line"><a id="l00575" name="l00575"></a><span class="lineno">  575</span>    <span class="comment">// work out mask of channels assigned to motors</span></div>
<div class="line"><a id="l00576" name="l00576"></a><span class="lineno">  576</span>    <a class="code hl_variable" href="classAP__MotorsUGV.html#a96b40cb1f4f6e535a7922a7df4ba6e06">_motor_mask</a> |= <a class="code hl_function" href="classSRV__Channels.html#acdb0bd5d2defc4c7bcb51137f15e289d">SRV_Channels::get_output_channel_mask</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a2b2f8365b3776f0a588082805cd9acbe">SRV_Channel::k_throttle</a>);</div>
<div class="line"><a id="l00577" name="l00577"></a><span class="lineno">  577</span>    <a class="code hl_variable" href="classAP__MotorsUGV.html#a96b40cb1f4f6e535a7922a7df4ba6e06">_motor_mask</a> |= <a class="code hl_function" href="classSRV__Channels.html#acdb0bd5d2defc4c7bcb51137f15e289d">SRV_Channels::get_output_channel_mask</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a44f85b5c346aea6379642a4970f0a0a2">SRV_Channel::k_throttleLeft</a>);</div>
<div class="line"><a id="l00578" name="l00578"></a><span class="lineno">  578</span>    <a class="code hl_variable" href="classAP__MotorsUGV.html#a96b40cb1f4f6e535a7922a7df4ba6e06">_motor_mask</a> |= <a class="code hl_function" href="classSRV__Channels.html#acdb0bd5d2defc4c7bcb51137f15e289d">SRV_Channels::get_output_channel_mask</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a5ab419baae8c0128be85cf73b068eeef">SRV_Channel::k_throttleRight</a>);</div>
<div class="line"><a id="l00579" name="l00579"></a><span class="lineno">  579</span>    <span class="keywordflow">for</span> (uint8_t i=0; i&lt;<a class="code hl_variable" href="classAP__MotorsUGV.html#a435c1d9805d846f9d6989d65c0203697">_motors_num</a>; i++) {</div>
<div class="line"><a id="l00580" name="l00580"></a><span class="lineno">  580</span>        <a class="code hl_variable" href="classAP__MotorsUGV.html#a96b40cb1f4f6e535a7922a7df4ba6e06">_motor_mask</a> |= <a class="code hl_function" href="classSRV__Channels.html#acdb0bd5d2defc4c7bcb51137f15e289d">SRV_Channels::get_output_channel_mask</a>(<a class="code hl_function" href="classSRV__Channels.html#acab9e1aba9fcbde6e598169af5b3181f">SRV_Channels::get_motor_function</a>(i));</div>
<div class="line"><a id="l00581" name="l00581"></a><span class="lineno">  581</span>    }</div>
<div class="line"><a id="l00582" name="l00582"></a><span class="lineno">  582</span> </div>
<div class="line"><a id="l00583" name="l00583"></a><span class="lineno">  583</span>    <span class="keywordflow">switch</span> (<a class="code hl_variable" href="classAP__MotorsUGV.html#ab33a40ca42efb7032c3abb8e57721aa4">_pwm_type</a>) {</div>
<div class="line"><a id="l00584" name="l00584"></a><span class="lineno">  584</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAP__MotorsUGV.html#a27611cd34d855dc865aeb7c9cd9d6ddaab7fc68482de73b2cd4b4e362fecb6ce3">PWM_TYPE_ONESHOT</a>:</div>
<div class="line"><a id="l00585" name="l00585"></a><span class="lineno">  585</span>        <a class="code hl_variable" href="AC__AttitudeControl_8cpp.html#a240c1a4ae2a70d1855f91e4a0b1ac938">hal</a>.<a class="code hl_variable" href="classAP__HAL_1_1HAL.html#aa6daf2df3dfc0b9f0f503db64a52b0cc">rcout</a>-&gt;<a class="code hl_function" href="classAP__HAL_1_1RCOutput.html#a612e9a31b97e5774aead5f00c298ed3b">set_output_mode</a>(<a class="code hl_variable" href="classAP__MotorsUGV.html#a96b40cb1f4f6e535a7922a7df4ba6e06">_motor_mask</a>, <a class="code hl_enumvalue" href="classAP__HAL_1_1RCOutput.html#afabff18b963ba9ef5b605e6e7aeca093ab1e27b7d703bdf42b6223d9b9161d9a0">AP_HAL::RCOutput::MODE_PWM_ONESHOT</a>);</div>
<div class="line"><a id="l00586" name="l00586"></a><span class="lineno">  586</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00587" name="l00587"></a><span class="lineno">  587</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAP__MotorsUGV.html#a27611cd34d855dc865aeb7c9cd9d6ddaa18832351bc7d98fd202709d9ecd0dfdf">PWM_TYPE_ONESHOT125</a>:</div>
<div class="line"><a id="l00588" name="l00588"></a><span class="lineno">  588</span>        <a class="code hl_variable" href="AC__AttitudeControl_8cpp.html#a240c1a4ae2a70d1855f91e4a0b1ac938">hal</a>.<a class="code hl_variable" href="classAP__HAL_1_1HAL.html#aa6daf2df3dfc0b9f0f503db64a52b0cc">rcout</a>-&gt;<a class="code hl_function" href="classAP__HAL_1_1RCOutput.html#a612e9a31b97e5774aead5f00c298ed3b">set_output_mode</a>(<a class="code hl_variable" href="classAP__MotorsUGV.html#a96b40cb1f4f6e535a7922a7df4ba6e06">_motor_mask</a>, <a class="code hl_enumvalue" href="classAP__HAL_1_1RCOutput.html#afabff18b963ba9ef5b605e6e7aeca093a1c9c7057fdd08bebe7487917c00dc17e">AP_HAL::RCOutput::MODE_PWM_ONESHOT125</a>);</div>
<div class="line"><a id="l00589" name="l00589"></a><span class="lineno">  589</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00590" name="l00590"></a><span class="lineno">  590</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAP__MotorsUGV.html#a27611cd34d855dc865aeb7c9cd9d6ddaac8189d0426c8a7f5b318116b344b19ce">PWM_TYPE_BRUSHED_WITH_RELAY</a>:</div>
<div class="line"><a id="l00591" name="l00591"></a><span class="lineno">  591</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAP__MotorsUGV.html#a27611cd34d855dc865aeb7c9cd9d6ddaa0232349c42f0aaf5046cf03cdc201372">PWM_TYPE_BRUSHED_BIPOLAR</a>:</div>
<div class="line"><a id="l00592" name="l00592"></a><span class="lineno">  592</span>        <a class="code hl_variable" href="AC__AttitudeControl_8cpp.html#a240c1a4ae2a70d1855f91e4a0b1ac938">hal</a>.<a class="code hl_variable" href="classAP__HAL_1_1HAL.html#aa6daf2df3dfc0b9f0f503db64a52b0cc">rcout</a>-&gt;<a class="code hl_function" href="classAP__HAL_1_1RCOutput.html#a612e9a31b97e5774aead5f00c298ed3b">set_output_mode</a>(<a class="code hl_variable" href="classAP__MotorsUGV.html#a96b40cb1f4f6e535a7922a7df4ba6e06">_motor_mask</a>, <a class="code hl_enumvalue" href="classAP__HAL_1_1RCOutput.html#afabff18b963ba9ef5b605e6e7aeca093aca7f067a8380228e2d73594d25b17b1c">AP_HAL::RCOutput::MODE_PWM_BRUSHED</a>);</div>
<div class="line"><a id="l00593" name="l00593"></a><span class="lineno">  593</span>        <a class="code hl_variable" href="AC__AttitudeControl_8cpp.html#a240c1a4ae2a70d1855f91e4a0b1ac938">hal</a>.<a class="code hl_variable" href="classAP__HAL_1_1HAL.html#aa6daf2df3dfc0b9f0f503db64a52b0cc">rcout</a>-&gt;<a class="code hl_function" href="classAP__HAL_1_1RCOutput.html#ae7903398aa18e2472dd34081e626dcb7">set_freq</a>(<a class="code hl_variable" href="classAP__MotorsUGV.html#a96b40cb1f4f6e535a7922a7df4ba6e06">_motor_mask</a>, uint16_t(<a class="code hl_variable" href="classAP__MotorsUGV.html#acc8aac8396cac4090cbb12832668eaca">_pwm_freq</a> * 1000));</div>
<div class="line"><a id="l00594" name="l00594"></a><span class="lineno">  594</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00595" name="l00595"></a><span class="lineno">  595</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAP__MotorsUGV.html#a27611cd34d855dc865aeb7c9cd9d6ddaaf471159ced251cd618373b6eaff19fc4">PWM_TYPE_DSHOT150</a>:</div>
<div class="line"><a id="l00596" name="l00596"></a><span class="lineno">  596</span>        <a class="code hl_variable" href="AC__AttitudeControl_8cpp.html#a240c1a4ae2a70d1855f91e4a0b1ac938">hal</a>.<a class="code hl_variable" href="classAP__HAL_1_1HAL.html#aa6daf2df3dfc0b9f0f503db64a52b0cc">rcout</a>-&gt;<a class="code hl_function" href="classAP__HAL_1_1RCOutput.html#a612e9a31b97e5774aead5f00c298ed3b">set_output_mode</a>(<a class="code hl_variable" href="classAP__MotorsUGV.html#a96b40cb1f4f6e535a7922a7df4ba6e06">_motor_mask</a>, <a class="code hl_enumvalue" href="classAP__HAL_1_1RCOutput.html#afabff18b963ba9ef5b605e6e7aeca093ad7db50be7ff2c99ea810f30c5fef614c">AP_HAL::RCOutput::MODE_PWM_DSHOT150</a>);</div>
<div class="line"><a id="l00597" name="l00597"></a><span class="lineno">  597</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00598" name="l00598"></a><span class="lineno">  598</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAP__MotorsUGV.html#a27611cd34d855dc865aeb7c9cd9d6ddaa35d8d2c7705bdff2397adc841b7cb0f3">PWM_TYPE_DSHOT300</a>:</div>
<div class="line"><a id="l00599" name="l00599"></a><span class="lineno">  599</span>        <a class="code hl_variable" href="AC__AttitudeControl_8cpp.html#a240c1a4ae2a70d1855f91e4a0b1ac938">hal</a>.<a class="code hl_variable" href="classAP__HAL_1_1HAL.html#aa6daf2df3dfc0b9f0f503db64a52b0cc">rcout</a>-&gt;<a class="code hl_function" href="classAP__HAL_1_1RCOutput.html#a612e9a31b97e5774aead5f00c298ed3b">set_output_mode</a>(<a class="code hl_variable" href="classAP__MotorsUGV.html#a96b40cb1f4f6e535a7922a7df4ba6e06">_motor_mask</a>, <a class="code hl_enumvalue" href="classAP__HAL_1_1RCOutput.html#afabff18b963ba9ef5b605e6e7aeca093a7be772b5075fec936dd6b34e35d60129">AP_HAL::RCOutput::MODE_PWM_DSHOT300</a>);</div>
<div class="line"><a id="l00600" name="l00600"></a><span class="lineno">  600</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00601" name="l00601"></a><span class="lineno">  601</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAP__MotorsUGV.html#a27611cd34d855dc865aeb7c9cd9d6ddaa62cdb59efd013e2b7c2fadfeffdb336b">PWM_TYPE_DSHOT600</a>:</div>
<div class="line"><a id="l00602" name="l00602"></a><span class="lineno">  602</span>        <a class="code hl_variable" href="AC__AttitudeControl_8cpp.html#a240c1a4ae2a70d1855f91e4a0b1ac938">hal</a>.<a class="code hl_variable" href="classAP__HAL_1_1HAL.html#aa6daf2df3dfc0b9f0f503db64a52b0cc">rcout</a>-&gt;<a class="code hl_function" href="classAP__HAL_1_1RCOutput.html#a612e9a31b97e5774aead5f00c298ed3b">set_output_mode</a>(<a class="code hl_variable" href="classAP__MotorsUGV.html#a96b40cb1f4f6e535a7922a7df4ba6e06">_motor_mask</a>, <a class="code hl_enumvalue" href="classAP__HAL_1_1RCOutput.html#afabff18b963ba9ef5b605e6e7aeca093a151001cd6113487e6da91b6c504683fc">AP_HAL::RCOutput::MODE_PWM_DSHOT600</a>);</div>
<div class="line"><a id="l00603" name="l00603"></a><span class="lineno">  603</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00604" name="l00604"></a><span class="lineno">  604</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAP__MotorsUGV.html#a27611cd34d855dc865aeb7c9cd9d6ddaa980c3d73ad866605b2ec24581b995595">PWM_TYPE_DSHOT1200</a>:</div>
<div class="line"><a id="l00605" name="l00605"></a><span class="lineno">  605</span>        <a class="code hl_variable" href="AC__AttitudeControl_8cpp.html#a240c1a4ae2a70d1855f91e4a0b1ac938">hal</a>.<a class="code hl_variable" href="classAP__HAL_1_1HAL.html#aa6daf2df3dfc0b9f0f503db64a52b0cc">rcout</a>-&gt;<a class="code hl_function" href="classAP__HAL_1_1RCOutput.html#a612e9a31b97e5774aead5f00c298ed3b">set_output_mode</a>(<a class="code hl_variable" href="classAP__MotorsUGV.html#a96b40cb1f4f6e535a7922a7df4ba6e06">_motor_mask</a>, <a class="code hl_enumvalue" href="classAP__HAL_1_1RCOutput.html#afabff18b963ba9ef5b605e6e7aeca093abfe8b20b7cc1d255ca86181acfec9099">AP_HAL::RCOutput::MODE_PWM_DSHOT1200</a>);</div>
<div class="line"><a id="l00606" name="l00606"></a><span class="lineno">  606</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00607" name="l00607"></a><span class="lineno">  607</span>    <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00608" name="l00608"></a><span class="lineno">  608</span>        <span class="comment">// do nothing</span></div>
<div class="line"><a id="l00609" name="l00609"></a><span class="lineno">  609</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00610" name="l00610"></a><span class="lineno">  610</span>    }</div>
<div class="line"><a id="l00611" name="l00611"></a><span class="lineno">  611</span>}</div>
</div>
<div class="line"><a id="l00612" name="l00612"></a><span class="lineno">  612</span> </div>
<div class="line"><a id="l00613" name="l00613"></a><span class="lineno">  613</span><span class="comment">// setup for frames with omni motors</span></div>
<div class="foldopen" id="foldopen00614" data-start="{" data-end="}">
<div class="line"><a id="l00614" name="l00614"></a><span class="lineno"><a class="line" href="classAP__MotorsUGV.html#abd435bb6c1dfb06e54efd524199e875f">  614</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classAP__MotorsUGV.html#abd435bb6c1dfb06e54efd524199e875f">AP_MotorsUGV::setup_omni</a>()</div>
<div class="line"><a id="l00615" name="l00615"></a><span class="lineno">  615</span>{</div>
<div class="line"><a id="l00616" name="l00616"></a><span class="lineno">  616</span>    <span class="comment">// remove existing motors</span></div>
<div class="line"><a id="l00617" name="l00617"></a><span class="lineno">  617</span>    <span class="keywordflow">for</span> (int8_t i=0; i&lt;<a class="code hl_variable" href="classAP__MotorsUGV.html#a57fb04e0223dc86ef38e04e0190c19ed">AP_MOTORS_NUM_MOTORS_MAX</a>; i++) {</div>
<div class="line"><a id="l00618" name="l00618"></a><span class="lineno">  618</span>        <a class="code hl_function" href="classAP__MotorsUGV.html#a56b43bbb927e44b7aec222c2c88ba1d1">clear_omni_motors</a>(i);</div>
<div class="line"><a id="l00619" name="l00619"></a><span class="lineno">  619</span>    }</div>
<div class="line"><a id="l00620" name="l00620"></a><span class="lineno">  620</span> </div>
<div class="line"><a id="l00621" name="l00621"></a><span class="lineno">  621</span>    <span class="comment">// hard coded factor configuration</span></div>
<div class="line"><a id="l00622" name="l00622"></a><span class="lineno">  622</span>    <span class="keywordflow">switch</span> (<a class="code hl_variable" href="classAP__MotorsUGV.html#a8fc45391d0e3ca2206741af6cc314b53">_frame_type</a>) {</div>
<div class="line"><a id="l00623" name="l00623"></a><span class="lineno">  623</span> </div>
<div class="line"><a id="l00624" name="l00624"></a><span class="lineno">  624</span>    <span class="comment">//   FRAME TYPE NAME</span></div>
<div class="line"><a id="l00625" name="l00625"></a><span class="lineno">  625</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAP__MotorsUGV.html#a39112be7cfaa9679ae45c5014aeb63bca32848fe6cc0e74cad4866a95e214cc48">FRAME_TYPE_UNDEFINED</a>:</div>
<div class="line"><a id="l00626" name="l00626"></a><span class="lineno">  626</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00627" name="l00627"></a><span class="lineno">  627</span> </div>
<div class="line"><a id="l00628" name="l00628"></a><span class="lineno">  628</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAP__MotorsUGV.html#a39112be7cfaa9679ae45c5014aeb63bca26288a6a28b4c213cd669493d7d45292">FRAME_TYPE_OMNI3</a>:</div>
<div class="line"><a id="l00629" name="l00629"></a><span class="lineno">  629</span>        <a class="code hl_variable" href="classAP__MotorsUGV.html#a435c1d9805d846f9d6989d65c0203697">_motors_num</a> = 3;</div>
<div class="line"><a id="l00630" name="l00630"></a><span class="lineno">  630</span>        <a class="code hl_function" href="classAP__MotorsUGV.html#ab8b83e10df1f499ab233a87d9d3e4846">add_omni_motor</a>(0, 1.0f, -1.0f, -1.0f);</div>
<div class="line"><a id="l00631" name="l00631"></a><span class="lineno">  631</span>        <a class="code hl_function" href="classAP__MotorsUGV.html#ab8b83e10df1f499ab233a87d9d3e4846">add_omni_motor</a>(1, 0.0f, -1.0f, 1.0f);</div>
<div class="line"><a id="l00632" name="l00632"></a><span class="lineno">  632</span>        <a class="code hl_function" href="classAP__MotorsUGV.html#ab8b83e10df1f499ab233a87d9d3e4846">add_omni_motor</a>(2, 1.0f, 1.0f, 1.0f);</div>
<div class="line"><a id="l00633" name="l00633"></a><span class="lineno">  633</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00634" name="l00634"></a><span class="lineno">  634</span> </div>
<div class="line"><a id="l00635" name="l00635"></a><span class="lineno">  635</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAP__MotorsUGV.html#a39112be7cfaa9679ae45c5014aeb63bcad5af86b1581f6215d2306f3604c91af0">FRAME_TYPE_OMNIX</a>:</div>
<div class="line"><a id="l00636" name="l00636"></a><span class="lineno">  636</span>        <a class="code hl_variable" href="classAP__MotorsUGV.html#a435c1d9805d846f9d6989d65c0203697">_motors_num</a> = 4,</div>
<div class="line"><a id="l00637" name="l00637"></a><span class="lineno">  637</span>        <a class="code hl_function" href="classAP__MotorsUGV.html#ab8b83e10df1f499ab233a87d9d3e4846">add_omni_motor</a>(0, 1.0f, -1.0f, -1.0f);</div>
<div class="line"><a id="l00638" name="l00638"></a><span class="lineno">  638</span>        <a class="code hl_function" href="classAP__MotorsUGV.html#ab8b83e10df1f499ab233a87d9d3e4846">add_omni_motor</a>(1, 1.0f, -1.0f, 1.0f);</div>
<div class="line"><a id="l00639" name="l00639"></a><span class="lineno">  639</span>        <a class="code hl_function" href="classAP__MotorsUGV.html#ab8b83e10df1f499ab233a87d9d3e4846">add_omni_motor</a>(2, 1.0f, 1.0f, -1.0f);</div>
<div class="line"><a id="l00640" name="l00640"></a><span class="lineno">  640</span>        <a class="code hl_function" href="classAP__MotorsUGV.html#ab8b83e10df1f499ab233a87d9d3e4846">add_omni_motor</a>(3, 1.0f, 1.0f, 1.0f);</div>
<div class="line"><a id="l00641" name="l00641"></a><span class="lineno">  641</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00642" name="l00642"></a><span class="lineno">  642</span> </div>
<div class="line"><a id="l00643" name="l00643"></a><span class="lineno">  643</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAP__MotorsUGV.html#a39112be7cfaa9679ae45c5014aeb63bca927f6f4ade5de8c4f5f126b0790fe2b9">FRAME_TYPE_OMNIPLUS</a>:</div>
<div class="line"><a id="l00644" name="l00644"></a><span class="lineno">  644</span>        <a class="code hl_variable" href="classAP__MotorsUGV.html#a435c1d9805d846f9d6989d65c0203697">_motors_num</a> = 4;</div>
<div class="line"><a id="l00645" name="l00645"></a><span class="lineno">  645</span>        <a class="code hl_function" href="classAP__MotorsUGV.html#ab8b83e10df1f499ab233a87d9d3e4846">add_omni_motor</a>(0, 0.0f, 1.0f, 1.0f);</div>
<div class="line"><a id="l00646" name="l00646"></a><span class="lineno">  646</span>        <a class="code hl_function" href="classAP__MotorsUGV.html#ab8b83e10df1f499ab233a87d9d3e4846">add_omni_motor</a>(1, 1.0f, 0.0f, 0.0f);</div>
<div class="line"><a id="l00647" name="l00647"></a><span class="lineno">  647</span>        <a class="code hl_function" href="classAP__MotorsUGV.html#ab8b83e10df1f499ab233a87d9d3e4846">add_omni_motor</a>(2, 0.0f, -1.0f, 1.0f);</div>
<div class="line"><a id="l00648" name="l00648"></a><span class="lineno">  648</span>        <a class="code hl_function" href="classAP__MotorsUGV.html#ab8b83e10df1f499ab233a87d9d3e4846">add_omni_motor</a>(3, 1.0f, 0.0f, 0.0f);</div>
<div class="line"><a id="l00649" name="l00649"></a><span class="lineno">  649</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00650" name="l00650"></a><span class="lineno">  650</span>    }</div>
<div class="line"><a id="l00651" name="l00651"></a><span class="lineno">  651</span>}</div>
</div>
<div class="line"><a id="l00652" name="l00652"></a><span class="lineno">  652</span> </div>
<div class="line"><a id="l00653" name="l00653"></a><span class="lineno">  653</span><span class="comment">// add omni motor using separate throttle, steering and lateral factors</span></div>
<div class="foldopen" id="foldopen00654" data-start="{" data-end="}">
<div class="line"><a id="l00654" name="l00654"></a><span class="lineno"><a class="line" href="classAP__MotorsUGV.html#ab8b83e10df1f499ab233a87d9d3e4846">  654</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classAP__MotorsUGV.html#ab8b83e10df1f499ab233a87d9d3e4846">AP_MotorsUGV::add_omni_motor</a>(int8_t motor_num, <span class="keywordtype">float</span> throttle_factor, <span class="keywordtype">float</span> steering_factor, <span class="keywordtype">float</span> lateral_factor)</div>
<div class="line"><a id="l00655" name="l00655"></a><span class="lineno">  655</span>{</div>
<div class="line"><a id="l00656" name="l00656"></a><span class="lineno">  656</span>    <span class="comment">// ensure valid motor number is provided</span></div>
<div class="line"><a id="l00657" name="l00657"></a><span class="lineno">  657</span>    <span class="keywordflow">if</span> (motor_num &gt;= 0 &amp;&amp; motor_num &lt; <a class="code hl_variable" href="classAP__MotorsUGV.html#a57fb04e0223dc86ef38e04e0190c19ed">AP_MOTORS_NUM_MOTORS_MAX</a>) {</div>
<div class="line"><a id="l00658" name="l00658"></a><span class="lineno">  658</span> </div>
<div class="line"><a id="l00659" name="l00659"></a><span class="lineno">  659</span>        <span class="comment">// set throttle, steering and lateral factors</span></div>
<div class="line"><a id="l00660" name="l00660"></a><span class="lineno">  660</span>        <a class="code hl_variable" href="classAP__MotorsUGV.html#a39ec5ee1f11ac2fcca1eedd4ebf381f4">_throttle_factor</a>[motor_num] = throttle_factor;</div>
<div class="line"><a id="l00661" name="l00661"></a><span class="lineno">  661</span>        <a class="code hl_variable" href="classAP__MotorsUGV.html#a87b1939a9b432aaca7f0a9cc96ebcc8e">_steering_factor</a>[motor_num] = steering_factor;</div>
<div class="line"><a id="l00662" name="l00662"></a><span class="lineno">  662</span>        <a class="code hl_variable" href="classAP__MotorsUGV.html#a982e43b7116337c7dfd900bf7c4c9302">_lateral_factor</a>[motor_num] = lateral_factor;</div>
<div class="line"><a id="l00663" name="l00663"></a><span class="lineno">  663</span> </div>
<div class="line"><a id="l00664" name="l00664"></a><span class="lineno">  664</span>        <a class="code hl_function" href="classAP__MotorsUGV.html#af983910c9f084457edc95cb60f79ec9b">add_omni_motor_num</a>(motor_num);</div>
<div class="line"><a id="l00665" name="l00665"></a><span class="lineno">  665</span>    }</div>
<div class="line"><a id="l00666" name="l00666"></a><span class="lineno">  666</span>}</div>
</div>
<div class="line"><a id="l00667" name="l00667"></a><span class="lineno">  667</span> </div>
<div class="line"><a id="l00668" name="l00668"></a><span class="lineno">  668</span><span class="comment">// add an omni motor and set up default output function</span></div>
<div class="foldopen" id="foldopen00669" data-start="{" data-end="}">
<div class="line"><a id="l00669" name="l00669"></a><span class="lineno"><a class="line" href="classAP__MotorsUGV.html#af983910c9f084457edc95cb60f79ec9b">  669</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classAP__MotorsUGV.html#af983910c9f084457edc95cb60f79ec9b">AP_MotorsUGV::add_omni_motor_num</a>(int8_t motor_num)</div>
<div class="line"><a id="l00670" name="l00670"></a><span class="lineno">  670</span>{</div>
<div class="line"><a id="l00671" name="l00671"></a><span class="lineno">  671</span>    <span class="comment">// ensure a valid motor number is provided</span></div>
<div class="line"><a id="l00672" name="l00672"></a><span class="lineno">  672</span>    <span class="keywordflow">if</span> (motor_num &gt;= 0 &amp;&amp; motor_num &lt; <a class="code hl_variable" href="classAP__MotorsUGV.html#a57fb04e0223dc86ef38e04e0190c19ed">AP_MOTORS_NUM_MOTORS_MAX</a>) {</div>
<div class="line"><a id="l00673" name="l00673"></a><span class="lineno">  673</span>        uint8_t <a class="code hl_variable" href="examples_2AnalogIn_2AnalogIn_8cpp.html#a130f3ebe4c1bb6993e1094760227ad6a">chan</a>;</div>
<div class="line"><a id="l00674" name="l00674"></a><span class="lineno">  674</span>        <a class="code hl_enumeration" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68">SRV_Channel::Aux_servo_function_t</a> function = <a class="code hl_function" href="classSRV__Channels.html#acab9e1aba9fcbde6e598169af5b3181f">SRV_Channels::get_motor_function</a>(motor_num);</div>
<div class="line"><a id="l00675" name="l00675"></a><span class="lineno">  675</span>        <a class="code hl_function" href="classSRV__Channels.html#a97577ca02c12e3b851cd5d563d32b640">SRV_Channels::set_aux_channel_default</a>(function, motor_num);</div>
<div class="line"><a id="l00676" name="l00676"></a><span class="lineno">  676</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="classSRV__Channels.html#aa8ce392569ac9b773e5edd27bd3c6650">SRV_Channels::find_channel</a>(function, <a class="code hl_variable" href="examples_2AnalogIn_2AnalogIn_8cpp.html#a130f3ebe4c1bb6993e1094760227ad6a">chan</a>)) {</div>
<div class="line"><a id="l00677" name="l00677"></a><span class="lineno">  677</span>            <a class="code hl_define" href="GCS_8h.html#a266bfe8eda675e1092f045e93932b4a6">GCS_SEND_TEXT</a>(MAV_SEVERITY_ERROR, <span class="stringliteral">&quot;Motors: unable to setup motor %u&quot;</span>, motor_num);</div>
<div class="line"><a id="l00678" name="l00678"></a><span class="lineno">  678</span>        }</div>
<div class="line"><a id="l00679" name="l00679"></a><span class="lineno">  679</span>    }</div>
<div class="line"><a id="l00680" name="l00680"></a><span class="lineno">  680</span>}</div>
</div>
<div class="line"><a id="l00681" name="l00681"></a><span class="lineno">  681</span> </div>
<div class="line"><a id="l00682" name="l00682"></a><span class="lineno">  682</span><span class="comment">// disable omni motor and remove all throttle, steering and lateral factor for this motor</span></div>
<div class="foldopen" id="foldopen00683" data-start="{" data-end="}">
<div class="line"><a id="l00683" name="l00683"></a><span class="lineno"><a class="line" href="classAP__MotorsUGV.html#a56b43bbb927e44b7aec222c2c88ba1d1">  683</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classAP__MotorsUGV.html#a56b43bbb927e44b7aec222c2c88ba1d1">AP_MotorsUGV::clear_omni_motors</a>(int8_t motor_num)</div>
<div class="line"><a id="l00684" name="l00684"></a><span class="lineno">  684</span>{</div>
<div class="line"><a id="l00685" name="l00685"></a><span class="lineno">  685</span>    <span class="comment">// ensure valid motor number is provided</span></div>
<div class="line"><a id="l00686" name="l00686"></a><span class="lineno">  686</span>    <span class="keywordflow">if</span> (motor_num &gt;= 0 &amp;&amp; motor_num &lt; <a class="code hl_variable" href="classAP__MotorsUGV.html#a57fb04e0223dc86ef38e04e0190c19ed">AP_MOTORS_NUM_MOTORS_MAX</a>) {</div>
<div class="line"><a id="l00687" name="l00687"></a><span class="lineno">  687</span>        <span class="comment">// disable the motor and set factors to zero</span></div>
<div class="line"><a id="l00688" name="l00688"></a><span class="lineno">  688</span>        <a class="code hl_variable" href="classAP__MotorsUGV.html#a39ec5ee1f11ac2fcca1eedd4ebf381f4">_throttle_factor</a>[motor_num] = 0;</div>
<div class="line"><a id="l00689" name="l00689"></a><span class="lineno">  689</span>        <a class="code hl_variable" href="classAP__MotorsUGV.html#a87b1939a9b432aaca7f0a9cc96ebcc8e">_steering_factor</a>[motor_num] = 0;</div>
<div class="line"><a id="l00690" name="l00690"></a><span class="lineno">  690</span>        <a class="code hl_variable" href="classAP__MotorsUGV.html#a982e43b7116337c7dfd900bf7c4c9302">_lateral_factor</a>[motor_num] = 0;</div>
<div class="line"><a id="l00691" name="l00691"></a><span class="lineno">  691</span>    }</div>
<div class="line"><a id="l00692" name="l00692"></a><span class="lineno">  692</span>}</div>
</div>
<div class="line"><a id="l00693" name="l00693"></a><span class="lineno">  693</span> </div>
<div class="line"><a id="l00694" name="l00694"></a><span class="lineno">  694</span><span class="comment">// output to regular steering and throttle channels</span></div>
<div class="foldopen" id="foldopen00695" data-start="{" data-end="}">
<div class="line"><a id="l00695" name="l00695"></a><span class="lineno"><a class="line" href="classAP__MotorsUGV.html#af72da5854381c77f10a70d4000cf3cbd">  695</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classAP__MotorsUGV.html#af72da5854381c77f10a70d4000cf3cbd">AP_MotorsUGV::output_regular</a>(<span class="keywordtype">bool</span> armed, <span class="keywordtype">float</span> ground_speed, <span class="keywordtype">float</span> steering, <span class="keywordtype">float</span> throttle)</div>
<div class="line"><a id="l00696" name="l00696"></a><span class="lineno">  696</span>{</div>
<div class="line"><a id="l00697" name="l00697"></a><span class="lineno">  697</span>    <span class="comment">// output to throttle channels</span></div>
<div class="line"><a id="l00698" name="l00698"></a><span class="lineno">  698</span>    <span class="keywordflow">if</span> (armed) {</div>
<div class="line"><a id="l00699" name="l00699"></a><span class="lineno">  699</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__MotorsUGV.html#a863105d4e480d2f916b545076db31bf2">_scale_steering</a>) {</div>
<div class="line"><a id="l00700" name="l00700"></a><span class="lineno">  700</span>            <span class="comment">// vectored thrust handling</span></div>
<div class="line"><a id="l00701" name="l00701"></a><span class="lineno">  701</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="classAP__MotorsUGV.html#a8d116d235f4f8f79bc837f34718f4776">have_vectored_thrust</a>()) {</div>
<div class="line"><a id="l00702" name="l00702"></a><span class="lineno">  702</span> </div>
<div class="line"><a id="l00703" name="l00703"></a><span class="lineno">  703</span>                <span class="comment">// normalise desired steering and throttle to ease calculations</span></div>
<div class="line"><a id="l00704" name="l00704"></a><span class="lineno">  704</span>                <span class="keywordtype">float</span> steering_norm = steering / 4500.0f;</div>
<div class="line"><a id="l00705" name="l00705"></a><span class="lineno">  705</span>                <span class="keyword">const</span> <span class="keywordtype">float</span> throttle_norm = throttle * 0.01f;</div>
<div class="line"><a id="l00706" name="l00706"></a><span class="lineno">  706</span> </div>
<div class="line"><a id="l00707" name="l00707"></a><span class="lineno">  707</span>                <span class="comment">// steering can never be more than throttle * tan(_vector_angle_max)</span></div>
<div class="line"><a id="l00708" name="l00708"></a><span class="lineno">  708</span>                <span class="keyword">const</span> <span class="keywordtype">float</span> vector_angle_max_rad = <a class="code hl_function" href="AP__Math_8h.html#a49ad7fa2fa2e3d8aa75e8e0ec3f83b99">radians</a>(<a class="code hl_define" href="AP__Math_8h.html#a5256308fd38a7098b8f95607aa56888f">constrain_float</a>(<a class="code hl_variable" href="classAP__MotorsUGV.html#a399fad8e84efcc630fe4bc204e001968">_vector_angle_max</a>, 0.0f, 90.0f));</div>
<div class="line"><a id="l00709" name="l00709"></a><span class="lineno">  709</span>                <span class="keyword">const</span> <span class="keywordtype">float</span> steering_norm_lim = fabsf(throttle_norm * tanf(vector_angle_max_rad));</div>
<div class="line"><a id="l00710" name="l00710"></a><span class="lineno">  710</span>                <span class="keywordflow">if</span> (fabsf(steering_norm) &gt; steering_norm_lim) {</div>
<div class="line"><a id="l00711" name="l00711"></a><span class="lineno">  711</span>                    <span class="keywordflow">if</span> (<a class="code hl_function" href="AP__Math_8h.html#a4e3ae698e8f99cec214348ad233e3c41">is_positive</a>(steering_norm)) {</div>
<div class="line"><a id="l00712" name="l00712"></a><span class="lineno">  712</span>                        steering_norm = steering_norm_lim;</div>
<div class="line"><a id="l00713" name="l00713"></a><span class="lineno">  713</span>                    }</div>
<div class="line"><a id="l00714" name="l00714"></a><span class="lineno">  714</span>                    <span class="keywordflow">if</span> (<a class="code hl_function" href="AP__Math_8h.html#a8b6f71a42818d74fd8bfe348108942fa">is_negative</a>(steering_norm)) {</div>
<div class="line"><a id="l00715" name="l00715"></a><span class="lineno">  715</span>                        steering_norm = -steering_norm_lim;</div>
<div class="line"><a id="l00716" name="l00716"></a><span class="lineno">  716</span>                    }</div>
<div class="line"><a id="l00717" name="l00717"></a><span class="lineno">  717</span>                    <a class="code hl_variable" href="classAP__MotorsUGV.html#a88abdedf1b1220d748e4a5dc595bcdba">limit</a>.<a class="code hl_variable" href="structAP__MotorsUGV_1_1AP__MotorsUGV__limit.html#a62dd8a7d50dc33039bf2aef718829007">steer_right</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00718" name="l00718"></a><span class="lineno">  718</span>                    <a class="code hl_variable" href="classAP__MotorsUGV.html#a88abdedf1b1220d748e4a5dc595bcdba">limit</a>.<a class="code hl_variable" href="structAP__MotorsUGV_1_1AP__MotorsUGV__limit.html#ac4a751ead8632497191684c0de727331">steer_left</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00719" name="l00719"></a><span class="lineno">  719</span>                }</div>
<div class="line"><a id="l00720" name="l00720"></a><span class="lineno">  720</span> </div>
<div class="line"><a id="l00721" name="l00721"></a><span class="lineno">  721</span>                <span class="keywordflow">if</span> (!<a class="code hl_function" href="AP__Math_8h.html#a2a12cce483e9b870da70d30406d82c60">is_zero</a>(throttle_norm)) {</div>
<div class="line"><a id="l00722" name="l00722"></a><span class="lineno">  722</span>                    <span class="comment">// calculate steering angle</span></div>
<div class="line"><a id="l00723" name="l00723"></a><span class="lineno">  723</span>                    <span class="keywordtype">float</span> steering_angle_rad = atanf(steering_norm / throttle_norm);</div>
<div class="line"><a id="l00724" name="l00724"></a><span class="lineno">  724</span>                    <span class="comment">// limit steering angle to vector_angle_max</span></div>
<div class="line"><a id="l00725" name="l00725"></a><span class="lineno">  725</span>                    <span class="keywordflow">if</span> (fabsf(steering_angle_rad) &gt; vector_angle_max_rad) {</div>
<div class="line"><a id="l00726" name="l00726"></a><span class="lineno">  726</span>                        steering_angle_rad = <a class="code hl_define" href="AP__Math_8h.html#a5256308fd38a7098b8f95607aa56888f">constrain_float</a>(steering_angle_rad, -vector_angle_max_rad, vector_angle_max_rad);</div>
<div class="line"><a id="l00727" name="l00727"></a><span class="lineno">  727</span>                        <a class="code hl_variable" href="classAP__MotorsUGV.html#a88abdedf1b1220d748e4a5dc595bcdba">limit</a>.<a class="code hl_variable" href="structAP__MotorsUGV_1_1AP__MotorsUGV__limit.html#a62dd8a7d50dc33039bf2aef718829007">steer_right</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00728" name="l00728"></a><span class="lineno">  728</span>                        <a class="code hl_variable" href="classAP__MotorsUGV.html#a88abdedf1b1220d748e4a5dc595bcdba">limit</a>.<a class="code hl_variable" href="structAP__MotorsUGV_1_1AP__MotorsUGV__limit.html#ac4a751ead8632497191684c0de727331">steer_left</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00729" name="l00729"></a><span class="lineno">  729</span>                     }</div>
<div class="line"><a id="l00730" name="l00730"></a><span class="lineno">  730</span> </div>
<div class="line"><a id="l00731" name="l00731"></a><span class="lineno">  731</span>                    <span class="comment">// convert steering angle to steering output</span></div>
<div class="line"><a id="l00732" name="l00732"></a><span class="lineno">  732</span>                    steering = steering_angle_rad / vector_angle_max_rad * 4500.0f;</div>
<div class="line"><a id="l00733" name="l00733"></a><span class="lineno">  733</span> </div>
<div class="line"><a id="l00734" name="l00734"></a><span class="lineno">  734</span>                    <span class="comment">// scale up throttle to compensate for steering angle</span></div>
<div class="line"><a id="l00735" name="l00735"></a><span class="lineno">  735</span>                    <span class="keyword">const</span> <span class="keywordtype">float</span> throttle_scaler_inv = cosf(steering_angle_rad);</div>
<div class="line"><a id="l00736" name="l00736"></a><span class="lineno">  736</span>                    <span class="keywordflow">if</span> (!<a class="code hl_function" href="AP__Math_8h.html#a2a12cce483e9b870da70d30406d82c60">is_zero</a>(throttle_scaler_inv)) {</div>
<div class="line"><a id="l00737" name="l00737"></a><span class="lineno">  737</span>                        throttle /= throttle_scaler_inv;</div>
<div class="line"><a id="l00738" name="l00738"></a><span class="lineno">  738</span>                    }</div>
<div class="line"><a id="l00739" name="l00739"></a><span class="lineno">  739</span>                }</div>
<div class="line"><a id="l00740" name="l00740"></a><span class="lineno">  740</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00741" name="l00741"></a><span class="lineno">  741</span>                <span class="comment">// scale steering down as speed increase above MOT_SPD_SCA_BASE (1 m/s default)</span></div>
<div class="line"><a id="l00742" name="l00742"></a><span class="lineno">  742</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="AP__Math_8h.html#a4e3ae698e8f99cec214348ad233e3c41">is_positive</a>(<a class="code hl_variable" href="classAP__MotorsUGV.html#a0c591a188874e128abf70a7404759caf">_speed_scale_base</a>) &amp;&amp; (fabsf(ground_speed) &gt; <a class="code hl_variable" href="classAP__MotorsUGV.html#a0c591a188874e128abf70a7404759caf">_speed_scale_base</a>)) {</div>
<div class="line"><a id="l00743" name="l00743"></a><span class="lineno">  743</span>                    steering *= (<a class="code hl_variable" href="classAP__MotorsUGV.html#a0c591a188874e128abf70a7404759caf">_speed_scale_base</a> / fabsf(ground_speed));</div>
<div class="line"><a id="l00744" name="l00744"></a><span class="lineno">  744</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00745" name="l00745"></a><span class="lineno">  745</span>                    <span class="comment">// regular steering rover at low speed so set limits to stop I-term build-up in controllers</span></div>
<div class="line"><a id="l00746" name="l00746"></a><span class="lineno">  746</span>                    <span class="keywordflow">if</span> (!<a class="code hl_function" href="classAP__MotorsUGV.html#a3c13ea4a9949243234dce823c2fa961d">have_skid_steering</a>()) {</div>
<div class="line"><a id="l00747" name="l00747"></a><span class="lineno">  747</span>                        <a class="code hl_variable" href="classAP__MotorsUGV.html#a88abdedf1b1220d748e4a5dc595bcdba">limit</a>.<a class="code hl_variable" href="structAP__MotorsUGV_1_1AP__MotorsUGV__limit.html#ac4a751ead8632497191684c0de727331">steer_left</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00748" name="l00748"></a><span class="lineno">  748</span>                        <a class="code hl_variable" href="classAP__MotorsUGV.html#a88abdedf1b1220d748e4a5dc595bcdba">limit</a>.<a class="code hl_variable" href="structAP__MotorsUGV_1_1AP__MotorsUGV__limit.html#a62dd8a7d50dc33039bf2aef718829007">steer_right</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00749" name="l00749"></a><span class="lineno">  749</span>                    }</div>
<div class="line"><a id="l00750" name="l00750"></a><span class="lineno">  750</span>                }</div>
<div class="line"><a id="l00751" name="l00751"></a><span class="lineno">  751</span>                <span class="comment">// reverse steering direction when backing up</span></div>
<div class="line"><a id="l00752" name="l00752"></a><span class="lineno">  752</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="AP__Math_8h.html#a8b6f71a42818d74fd8bfe348108942fa">is_negative</a>(ground_speed)) {</div>
<div class="line"><a id="l00753" name="l00753"></a><span class="lineno">  753</span>                    steering *= -1.0f;</div>
<div class="line"><a id="l00754" name="l00754"></a><span class="lineno">  754</span>                }</div>
<div class="line"><a id="l00755" name="l00755"></a><span class="lineno">  755</span>            }</div>
<div class="line"><a id="l00756" name="l00756"></a><span class="lineno">  756</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00757" name="l00757"></a><span class="lineno">  757</span>            <span class="comment">// reverse steering direction when backing up</span></div>
<div class="line"><a id="l00758" name="l00758"></a><span class="lineno">  758</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="AP__Math_8h.html#a8b6f71a42818d74fd8bfe348108942fa">is_negative</a>(throttle)) {</div>
<div class="line"><a id="l00759" name="l00759"></a><span class="lineno">  759</span>                steering *= -1.0f;</div>
<div class="line"><a id="l00760" name="l00760"></a><span class="lineno">  760</span>            }</div>
<div class="line"><a id="l00761" name="l00761"></a><span class="lineno">  761</span>        }</div>
<div class="line"><a id="l00762" name="l00762"></a><span class="lineno">  762</span>        <a class="code hl_function" href="classAP__MotorsUGV.html#acdbf927cf3077332d0ce32a2d8829848">output_throttle</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a2b2f8365b3776f0a588082805cd9acbe">SRV_Channel::k_throttle</a>, throttle);</div>
<div class="line"><a id="l00763" name="l00763"></a><span class="lineno">  763</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00764" name="l00764"></a><span class="lineno">  764</span>        <span class="comment">// handle disarmed case</span></div>
<div class="line"><a id="l00765" name="l00765"></a><span class="lineno">  765</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__MotorsUGV.html#a8b1c592622478d3b9ce90b11cfdb7c00">_disarm_disable_pwm</a>) {</div>
<div class="line"><a id="l00766" name="l00766"></a><span class="lineno">  766</span>            <a class="code hl_function" href="classSRV__Channels.html#aff9ab18c996b319de867b4e87b75d4e5">SRV_Channels::set_output_limit</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a2b2f8365b3776f0a588082805cd9acbe">SRV_Channel::k_throttle</a>, <a class="code hl_enumvalue" href="classSRV__Channel.html#a86fdf4fa1eaa8f844eccb555359aa129a5441ed3109cdb5a732375bf05a74e111">SRV_Channel::Limit::ZERO_PWM</a>);</div>
<div class="line"><a id="l00767" name="l00767"></a><span class="lineno">  767</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00768" name="l00768"></a><span class="lineno">  768</span>            <a class="code hl_function" href="classSRV__Channels.html#aff9ab18c996b319de867b4e87b75d4e5">SRV_Channels::set_output_limit</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a2b2f8365b3776f0a588082805cd9acbe">SRV_Channel::k_throttle</a>, <a class="code hl_enumvalue" href="classSRV__Channel.html#a86fdf4fa1eaa8f844eccb555359aa129aa32049f307ffa78cf7b4586ac7d98e06">SRV_Channel::Limit::TRIM</a>);</div>
<div class="line"><a id="l00769" name="l00769"></a><span class="lineno">  769</span>        }</div>
<div class="line"><a id="l00770" name="l00770"></a><span class="lineno">  770</span>    }</div>
<div class="line"><a id="l00771" name="l00771"></a><span class="lineno">  771</span> </div>
<div class="line"><a id="l00772" name="l00772"></a><span class="lineno">  772</span>    <span class="comment">// clear and set limits based on input</span></div>
<div class="line"><a id="l00773" name="l00773"></a><span class="lineno">  773</span>    <span class="comment">// we do this here because vectored thrust or speed scaling may have reduced steering request</span></div>
<div class="line"><a id="l00774" name="l00774"></a><span class="lineno">  774</span>    <a class="code hl_function" href="classAP__MotorsUGV.html#aefc1524c06ea9c0049e70790f11a9334">set_limits_from_input</a>(armed, steering, throttle);</div>
<div class="line"><a id="l00775" name="l00775"></a><span class="lineno">  775</span> </div>
<div class="line"><a id="l00776" name="l00776"></a><span class="lineno">  776</span>    <span class="comment">// constrain steering</span></div>
<div class="line"><a id="l00777" name="l00777"></a><span class="lineno">  777</span>    steering = <a class="code hl_define" href="AP__Math_8h.html#a5256308fd38a7098b8f95607aa56888f">constrain_float</a>(steering, -4500.0f, 4500.0f);</div>
<div class="line"><a id="l00778" name="l00778"></a><span class="lineno">  778</span> </div>
<div class="line"><a id="l00779" name="l00779"></a><span class="lineno">  779</span>    <span class="comment">// always allow steering to move</span></div>
<div class="line"><a id="l00780" name="l00780"></a><span class="lineno">  780</span>    <a class="code hl_function" href="classSRV__Channels.html#a06cf1d6d4bd8b1971c333184bb4bcb55">SRV_Channels::set_output_scaled</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a17b07ea85c29e2b07e8ab73568cf4fd2">SRV_Channel::k_steering</a>, steering);</div>
<div class="line"><a id="l00781" name="l00781"></a><span class="lineno">  781</span>}</div>
</div>
<div class="line"><a id="l00782" name="l00782"></a><span class="lineno">  782</span> </div>
<div class="line"><a id="l00783" name="l00783"></a><span class="lineno">  783</span><span class="comment">// output to skid steering channels</span></div>
<div class="foldopen" id="foldopen00784" data-start="{" data-end="}">
<div class="line"><a id="l00784" name="l00784"></a><span class="lineno"><a class="line" href="classAP__MotorsUGV.html#ac6a939c7d6afae6228ac9447c08c195b">  784</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classAP__MotorsUGV.html#ac6a939c7d6afae6228ac9447c08c195b">AP_MotorsUGV::output_skid_steering</a>(<span class="keywordtype">bool</span> armed, <span class="keywordtype">float</span> steering, <span class="keywordtype">float</span> throttle, <span class="keywordtype">float</span> dt)</div>
<div class="line"><a id="l00785" name="l00785"></a><span class="lineno">  785</span>{</div>
<div class="line"><a id="l00786" name="l00786"></a><span class="lineno">  786</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="classAP__MotorsUGV.html#a3c13ea4a9949243234dce823c2fa961d">have_skid_steering</a>()) {</div>
<div class="line"><a id="l00787" name="l00787"></a><span class="lineno">  787</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00788" name="l00788"></a><span class="lineno">  788</span>    }</div>
<div class="line"><a id="l00789" name="l00789"></a><span class="lineno">  789</span> </div>
<div class="line"><a id="l00790" name="l00790"></a><span class="lineno">  790</span>    <span class="comment">// clear and set limits based on input</span></div>
<div class="line"><a id="l00791" name="l00791"></a><span class="lineno">  791</span>    <a class="code hl_function" href="classAP__MotorsUGV.html#aefc1524c06ea9c0049e70790f11a9334">set_limits_from_input</a>(armed, steering, throttle);</div>
<div class="line"><a id="l00792" name="l00792"></a><span class="lineno">  792</span> </div>
<div class="line"><a id="l00793" name="l00793"></a><span class="lineno">  793</span>    <span class="comment">// constrain steering</span></div>
<div class="line"><a id="l00794" name="l00794"></a><span class="lineno">  794</span>    steering = <a class="code hl_define" href="AP__Math_8h.html#a5256308fd38a7098b8f95607aa56888f">constrain_float</a>(steering, -4500.0f, 4500.0f);</div>
<div class="line"><a id="l00795" name="l00795"></a><span class="lineno">  795</span> </div>
<div class="line"><a id="l00796" name="l00796"></a><span class="lineno">  796</span>    <span class="comment">// handle simpler disarmed case</span></div>
<div class="line"><a id="l00797" name="l00797"></a><span class="lineno">  797</span>    <span class="keywordflow">if</span> (!armed) {</div>
<div class="line"><a id="l00798" name="l00798"></a><span class="lineno">  798</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__MotorsUGV.html#a8b1c592622478d3b9ce90b11cfdb7c00">_disarm_disable_pwm</a>) {</div>
<div class="line"><a id="l00799" name="l00799"></a><span class="lineno">  799</span>            <a class="code hl_function" href="classSRV__Channels.html#aff9ab18c996b319de867b4e87b75d4e5">SRV_Channels::set_output_limit</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a44f85b5c346aea6379642a4970f0a0a2">SRV_Channel::k_throttleLeft</a>, <a class="code hl_enumvalue" href="classSRV__Channel.html#a86fdf4fa1eaa8f844eccb555359aa129a5441ed3109cdb5a732375bf05a74e111">SRV_Channel::Limit::ZERO_PWM</a>);</div>
<div class="line"><a id="l00800" name="l00800"></a><span class="lineno">  800</span>            <a class="code hl_function" href="classSRV__Channels.html#aff9ab18c996b319de867b4e87b75d4e5">SRV_Channels::set_output_limit</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a5ab419baae8c0128be85cf73b068eeef">SRV_Channel::k_throttleRight</a>, <a class="code hl_enumvalue" href="classSRV__Channel.html#a86fdf4fa1eaa8f844eccb555359aa129a5441ed3109cdb5a732375bf05a74e111">SRV_Channel::Limit::ZERO_PWM</a>);</div>
<div class="line"><a id="l00801" name="l00801"></a><span class="lineno">  801</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00802" name="l00802"></a><span class="lineno">  802</span>            <a class="code hl_function" href="classSRV__Channels.html#aff9ab18c996b319de867b4e87b75d4e5">SRV_Channels::set_output_limit</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a44f85b5c346aea6379642a4970f0a0a2">SRV_Channel::k_throttleLeft</a>, <a class="code hl_enumvalue" href="classSRV__Channel.html#a86fdf4fa1eaa8f844eccb555359aa129aa32049f307ffa78cf7b4586ac7d98e06">SRV_Channel::Limit::TRIM</a>);</div>
<div class="line"><a id="l00803" name="l00803"></a><span class="lineno">  803</span>            <a class="code hl_function" href="classSRV__Channels.html#aff9ab18c996b319de867b4e87b75d4e5">SRV_Channels::set_output_limit</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a5ab419baae8c0128be85cf73b068eeef">SRV_Channel::k_throttleRight</a>, <a class="code hl_enumvalue" href="classSRV__Channel.html#a86fdf4fa1eaa8f844eccb555359aa129aa32049f307ffa78cf7b4586ac7d98e06">SRV_Channel::Limit::TRIM</a>);</div>
<div class="line"><a id="l00804" name="l00804"></a><span class="lineno">  804</span>        }</div>
<div class="line"><a id="l00805" name="l00805"></a><span class="lineno">  805</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00806" name="l00806"></a><span class="lineno">  806</span>    }</div>
<div class="line"><a id="l00807" name="l00807"></a><span class="lineno">  807</span> </div>
<div class="line"><a id="l00808" name="l00808"></a><span class="lineno">  808</span>    <span class="comment">// skid steering mixer</span></div>
<div class="line"><a id="l00809" name="l00809"></a><span class="lineno">  809</span>    <span class="keywordtype">float</span> steering_scaled = steering / 4500.0f; <span class="comment">// steering scaled -1 to +1</span></div>
<div class="line"><a id="l00810" name="l00810"></a><span class="lineno">  810</span>    <span class="keywordtype">float</span> throttle_scaled = throttle * 0.01f;  <span class="comment">// throttle scaled -1 to +1</span></div>
<div class="line"><a id="l00811" name="l00811"></a><span class="lineno">  811</span> </div>
<div class="line"><a id="l00812" name="l00812"></a><span class="lineno">  812</span>    <span class="comment">// sanitize values for asymmetry of thrust, mixer assumes forward thrust is always larger than reverse</span></div>
<div class="line"><a id="l00813" name="l00813"></a><span class="lineno">  813</span>    <span class="keyword">const</span> <span class="keywordtype">float</span> thrust_asymmetry = <a class="code hl_define" href="monocypher_8cpp.html#afa99ec4acc4ecb2dc3c2d05da15d0e3f">MAX</a>(<a class="code hl_variable" href="classAP__MotorsUGV.html#a27c52a892e7e27ddc9eee848380d07bf">_thrust_asymmetry</a>, 1.0);</div>
<div class="line"><a id="l00814" name="l00814"></a><span class="lineno">  814</span>    <span class="keyword">const</span> <span class="keywordtype">float</span> lower_throttle_limit = -1.0 / thrust_asymmetry;</div>
<div class="line"><a id="l00815" name="l00815"></a><span class="lineno">  815</span> </div>
<div class="line"><a id="l00816" name="l00816"></a><span class="lineno">  816</span>    <span class="comment">// Maximum steering is half way between upper and lower limits</span></div>
<div class="line"><a id="l00817" name="l00817"></a><span class="lineno">  817</span>    <span class="keyword">const</span> <span class="keywordtype">float</span> best_steering_throttle = (1.0 + lower_throttle_limit) * 0.5;</div>
<div class="line"><a id="l00818" name="l00818"></a><span class="lineno">  818</span>    <span class="keywordtype">float</span> steering_range;</div>
<div class="line"><a id="l00819" name="l00819"></a><span class="lineno">  819</span>    <span class="keywordflow">if</span> (throttle_scaled &lt; best_steering_throttle) {</div>
<div class="line"><a id="l00820" name="l00820"></a><span class="lineno">  820</span>        <span class="comment">// steering range is reduced as throttle will never be increased by mixer</span></div>
<div class="line"><a id="l00821" name="l00821"></a><span class="lineno">  821</span>        steering_range = <a class="code hl_define" href="monocypher_8cpp.html#afa99ec4acc4ecb2dc3c2d05da15d0e3f">MAX</a>(throttle_scaled,0.0) - lower_throttle_limit;</div>
<div class="line"><a id="l00822" name="l00822"></a><span class="lineno">  822</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00823" name="l00823"></a><span class="lineno">  823</span>        <span class="comment">// full range available, throttle can always be lowered down to best_steering_throttle</span></div>
<div class="line"><a id="l00824" name="l00824"></a><span class="lineno">  824</span>        steering_range = 1 - best_steering_throttle;</div>
<div class="line"><a id="l00825" name="l00825"></a><span class="lineno">  825</span>    }</div>
<div class="line"><a id="l00826" name="l00826"></a><span class="lineno">  826</span> </div>
<div class="line"><a id="l00827" name="l00827"></a><span class="lineno">  827</span>    <span class="comment">// apply constraints</span></div>
<div class="line"><a id="l00828" name="l00828"></a><span class="lineno">  828</span>    <span class="keywordflow">if</span> (steering_scaled &gt; steering_range) {</div>
<div class="line"><a id="l00829" name="l00829"></a><span class="lineno">  829</span>        <a class="code hl_variable" href="classAP__MotorsUGV.html#a88abdedf1b1220d748e4a5dc595bcdba">limit</a>.<a class="code hl_variable" href="structAP__MotorsUGV_1_1AP__MotorsUGV__limit.html#a62dd8a7d50dc33039bf2aef718829007">steer_right</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00830" name="l00830"></a><span class="lineno">  830</span>        steering_scaled = steering_range;</div>
<div class="line"><a id="l00831" name="l00831"></a><span class="lineno">  831</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (steering_scaled &lt; -steering_range) {</div>
<div class="line"><a id="l00832" name="l00832"></a><span class="lineno">  832</span>        <a class="code hl_variable" href="classAP__MotorsUGV.html#a88abdedf1b1220d748e4a5dc595bcdba">limit</a>.<a class="code hl_variable" href="structAP__MotorsUGV_1_1AP__MotorsUGV__limit.html#ac4a751ead8632497191684c0de727331">steer_left</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00833" name="l00833"></a><span class="lineno">  833</span>        steering_scaled = -steering_range;</div>
<div class="line"><a id="l00834" name="l00834"></a><span class="lineno">  834</span>    }</div>
<div class="line"><a id="l00835" name="l00835"></a><span class="lineno">  835</span>    <span class="keywordflow">if</span> (throttle_scaled &gt; 1.0) {</div>
<div class="line"><a id="l00836" name="l00836"></a><span class="lineno">  836</span>        <a class="code hl_variable" href="classAP__MotorsUGV.html#a88abdedf1b1220d748e4a5dc595bcdba">limit</a>.<a class="code hl_variable" href="structAP__MotorsUGV_1_1AP__MotorsUGV__limit.html#a36d067b02d9d960d439ef1ab40dcc812">throttle_upper</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00837" name="l00837"></a><span class="lineno">  837</span>        throttle_scaled = 1.0;</div>
<div class="line"><a id="l00838" name="l00838"></a><span class="lineno">  838</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (throttle_scaled &lt; lower_throttle_limit) {</div>
<div class="line"><a id="l00839" name="l00839"></a><span class="lineno">  839</span>        <a class="code hl_variable" href="classAP__MotorsUGV.html#a88abdedf1b1220d748e4a5dc595bcdba">limit</a>.<a class="code hl_variable" href="structAP__MotorsUGV_1_1AP__MotorsUGV__limit.html#a1a4e8eb4ca5a5cbb9805805b787422a8">throttle_lower</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00840" name="l00840"></a><span class="lineno">  840</span>        throttle_scaled = lower_throttle_limit;</div>
<div class="line"><a id="l00841" name="l00841"></a><span class="lineno">  841</span>    }</div>
<div class="line"><a id="l00842" name="l00842"></a><span class="lineno">  842</span> </div>
<div class="line"><a id="l00843" name="l00843"></a><span class="lineno">  843</span>    <span class="comment">// All throttle or all steering will now fit, check if they will both fit together</span></div>
<div class="line"><a id="l00844" name="l00844"></a><span class="lineno">  844</span>    <span class="keyword">const</span> <span class="keywordtype">float</span> max_output = throttle_scaled + fabsf(steering_scaled);</div>
<div class="line"><a id="l00845" name="l00845"></a><span class="lineno">  845</span>    <span class="keyword">const</span> <span class="keywordtype">float</span> min_output = throttle_scaled - fabsf(steering_scaled);</div>
<div class="line"><a id="l00846" name="l00846"></a><span class="lineno">  846</span> </div>
<div class="line"><a id="l00847" name="l00847"></a><span class="lineno">  847</span>    <span class="comment">// check for saturation and scale back throttle and steering proportionally</span></div>
<div class="line"><a id="l00848" name="l00848"></a><span class="lineno">  848</span>    <span class="keyword">const</span> <span class="keywordtype">float</span> saturation_value = <a class="code hl_define" href="monocypher_8cpp.html#afa99ec4acc4ecb2dc3c2d05da15d0e3f">MAX</a>(max_output, min_output / lower_throttle_limit);</div>
<div class="line"><a id="l00849" name="l00849"></a><span class="lineno">  849</span>    <span class="keywordflow">if</span> (saturation_value &gt; 1.0f) {</div>
<div class="line"><a id="l00850" name="l00850"></a><span class="lineno">  850</span>        <span class="comment">// store pre-scaled values so we can set limit flags afterwards</span></div>
<div class="line"><a id="l00851" name="l00851"></a><span class="lineno">  851</span>        <span class="keyword">const</span> <span class="keywordtype">float</span> steering_scaled_orig = steering_scaled;</div>
<div class="line"><a id="l00852" name="l00852"></a><span class="lineno">  852</span>        <span class="keyword">const</span> <span class="keywordtype">float</span> throttle_scaled_orig = throttle_scaled;</div>
<div class="line"><a id="l00853" name="l00853"></a><span class="lineno">  853</span> </div>
<div class="line"><a id="l00854" name="l00854"></a><span class="lineno">  854</span>        <span class="keyword">const</span> <span class="keywordtype">float</span> str_thr_mix = <a class="code hl_define" href="AP__Math_8h.html#a5256308fd38a7098b8f95607aa56888f">constrain_float</a>(<a class="code hl_variable" href="classAP__MotorsUGV.html#af272ea8de4bb4050b92731609248f24a">_steering_throttle_mix</a>, 0.0f, 1.0f);</div>
<div class="line"><a id="l00855" name="l00855"></a><span class="lineno">  855</span>        <span class="keyword">const</span> <span class="keywordtype">float</span> fair_scaler = 1.0f / saturation_value;</div>
<div class="line"><a id="l00856" name="l00856"></a><span class="lineno">  856</span>        <span class="keywordflow">if</span> (str_thr_mix &gt;= 0.5f) {</div>
<div class="line"><a id="l00857" name="l00857"></a><span class="lineno">  857</span>            <span class="comment">// prioritise steering over throttle</span></div>
<div class="line"><a id="l00858" name="l00858"></a><span class="lineno">  858</span>            steering_scaled *= <a class="code hl_function" href="AP__Math_8cpp.html#ae2d4d03c107c3e6a127fb167e3908aa2">linear_interpolate</a>(fair_scaler, 1.0f, str_thr_mix, 0.5f, 1.0f);</div>
<div class="line"><a id="l00859" name="l00859"></a><span class="lineno">  859</span>            <span class="keywordflow">if</span> (throttle_scaled &gt;= best_steering_throttle) {</div>
<div class="line"><a id="l00860" name="l00860"></a><span class="lineno">  860</span>                <span class="comment">// constrained by upper limit</span></div>
<div class="line"><a id="l00861" name="l00861"></a><span class="lineno">  861</span>                throttle_scaled = 1.0 - fabsf(steering_scaled);</div>
<div class="line"><a id="l00862" name="l00862"></a><span class="lineno">  862</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00863" name="l00863"></a><span class="lineno">  863</span>                <span class="comment">// constrained by lower limit</span></div>
<div class="line"><a id="l00864" name="l00864"></a><span class="lineno">  864</span>                throttle_scaled = fabsf(steering_scaled) + lower_throttle_limit;</div>
<div class="line"><a id="l00865" name="l00865"></a><span class="lineno">  865</span>            }</div>
<div class="line"><a id="l00866" name="l00866"></a><span class="lineno">  866</span> </div>
<div class="line"><a id="l00867" name="l00867"></a><span class="lineno">  867</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00868" name="l00868"></a><span class="lineno">  868</span>            <span class="comment">// prioritise throttle over steering</span></div>
<div class="line"><a id="l00869" name="l00869"></a><span class="lineno">  869</span>            throttle_scaled *= <a class="code hl_function" href="AP__Math_8cpp.html#ae2d4d03c107c3e6a127fb167e3908aa2">linear_interpolate</a>(fair_scaler, 1.0f, 0.5f - str_thr_mix, 0.0f, 0.5f);</div>
<div class="line"><a id="l00870" name="l00870"></a><span class="lineno">  870</span>            <span class="keyword">const</span> <span class="keywordtype">float</span> steering_sign = <a class="code hl_function" href="AP__Math_8h.html#a4e3ae698e8f99cec214348ad233e3c41">is_positive</a>(steering_scaled) ? 1.0 : -1.0;</div>
<div class="line"><a id="l00871" name="l00871"></a><span class="lineno">  871</span>            <span class="keywordflow">if</span> (throttle_scaled &gt;= best_steering_throttle) {</div>
<div class="line"><a id="l00872" name="l00872"></a><span class="lineno">  872</span>                <span class="comment">// constrained by upper limit</span></div>
<div class="line"><a id="l00873" name="l00873"></a><span class="lineno">  873</span>                steering_scaled = (1.0 - throttle_scaled) * steering_sign;</div>
<div class="line"><a id="l00874" name="l00874"></a><span class="lineno">  874</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00875" name="l00875"></a><span class="lineno">  875</span>                <span class="comment">// constrained by lower limit</span></div>
<div class="line"><a id="l00876" name="l00876"></a><span class="lineno">  876</span>                steering_scaled = (throttle_scaled - lower_throttle_limit) * steering_sign;</div>
<div class="line"><a id="l00877" name="l00877"></a><span class="lineno">  877</span>            }</div>
<div class="line"><a id="l00878" name="l00878"></a><span class="lineno">  878</span>        }</div>
<div class="line"><a id="l00879" name="l00879"></a><span class="lineno">  879</span> </div>
<div class="line"><a id="l00880" name="l00880"></a><span class="lineno">  880</span>        <span class="comment">// update limits if either steering or throttle has been reduced</span></div>
<div class="line"><a id="l00881" name="l00881"></a><span class="lineno">  881</span>        <span class="keywordflow">if</span> (fabsf(steering_scaled) &lt; fabsf(steering_scaled_orig)) {</div>
<div class="line"><a id="l00882" name="l00882"></a><span class="lineno">  882</span>            <a class="code hl_variable" href="classAP__MotorsUGV.html#a88abdedf1b1220d748e4a5dc595bcdba">limit</a>.<a class="code hl_variable" href="structAP__MotorsUGV_1_1AP__MotorsUGV__limit.html#ac4a751ead8632497191684c0de727331">steer_left</a> |= <a class="code hl_function" href="AP__Math_8h.html#a8b6f71a42818d74fd8bfe348108942fa">is_negative</a>(steering_scaled_orig);</div>
<div class="line"><a id="l00883" name="l00883"></a><span class="lineno">  883</span>            <a class="code hl_variable" href="classAP__MotorsUGV.html#a88abdedf1b1220d748e4a5dc595bcdba">limit</a>.<a class="code hl_variable" href="structAP__MotorsUGV_1_1AP__MotorsUGV__limit.html#a62dd8a7d50dc33039bf2aef718829007">steer_right</a> |= <a class="code hl_function" href="AP__Math_8h.html#a4e3ae698e8f99cec214348ad233e3c41">is_positive</a>(steering_scaled_orig);</div>
<div class="line"><a id="l00884" name="l00884"></a><span class="lineno">  884</span>        }</div>
<div class="line"><a id="l00885" name="l00885"></a><span class="lineno">  885</span>        <span class="keywordflow">if</span> (fabsf(throttle_scaled) &lt; fabsf(throttle_scaled_orig)) {</div>
<div class="line"><a id="l00886" name="l00886"></a><span class="lineno">  886</span>            <a class="code hl_variable" href="classAP__MotorsUGV.html#a88abdedf1b1220d748e4a5dc595bcdba">limit</a>.<a class="code hl_variable" href="structAP__MotorsUGV_1_1AP__MotorsUGV__limit.html#a1a4e8eb4ca5a5cbb9805805b787422a8">throttle_lower</a> |= <a class="code hl_function" href="AP__Math_8h.html#a8b6f71a42818d74fd8bfe348108942fa">is_negative</a>(throttle_scaled_orig);</div>
<div class="line"><a id="l00887" name="l00887"></a><span class="lineno">  887</span>            <a class="code hl_variable" href="classAP__MotorsUGV.html#a88abdedf1b1220d748e4a5dc595bcdba">limit</a>.<a class="code hl_variable" href="structAP__MotorsUGV_1_1AP__MotorsUGV__limit.html#a36d067b02d9d960d439ef1ab40dcc812">throttle_upper</a> |= <a class="code hl_function" href="AP__Math_8h.html#a4e3ae698e8f99cec214348ad233e3c41">is_positive</a>(throttle_scaled_orig);</div>
<div class="line"><a id="l00888" name="l00888"></a><span class="lineno">  888</span>        }</div>
<div class="line"><a id="l00889" name="l00889"></a><span class="lineno">  889</span>    }</div>
<div class="line"><a id="l00890" name="l00890"></a><span class="lineno">  890</span> </div>
<div class="line"><a id="l00891" name="l00891"></a><span class="lineno">  891</span>    <span class="comment">// add in throttle and steering</span></div>
<div class="line"><a id="l00892" name="l00892"></a><span class="lineno">  892</span>    <span class="keywordtype">float</span> motor_left = throttle_scaled + steering_scaled;</div>
<div class="line"><a id="l00893" name="l00893"></a><span class="lineno">  893</span>    <span class="keywordtype">float</span> motor_right = throttle_scaled - steering_scaled;</div>
<div class="line"><a id="l00894" name="l00894"></a><span class="lineno">  894</span> </div>
<div class="line"><a id="l00895" name="l00895"></a><span class="lineno">  895</span>    <span class="comment">// Apply asymmetry correction</span></div>
<div class="line"><a id="l00896" name="l00896"></a><span class="lineno">  896</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="AP__Math_8h.html#a8b6f71a42818d74fd8bfe348108942fa">is_negative</a>(motor_right)) {</div>
<div class="line"><a id="l00897" name="l00897"></a><span class="lineno">  897</span>        motor_right *= thrust_asymmetry;</div>
<div class="line"><a id="l00898" name="l00898"></a><span class="lineno">  898</span>    }</div>
<div class="line"><a id="l00899" name="l00899"></a><span class="lineno">  899</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="AP__Math_8h.html#a8b6f71a42818d74fd8bfe348108942fa">is_negative</a>(motor_left)) {</div>
<div class="line"><a id="l00900" name="l00900"></a><span class="lineno">  900</span>        motor_left *= thrust_asymmetry;</div>
<div class="line"><a id="l00901" name="l00901"></a><span class="lineno">  901</span>    }</div>
<div class="line"><a id="l00902" name="l00902"></a><span class="lineno">  902</span> </div>
<div class="line"><a id="l00903" name="l00903"></a><span class="lineno">  903</span>    <span class="comment">// send pwm value to each motor</span></div>
<div class="line"><a id="l00904" name="l00904"></a><span class="lineno">  904</span>    <a class="code hl_function" href="classAP__MotorsUGV.html#acdbf927cf3077332d0ce32a2d8829848">output_throttle</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a44f85b5c346aea6379642a4970f0a0a2">SRV_Channel::k_throttleLeft</a>, 100.0f * motor_left, dt);</div>
<div class="line"><a id="l00905" name="l00905"></a><span class="lineno">  905</span>    <a class="code hl_function" href="classAP__MotorsUGV.html#acdbf927cf3077332d0ce32a2d8829848">output_throttle</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a5ab419baae8c0128be85cf73b068eeef">SRV_Channel::k_throttleRight</a>, 100.0f * motor_right, dt);</div>
<div class="line"><a id="l00906" name="l00906"></a><span class="lineno">  906</span>}</div>
</div>
<div class="line"><a id="l00907" name="l00907"></a><span class="lineno">  907</span> </div>
<div class="line"><a id="l00908" name="l00908"></a><span class="lineno">  908</span><span class="comment">// output for omni frames</span></div>
<div class="foldopen" id="foldopen00909" data-start="{" data-end="}">
<div class="line"><a id="l00909" name="l00909"></a><span class="lineno"><a class="line" href="classAP__MotorsUGV.html#af70a7aca5f94dea1ba7acf978a2a3d4b">  909</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classAP__MotorsUGV.html#af70a7aca5f94dea1ba7acf978a2a3d4b">AP_MotorsUGV::output_omni</a>(<span class="keywordtype">bool</span> armed, <span class="keywordtype">float</span> steering, <span class="keywordtype">float</span> throttle, <span class="keywordtype">float</span> lateral)</div>
<div class="line"><a id="l00910" name="l00910"></a><span class="lineno">  910</span>{</div>
<div class="line"><a id="l00911" name="l00911"></a><span class="lineno">  911</span>    <span class="comment">// exit immediately if the vehicle is not omni</span></div>
<div class="line"><a id="l00912" name="l00912"></a><span class="lineno">  912</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="classAP__MotorsUGV.html#a40780e22d82105192d5adae466b4c461">is_omni</a>()) {</div>
<div class="line"><a id="l00913" name="l00913"></a><span class="lineno">  913</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00914" name="l00914"></a><span class="lineno">  914</span>    }</div>
<div class="line"><a id="l00915" name="l00915"></a><span class="lineno">  915</span> </div>
<div class="line"><a id="l00916" name="l00916"></a><span class="lineno">  916</span>    <span class="keywordflow">if</span> (armed) {</div>
<div class="line"><a id="l00917" name="l00917"></a><span class="lineno">  917</span>        <span class="comment">// clear and set limits based on input</span></div>
<div class="line"><a id="l00918" name="l00918"></a><span class="lineno">  918</span>        <a class="code hl_function" href="classAP__MotorsUGV.html#aefc1524c06ea9c0049e70790f11a9334">set_limits_from_input</a>(armed, steering, throttle);</div>
<div class="line"><a id="l00919" name="l00919"></a><span class="lineno">  919</span> </div>
<div class="line"><a id="l00920" name="l00920"></a><span class="lineno">  920</span>        <span class="comment">// constrain steering</span></div>
<div class="line"><a id="l00921" name="l00921"></a><span class="lineno">  921</span>        steering = <a class="code hl_define" href="AP__Math_8h.html#a5256308fd38a7098b8f95607aa56888f">constrain_float</a>(steering, -4500.0f, 4500.0f);</div>
<div class="line"><a id="l00922" name="l00922"></a><span class="lineno">  922</span> </div>
<div class="line"><a id="l00923" name="l00923"></a><span class="lineno">  923</span>        <span class="comment">// scale throttle, steering and lateral inputs to -1 to 1</span></div>
<div class="line"><a id="l00924" name="l00924"></a><span class="lineno">  924</span>        <span class="keyword">const</span> <span class="keywordtype">float</span> scaled_throttle = throttle * 0.01f;</div>
<div class="line"><a id="l00925" name="l00925"></a><span class="lineno">  925</span>        <span class="keyword">const</span> <span class="keywordtype">float</span> scaled_steering = steering / 4500.0f;</div>
<div class="line"><a id="l00926" name="l00926"></a><span class="lineno">  926</span>        <span class="keyword">const</span> <span class="keywordtype">float</span> scaled_lateral = lateral * 0.01f;</div>
<div class="line"><a id="l00927" name="l00927"></a><span class="lineno">  927</span> </div>
<div class="line"><a id="l00928" name="l00928"></a><span class="lineno">  928</span>        <span class="keywordtype">float</span> thr_str_ltr_out[<a class="code hl_variable" href="classAP__MotorsUGV.html#a435c1d9805d846f9d6989d65c0203697">_motors_num</a>];</div>
<div class="line"><a id="l00929" name="l00929"></a><span class="lineno">  929</span>        <span class="keywordtype">float</span> thr_str_ltr_max = 1;</div>
<div class="line"><a id="l00930" name="l00930"></a><span class="lineno">  930</span>        <span class="keywordflow">for</span> (uint8_t i=0; i&lt;<a class="code hl_variable" href="classAP__MotorsUGV.html#a435c1d9805d846f9d6989d65c0203697">_motors_num</a>; i++) {</div>
<div class="line"><a id="l00931" name="l00931"></a><span class="lineno">  931</span>            <span class="comment">// Each motor outputs throttle + steering + lateral</span></div>
<div class="line"><a id="l00932" name="l00932"></a><span class="lineno">  932</span>            thr_str_ltr_out[i] = (scaled_throttle * <a class="code hl_variable" href="classAP__MotorsUGV.html#a39ec5ee1f11ac2fcca1eedd4ebf381f4">_throttle_factor</a>[i]) +</div>
<div class="line"><a id="l00933" name="l00933"></a><span class="lineno">  933</span>                              (scaled_steering * <a class="code hl_variable" href="classAP__MotorsUGV.html#a87b1939a9b432aaca7f0a9cc96ebcc8e">_steering_factor</a>[i]) +</div>
<div class="line"><a id="l00934" name="l00934"></a><span class="lineno">  934</span>                              (scaled_lateral * <a class="code hl_variable" href="classAP__MotorsUGV.html#a982e43b7116337c7dfd900bf7c4c9302">_lateral_factor</a>[i]);</div>
<div class="line"><a id="l00935" name="l00935"></a><span class="lineno">  935</span>            <span class="comment">// record the largest output above 1</span></div>
<div class="line"><a id="l00936" name="l00936"></a><span class="lineno">  936</span>            <span class="keywordflow">if</span> (fabsf(thr_str_ltr_out[i]) &gt; thr_str_ltr_max) {</div>
<div class="line"><a id="l00937" name="l00937"></a><span class="lineno">  937</span>                thr_str_ltr_max = fabsf(thr_str_ltr_out[i]);</div>
<div class="line"><a id="l00938" name="l00938"></a><span class="lineno">  938</span>            }</div>
<div class="line"><a id="l00939" name="l00939"></a><span class="lineno">  939</span>        }</div>
<div class="line"><a id="l00940" name="l00940"></a><span class="lineno">  940</span>        <span class="comment">// Scale all outputs back evenly such that the lagest fits</span></div>
<div class="line"><a id="l00941" name="l00941"></a><span class="lineno">  941</span>        <span class="keyword">const</span> <span class="keywordtype">float</span> output_scale = 1 / thr_str_ltr_max;</div>
<div class="line"><a id="l00942" name="l00942"></a><span class="lineno">  942</span>        <span class="keywordflow">for</span> (uint8_t i=0; i&lt;<a class="code hl_variable" href="classAP__MotorsUGV.html#a435c1d9805d846f9d6989d65c0203697">_motors_num</a>; i++) {</div>
<div class="line"><a id="l00943" name="l00943"></a><span class="lineno">  943</span>            <span class="comment">// send output for each motor</span></div>
<div class="line"><a id="l00944" name="l00944"></a><span class="lineno">  944</span>            <a class="code hl_function" href="classAP__MotorsUGV.html#acdbf927cf3077332d0ce32a2d8829848">output_throttle</a>(<a class="code hl_function" href="classSRV__Channels.html#acab9e1aba9fcbde6e598169af5b3181f">SRV_Channels::get_motor_function</a>(i), thr_str_ltr_out[i] * 100.0f * output_scale);</div>
<div class="line"><a id="l00945" name="l00945"></a><span class="lineno">  945</span>        }</div>
<div class="line"><a id="l00946" name="l00946"></a><span class="lineno">  946</span>        <span class="keywordflow">if</span> (output_scale &lt; 1.0) {</div>
<div class="line"><a id="l00947" name="l00947"></a><span class="lineno">  947</span>            <span class="comment">// cant tell which command resulted in the scale back, so limit all</span></div>
<div class="line"><a id="l00948" name="l00948"></a><span class="lineno">  948</span>            <a class="code hl_variable" href="classAP__MotorsUGV.html#a88abdedf1b1220d748e4a5dc595bcdba">limit</a>.<a class="code hl_variable" href="structAP__MotorsUGV_1_1AP__MotorsUGV__limit.html#ac4a751ead8632497191684c0de727331">steer_left</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00949" name="l00949"></a><span class="lineno">  949</span>            <a class="code hl_variable" href="classAP__MotorsUGV.html#a88abdedf1b1220d748e4a5dc595bcdba">limit</a>.<a class="code hl_variable" href="structAP__MotorsUGV_1_1AP__MotorsUGV__limit.html#a62dd8a7d50dc33039bf2aef718829007">steer_right</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00950" name="l00950"></a><span class="lineno">  950</span>            <a class="code hl_variable" href="classAP__MotorsUGV.html#a88abdedf1b1220d748e4a5dc595bcdba">limit</a>.<a class="code hl_variable" href="structAP__MotorsUGV_1_1AP__MotorsUGV__limit.html#a1a4e8eb4ca5a5cbb9805805b787422a8">throttle_lower</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00951" name="l00951"></a><span class="lineno">  951</span>            <a class="code hl_variable" href="classAP__MotorsUGV.html#a88abdedf1b1220d748e4a5dc595bcdba">limit</a>.<a class="code hl_variable" href="structAP__MotorsUGV_1_1AP__MotorsUGV__limit.html#a36d067b02d9d960d439ef1ab40dcc812">throttle_upper</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00952" name="l00952"></a><span class="lineno">  952</span>        }</div>
<div class="line"><a id="l00953" name="l00953"></a><span class="lineno">  953</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00954" name="l00954"></a><span class="lineno">  954</span>        <span class="comment">// handle disarmed case</span></div>
<div class="line"><a id="l00955" name="l00955"></a><span class="lineno">  955</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__MotorsUGV.html#a8b1c592622478d3b9ce90b11cfdb7c00">_disarm_disable_pwm</a>) {</div>
<div class="line"><a id="l00956" name="l00956"></a><span class="lineno">  956</span>            <span class="keywordflow">for</span> (uint8_t i=0; i&lt;<a class="code hl_variable" href="classAP__MotorsUGV.html#a435c1d9805d846f9d6989d65c0203697">_motors_num</a>; i++) {</div>
<div class="line"><a id="l00957" name="l00957"></a><span class="lineno">  957</span>                <a class="code hl_function" href="classSRV__Channels.html#aff9ab18c996b319de867b4e87b75d4e5">SRV_Channels::set_output_limit</a>(<a class="code hl_function" href="classSRV__Channels.html#acab9e1aba9fcbde6e598169af5b3181f">SRV_Channels::get_motor_function</a>(i), <a class="code hl_enumvalue" href="classSRV__Channel.html#a86fdf4fa1eaa8f844eccb555359aa129a5441ed3109cdb5a732375bf05a74e111">SRV_Channel::Limit::ZERO_PWM</a>);</div>
<div class="line"><a id="l00958" name="l00958"></a><span class="lineno">  958</span>            }</div>
<div class="line"><a id="l00959" name="l00959"></a><span class="lineno">  959</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00960" name="l00960"></a><span class="lineno">  960</span>            <span class="keywordflow">for</span> (uint8_t i=0; i&lt;<a class="code hl_variable" href="classAP__MotorsUGV.html#a435c1d9805d846f9d6989d65c0203697">_motors_num</a>; i++) {</div>
<div class="line"><a id="l00961" name="l00961"></a><span class="lineno">  961</span>                <a class="code hl_function" href="classSRV__Channels.html#aff9ab18c996b319de867b4e87b75d4e5">SRV_Channels::set_output_limit</a>(<a class="code hl_function" href="classSRV__Channels.html#acab9e1aba9fcbde6e598169af5b3181f">SRV_Channels::get_motor_function</a>(i), <a class="code hl_enumvalue" href="classSRV__Channel.html#a86fdf4fa1eaa8f844eccb555359aa129aa32049f307ffa78cf7b4586ac7d98e06">SRV_Channel::Limit::TRIM</a>);</div>
<div class="line"><a id="l00962" name="l00962"></a><span class="lineno">  962</span>            }</div>
<div class="line"><a id="l00963" name="l00963"></a><span class="lineno">  963</span>        }</div>
<div class="line"><a id="l00964" name="l00964"></a><span class="lineno">  964</span>    }</div>
<div class="line"><a id="l00965" name="l00965"></a><span class="lineno">  965</span>}</div>
</div>
<div class="line"><a id="l00966" name="l00966"></a><span class="lineno">  966</span> </div>
<div class="line"><a id="l00967" name="l00967"></a><span class="lineno">  967</span><span class="comment">// output throttle value to main throttle channel, left throttle or right throttle.  throttle should be scaled from -100 to 100</span></div>
<div class="foldopen" id="foldopen00968" data-start="{" data-end="}">
<div class="line"><a id="l00968" name="l00968"></a><span class="lineno"><a class="line" href="classAP__MotorsUGV.html#acdbf927cf3077332d0ce32a2d8829848">  968</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classAP__MotorsUGV.html#acdbf927cf3077332d0ce32a2d8829848">AP_MotorsUGV::output_throttle</a>(<a class="code hl_enumeration" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68">SRV_Channel::Aux_servo_function_t</a> function, <span class="keywordtype">float</span> throttle, <span class="keywordtype">float</span> dt)</div>
<div class="line"><a id="l00969" name="l00969"></a><span class="lineno">  969</span>{</div>
<div class="line"><a id="l00970" name="l00970"></a><span class="lineno">  970</span>    <span class="comment">// sanity check servo function</span></div>
<div class="line"><a id="l00971" name="l00971"></a><span class="lineno">  971</span>    <span class="keywordflow">if</span> (function != <a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a2b2f8365b3776f0a588082805cd9acbe">SRV_Channel::k_throttle</a> &amp;&amp; function != <a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a44f85b5c346aea6379642a4970f0a0a2">SRV_Channel::k_throttleLeft</a> &amp;&amp; function != <a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a5ab419baae8c0128be85cf73b068eeef">SRV_Channel::k_throttleRight</a> &amp;&amp; function != <a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a74936c58237562ed4619d556fa89f46f">SRV_Channel::k_motor1</a> &amp;&amp; function != <a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a09b6db431dcbb99e23883eb7c4d51df2">SRV_Channel::k_motor2</a> &amp;&amp; function != <a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68aafba4604bc5488854e78ac238fb859b6">SRV_Channel::k_motor3</a> &amp;&amp; function!= <a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a323602c02b20f75a236c749e83dcb3c3">SRV_Channel::k_motor4</a>) {</div>
<div class="line"><a id="l00972" name="l00972"></a><span class="lineno">  972</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00973" name="l00973"></a><span class="lineno">  973</span>    }</div>
<div class="line"><a id="l00974" name="l00974"></a><span class="lineno">  974</span> </div>
<div class="line"><a id="l00975" name="l00975"></a><span class="lineno">  975</span>    <span class="comment">// constrain and scale output</span></div>
<div class="line"><a id="l00976" name="l00976"></a><span class="lineno">  976</span>    throttle = <a class="code hl_function" href="classAP__MotorsUGV.html#ac2c2665a6afdfc53cea1626643be4547">get_scaled_throttle</a>(throttle);</div>
<div class="line"><a id="l00977" name="l00977"></a><span class="lineno">  977</span> </div>
<div class="line"><a id="l00978" name="l00978"></a><span class="lineno">  978</span>    <span class="comment">// apply rate control</span></div>
<div class="line"><a id="l00979" name="l00979"></a><span class="lineno">  979</span>    throttle = <a class="code hl_function" href="classAP__MotorsUGV.html#ac3de31b4f9d4746da2fe105f073537cc">get_rate_controlled_throttle</a>(function, throttle, dt);</div>
<div class="line"><a id="l00980" name="l00980"></a><span class="lineno">  980</span> </div>
<div class="line"><a id="l00981" name="l00981"></a><span class="lineno">  981</span>    <span class="comment">// set relay if necessary</span></div>
<div class="line"><a id="l00982" name="l00982"></a><span class="lineno">  982</span><span class="preprocessor">#if AP_RELAY_ENABLED</span></div>
<div class="line"><a id="l00983" name="l00983"></a><span class="lineno">  983</span>    <a class="code hl_class" href="classAP__Relay.html">AP_Relay</a>*<a class="code hl_variable" href="AP__Parachute__test_8cpp.html#a1b01eb2a0239e74c68c0190c5a24bd6d">relay</a> = <a class="code hl_function" href="namespaceAP.html#a730acdb902fce56b0e171368b2d2036b">AP::relay</a>();</div>
<div class="line"><a id="l00984" name="l00984"></a><span class="lineno">  984</span>    <span class="keywordflow">if</span> ((<a class="code hl_variable" href="classAP__MotorsUGV.html#ab33a40ca42efb7032c3abb8e57721aa4">_pwm_type</a> == <a class="code hl_enumvalue" href="classAP__MotorsUGV.html#a27611cd34d855dc865aeb7c9cd9d6ddaac8189d0426c8a7f5b318116b344b19ce">PWM_TYPE_BRUSHED_WITH_RELAY</a>) &amp;&amp; (<a class="code hl_variable" href="AP__Parachute__test_8cpp.html#a1b01eb2a0239e74c68c0190c5a24bd6d">relay</a> != <span class="keyword">nullptr</span>)) {</div>
<div class="line"><a id="l00985" name="l00985"></a><span class="lineno">  985</span> </div>
<div class="line"><a id="l00986" name="l00986"></a><span class="lineno">  986</span>        <span class="comment">// find the output channel, if not found return</span></div>
<div class="line"><a id="l00987" name="l00987"></a><span class="lineno">  987</span>        <span class="keyword">const</span> <a class="code hl_class" href="classSRV__Channel.html">SRV_Channel</a> *out_chan = <a class="code hl_function" href="classSRV__Channels.html#abb96588c0eee11dfc494281777730c8b">SRV_Channels::get_channel_for</a>(function);</div>
<div class="line"><a id="l00988" name="l00988"></a><span class="lineno">  988</span>        <span class="keywordflow">if</span> (out_chan == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a id="l00989" name="l00989"></a><span class="lineno">  989</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00990" name="l00990"></a><span class="lineno">  990</span>        }</div>
<div class="line"><a id="l00991" name="l00991"></a><span class="lineno">  991</span>        <span class="keyword">const</span> int8_t reverse_multiplier = out_chan-&gt;<a class="code hl_function" href="classSRV__Channel.html#a08d12bc5da50b61094e29e72fed64834">get_reversed</a>() ? -1 : 1;</div>
<div class="line"><a id="l00992" name="l00992"></a><span class="lineno">  992</span>        <span class="keywordtype">bool</span> relay_high = <a class="code hl_function" href="AP__Math_8h.html#a8b6f71a42818d74fd8bfe348108942fa">is_negative</a>(reverse_multiplier * throttle);</div>
<div class="line"><a id="l00993" name="l00993"></a><span class="lineno">  993</span> </div>
<div class="line"><a id="l00994" name="l00994"></a><span class="lineno">  994</span>        <a class="code hl_enumeration" href="classAP__Relay__Params.html#a73c0886b439cc9c4dcc660f5a084f042">AP_Relay_Params::FUNCTION</a> relay_function;</div>
<div class="line"><a id="l00995" name="l00995"></a><span class="lineno">  995</span>        <span class="keywordflow">switch</span> (function) {</div>
<div class="line"><a id="l00996" name="l00996"></a><span class="lineno">  996</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a2b2f8365b3776f0a588082805cd9acbe">SRV_Channel::k_throttle</a>:</div>
<div class="line"><a id="l00997" name="l00997"></a><span class="lineno">  997</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a44f85b5c346aea6379642a4970f0a0a2">SRV_Channel::k_throttleLeft</a>:</div>
<div class="line"><a id="l00998" name="l00998"></a><span class="lineno">  998</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a74936c58237562ed4619d556fa89f46f">SRV_Channel::k_motor1</a>:</div>
<div class="line"><a id="l00999" name="l00999"></a><span class="lineno">  999</span>            <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l01000" name="l01000"></a><span class="lineno"> 1000</span>                relay_function = <a class="code hl_enumvalue" href="classAP__Relay__Params.html#a73c0886b439cc9c4dcc660f5a084f042af60abc9f854f5ce172befbcf599f95ce">AP_Relay_Params::FUNCTION::BRUSHED_REVERSE_1</a>;</div>
<div class="line"><a id="l01001" name="l01001"></a><span class="lineno"> 1001</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01002" name="l01002"></a><span class="lineno"> 1002</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a5ab419baae8c0128be85cf73b068eeef">SRV_Channel::k_throttleRight</a>:</div>
<div class="line"><a id="l01003" name="l01003"></a><span class="lineno"> 1003</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a09b6db431dcbb99e23883eb7c4d51df2">SRV_Channel::k_motor2</a>:</div>
<div class="line"><a id="l01004" name="l01004"></a><span class="lineno"> 1004</span>                relay_function = <a class="code hl_enumvalue" href="classAP__Relay__Params.html#a73c0886b439cc9c4dcc660f5a084f042a8c3dc0ef2b1605d9b06cc1abd6bf1071">AP_Relay_Params::FUNCTION::BRUSHED_REVERSE_2</a>;</div>
<div class="line"><a id="l01005" name="l01005"></a><span class="lineno"> 1005</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01006" name="l01006"></a><span class="lineno"> 1006</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68aafba4604bc5488854e78ac238fb859b6">SRV_Channel::k_motor3</a>:</div>
<div class="line"><a id="l01007" name="l01007"></a><span class="lineno"> 1007</span>                relay_function = <a class="code hl_enumvalue" href="classAP__Relay__Params.html#a73c0886b439cc9c4dcc660f5a084f042ae913deb5d84069b3d82be268cc233c3c">AP_Relay_Params::FUNCTION::BRUSHED_REVERSE_3</a>;</div>
<div class="line"><a id="l01008" name="l01008"></a><span class="lineno"> 1008</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01009" name="l01009"></a><span class="lineno"> 1009</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a323602c02b20f75a236c749e83dcb3c3">SRV_Channel::k_motor4</a>:</div>
<div class="line"><a id="l01010" name="l01010"></a><span class="lineno"> 1010</span>                relay_function = <a class="code hl_enumvalue" href="classAP__Relay__Params.html#a73c0886b439cc9c4dcc660f5a084f042a40282f88062d751f82ce55dddb3bfddd">AP_Relay_Params::FUNCTION::BRUSHED_REVERSE_4</a>;</div>
<div class="line"><a id="l01011" name="l01011"></a><span class="lineno"> 1011</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01012" name="l01012"></a><span class="lineno"> 1012</span>        }</div>
<div class="line"><a id="l01013" name="l01013"></a><span class="lineno"> 1013</span>        <a class="code hl_variable" href="AP__Parachute__test_8cpp.html#a1b01eb2a0239e74c68c0190c5a24bd6d">relay</a>-&gt;<a class="code hl_function" href="classAP__Relay.html#a57d529ac3c020c0e73652a7293a8a273">set</a>(relay_function, relay_high);</div>
<div class="line"><a id="l01014" name="l01014"></a><span class="lineno"> 1014</span> </div>
<div class="line"><a id="l01015" name="l01015"></a><span class="lineno"> 1015</span>        <span class="comment">// invert the output to always have positive value calculated by calc_pwm</span></div>
<div class="line"><a id="l01016" name="l01016"></a><span class="lineno"> 1016</span>        throttle = reverse_multiplier * fabsf(throttle);</div>
<div class="line"><a id="l01017" name="l01017"></a><span class="lineno"> 1017</span>    }</div>
<div class="line"><a id="l01018" name="l01018"></a><span class="lineno"> 1018</span><span class="preprocessor">#endif  </span><span class="comment">// AP_RELAY_ENABLED</span></div>
<div class="line"><a id="l01019" name="l01019"></a><span class="lineno"> 1019</span> </div>
<div class="line"><a id="l01020" name="l01020"></a><span class="lineno"> 1020</span>    <span class="comment">// output to servo channel</span></div>
<div class="line"><a id="l01021" name="l01021"></a><span class="lineno"> 1021</span>    <span class="keywordflow">switch</span> (function) {</div>
<div class="line"><a id="l01022" name="l01022"></a><span class="lineno"> 1022</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a2b2f8365b3776f0a588082805cd9acbe">SRV_Channel::k_throttle</a>:</div>
<div class="line"><a id="l01023" name="l01023"></a><span class="lineno"> 1023</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a74936c58237562ed4619d556fa89f46f">SRV_Channel::k_motor1</a>:</div>
<div class="line"><a id="l01024" name="l01024"></a><span class="lineno"> 1024</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a09b6db431dcbb99e23883eb7c4d51df2">SRV_Channel::k_motor2</a>:</div>
<div class="line"><a id="l01025" name="l01025"></a><span class="lineno"> 1025</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68aafba4604bc5488854e78ac238fb859b6">SRV_Channel::k_motor3</a>:</div>
<div class="line"><a id="l01026" name="l01026"></a><span class="lineno"> 1026</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a323602c02b20f75a236c749e83dcb3c3">SRV_Channel::k_motor4</a>:</div>
<div class="line"><a id="l01027" name="l01027"></a><span class="lineno"> 1027</span>            <a class="code hl_function" href="classSRV__Channels.html#a06cf1d6d4bd8b1971c333184bb4bcb55">SRV_Channels::set_output_scaled</a>(function,  throttle);</div>
<div class="line"><a id="l01028" name="l01028"></a><span class="lineno"> 1028</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01029" name="l01029"></a><span class="lineno"> 1029</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a44f85b5c346aea6379642a4970f0a0a2">SRV_Channel::k_throttleLeft</a>:</div>
<div class="line"><a id="l01030" name="l01030"></a><span class="lineno"> 1030</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a5ab419baae8c0128be85cf73b068eeef">SRV_Channel::k_throttleRight</a>:</div>
<div class="line"><a id="l01031" name="l01031"></a><span class="lineno"> 1031</span>            <a class="code hl_function" href="classSRV__Channels.html#a06cf1d6d4bd8b1971c333184bb4bcb55">SRV_Channels::set_output_scaled</a>(function,  throttle * 10.0f);</div>
<div class="line"><a id="l01032" name="l01032"></a><span class="lineno"> 1032</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01033" name="l01033"></a><span class="lineno"> 1033</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l01034" name="l01034"></a><span class="lineno"> 1034</span>            <span class="comment">// do nothing</span></div>
<div class="line"><a id="l01035" name="l01035"></a><span class="lineno"> 1035</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01036" name="l01036"></a><span class="lineno"> 1036</span>    }</div>
<div class="line"><a id="l01037" name="l01037"></a><span class="lineno"> 1037</span>}</div>
</div>
<div class="line"><a id="l01038" name="l01038"></a><span class="lineno"> 1038</span> </div>
<div class="line"><a id="l01039" name="l01039"></a><span class="lineno"> 1039</span><span class="comment">// output for sailboat&#39;s sails</span></div>
<div class="foldopen" id="foldopen01040" data-start="{" data-end="}">
<div class="line"><a id="l01040" name="l01040"></a><span class="lineno"><a class="line" href="classAP__MotorsUGV.html#a8297191e477046bd6e326fd37668490d"> 1040</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classAP__MotorsUGV.html#a8297191e477046bd6e326fd37668490d">AP_MotorsUGV::output_sail</a>()</div>
<div class="line"><a id="l01041" name="l01041"></a><span class="lineno"> 1041</span>{</div>
<div class="line"><a id="l01042" name="l01042"></a><span class="lineno"> 1042</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="classAP__MotorsUGV.html#ac993a856521fd85525bce7007982f3d5">has_sail</a>()) {</div>
<div class="line"><a id="l01043" name="l01043"></a><span class="lineno"> 1043</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01044" name="l01044"></a><span class="lineno"> 1044</span>    }</div>
<div class="line"><a id="l01045" name="l01045"></a><span class="lineno"> 1045</span> </div>
<div class="line"><a id="l01046" name="l01046"></a><span class="lineno"> 1046</span>    <a class="code hl_function" href="classSRV__Channels.html#a06cf1d6d4bd8b1971c333184bb4bcb55">SRV_Channels::set_output_scaled</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68ae5af5177edb37a7244e0be6c9473efe5">SRV_Channel::k_mainsail_sheet</a>, <a class="code hl_variable" href="classAP__MotorsUGV.html#a1ffd5739c17022c664080ea128810fd3">_mainsail</a>);</div>
<div class="line"><a id="l01047" name="l01047"></a><span class="lineno"> 1047</span>    <a class="code hl_function" href="classSRV__Channels.html#a06cf1d6d4bd8b1971c333184bb4bcb55">SRV_Channels::set_output_scaled</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a82f89fbb32946473c1cef4433c0e0218">SRV_Channel::k_wingsail_elevator</a>, <a class="code hl_variable" href="classAP__MotorsUGV.html#a297e34207c9bc335318c9f1698b7ee85">_wingsail</a>);</div>
<div class="line"><a id="l01048" name="l01048"></a><span class="lineno"> 1048</span>    <a class="code hl_function" href="classSRV__Channels.html#a06cf1d6d4bd8b1971c333184bb4bcb55">SRV_Channels::set_output_scaled</a>(<a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a2840d80d2769326d143edbf53834d269">SRV_Channel::k_mast_rotation</a>, <a class="code hl_variable" href="classAP__MotorsUGV.html#a1236ffe326fed8e0299a2e67e65d9dc7">_mast_rotation</a>);</div>
<div class="line"><a id="l01049" name="l01049"></a><span class="lineno"> 1049</span>}</div>
</div>
<div class="line"><a id="l01050" name="l01050"></a><span class="lineno"> 1050</span> </div>
<div class="line"><a id="l01051" name="l01051"></a><span class="lineno"> 1051</span><span class="comment">// slew limit throttle for one iteration</span></div>
<div class="foldopen" id="foldopen01052" data-start="{" data-end="}">
<div class="line"><a id="l01052" name="l01052"></a><span class="lineno"><a class="line" href="classAP__MotorsUGV.html#ab23ba8e3ee4a209bf43a7de7c5deab95"> 1052</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classAP__MotorsUGV.html#ab23ba8e3ee4a209bf43a7de7c5deab95">AP_MotorsUGV::slew_limit_throttle</a>(<span class="keywordtype">float</span> dt)</div>
<div class="line"><a id="l01053" name="l01053"></a><span class="lineno"> 1053</span>{</div>
<div class="line"><a id="l01054" name="l01054"></a><span class="lineno"> 1054</span>    <span class="keyword">const</span> <span class="keywordtype">float</span> throttle_orig = <a class="code hl_variable" href="classAP__MotorsUGV.html#a92a62eaaf0df1e20247b06fe456f298c">_throttle</a>;</div>
<div class="line"><a id="l01055" name="l01055"></a><span class="lineno"> 1055</span>    <a class="code hl_variable" href="classAP__MotorsUGV.html#a92a62eaaf0df1e20247b06fe456f298c">_throttle</a> = <a class="code hl_function" href="classAP__MotorsUGV.html#aa5d7f743ab1b268aa6693444bfcb973c">get_slew_limited_throttle</a>(<a class="code hl_variable" href="classAP__MotorsUGV.html#a92a62eaaf0df1e20247b06fe456f298c">_throttle</a>, dt);</div>
<div class="line"><a id="l01056" name="l01056"></a><span class="lineno"> 1056</span>    <span class="keywordflow">if</span> (throttle_orig &gt; <a class="code hl_variable" href="classAP__MotorsUGV.html#a92a62eaaf0df1e20247b06fe456f298c">_throttle</a>) {</div>
<div class="line"><a id="l01057" name="l01057"></a><span class="lineno"> 1057</span>        <a class="code hl_variable" href="classAP__MotorsUGV.html#a88abdedf1b1220d748e4a5dc595bcdba">limit</a>.<a class="code hl_variable" href="structAP__MotorsUGV_1_1AP__MotorsUGV__limit.html#a36d067b02d9d960d439ef1ab40dcc812">throttle_upper</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01058" name="l01058"></a><span class="lineno"> 1058</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (throttle_orig &lt; <a class="code hl_variable" href="classAP__MotorsUGV.html#a92a62eaaf0df1e20247b06fe456f298c">_throttle</a>) {</div>
<div class="line"><a id="l01059" name="l01059"></a><span class="lineno"> 1059</span>        <a class="code hl_variable" href="classAP__MotorsUGV.html#a88abdedf1b1220d748e4a5dc595bcdba">limit</a>.<a class="code hl_variable" href="structAP__MotorsUGV_1_1AP__MotorsUGV__limit.html#a1a4e8eb4ca5a5cbb9805805b787422a8">throttle_lower</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01060" name="l01060"></a><span class="lineno"> 1060</span>    }</div>
<div class="line"><a id="l01061" name="l01061"></a><span class="lineno"> 1061</span>    <a class="code hl_variable" href="classAP__MotorsUGV.html#a16f779fadf5c976587d51d9fd02d00da">_throttle_prev</a> = <a class="code hl_variable" href="classAP__MotorsUGV.html#a92a62eaaf0df1e20247b06fe456f298c">_throttle</a>;</div>
<div class="line"><a id="l01062" name="l01062"></a><span class="lineno"> 1062</span>}</div>
</div>
<div class="line"><a id="l01063" name="l01063"></a><span class="lineno"> 1063</span> </div>
<div class="line"><a id="l01064" name="l01064"></a><span class="lineno"> 1064</span><span class="comment">// set limits based on steering and throttle input</span></div>
<div class="foldopen" id="foldopen01065" data-start="{" data-end="}">
<div class="line"><a id="l01065" name="l01065"></a><span class="lineno"><a class="line" href="classAP__MotorsUGV.html#aefc1524c06ea9c0049e70790f11a9334"> 1065</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classAP__MotorsUGV.html#aefc1524c06ea9c0049e70790f11a9334">AP_MotorsUGV::set_limits_from_input</a>(<span class="keywordtype">bool</span> armed, <span class="keywordtype">float</span> steering, <span class="keywordtype">float</span> throttle)</div>
<div class="line"><a id="l01066" name="l01066"></a><span class="lineno"> 1066</span>{</div>
<div class="line"><a id="l01067" name="l01067"></a><span class="lineno"> 1067</span>    <span class="comment">// set limits based on inputs</span></div>
<div class="line"><a id="l01068" name="l01068"></a><span class="lineno"> 1068</span>    <a class="code hl_variable" href="classAP__MotorsUGV.html#a88abdedf1b1220d748e4a5dc595bcdba">limit</a>.<a class="code hl_variable" href="structAP__MotorsUGV_1_1AP__MotorsUGV__limit.html#ac4a751ead8632497191684c0de727331">steer_left</a> |= !armed || (steering &lt;= -4500.0f);</div>
<div class="line"><a id="l01069" name="l01069"></a><span class="lineno"> 1069</span>    <a class="code hl_variable" href="classAP__MotorsUGV.html#a88abdedf1b1220d748e4a5dc595bcdba">limit</a>.<a class="code hl_variable" href="structAP__MotorsUGV_1_1AP__MotorsUGV__limit.html#a62dd8a7d50dc33039bf2aef718829007">steer_right</a> |= !armed || (steering &gt;= 4500.0f);</div>
<div class="line"><a id="l01070" name="l01070"></a><span class="lineno"> 1070</span>    <a class="code hl_variable" href="classAP__MotorsUGV.html#a88abdedf1b1220d748e4a5dc595bcdba">limit</a>.<a class="code hl_variable" href="structAP__MotorsUGV_1_1AP__MotorsUGV__limit.html#a1a4e8eb4ca5a5cbb9805805b787422a8">throttle_lower</a> |= !armed || (throttle &lt;= -<a class="code hl_variable" href="classAP__MotorsUGV.html#a1899ae8b286e235041609a84cc0f9d8d">_throttle_max</a>);</div>
<div class="line"><a id="l01071" name="l01071"></a><span class="lineno"> 1071</span>    <a class="code hl_variable" href="classAP__MotorsUGV.html#a88abdedf1b1220d748e4a5dc595bcdba">limit</a>.<a class="code hl_variable" href="structAP__MotorsUGV_1_1AP__MotorsUGV__limit.html#a36d067b02d9d960d439ef1ab40dcc812">throttle_upper</a> |= !armed || (throttle &gt;= <a class="code hl_variable" href="classAP__MotorsUGV.html#a1899ae8b286e235041609a84cc0f9d8d">_throttle_max</a>);</div>
<div class="line"><a id="l01072" name="l01072"></a><span class="lineno"> 1072</span>}</div>
</div>
<div class="line"><a id="l01073" name="l01073"></a><span class="lineno"> 1073</span> </div>
<div class="line"><a id="l01074" name="l01074"></a><span class="lineno"> 1074</span><span class="comment">// scale a throttle using the _throttle_min and _thrust_curve_expo parameters.  throttle should be in the range -100 to +100</span></div>
<div class="foldopen" id="foldopen01075" data-start="{" data-end="}">
<div class="line"><a id="l01075" name="l01075"></a><span class="lineno"><a class="line" href="classAP__MotorsUGV.html#ac2c2665a6afdfc53cea1626643be4547"> 1075</a></span><span class="keywordtype">float</span> <a class="code hl_function" href="classAP__MotorsUGV.html#ac2c2665a6afdfc53cea1626643be4547">AP_MotorsUGV::get_scaled_throttle</a>(<span class="keywordtype">float</span> throttle)<span class="keyword"> const</span></div>
<div class="line"><a id="l01076" name="l01076"></a><span class="lineno"> 1076</span><span class="keyword"></span>{</div>
<div class="line"><a id="l01077" name="l01077"></a><span class="lineno"> 1077</span>    <span class="comment">// exit immediately if throttle is zero</span></div>
<div class="line"><a id="l01078" name="l01078"></a><span class="lineno"> 1078</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="AP__Math_8h.html#a2a12cce483e9b870da70d30406d82c60">is_zero</a>(throttle)) {</div>
<div class="line"><a id="l01079" name="l01079"></a><span class="lineno"> 1079</span>        <span class="keywordflow">return</span> throttle;</div>
<div class="line"><a id="l01080" name="l01080"></a><span class="lineno"> 1080</span>    }</div>
<div class="line"><a id="l01081" name="l01081"></a><span class="lineno"> 1081</span> </div>
<div class="line"><a id="l01082" name="l01082"></a><span class="lineno"> 1082</span>    <span class="comment">// scale using throttle_min</span></div>
<div class="line"><a id="l01083" name="l01083"></a><span class="lineno"> 1083</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__MotorsUGV.html#ad34c71675d53bb34a38e363889110ebe">_throttle_min</a> &gt; 0) {</div>
<div class="line"><a id="l01084" name="l01084"></a><span class="lineno"> 1084</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="AP__Math_8h.html#a8b6f71a42818d74fd8bfe348108942fa">is_negative</a>(throttle)) {</div>
<div class="line"><a id="l01085" name="l01085"></a><span class="lineno"> 1085</span>            throttle = -<a class="code hl_variable" href="classAP__MotorsUGV.html#ad34c71675d53bb34a38e363889110ebe">_throttle_min</a> + (throttle * ((100.0f - <a class="code hl_variable" href="classAP__MotorsUGV.html#ad34c71675d53bb34a38e363889110ebe">_throttle_min</a>) * 0.01f));</div>
<div class="line"><a id="l01086" name="l01086"></a><span class="lineno"> 1086</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01087" name="l01087"></a><span class="lineno"> 1087</span>            throttle = <a class="code hl_variable" href="classAP__MotorsUGV.html#ad34c71675d53bb34a38e363889110ebe">_throttle_min</a> + (throttle * ((100.0f - <a class="code hl_variable" href="classAP__MotorsUGV.html#ad34c71675d53bb34a38e363889110ebe">_throttle_min</a>) * 0.01f));</div>
<div class="line"><a id="l01088" name="l01088"></a><span class="lineno"> 1088</span>        }</div>
<div class="line"><a id="l01089" name="l01089"></a><span class="lineno"> 1089</span>    }</div>
<div class="line"><a id="l01090" name="l01090"></a><span class="lineno"> 1090</span> </div>
<div class="line"><a id="l01091" name="l01091"></a><span class="lineno"> 1091</span>    <span class="comment">// skip further scaling if thrust curve disabled or invalid</span></div>
<div class="line"><a id="l01092" name="l01092"></a><span class="lineno"> 1092</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="AP__Math_8h.html#a2a12cce483e9b870da70d30406d82c60">is_zero</a>(<a class="code hl_variable" href="classAP__MotorsUGV.html#aa977c3fdbdac7136e7926d78d9b8385d">_thrust_curve_expo</a>) || (<a class="code hl_variable" href="classAP__MotorsUGV.html#aa977c3fdbdac7136e7926d78d9b8385d">_thrust_curve_expo</a> &gt; 1.0f) || (<a class="code hl_variable" href="classAP__MotorsUGV.html#aa977c3fdbdac7136e7926d78d9b8385d">_thrust_curve_expo</a> &lt; -1.0f)) {</div>
<div class="line"><a id="l01093" name="l01093"></a><span class="lineno"> 1093</span>        <span class="keywordflow">return</span> throttle;</div>
<div class="line"><a id="l01094" name="l01094"></a><span class="lineno"> 1094</span>    }</div>
<div class="line"><a id="l01095" name="l01095"></a><span class="lineno"> 1095</span> </div>
<div class="line"><a id="l01096" name="l01096"></a><span class="lineno"> 1096</span>    <span class="comment">// calculate scaler</span></div>
<div class="line"><a id="l01097" name="l01097"></a><span class="lineno"> 1097</span>    <span class="keyword">const</span> <span class="keywordtype">float</span> sign = (throttle &lt; 0.0f) ? -1.0f : 1.0f;</div>
<div class="line"><a id="l01098" name="l01098"></a><span class="lineno"> 1098</span>    <span class="keyword">const</span> <span class="keywordtype">float</span> throttle_pct = <a class="code hl_define" href="AP__Math_8h.html#a5256308fd38a7098b8f95607aa56888f">constrain_float</a>(throttle, -100.0f, 100.0f) * 0.01f;</div>
<div class="line"><a id="l01099" name="l01099"></a><span class="lineno"> 1099</span>    <span class="keywordflow">return</span> 100.0f * sign * ((<a class="code hl_variable" href="classAP__MotorsUGV.html#aa977c3fdbdac7136e7926d78d9b8385d">_thrust_curve_expo</a> - 1.0f) + <a class="code hl_function" href="AP__Math_8cpp.html#ac89eb1832d8e4d67fcf1ac07e3c25184">safe_sqrt</a>((1.0f - <a class="code hl_variable" href="classAP__MotorsUGV.html#aa977c3fdbdac7136e7926d78d9b8385d">_thrust_curve_expo</a>) * (1.0f - <a class="code hl_variable" href="classAP__MotorsUGV.html#aa977c3fdbdac7136e7926d78d9b8385d">_thrust_curve_expo</a>) + 4.0f * <a class="code hl_variable" href="classAP__MotorsUGV.html#aa977c3fdbdac7136e7926d78d9b8385d">_thrust_curve_expo</a> * fabsf(throttle_pct))) / (2.0f * <a class="code hl_variable" href="classAP__MotorsUGV.html#aa977c3fdbdac7136e7926d78d9b8385d">_thrust_curve_expo</a>);</div>
<div class="line"><a id="l01100" name="l01100"></a><span class="lineno"> 1100</span>}</div>
</div>
<div class="line"><a id="l01101" name="l01101"></a><span class="lineno"> 1101</span> </div>
<div class="line"><a id="l01102" name="l01102"></a><span class="lineno"> 1102</span><span class="comment">// use rate controller to achieve desired throttle</span></div>
<div class="foldopen" id="foldopen01103" data-start="{" data-end="}">
<div class="line"><a id="l01103" name="l01103"></a><span class="lineno"><a class="line" href="classAP__MotorsUGV.html#ac3de31b4f9d4746da2fe105f073537cc"> 1103</a></span><span class="keywordtype">float</span> <a class="code hl_function" href="classAP__MotorsUGV.html#ac3de31b4f9d4746da2fe105f073537cc">AP_MotorsUGV::get_rate_controlled_throttle</a>(<a class="code hl_enumeration" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68">SRV_Channel::Aux_servo_function_t</a> function, <span class="keywordtype">float</span> throttle, <span class="keywordtype">float</span> dt)</div>
<div class="line"><a id="l01104" name="l01104"></a><span class="lineno"> 1104</span>{</div>
<div class="line"><a id="l01105" name="l01105"></a><span class="lineno"> 1105</span>    <span class="comment">// require non-zero dt</span></div>
<div class="line"><a id="l01106" name="l01106"></a><span class="lineno"> 1106</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="AP__Math_8h.html#a4e3ae698e8f99cec214348ad233e3c41">is_positive</a>(dt)) {</div>
<div class="line"><a id="l01107" name="l01107"></a><span class="lineno"> 1107</span>        <span class="keywordflow">return</span> throttle;</div>
<div class="line"><a id="l01108" name="l01108"></a><span class="lineno"> 1108</span>    }</div>
<div class="line"><a id="l01109" name="l01109"></a><span class="lineno"> 1109</span> </div>
<div class="line"><a id="l01110" name="l01110"></a><span class="lineno"> 1110</span>    <span class="comment">// attempt to rate control left throttle</span></div>
<div class="line"><a id="l01111" name="l01111"></a><span class="lineno"> 1111</span>    <span class="keywordflow">if</span> ((function == <a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a44f85b5c346aea6379642a4970f0a0a2">SRV_Channel::k_throttleLeft</a>) &amp;&amp; <a class="code hl_variable" href="classAP__MotorsUGV.html#a4dd27ce2264b533cdefd6f071d9444c6">_rate_controller</a>.<a class="code hl_function" href="classAP__WheelRateControl.html#aab84fcd466e5a86567e0e628092f2fc1">enabled</a>(0)) {</div>
<div class="line"><a id="l01112" name="l01112"></a><span class="lineno"> 1112</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="classAP__MotorsUGV.html#a4dd27ce2264b533cdefd6f071d9444c6">_rate_controller</a>.<a class="code hl_function" href="classAP__WheelRateControl.html#aa11e56bbe3141ebf5acdae6cb885f2b7">get_rate_controlled_throttle</a>(0, throttle, dt);</div>
<div class="line"><a id="l01113" name="l01113"></a><span class="lineno"> 1113</span>    }</div>
<div class="line"><a id="l01114" name="l01114"></a><span class="lineno"> 1114</span> </div>
<div class="line"><a id="l01115" name="l01115"></a><span class="lineno"> 1115</span>    <span class="comment">// rate control right throttle</span></div>
<div class="line"><a id="l01116" name="l01116"></a><span class="lineno"> 1116</span>    <span class="keywordflow">if</span> ((function == <a class="code hl_enumvalue" href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a5ab419baae8c0128be85cf73b068eeef">SRV_Channel::k_throttleRight</a>) &amp;&amp; <a class="code hl_variable" href="classAP__MotorsUGV.html#a4dd27ce2264b533cdefd6f071d9444c6">_rate_controller</a>.<a class="code hl_function" href="classAP__WheelRateControl.html#aab84fcd466e5a86567e0e628092f2fc1">enabled</a>(1)) {</div>
<div class="line"><a id="l01117" name="l01117"></a><span class="lineno"> 1117</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="classAP__MotorsUGV.html#a4dd27ce2264b533cdefd6f071d9444c6">_rate_controller</a>.<a class="code hl_function" href="classAP__WheelRateControl.html#aa11e56bbe3141ebf5acdae6cb885f2b7">get_rate_controlled_throttle</a>(1, throttle, dt);</div>
<div class="line"><a id="l01118" name="l01118"></a><span class="lineno"> 1118</span>    }</div>
<div class="line"><a id="l01119" name="l01119"></a><span class="lineno"> 1119</span> </div>
<div class="line"><a id="l01120" name="l01120"></a><span class="lineno"> 1120</span>    <span class="comment">// return throttle unchanged</span></div>
<div class="line"><a id="l01121" name="l01121"></a><span class="lineno"> 1121</span>    <span class="keywordflow">return</span> throttle;</div>
<div class="line"><a id="l01122" name="l01122"></a><span class="lineno"> 1122</span>}</div>
</div>
<div class="line"><a id="l01123" name="l01123"></a><span class="lineno"> 1123</span> </div>
<div class="line"><a id="l01124" name="l01124"></a><span class="lineno"> 1124</span><span class="comment">// return true if motors are moving</span></div>
<div class="foldopen" id="foldopen01125" data-start="{" data-end="}">
<div class="line"><a id="l01125" name="l01125"></a><span class="lineno"><a class="line" href="classAP__MotorsUGV.html#ab02978771c0241b8823dc616a2121f19"> 1125</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classAP__MotorsUGV.html#ab02978771c0241b8823dc616a2121f19">AP_MotorsUGV::active</a>()<span class="keyword"> const</span></div>
<div class="line"><a id="l01126" name="l01126"></a><span class="lineno"> 1126</span><span class="keyword"></span>{</div>
<div class="line"><a id="l01127" name="l01127"></a><span class="lineno"> 1127</span>    <span class="comment">// if soft disarmed, motors not active</span></div>
<div class="line"><a id="l01128" name="l01128"></a><span class="lineno"> 1128</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="AC__AttitudeControl_8cpp.html#a240c1a4ae2a70d1855f91e4a0b1ac938">hal</a>.<a class="code hl_variable" href="classAP__HAL_1_1HAL.html#a9337a60383f4264fa96a20dbe43a4e2e">util</a>-&gt;<a class="code hl_function" href="classAP__HAL_1_1Util.html#a287a2b82fa30b92c8d52aad61d4d27b7">get_soft_armed</a>()) {</div>
<div class="line"><a id="l01129" name="l01129"></a><span class="lineno"> 1129</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01130" name="l01130"></a><span class="lineno"> 1130</span>    }</div>
<div class="line"><a id="l01131" name="l01131"></a><span class="lineno"> 1131</span> </div>
<div class="line"><a id="l01132" name="l01132"></a><span class="lineno"> 1132</span>    <span class="comment">// check throttle is active</span></div>
<div class="line"><a id="l01133" name="l01133"></a><span class="lineno"> 1133</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="AP__Math_8h.html#a2a12cce483e9b870da70d30406d82c60">is_zero</a>(<a class="code hl_function" href="classAP__MotorsUGV.html#a54d9d572b65b97f03c1db8484b896118">get_throttle</a>())) {</div>
<div class="line"><a id="l01134" name="l01134"></a><span class="lineno"> 1134</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01135" name="l01135"></a><span class="lineno"> 1135</span>    }</div>
<div class="line"><a id="l01136" name="l01136"></a><span class="lineno"> 1136</span> </div>
<div class="line"><a id="l01137" name="l01137"></a><span class="lineno"> 1137</span>    <span class="comment">// skid-steering vehicles active when steering</span></div>
<div class="line"><a id="l01138" name="l01138"></a><span class="lineno"> 1138</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="classAP__MotorsUGV.html#a3c13ea4a9949243234dce823c2fa961d">have_skid_steering</a>() &amp;&amp; !<a class="code hl_function" href="AP__Math_8h.html#a2a12cce483e9b870da70d30406d82c60">is_zero</a>(<a class="code hl_function" href="classAP__MotorsUGV.html#ab4374f3262930fa94b7e3209dced5001">get_steering</a>())) {</div>
<div class="line"><a id="l01139" name="l01139"></a><span class="lineno"> 1139</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01140" name="l01140"></a><span class="lineno"> 1140</span>    }</div>
<div class="line"><a id="l01141" name="l01141"></a><span class="lineno"> 1141</span> </div>
<div class="line"><a id="l01142" name="l01142"></a><span class="lineno"> 1142</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01143" name="l01143"></a><span class="lineno"> 1143</span>}</div>
</div>
<div class="line"><a id="l01144" name="l01144"></a><span class="lineno"> 1144</span> </div>
<div class="line"><a id="l01145" name="l01145"></a><span class="lineno"> 1145</span><span class="comment">// returns true if the configured PWM type is digital and should have fixed endpoints</span></div>
<div class="foldopen" id="foldopen01146" data-start="{" data-end="}">
<div class="line"><a id="l01146" name="l01146"></a><span class="lineno"><a class="line" href="classAP__MotorsUGV.html#a360ac26d49868ca5b56c6399ef106db1"> 1146</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classAP__MotorsUGV.html#a360ac26d49868ca5b56c6399ef106db1">AP_MotorsUGV::is_digital_pwm_type</a>()<span class="keyword"> const</span></div>
<div class="line"><a id="l01147" name="l01147"></a><span class="lineno"> 1147</span><span class="keyword"></span>{</div>
<div class="line"><a id="l01148" name="l01148"></a><span class="lineno"> 1148</span>    <span class="keywordflow">switch</span> (<a class="code hl_variable" href="classAP__MotorsUGV.html#ab33a40ca42efb7032c3abb8e57721aa4">_pwm_type</a>) {</div>
<div class="line"><a id="l01149" name="l01149"></a><span class="lineno"> 1149</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAP__MotorsUGV.html#a27611cd34d855dc865aeb7c9cd9d6ddaaf471159ced251cd618373b6eaff19fc4">PWM_TYPE_DSHOT150</a>:</div>
<div class="line"><a id="l01150" name="l01150"></a><span class="lineno"> 1150</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAP__MotorsUGV.html#a27611cd34d855dc865aeb7c9cd9d6ddaa35d8d2c7705bdff2397adc841b7cb0f3">PWM_TYPE_DSHOT300</a>:</div>
<div class="line"><a id="l01151" name="l01151"></a><span class="lineno"> 1151</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAP__MotorsUGV.html#a27611cd34d855dc865aeb7c9cd9d6ddaa62cdb59efd013e2b7c2fadfeffdb336b">PWM_TYPE_DSHOT600</a>:</div>
<div class="line"><a id="l01152" name="l01152"></a><span class="lineno"> 1152</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAP__MotorsUGV.html#a27611cd34d855dc865aeb7c9cd9d6ddaa980c3d73ad866605b2ec24581b995595">PWM_TYPE_DSHOT1200</a>:</div>
<div class="line"><a id="l01153" name="l01153"></a><span class="lineno"> 1153</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01154" name="l01154"></a><span class="lineno"> 1154</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAP__MotorsUGV.html#a27611cd34d855dc865aeb7c9cd9d6ddaa7249b2e8461c9d1ef7d27be99fde867a">PWM_TYPE_NORMAL</a>:</div>
<div class="line"><a id="l01155" name="l01155"></a><span class="lineno"> 1155</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAP__MotorsUGV.html#a27611cd34d855dc865aeb7c9cd9d6ddaab7fc68482de73b2cd4b4e362fecb6ce3">PWM_TYPE_ONESHOT</a>:</div>
<div class="line"><a id="l01156" name="l01156"></a><span class="lineno"> 1156</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAP__MotorsUGV.html#a27611cd34d855dc865aeb7c9cd9d6ddaa18832351bc7d98fd202709d9ecd0dfdf">PWM_TYPE_ONESHOT125</a>:</div>
<div class="line"><a id="l01157" name="l01157"></a><span class="lineno"> 1157</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAP__MotorsUGV.html#a27611cd34d855dc865aeb7c9cd9d6ddaac8189d0426c8a7f5b318116b344b19ce">PWM_TYPE_BRUSHED_WITH_RELAY</a>:</div>
<div class="line"><a id="l01158" name="l01158"></a><span class="lineno"> 1158</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classAP__MotorsUGV.html#a27611cd34d855dc865aeb7c9cd9d6ddaa0232349c42f0aaf5046cf03cdc201372">PWM_TYPE_BRUSHED_BIPOLAR</a>:</div>
<div class="line"><a id="l01159" name="l01159"></a><span class="lineno"> 1159</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01160" name="l01160"></a><span class="lineno"> 1160</span>    }</div>
<div class="line"><a id="l01161" name="l01161"></a><span class="lineno"> 1161</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01162" name="l01162"></a><span class="lineno"> 1162</span>}</div>
</div>
<div class="line"><a id="l01163" name="l01163"></a><span class="lineno"> 1163</span> </div>
<div class="line"><a id="l01164" name="l01164"></a><span class="lineno"> 1164</span><span class="keyword">namespace </span><a class="code hl_namespace" href="namespaceAP.html">AP</a> {</div>
<div class="foldopen" id="foldopen01165" data-start="{" data-end="}">
<div class="line"><a id="l01165" name="l01165"></a><span class="lineno"><a class="line" href="namespaceAP.html#af1e55b185acfcda5da3b5fcd98aaf22e"> 1165</a></span>    <a class="code hl_class" href="classAP__MotorsUGV.html">AP_MotorsUGV</a> *<a class="code hl_function" href="namespaceAP.html#af1e55b185acfcda5da3b5fcd98aaf22e">motors_ugv</a>()</div>
<div class="line"><a id="l01166" name="l01166"></a><span class="lineno"> 1166</span>    {</div>
<div class="line"><a id="l01167" name="l01167"></a><span class="lineno"> 1167</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="classAP__MotorsUGV.html#aa5998e83e3904453facb7da6cf527265">AP_MotorsUGV::get_singleton</a>();</div>
<div class="line"><a id="l01168" name="l01168"></a><span class="lineno"> 1168</span>    }</div>
</div>
<div class="line"><a id="l01169" name="l01169"></a><span class="lineno"> 1169</span>}</div>
<div class="line"><a id="l01170" name="l01170"></a><span class="lineno"> 1170</span> </div>
<div class="ttc" id="aAC__AttitudeControl_8cpp_html_a240c1a4ae2a70d1855f91e4a0b1ac938"><div class="ttname"><a href="AC__AttitudeControl_8cpp.html#a240c1a4ae2a70d1855f91e4a0b1ac938">hal</a></div><div class="ttdeci">const AP_HAL::HAL &amp; hal</div><div class="ttdef"><b>Definition</b> <a href="AP__Compass__AK09916_8cpp_source.html#l00059">AP_Compass_AK09916.cpp:59</a></div></div>
<div class="ttc" id="aAP__Common_8h_html_a121caf32c5b5d704ef3453f0885a9ea5"><div class="ttname"><a href="AP__Common_8h.html#a121caf32c5b5d704ef3453f0885a9ea5">ARRAY_SIZE</a></div><div class="ttdeci">#define ARRAY_SIZE(_arr)</div><div class="ttdef"><b>Definition</b> <a href="AP__Common_8h_source.html#l00099">AP_Common.h:99</a></div></div>
<div class="ttc" id="aAP__HAL_2examples_2RCOutput_2RCOutput_8cpp_html_a319168d2f969cabd35a4adcc01975c20"><div class="ttname"><a href="AP__HAL_2examples_2RCOutput_2RCOutput_8cpp.html#a319168d2f969cabd35a4adcc01975c20">pwm</a></div><div class="ttdeci">static uint16_t pwm</div><div class="ttdef"><b>Definition</b> <a href="AP__HAL_2examples_2RCOutput_2RCOutput_8cpp_source.html#l00033">RCOutput.cpp:33</a></div></div>
<div class="ttc" id="aAP__HAL_8h_html"><div class="ttname"><a href="AP__HAL_8h.html">AP_HAL.h</a></div></div>
<div class="ttc" id="aAP__Math_8cpp_html_ac89eb1832d8e4d67fcf1ac07e3c25184"><div class="ttname"><a href="AP__Math_8cpp.html#ac89eb1832d8e4d67fcf1ac07e3c25184">safe_sqrt</a></div><div class="ttdeci">float safe_sqrt(const T v)</div><div class="ttdef"><b>Definition</b> <a href="AP__Math_8cpp_source.html#l00071">AP_Math.cpp:71</a></div></div>
<div class="ttc" id="aAP__Math_8cpp_html_ae2d4d03c107c3e6a127fb167e3908aa2"><div class="ttname"><a href="AP__Math_8cpp.html#ae2d4d03c107c3e6a127fb167e3908aa2">linear_interpolate</a></div><div class="ttdeci">float linear_interpolate(float low_output, float high_output, float var_value, float var_low, float var_high)</div><div class="ttdef"><b>Definition</b> <a href="AP__Math_8cpp_source.html#l00098">AP_Math.cpp:98</a></div></div>
<div class="ttc" id="aAP__Math_8h_html"><div class="ttname"><a href="AP__Math_8h.html">AP_Math.h</a></div></div>
<div class="ttc" id="aAP__Math_8h_html_a2a12cce483e9b870da70d30406d82c60"><div class="ttname"><a href="AP__Math_8h.html#a2a12cce483e9b870da70d30406d82c60">is_zero</a></div><div class="ttdeci">bool is_zero(const T fVal1)</div><div class="ttdef"><b>Definition</b> <a href="AP__Math_8h_source.html#l00053">AP_Math.h:53</a></div></div>
<div class="ttc" id="aAP__Math_8h_html_a49ad7fa2fa2e3d8aa75e8e0ec3f83b99"><div class="ttname"><a href="AP__Math_8h.html#a49ad7fa2fa2e3d8aa75e8e0ec3f83b99">radians</a></div><div class="ttdeci">static constexpr ftype radians(ftype deg)</div><div class="ttdef"><b>Definition</b> <a href="AP__Math_8h_source.html#l00213">AP_Math.h:213</a></div></div>
<div class="ttc" id="aAP__Math_8h_html_a4e3ae698e8f99cec214348ad233e3c41"><div class="ttname"><a href="AP__Math_8h.html#a4e3ae698e8f99cec214348ad233e3c41">is_positive</a></div><div class="ttdeci">bool is_positive(const T fVal1)</div><div class="ttdef"><b>Definition</b> <a href="AP__Math_8h_source.html#l00063">AP_Math.h:63</a></div></div>
<div class="ttc" id="aAP__Math_8h_html_a5256308fd38a7098b8f95607aa56888f"><div class="ttname"><a href="AP__Math_8h.html#a5256308fd38a7098b8f95607aa56888f">constrain_float</a></div><div class="ttdeci">#define constrain_float(amt, low, high)</div><div class="ttdef"><b>Definition</b> <a href="AP__Math_8h_source.html#l00174">AP_Math.h:174</a></div></div>
<div class="ttc" id="aAP__Math_8h_html_a68558c4f79a8582543daefde13c64abc"><div class="ttname"><a href="AP__Math_8h.html#a68558c4f79a8582543daefde13c64abc">constrain_int16</a></div><div class="ttdeci">int16_t constrain_int16(const int16_t amt, const int16_t low, const int16_t high)</div><div class="ttdef"><b>Definition</b> <a href="AP__Math_8h_source.html#l00177">AP_Math.h:177</a></div></div>
<div class="ttc" id="aAP__Math_8h_html_a8b6f71a42818d74fd8bfe348108942fa"><div class="ttname"><a href="AP__Math_8h.html#a8b6f71a42818d74fd8bfe348108942fa">is_negative</a></div><div class="ttdeci">bool is_negative(const T fVal1)</div><div class="ttdef"><b>Definition</b> <a href="AP__Math_8h_source.html#l00074">AP_Math.h:74</a></div></div>
<div class="ttc" id="aAP__MotorsUGV_8cpp_html_a458215e61949d9180bc820b5eff66d0b"><div class="ttname"><a href="AP__MotorsUGV_8cpp.html#a458215e61949d9180bc820b5eff66d0b">SERVO_MAX</a></div><div class="ttdeci">#define SERVO_MAX</div><div class="ttdef"><b>Definition</b> <a href="#l00021">AP_MotorsUGV.cpp:21</a></div></div>
<div class="ttc" id="aAP__MotorsUGV_8cpp_html_ae08c3ca4ba26b63cda0bb3e3c6c02785"><div class="ttname"><a href="AP__MotorsUGV_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a></div><div class="ttdeci">const AP_HAL::HAL &amp; hal</div><div class="ttdef"><b>Definition</b> <a href="AC__PID__test_8cpp_source.html#l00021">AC_PID_test.cpp:21</a></div></div>
<div class="ttc" id="aAP__MotorsUGV_8h_html"><div class="ttname"><a href="AP__MotorsUGV_8h.html">AP_MotorsUGV.h</a></div></div>
<div class="ttc" id="aAP__Parachute__test_8cpp_html_a1b01eb2a0239e74c68c0190c5a24bd6d"><div class="ttname"><a href="AP__Parachute__test_8cpp.html#a1b01eb2a0239e74c68c0190c5a24bd6d">relay</a></div><div class="ttdeci">static AP_Relay relay</div><div class="ttdef"><b>Definition</b> <a href="AP__Parachute__test_8cpp_source.html#l00022">AP_Parachute_test.cpp:22</a></div></div>
<div class="ttc" id="aAP__Param_8h_html_a0f9acb038a5283b964b862aea8cc5051"><div class="ttname"><a href="AP__Param_8h.html#a0f9acb038a5283b964b862aea8cc5051">AP_GROUPEND</a></div><div class="ttdeci">#define AP_GROUPEND</div><div class="ttdef"><b>Definition</b> <a href="AP__Param_8h_source.html#l00163">AP_Param.h:163</a></div></div>
<div class="ttc" id="aAP__Param_8h_html_a78a408c84f2a1bafde256ac650142e4d"><div class="ttname"><a href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a></div><div class="ttdeci">#define AP_GROUPINFO(name, idx, clazz, element, def)</div><div class="ttdef"><b>Definition</b> <a href="AP__Param_8h_source.html#l00145">AP_Param.h:145</a></div></div>
<div class="ttc" id="aAP__Relay_8h_html"><div class="ttname"><a href="AP__Relay_8h.html">AP_Relay.h</a></div><div class="ttdoc">APM relay control class.</div></div>
<div class="ttc" id="aGCS_8h_html"><div class="ttname"><a href="GCS_8h.html">GCS.h</a></div><div class="ttdoc">Interface definition for the various Ground Control System.</div></div>
<div class="ttc" id="aGCS_8h_html_a266bfe8eda675e1092f045e93932b4a6"><div class="ttname"><a href="GCS_8h.html#a266bfe8eda675e1092f045e93932b4a6">GCS_SEND_TEXT</a></div><div class="ttdeci">#define GCS_SEND_TEXT(severity, format, args...)</div><div class="ttdef"><b>Definition</b> <a href="GCS_8h_source.html#l01349">GCS.h:1349</a></div></div>
<div class="ttc" id="aGCS_8h_html_ab53f292b698f9a6a3f029dfdbd5a43de"><div class="ttname"><a href="GCS_8h.html#ab53f292b698f9a6a3f029dfdbd5a43de">gcs</a></div><div class="ttdeci">GCS &amp; gcs()</div><div class="ttdef"><b>Definition</b> <a href="GCS__Common_8cpp_source.html#l06846">GCS_Common.cpp:6846</a></div></div>
<div class="ttc" id="aSRV__Channel_8h_html"><div class="ttname"><a href="SRV__Channel_8h.html">SRV_Channel.h</a></div></div>
<div class="ttc" id="aclassAP__HAL_1_1HAL_html"><div class="ttname"><a href="classAP__HAL_1_1HAL.html">AP_HAL::HAL</a></div><div class="ttdef"><b>Definition</b> <a href="HAL_8h_source.html#l00021">HAL.h:21</a></div></div>
<div class="ttc" id="aclassAP__HAL_1_1HAL_html_a9337a60383f4264fa96a20dbe43a4e2e"><div class="ttname"><a href="classAP__HAL_1_1HAL.html#a9337a60383f4264fa96a20dbe43a4e2e">AP_HAL::HAL::util</a></div><div class="ttdeci">AP_HAL::Util * util</div><div class="ttdef"><b>Definition</b> <a href="HAL_8h_source.html#l00131">HAL.h:131</a></div></div>
<div class="ttc" id="aclassAP__HAL_1_1HAL_html_aa6daf2df3dfc0b9f0f503db64a52b0cc"><div class="ttname"><a href="classAP__HAL_1_1HAL.html#aa6daf2df3dfc0b9f0f503db64a52b0cc">AP_HAL::HAL::rcout</a></div><div class="ttdeci">AP_HAL::RCOutput * rcout</div><div class="ttdef"><b>Definition</b> <a href="HAL_8h_source.html#l00129">HAL.h:129</a></div></div>
<div class="ttc" id="aclassAP__HAL_1_1RCOutput_html_a612e9a31b97e5774aead5f00c298ed3b"><div class="ttname"><a href="classAP__HAL_1_1RCOutput.html#a612e9a31b97e5774aead5f00c298ed3b">AP_HAL::RCOutput::set_output_mode</a></div><div class="ttdeci">virtual void set_output_mode(uint32_t mask, enum output_mode mode)</div><div class="ttdef"><b>Definition</b> <a href="AP__HAL_2RCOutput_8h_source.html#l00280">RCOutput.h:280</a></div></div>
<div class="ttc" id="aclassAP__HAL_1_1RCOutput_html_a622e13fac840e64e722fa475180c36d5"><div class="ttname"><a href="classAP__HAL_1_1RCOutput.html#a622e13fac840e64e722fa475180c36d5">AP_HAL::RCOutput::set_dshot_esc_type</a></div><div class="ttdeci">virtual void set_dshot_esc_type(DshotEscType esc_type)</div><div class="ttdef"><b>Definition</b> <a href="AP__HAL_2RCOutput_8h_source.html#l00334">RCOutput.h:334</a></div></div>
<div class="ttc" id="aclassAP__HAL_1_1RCOutput_html_ae7903398aa18e2472dd34081e626dcb7"><div class="ttname"><a href="classAP__HAL_1_1RCOutput.html#ae7903398aa18e2472dd34081e626dcb7">AP_HAL::RCOutput::set_freq</a></div><div class="ttdeci">virtual void set_freq(uint32_t chmask, uint16_t freq_hz)=0</div></div>
<div class="ttc" id="aclassAP__HAL_1_1RCOutput_html_afabff18b963ba9ef5b605e6e7aeca093a151001cd6113487e6da91b6c504683fc"><div class="ttname"><a href="classAP__HAL_1_1RCOutput.html#afabff18b963ba9ef5b605e6e7aeca093a151001cd6113487e6da91b6c504683fc">AP_HAL::RCOutput::MODE_PWM_DSHOT600</a></div><div class="ttdeci">@ MODE_PWM_DSHOT600</div><div class="ttdef"><b>Definition</b> <a href="AP__HAL_2RCOutput_8h_source.html#l00219">RCOutput.h:219</a></div></div>
<div class="ttc" id="aclassAP__HAL_1_1RCOutput_html_afabff18b963ba9ef5b605e6e7aeca093a1c9c7057fdd08bebe7487917c00dc17e"><div class="ttname"><a href="classAP__HAL_1_1RCOutput.html#afabff18b963ba9ef5b605e6e7aeca093a1c9c7057fdd08bebe7487917c00dc17e">AP_HAL::RCOutput::MODE_PWM_ONESHOT125</a></div><div class="ttdeci">@ MODE_PWM_ONESHOT125</div><div class="ttdef"><b>Definition</b> <a href="AP__HAL_2RCOutput_8h_source.html#l00215">RCOutput.h:215</a></div></div>
<div class="ttc" id="aclassAP__HAL_1_1RCOutput_html_afabff18b963ba9ef5b605e6e7aeca093a7be772b5075fec936dd6b34e35d60129"><div class="ttname"><a href="classAP__HAL_1_1RCOutput.html#afabff18b963ba9ef5b605e6e7aeca093a7be772b5075fec936dd6b34e35d60129">AP_HAL::RCOutput::MODE_PWM_DSHOT300</a></div><div class="ttdeci">@ MODE_PWM_DSHOT300</div><div class="ttdef"><b>Definition</b> <a href="AP__HAL_2RCOutput_8h_source.html#l00218">RCOutput.h:218</a></div></div>
<div class="ttc" id="aclassAP__HAL_1_1RCOutput_html_afabff18b963ba9ef5b605e6e7aeca093ab1e27b7d703bdf42b6223d9b9161d9a0"><div class="ttname"><a href="classAP__HAL_1_1RCOutput.html#afabff18b963ba9ef5b605e6e7aeca093ab1e27b7d703bdf42b6223d9b9161d9a0">AP_HAL::RCOutput::MODE_PWM_ONESHOT</a></div><div class="ttdeci">@ MODE_PWM_ONESHOT</div><div class="ttdef"><b>Definition</b> <a href="AP__HAL_2RCOutput_8h_source.html#l00214">RCOutput.h:214</a></div></div>
<div class="ttc" id="aclassAP__HAL_1_1RCOutput_html_afabff18b963ba9ef5b605e6e7aeca093abfe8b20b7cc1d255ca86181acfec9099"><div class="ttname"><a href="classAP__HAL_1_1RCOutput.html#afabff18b963ba9ef5b605e6e7aeca093abfe8b20b7cc1d255ca86181acfec9099">AP_HAL::RCOutput::MODE_PWM_DSHOT1200</a></div><div class="ttdeci">@ MODE_PWM_DSHOT1200</div><div class="ttdef"><b>Definition</b> <a href="AP__HAL_2RCOutput_8h_source.html#l00220">RCOutput.h:220</a></div></div>
<div class="ttc" id="aclassAP__HAL_1_1RCOutput_html_afabff18b963ba9ef5b605e6e7aeca093aca7f067a8380228e2d73594d25b17b1c"><div class="ttname"><a href="classAP__HAL_1_1RCOutput.html#afabff18b963ba9ef5b605e6e7aeca093aca7f067a8380228e2d73594d25b17b1c">AP_HAL::RCOutput::MODE_PWM_BRUSHED</a></div><div class="ttdeci">@ MODE_PWM_BRUSHED</div><div class="ttdef"><b>Definition</b> <a href="AP__HAL_2RCOutput_8h_source.html#l00216">RCOutput.h:216</a></div></div>
<div class="ttc" id="aclassAP__HAL_1_1RCOutput_html_afabff18b963ba9ef5b605e6e7aeca093ad7db50be7ff2c99ea810f30c5fef614c"><div class="ttname"><a href="classAP__HAL_1_1RCOutput.html#afabff18b963ba9ef5b605e6e7aeca093ad7db50be7ff2c99ea810f30c5fef614c">AP_HAL::RCOutput::MODE_PWM_DSHOT150</a></div><div class="ttdeci">@ MODE_PWM_DSHOT150</div><div class="ttdef"><b>Definition</b> <a href="AP__HAL_2RCOutput_8h_source.html#l00217">RCOutput.h:217</a></div></div>
<div class="ttc" id="aclassAP__HAL_1_1Util_html_a287a2b82fa30b92c8d52aad61d4d27b7"><div class="ttname"><a href="classAP__HAL_1_1Util.html#a287a2b82fa30b92c8d52aad61d4d27b7">AP_HAL::Util::get_soft_armed</a></div><div class="ttdeci">bool get_soft_armed() const</div><div class="ttdef"><b>Definition</b> <a href="AP__HAL_2Util_8h_source.html#l00018">Util.h:18</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html"><div class="ttname"><a href="classAP__MotorsUGV.html">AP_MotorsUGV</a></div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00007">AP_MotorsUGV.h:7</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a0bba981606c09e5759b6f3c653e1f2aa"><div class="ttname"><a href="classAP__MotorsUGV.html#a0bba981606c09e5759b6f3c653e1f2aa">AP_MotorsUGV::set_mainsail</a></div><div class="ttdeci">void set_mainsail(float mainsail)</div><div class="ttdef"><b>Definition</b> <a href="#l00268">AP_MotorsUGV.cpp:268</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a0c591a188874e128abf70a7404759caf"><div class="ttname"><a href="classAP__MotorsUGV.html#a0c591a188874e128abf70a7404759caf">AP_MotorsUGV::_speed_scale_base</a></div><div class="ttdeci">AP_Float _speed_scale_base</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00209">AP_MotorsUGV.h:209</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a1236ffe326fed8e0299a2e67e65d9dc7"><div class="ttname"><a href="classAP__MotorsUGV.html#a1236ffe326fed8e0299a2e67e65d9dc7">AP_MotorsUGV::_mast_rotation</a></div><div class="ttdeci">float _mast_rotation</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00223">AP_MotorsUGV.h:223</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a16f779fadf5c976587d51d9fd02d00da"><div class="ttname"><a href="classAP__MotorsUGV.html#a16f779fadf5c976587d51d9fd02d00da">AP_MotorsUGV::_throttle_prev</a></div><div class="ttdeci">float _throttle_prev</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00215">AP_MotorsUGV.h:215</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a1899ae8b286e235041609a84cc0f9d8d"><div class="ttname"><a href="classAP__MotorsUGV.html#a1899ae8b286e235041609a84cc0f9d8d">AP_MotorsUGV::_throttle_max</a></div><div class="ttdeci">AP_Int8 _throttle_max</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00205">AP_MotorsUGV.h:205</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a1c5e16c084e3a1b2255bdfea8a7efb71"><div class="ttname"><a href="classAP__MotorsUGV.html#a1c5e16c084e3a1b2255bdfea8a7efb71">AP_MotorsUGV::init</a></div><div class="ttdeci">void init(uint8_t ftype)</div><div class="ttdef"><b>Definition</b> <a href="#l00131">AP_MotorsUGV.cpp:131</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a1ffd5739c17022c664080ea128810fd3"><div class="ttname"><a href="classAP__MotorsUGV.html#a1ffd5739c17022c664080ea128810fd3">AP_MotorsUGV::_mainsail</a></div><div class="ttdeci">float _mainsail</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00221">AP_MotorsUGV.h:221</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a27611cd34d855dc865aeb7c9cd9d6ddaa0232349c42f0aaf5046cf03cdc201372"><div class="ttname"><a href="classAP__MotorsUGV.html#a27611cd34d855dc865aeb7c9cd9d6ddaa0232349c42f0aaf5046cf03cdc201372">AP_MotorsUGV::PWM_TYPE_BRUSHED_BIPOLAR</a></div><div class="ttdeci">@ PWM_TYPE_BRUSHED_BIPOLAR</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00138">AP_MotorsUGV.h:138</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a27611cd34d855dc865aeb7c9cd9d6ddaa18832351bc7d98fd202709d9ecd0dfdf"><div class="ttname"><a href="classAP__MotorsUGV.html#a27611cd34d855dc865aeb7c9cd9d6ddaa18832351bc7d98fd202709d9ecd0dfdf">AP_MotorsUGV::PWM_TYPE_ONESHOT125</a></div><div class="ttdeci">@ PWM_TYPE_ONESHOT125</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00136">AP_MotorsUGV.h:136</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a27611cd34d855dc865aeb7c9cd9d6ddaa35d8d2c7705bdff2397adc841b7cb0f3"><div class="ttname"><a href="classAP__MotorsUGV.html#a27611cd34d855dc865aeb7c9cd9d6ddaa35d8d2c7705bdff2397adc841b7cb0f3">AP_MotorsUGV::PWM_TYPE_DSHOT300</a></div><div class="ttdeci">@ PWM_TYPE_DSHOT300</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00140">AP_MotorsUGV.h:140</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a27611cd34d855dc865aeb7c9cd9d6ddaa62cdb59efd013e2b7c2fadfeffdb336b"><div class="ttname"><a href="classAP__MotorsUGV.html#a27611cd34d855dc865aeb7c9cd9d6ddaa62cdb59efd013e2b7c2fadfeffdb336b">AP_MotorsUGV::PWM_TYPE_DSHOT600</a></div><div class="ttdeci">@ PWM_TYPE_DSHOT600</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00141">AP_MotorsUGV.h:141</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a27611cd34d855dc865aeb7c9cd9d6ddaa7249b2e8461c9d1ef7d27be99fde867a"><div class="ttname"><a href="classAP__MotorsUGV.html#a27611cd34d855dc865aeb7c9cd9d6ddaa7249b2e8461c9d1ef7d27be99fde867a">AP_MotorsUGV::PWM_TYPE_NORMAL</a></div><div class="ttdeci">@ PWM_TYPE_NORMAL</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00134">AP_MotorsUGV.h:134</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a27611cd34d855dc865aeb7c9cd9d6ddaa980c3d73ad866605b2ec24581b995595"><div class="ttname"><a href="classAP__MotorsUGV.html#a27611cd34d855dc865aeb7c9cd9d6ddaa980c3d73ad866605b2ec24581b995595">AP_MotorsUGV::PWM_TYPE_DSHOT1200</a></div><div class="ttdeci">@ PWM_TYPE_DSHOT1200</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00143">AP_MotorsUGV.h:142</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a27611cd34d855dc865aeb7c9cd9d6ddaab7fc68482de73b2cd4b4e362fecb6ce3"><div class="ttname"><a href="classAP__MotorsUGV.html#a27611cd34d855dc865aeb7c9cd9d6ddaab7fc68482de73b2cd4b4e362fecb6ce3">AP_MotorsUGV::PWM_TYPE_ONESHOT</a></div><div class="ttdeci">@ PWM_TYPE_ONESHOT</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00135">AP_MotorsUGV.h:135</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a27611cd34d855dc865aeb7c9cd9d6ddaac8189d0426c8a7f5b318116b344b19ce"><div class="ttname"><a href="classAP__MotorsUGV.html#a27611cd34d855dc865aeb7c9cd9d6ddaac8189d0426c8a7f5b318116b344b19ce">AP_MotorsUGV::PWM_TYPE_BRUSHED_WITH_RELAY</a></div><div class="ttdeci">@ PWM_TYPE_BRUSHED_WITH_RELAY</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00137">AP_MotorsUGV.h:137</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a27611cd34d855dc865aeb7c9cd9d6ddaaf471159ced251cd618373b6eaff19fc4"><div class="ttname"><a href="classAP__MotorsUGV.html#a27611cd34d855dc865aeb7c9cd9d6ddaaf471159ced251cd618373b6eaff19fc4">AP_MotorsUGV::PWM_TYPE_DSHOT150</a></div><div class="ttdeci">@ PWM_TYPE_DSHOT150</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00139">AP_MotorsUGV.h:139</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a27c52a892e7e27ddc9eee848380d07bf"><div class="ttname"><a href="classAP__MotorsUGV.html#a27c52a892e7e27ddc9eee848380d07bf">AP_MotorsUGV::_thrust_asymmetry</a></div><div class="ttdeci">AP_Float _thrust_asymmetry</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00207">AP_MotorsUGV.h:207</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a297e34207c9bc335318c9f1698b7ee85"><div class="ttname"><a href="classAP__MotorsUGV.html#a297e34207c9bc335318c9f1698b7ee85">AP_MotorsUGV::_wingsail</a></div><div class="ttdeci">float _wingsail</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00222">AP_MotorsUGV.h:222</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a32f1794ebf9887243f5c869bfbe834d3"><div class="ttname"><a href="classAP__MotorsUGV.html#a32f1794ebf9887243f5c869bfbe834d3">AP_MotorsUGV::set_lateral</a></div><div class="ttdeci">void set_lateral(float lateral)</div><div class="ttdef"><b>Definition</b> <a href="#l00244">AP_MotorsUGV.cpp:244</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a360ac26d49868ca5b56c6399ef106db1"><div class="ttname"><a href="classAP__MotorsUGV.html#a360ac26d49868ca5b56c6399ef106db1">AP_MotorsUGV::is_digital_pwm_type</a></div><div class="ttdeci">bool is_digital_pwm_type() const</div><div class="ttdef"><b>Definition</b> <a href="#l01146">AP_MotorsUGV.cpp:1146</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a39112be7cfaa9679ae45c5014aeb63bc"><div class="ttname"><a href="classAP__MotorsUGV.html#a39112be7cfaa9679ae45c5014aeb63bc">AP_MotorsUGV::frame_type</a></div><div class="ttdeci">frame_type</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00025">AP_MotorsUGV.h:25</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a39112be7cfaa9679ae45c5014aeb63bca26288a6a28b4c213cd669493d7d45292"><div class="ttname"><a href="classAP__MotorsUGV.html#a39112be7cfaa9679ae45c5014aeb63bca26288a6a28b4c213cd669493d7d45292">AP_MotorsUGV::FRAME_TYPE_OMNI3</a></div><div class="ttdeci">@ FRAME_TYPE_OMNI3</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00027">AP_MotorsUGV.h:27</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a39112be7cfaa9679ae45c5014aeb63bca32848fe6cc0e74cad4866a95e214cc48"><div class="ttname"><a href="classAP__MotorsUGV.html#a39112be7cfaa9679ae45c5014aeb63bca32848fe6cc0e74cad4866a95e214cc48">AP_MotorsUGV::FRAME_TYPE_UNDEFINED</a></div><div class="ttdeci">@ FRAME_TYPE_UNDEFINED</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00026">AP_MotorsUGV.h:26</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a39112be7cfaa9679ae45c5014aeb63bca927f6f4ade5de8c4f5f126b0790fe2b9"><div class="ttname"><a href="classAP__MotorsUGV.html#a39112be7cfaa9679ae45c5014aeb63bca927f6f4ade5de8c4f5f126b0790fe2b9">AP_MotorsUGV::FRAME_TYPE_OMNIPLUS</a></div><div class="ttdeci">@ FRAME_TYPE_OMNIPLUS</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00029">AP_MotorsUGV.h:29</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a39112be7cfaa9679ae45c5014aeb63bcad5af86b1581f6215d2306f3604c91af0"><div class="ttname"><a href="classAP__MotorsUGV.html#a39112be7cfaa9679ae45c5014aeb63bcad5af86b1581f6215d2306f3604c91af0">AP_MotorsUGV::FRAME_TYPE_OMNIX</a></div><div class="ttdeci">@ FRAME_TYPE_OMNIX</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00028">AP_MotorsUGV.h:28</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a399fad8e84efcc630fe4bc204e001968"><div class="ttname"><a href="classAP__MotorsUGV.html#a399fad8e84efcc630fe4bc204e001968">AP_MotorsUGV::_vector_angle_max</a></div><div class="ttdeci">AP_Float _vector_angle_max</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00208">AP_MotorsUGV.h:208</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a39ec5ee1f11ac2fcca1eedd4ebf381f4"><div class="ttname"><a href="classAP__MotorsUGV.html#a39ec5ee1f11ac2fcca1eedd4ebf381f4">AP_MotorsUGV::_throttle_factor</a></div><div class="ttdeci">float _throttle_factor[AP_MOTORS_NUM_MOTORS_MAX]</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00228">AP_MotorsUGV.h:228</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a3c13ea4a9949243234dce823c2fa961d"><div class="ttname"><a href="classAP__MotorsUGV.html#a3c13ea4a9949243234dce823c2fa961d">AP_MotorsUGV::have_skid_steering</a></div><div class="ttdeci">bool have_skid_steering() const</div><div class="ttdef"><b>Definition</b> <a href="#l00301">AP_MotorsUGV.cpp:301</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a3f57c8a316743b33c1a513fd5ffc2c4a"><div class="ttname"><a href="classAP__MotorsUGV.html#a3f57c8a316743b33c1a513fd5ffc2c4a">AP_MotorsUGV::motor_test_order</a></div><div class="ttdeci">motor_test_order</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00015">AP_MotorsUGV.h:15</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a3f57c8a316743b33c1a513fd5ffc2c4aa0cae54d5256db765ee1d95ceb638638e"><div class="ttname"><a href="classAP__MotorsUGV.html#a3f57c8a316743b33c1a513fd5ffc2c4aa0cae54d5256db765ee1d95ceb638638e">AP_MotorsUGV::MOTOR_TEST_THROTTLE</a></div><div class="ttdeci">@ MOTOR_TEST_THROTTLE</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00016">AP_MotorsUGV.h:16</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a3f57c8a316743b33c1a513fd5ffc2c4aa0fd805669e357a44afda70af63002352"><div class="ttname"><a href="classAP__MotorsUGV.html#a3f57c8a316743b33c1a513fd5ffc2c4aa0fd805669e357a44afda70af63002352">AP_MotorsUGV::MOTOR_TEST_LAST</a></div><div class="ttdeci">@ MOTOR_TEST_LAST</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00022">AP_MotorsUGV.h:21</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a3f57c8a316743b33c1a513fd5ffc2c4aa34d5c0fe61f953eef03d85aa35ffc498"><div class="ttname"><a href="classAP__MotorsUGV.html#a3f57c8a316743b33c1a513fd5ffc2c4aa34d5c0fe61f953eef03d85aa35ffc498">AP_MotorsUGV::MOTOR_TEST_STEERING</a></div><div class="ttdeci">@ MOTOR_TEST_STEERING</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00017">AP_MotorsUGV.h:17</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a3f57c8a316743b33c1a513fd5ffc2c4aa7b8a18b0f88a468b5df77a1c9f2011ac"><div class="ttname"><a href="classAP__MotorsUGV.html#a3f57c8a316743b33c1a513fd5ffc2c4aa7b8a18b0f88a468b5df77a1c9f2011ac">AP_MotorsUGV::MOTOR_TEST_MAINSAIL</a></div><div class="ttdeci">@ MOTOR_TEST_MAINSAIL</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00020">AP_MotorsUGV.h:20</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a3f57c8a316743b33c1a513fd5ffc2c4aab369237f35aa9df97e162cdda12d80bc"><div class="ttname"><a href="classAP__MotorsUGV.html#a3f57c8a316743b33c1a513fd5ffc2c4aab369237f35aa9df97e162cdda12d80bc">AP_MotorsUGV::MOTOR_TEST_THROTTLE_LEFT</a></div><div class="ttdeci">@ MOTOR_TEST_THROTTLE_LEFT</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00018">AP_MotorsUGV.h:18</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a3f57c8a316743b33c1a513fd5ffc2c4aaf990a43d195b02b25a2347b211345b2e"><div class="ttname"><a href="classAP__MotorsUGV.html#a3f57c8a316743b33c1a513fd5ffc2c4aaf990a43d195b02b25a2347b211345b2e">AP_MotorsUGV::MOTOR_TEST_THROTTLE_RIGHT</a></div><div class="ttdeci">@ MOTOR_TEST_THROTTLE_RIGHT</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00019">AP_MotorsUGV.h:19</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a40780e22d82105192d5adae466b4c461"><div class="ttname"><a href="classAP__MotorsUGV.html#a40780e22d82105192d5adae466b4c461">AP_MotorsUGV::is_omni</a></div><div class="ttdeci">bool is_omni() const</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00115">AP_MotorsUGV.h:115</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a435c1d9805d846f9d6989d65c0203697"><div class="ttname"><a href="classAP__MotorsUGV.html#a435c1d9805d846f9d6989d65c0203697">AP_MotorsUGV::_motors_num</a></div><div class="ttdeci">uint8_t _motors_num</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00231">AP_MotorsUGV.h:231</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a44a5b389f5f47e42bffac0dc5acb4f6b"><div class="ttname"><a href="classAP__MotorsUGV.html#a44a5b389f5f47e42bffac0dc5acb4f6b">AP_MotorsUGV::_steering</a></div><div class="ttdeci">float _steering</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00213">AP_MotorsUGV.h:213</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a4dd27ce2264b533cdefd6f071d9444c6"><div class="ttname"><a href="classAP__MotorsUGV.html#a4dd27ce2264b533cdefd6f071d9444c6">AP_MotorsUGV::_rate_controller</a></div><div class="ttdeci">AP_WheelRateControl &amp; _rate_controller</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00195">AP_MotorsUGV.h:195</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a54d9d572b65b97f03c1db8484b896118"><div class="ttname"><a href="classAP__MotorsUGV.html#a54d9d572b65b97f03c1db8484b896118">AP_MotorsUGV::get_throttle</a></div><div class="ttdeci">float get_throttle() const</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00051">AP_MotorsUGV.h:51</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a56b43bbb927e44b7aec222c2c88ba1d1"><div class="ttname"><a href="classAP__MotorsUGV.html#a56b43bbb927e44b7aec222c2c88ba1d1">AP_MotorsUGV::clear_omni_motors</a></div><div class="ttdeci">void clear_omni_motors(int8_t motor_num)</div><div class="ttdef"><b>Definition</b> <a href="#l00683">AP_MotorsUGV.cpp:683</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a57fb04e0223dc86ef38e04e0190c19ed"><div class="ttname"><a href="classAP__MotorsUGV.html#a57fb04e0223dc86ef38e04e0190c19ed">AP_MotorsUGV::AP_MOTORS_NUM_MOTORS_MAX</a></div><div class="ttdeci">static const int8_t AP_MOTORS_NUM_MOTORS_MAX</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00197">AP_MotorsUGV.h:197</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a58e5a82ba46fdc153af9f218f82ec537"><div class="ttname"><a href="classAP__MotorsUGV.html#a58e5a82ba46fdc153af9f218f82ec537">AP_MotorsUGV::_roll</a></div><div class="ttdeci">float _roll</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00218">AP_MotorsUGV.h:218</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a593a56481b5ed86f43e6286659c78766"><div class="ttname"><a href="classAP__MotorsUGV.html#a593a56481b5ed86f43e6286659c78766">AP_MotorsUGV::set_pitch</a></div><div class="ttdeci">void set_pitch(float pitch)</div><div class="ttdef"><b>Definition</b> <a href="#l00256">AP_MotorsUGV.cpp:256</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a5b611f284a2c2cd3e9b6aaf98f10c74b"><div class="ttname"><a href="classAP__MotorsUGV.html#a5b611f284a2c2cd3e9b6aaf98f10c74b">AP_MotorsUGV::_singleton</a></div><div class="ttdeci">static AP_MotorsUGV * _singleton</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00233">AP_MotorsUGV.h:233</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a6eacfd575127dce150089c5ece89a253"><div class="ttname"><a href="classAP__MotorsUGV.html#a6eacfd575127dce150089c5ece89a253">AP_MotorsUGV::_walking_height</a></div><div class="ttdeci">float _walking_height</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00220">AP_MotorsUGV.h:220</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a702499ded67a098a022e3457279c30db"><div class="ttname"><a href="classAP__MotorsUGV.html#a702499ded67a098a022e3457279c30db">AP_MotorsUGV::setup_servo_output</a></div><div class="ttdeci">void setup_servo_output()</div><div class="ttdef"><b>Definition</b> <a href="#l00195">AP_MotorsUGV.cpp:195</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a71c35953b77d745524e249daeb4859a4"><div class="ttname"><a href="classAP__MotorsUGV.html#a71c35953b77d745524e249daeb4859a4">AP_MotorsUGV::_pitch</a></div><div class="ttdeci">float _pitch</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00219">AP_MotorsUGV.h:219</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a8297191e477046bd6e326fd37668490d"><div class="ttname"><a href="classAP__MotorsUGV.html#a8297191e477046bd6e326fd37668490d">AP_MotorsUGV::output_sail</a></div><div class="ttdeci">void output_sail()</div><div class="ttdef"><b>Definition</b> <a href="#l01040">AP_MotorsUGV.cpp:1040</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a85827508e66eefbeee6b28051b494a72"><div class="ttname"><a href="classAP__MotorsUGV.html#a85827508e66eefbeee6b28051b494a72">AP_MotorsUGV::pre_arm_check</a></div><div class="ttdeci">bool pre_arm_check(bool report) const</div><div class="ttdef"><b>Definition</b> <a href="#l00485">AP_MotorsUGV.cpp:485</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a863105d4e480d2f916b545076db31bf2"><div class="ttname"><a href="classAP__MotorsUGV.html#a863105d4e480d2f916b545076db31bf2">AP_MotorsUGV::_scale_steering</a></div><div class="ttdeci">bool _scale_steering</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00216">AP_MotorsUGV.h:216</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a87b1939a9b432aaca7f0a9cc96ebcc8e"><div class="ttname"><a href="classAP__MotorsUGV.html#a87b1939a9b432aaca7f0a9cc96ebcc8e">AP_MotorsUGV::_steering_factor</a></div><div class="ttdeci">float _steering_factor[AP_MOTORS_NUM_MOTORS_MAX]</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00229">AP_MotorsUGV.h:229</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a88abdedf1b1220d748e4a5dc595bcdba"><div class="ttname"><a href="classAP__MotorsUGV.html#a88abdedf1b1220d748e4a5dc595bcdba">AP_MotorsUGV::limit</a></div><div class="ttdeci">struct AP_MotorsUGV::AP_MotorsUGV_limit limit</div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a8b1c592622478d3b9ce90b11cfdb7c00"><div class="ttname"><a href="classAP__MotorsUGV.html#a8b1c592622478d3b9ce90b11cfdb7c00">AP_MotorsUGV::_disarm_disable_pwm</a></div><div class="ttdeci">AP_Int8 _disarm_disable_pwm</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00202">AP_MotorsUGV.h:202</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a8d116d235f4f8f79bc837f34718f4776"><div class="ttname"><a href="classAP__MotorsUGV.html#a8d116d235f4f8f79bc837f34718f4776">AP_MotorsUGV::have_vectored_thrust</a></div><div class="ttdeci">bool have_vectored_thrust() const</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00091">AP_MotorsUGV.h:91</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a8fc45391d0e3ca2206741af6cc314b53"><div class="ttname"><a href="classAP__MotorsUGV.html#a8fc45391d0e3ca2206741af6cc314b53">AP_MotorsUGV::_frame_type</a></div><div class="ttdeci">frame_type _frame_type</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00225">AP_MotorsUGV.h:225</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a91d747bc014f8d8c125c69b6eb598251"><div class="ttname"><a href="classAP__MotorsUGV.html#a91d747bc014f8d8c125c69b6eb598251">AP_MotorsUGV::output_test_pct</a></div><div class="ttdeci">bool output_test_pct(motor_test_order motor_seq, float pct)</div><div class="ttdef"><b>Definition</b> <a href="#l00351">AP_MotorsUGV.cpp:351</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a92a62eaaf0df1e20247b06fe456f298c"><div class="ttname"><a href="classAP__MotorsUGV.html#a92a62eaaf0df1e20247b06fe456f298c">AP_MotorsUGV::_throttle</a></div><div class="ttdeci">float _throttle</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00214">AP_MotorsUGV.h:214</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a96b40cb1f4f6e535a7922a7df4ba6e06"><div class="ttname"><a href="classAP__MotorsUGV.html#a96b40cb1f4f6e535a7922a7df4ba6e06">AP_MotorsUGV::_motor_mask</a></div><div class="ttdeci">uint32_t _motor_mask</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00224">AP_MotorsUGV.h:224</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a982e43b7116337c7dfd900bf7c4c9302"><div class="ttname"><a href="classAP__MotorsUGV.html#a982e43b7116337c7dfd900bf7c4c9302">AP_MotorsUGV::_lateral_factor</a></div><div class="ttdeci">float _lateral_factor[AP_MOTORS_NUM_MOTORS_MAX]</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00230">AP_MotorsUGV.h:230</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_a99fd777fbb4bd462c5446991b96f68f9"><div class="ttname"><a href="classAP__MotorsUGV.html#a99fd777fbb4bd462c5446991b96f68f9">AP_MotorsUGV::AP_MotorsUGV</a></div><div class="ttdeci">AP_MotorsUGV(AP_WheelRateControl &amp;rate_controller)</div><div class="ttdef"><b>Definition</b> <a href="#l00124">AP_MotorsUGV.cpp:124</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_aa030840d7598fc6302c3d523979b4b5b"><div class="ttname"><a href="classAP__MotorsUGV.html#aa030840d7598fc6302c3d523979b4b5b">AP_MotorsUGV::output</a></div><div class="ttdeci">void output(bool armed, float ground_speed, float dt)</div><div class="ttdef"><b>Definition</b> <a href="#l00312">AP_MotorsUGV.cpp:312</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_aa5998e83e3904453facb7da6cf527265"><div class="ttname"><a href="classAP__MotorsUGV.html#aa5998e83e3904453facb7da6cf527265">AP_MotorsUGV::get_singleton</a></div><div class="ttdeci">static AP_MotorsUGV * get_singleton(void)</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00013">AP_MotorsUGV.h:13</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_aa5d7f743ab1b268aa6693444bfcb973c"><div class="ttname"><a href="classAP__MotorsUGV.html#aa5d7f743ab1b268aa6693444bfcb973c">AP_MotorsUGV::get_slew_limited_throttle</a></div><div class="ttdeci">float get_slew_limited_throttle(float throttle, float dt) const</div><div class="ttdef"><b>Definition</b> <a href="#l00288">AP_MotorsUGV.cpp:288</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_aa977c3fdbdac7136e7926d78d9b8385d"><div class="ttname"><a href="classAP__MotorsUGV.html#aa977c3fdbdac7136e7926d78d9b8385d">AP_MotorsUGV::_thrust_curve_expo</a></div><div class="ttdeci">AP_Float _thrust_curve_expo</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00206">AP_MotorsUGV.h:206</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_aaa3219d6621f65d47b93b2af2fef51c5"><div class="ttname"><a href="classAP__MotorsUGV.html#aaa3219d6621f65d47b93b2af2fef51c5">AP_MotorsUGV::output_test_pwm</a></div><div class="ttdeci">bool output_test_pwm(motor_test_order motor_seq, float pwm)</div><div class="ttdef"><b>Definition</b> <a href="#l00419">AP_MotorsUGV.cpp:419</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_ab02978771c0241b8823dc616a2121f19"><div class="ttname"><a href="classAP__MotorsUGV.html#ab02978771c0241b8823dc616a2121f19">AP_MotorsUGV::active</a></div><div class="ttdeci">bool active() const</div><div class="ttdef"><b>Definition</b> <a href="#l01125">AP_MotorsUGV.cpp:1125</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_ab1d1490b3786f9b000f48cb3ecea6b1b"><div class="ttname"><a href="classAP__MotorsUGV.html#ab1d1490b3786f9b000f48cb3ecea6b1b">AP_MotorsUGV::var_info</a></div><div class="ttdeci">static const struct AP_Param::GroupInfo var_info[]</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00029">AP_MotorsUGV.h:29</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_ab23ba8e3ee4a209bf43a7de7c5deab95"><div class="ttname"><a href="classAP__MotorsUGV.html#ab23ba8e3ee4a209bf43a7de7c5deab95">AP_MotorsUGV::slew_limit_throttle</a></div><div class="ttdeci">void slew_limit_throttle(float dt)</div><div class="ttdef"><b>Definition</b> <a href="#l01052">AP_MotorsUGV.cpp:1052</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_ab2c9f7d76c85a5899e7ed8d24ec9beda"><div class="ttname"><a href="classAP__MotorsUGV.html#ab2c9f7d76c85a5899e7ed8d24ec9beda">AP_MotorsUGV::set_wingsail</a></div><div class="ttdeci">void set_wingsail(float wingsail)</div><div class="ttdef"><b>Definition</b> <a href="#l00274">AP_MotorsUGV.cpp:274</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_ab33a40ca42efb7032c3abb8e57721aa4"><div class="ttname"><a href="classAP__MotorsUGV.html#ab33a40ca42efb7032c3abb8e57721aa4">AP_MotorsUGV::_pwm_type</a></div><div class="ttdeci">AP_Int8 _pwm_type</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00200">AP_MotorsUGV.h:200</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_ab4374f3262930fa94b7e3209dced5001"><div class="ttname"><a href="classAP__MotorsUGV.html#ab4374f3262930fa94b7e3209dced5001">AP_MotorsUGV::get_steering</a></div><div class="ttdeci">float get_steering() const</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00047">AP_MotorsUGV.h:47</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_ab8b83e10df1f499ab233a87d9d3e4846"><div class="ttname"><a href="classAP__MotorsUGV.html#ab8b83e10df1f499ab233a87d9d3e4846">AP_MotorsUGV::add_omni_motor</a></div><div class="ttdeci">void add_omni_motor(int8_t motor_num, float throttle_factor, float steering_factor, float lateral_factor)</div><div class="ttdef"><b>Definition</b> <a href="#l00654">AP_MotorsUGV.cpp:654</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_ab9980d91aa26e0e8c4ccac7f666e2fe3"><div class="ttname"><a href="classAP__MotorsUGV.html#ab9980d91aa26e0e8c4ccac7f666e2fe3">AP_MotorsUGV::setup_safety_output</a></div><div class="ttdeci">void setup_safety_output()</div><div class="ttdef"><b>Definition</b> <a href="#l00178">AP_MotorsUGV.cpp:178</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_abd435bb6c1dfb06e54efd524199e875f"><div class="ttname"><a href="classAP__MotorsUGV.html#abd435bb6c1dfb06e54efd524199e875f">AP_MotorsUGV::setup_omni</a></div><div class="ttdeci">void setup_omni()</div><div class="ttdef"><b>Definition</b> <a href="#l00614">AP_MotorsUGV.cpp:614</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_ac2c2665a6afdfc53cea1626643be4547"><div class="ttname"><a href="classAP__MotorsUGV.html#ac2c2665a6afdfc53cea1626643be4547">AP_MotorsUGV::get_scaled_throttle</a></div><div class="ttdeci">float get_scaled_throttle(float throttle) const</div><div class="ttdef"><b>Definition</b> <a href="#l01075">AP_MotorsUGV.cpp:1075</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_ac3de31b4f9d4746da2fe105f073537cc"><div class="ttname"><a href="classAP__MotorsUGV.html#ac3de31b4f9d4746da2fe105f073537cc">AP_MotorsUGV::get_rate_controlled_throttle</a></div><div class="ttdeci">float get_rate_controlled_throttle(SRV_Channel::Aux_servo_function_t function, float throttle, float dt)</div><div class="ttdef"><b>Definition</b> <a href="#l01103">AP_MotorsUGV.cpp:1103</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_ac5a7d82e985adab5654108bcc8d8a8d4"><div class="ttname"><a href="classAP__MotorsUGV.html#ac5a7d82e985adab5654108bcc8d8a8d4">AP_MotorsUGV::set_walking_height</a></div><div class="ttdeci">void set_walking_height(float walking_height)</div><div class="ttdef"><b>Definition</b> <a href="#l00262">AP_MotorsUGV.cpp:262</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_ac6a939c7d6afae6228ac9447c08c195b"><div class="ttname"><a href="classAP__MotorsUGV.html#ac6a939c7d6afae6228ac9447c08c195b">AP_MotorsUGV::output_skid_steering</a></div><div class="ttdeci">void output_skid_steering(bool armed, float steering, float throttle, float dt)</div><div class="ttdef"><b>Definition</b> <a href="#l00784">AP_MotorsUGV.cpp:784</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_ac993a856521fd85525bce7007982f3d5"><div class="ttname"><a href="classAP__MotorsUGV.html#ac993a856521fd85525bce7007982f3d5">AP_MotorsUGV::has_sail</a></div><div class="ttdeci">bool has_sail() const</div><div class="ttdef"><b>Definition</b> <a href="#l00307">AP_MotorsUGV.cpp:307</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_acc8aac8396cac4090cbb12832668eaca"><div class="ttname"><a href="classAP__MotorsUGV.html#acc8aac8396cac4090cbb12832668eaca">AP_MotorsUGV::_pwm_freq</a></div><div class="ttdeci">AP_Int8 _pwm_freq</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00201">AP_MotorsUGV.h:201</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_acdbf927cf3077332d0ce32a2d8829848"><div class="ttname"><a href="classAP__MotorsUGV.html#acdbf927cf3077332d0ce32a2d8829848">AP_MotorsUGV::output_throttle</a></div><div class="ttdeci">void output_throttle(SRV_Channel::Aux_servo_function_t function, float throttle, float dt=0.0f)</div><div class="ttdef"><b>Definition</b> <a href="#l00968">AP_MotorsUGV.cpp:968</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_ad13aed5dbfc0214c35bb24b777b4ea7e"><div class="ttname"><a href="classAP__MotorsUGV.html#ad13aed5dbfc0214c35bb24b777b4ea7e">AP_MotorsUGV::set_roll</a></div><div class="ttdeci">void set_roll(float roll)</div><div class="ttdef"><b>Definition</b> <a href="#l00250">AP_MotorsUGV.cpp:250</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_ad170a29352c1d547b3602f2f8e644cbe"><div class="ttname"><a href="classAP__MotorsUGV.html#ad170a29352c1d547b3602f2f8e644cbe">AP_MotorsUGV::get_legacy_relay_index</a></div><div class="ttdeci">bool get_legacy_relay_index(int8_t &amp;index1, int8_t &amp;index2, int8_t &amp;index3, int8_t &amp;index4) const</div><div class="ttdef"><b>Definition</b> <a href="#l00150">AP_MotorsUGV.cpp:150</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_ad34c71675d53bb34a38e363889110ebe"><div class="ttname"><a href="classAP__MotorsUGV.html#ad34c71675d53bb34a38e363889110ebe">AP_MotorsUGV::_throttle_min</a></div><div class="ttdeci">AP_Int8 _throttle_min</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00204">AP_MotorsUGV.h:204</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_ad51931763e093262c254c2338e92f813"><div class="ttname"><a href="classAP__MotorsUGV.html#ad51931763e093262c254c2338e92f813">AP_MotorsUGV::set_throttle</a></div><div class="ttdeci">void set_throttle(float throttle)</div><div class="ttdef"><b>Definition</b> <a href="#l00232">AP_MotorsUGV.cpp:232</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_ad57aa417a039591759e5430d456ec4aa"><div class="ttname"><a href="classAP__MotorsUGV.html#ad57aa417a039591759e5430d456ec4aa">AP_MotorsUGV::set_mast_rotation</a></div><div class="ttdeci">void set_mast_rotation(float mast_rotation)</div><div class="ttdef"><b>Definition</b> <a href="#l00280">AP_MotorsUGV.cpp:280</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_ad6bff94ef4f16c46677ffdda08d7c4ae"><div class="ttname"><a href="classAP__MotorsUGV.html#ad6bff94ef4f16c46677ffdda08d7c4ae">AP_MotorsUGV::setup_pwm_type</a></div><div class="ttdeci">void setup_pwm_type()</div><div class="ttdef"><b>Definition</b> <a href="#l00569">AP_MotorsUGV.cpp:569</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_ad962f64af80f94519b7e5de9f2973046"><div class="ttname"><a href="classAP__MotorsUGV.html#ad962f64af80f94519b7e5de9f2973046">AP_MotorsUGV::set_steering</a></div><div class="ttdeci">void set_steering(float steering, bool apply_scaling=true)</div><div class="ttdef"><b>Definition</b> <a href="#l00225">AP_MotorsUGV.cpp:225</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_ae865bf6f4d58e187e73bd156ffae97b7"><div class="ttname"><a href="classAP__MotorsUGV.html#ae865bf6f4d58e187e73bd156ffae97b7">AP_MotorsUGV::sanity_check_parameters</a></div><div class="ttdeci">void sanity_check_parameters()</div><div class="ttdef"><b>Definition</b> <a href="#l00561">AP_MotorsUGV.cpp:561</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_aefc1524c06ea9c0049e70790f11a9334"><div class="ttname"><a href="classAP__MotorsUGV.html#aefc1524c06ea9c0049e70790f11a9334">AP_MotorsUGV::set_limits_from_input</a></div><div class="ttdeci">void set_limits_from_input(bool armed, float steering, float throttle)</div><div class="ttdef"><b>Definition</b> <a href="#l01065">AP_MotorsUGV.cpp:1065</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_af272ea8de4bb4050b92731609248f24a"><div class="ttname"><a href="classAP__MotorsUGV.html#af272ea8de4bb4050b92731609248f24a">AP_MotorsUGV::_steering_throttle_mix</a></div><div class="ttdeci">AP_Float _steering_throttle_mix</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00210">AP_MotorsUGV.h:210</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_af70a7aca5f94dea1ba7acf978a2a3d4b"><div class="ttname"><a href="classAP__MotorsUGV.html#af70a7aca5f94dea1ba7acf978a2a3d4b">AP_MotorsUGV::output_omni</a></div><div class="ttdeci">void output_omni(bool armed, float steering, float throttle, float lateral)</div><div class="ttdef"><b>Definition</b> <a href="#l00909">AP_MotorsUGV.cpp:909</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_af72da5854381c77f10a70d4000cf3cbd"><div class="ttname"><a href="classAP__MotorsUGV.html#af72da5854381c77f10a70d4000cf3cbd">AP_MotorsUGV::output_regular</a></div><div class="ttdeci">void output_regular(bool armed, float ground_speed, float steering, float throttle)</div><div class="ttdef"><b>Definition</b> <a href="#l00695">AP_MotorsUGV.cpp:695</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_af983910c9f084457edc95cb60f79ec9b"><div class="ttname"><a href="classAP__MotorsUGV.html#af983910c9f084457edc95cb60f79ec9b">AP_MotorsUGV::add_omni_motor_num</a></div><div class="ttdeci">void add_omni_motor_num(int8_t motor_num)</div><div class="ttdef"><b>Definition</b> <a href="#l00669">AP_MotorsUGV.cpp:669</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_afb6ba2ed5993134dd5be96bd52c15f41"><div class="ttname"><a href="classAP__MotorsUGV.html#afb6ba2ed5993134dd5be96bd52c15f41">AP_MotorsUGV::_lateral</a></div><div class="ttdeci">float _lateral</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00217">AP_MotorsUGV.h:217</a></div></div>
<div class="ttc" id="aclassAP__MotorsUGV_html_afcbfb99a2b4f6ef9709e32e1b3ba8c8a"><div class="ttname"><a href="classAP__MotorsUGV.html#afcbfb99a2b4f6ef9709e32e1b3ba8c8a">AP_MotorsUGV::_slew_rate</a></div><div class="ttdeci">AP_Int16 _slew_rate</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00203">AP_MotorsUGV.h:203</a></div></div>
<div class="ttc" id="aclassAP__Param_html_a5f6dcfce1c0a79cf5bd81283e22f3201"><div class="ttname"><a href="classAP__Param.html#a5f6dcfce1c0a79cf5bd81283e22f3201">AP_Param::setup_object_defaults</a></div><div class="ttdeci">static void setup_object_defaults(const void *object_pointer, const struct GroupInfo *group_info)</div><div class="ttdef"><b>Definition</b> <a href="main_8cpp_source.html#l00010">main.cpp:10</a></div></div>
<div class="ttc" id="aclassAP__Relay__Params_html_a73c0886b439cc9c4dcc660f5a084f042"><div class="ttname"><a href="classAP__Relay__Params.html#a73c0886b439cc9c4dcc660f5a084f042">AP_Relay_Params::FUNCTION</a></div><div class="ttdeci">FUNCTION</div><div class="ttdef"><b>Definition</b> <a href="AP__Relay__Params_8h_source.html#l00020">AP_Relay_Params.h:20</a></div></div>
<div class="ttc" id="aclassAP__Relay__Params_html_a73c0886b439cc9c4dcc660f5a084f042a40282f88062d751f82ce55dddb3bfddd"><div class="ttname"><a href="classAP__Relay__Params.html#a73c0886b439cc9c4dcc660f5a084f042a40282f88062d751f82ce55dddb3bfddd">AP_Relay_Params::FUNCTION::BRUSHED_REVERSE_4</a></div><div class="ttdeci">@ BRUSHED_REVERSE_4</div></div>
<div class="ttc" id="aclassAP__Relay__Params_html_a73c0886b439cc9c4dcc660f5a084f042a8c3dc0ef2b1605d9b06cc1abd6bf1071"><div class="ttname"><a href="classAP__Relay__Params.html#a73c0886b439cc9c4dcc660f5a084f042a8c3dc0ef2b1605d9b06cc1abd6bf1071">AP_Relay_Params::FUNCTION::BRUSHED_REVERSE_2</a></div><div class="ttdeci">@ BRUSHED_REVERSE_2</div></div>
<div class="ttc" id="aclassAP__Relay__Params_html_a73c0886b439cc9c4dcc660f5a084f042ae913deb5d84069b3d82be268cc233c3c"><div class="ttname"><a href="classAP__Relay__Params.html#a73c0886b439cc9c4dcc660f5a084f042ae913deb5d84069b3d82be268cc233c3c">AP_Relay_Params::FUNCTION::BRUSHED_REVERSE_3</a></div><div class="ttdeci">@ BRUSHED_REVERSE_3</div></div>
<div class="ttc" id="aclassAP__Relay__Params_html_a73c0886b439cc9c4dcc660f5a084f042af60abc9f854f5ce172befbcf599f95ce"><div class="ttname"><a href="classAP__Relay__Params.html#a73c0886b439cc9c4dcc660f5a084f042af60abc9f854f5ce172befbcf599f95ce">AP_Relay_Params::FUNCTION::BRUSHED_REVERSE_1</a></div><div class="ttdeci">@ BRUSHED_REVERSE_1</div></div>
<div class="ttc" id="aclassAP__Relay_html"><div class="ttname"><a href="classAP__Relay.html">AP_Relay</a></div><div class="ttdoc">Class to manage the ArduPilot relay.</div><div class="ttdef"><b>Definition</b> <a href="AP__Relay_8h_source.html#l00033">AP_Relay.h:33</a></div></div>
<div class="ttc" id="aclassAP__Relay_html_a20a1e855cfd9ff8c6d4fbec26d44add8"><div class="ttname"><a href="classAP__Relay.html#a20a1e855cfd9ff8c6d4fbec26d44add8">AP_Relay::enabled</a></div><div class="ttdeci">bool enabled(uint8_t instance) const</div><div class="ttdef"><b>Definition</b> <a href="AP__Relay_8cpp_source.html#l00544">AP_Relay.cpp:544</a></div></div>
<div class="ttc" id="aclassAP__Relay_html_a57d529ac3c020c0e73652a7293a8a273"><div class="ttname"><a href="classAP__Relay.html#a57d529ac3c020c0e73652a7293a8a273">AP_Relay::set</a></div><div class="ttdeci">void set(AP_Relay_Params::FUNCTION function, bool value)</div><div class="ttdef"><b>Definition</b> <a href="AP__Relay_8cpp_source.html#l00378">AP_Relay.cpp:378</a></div></div>
<div class="ttc" id="aclassAP__WheelRateControl_html"><div class="ttname"><a href="classAP__WheelRateControl.html">AP_WheelRateControl</a></div><div class="ttdef"><b>Definition</b> <a href="AP__WheelRateControl_8h_source.html#l00035">AP_WheelRateControl.h:35</a></div></div>
<div class="ttc" id="aclassAP__WheelRateControl_html_aa11e56bbe3141ebf5acdae6cb885f2b7"><div class="ttname"><a href="classAP__WheelRateControl.html#aa11e56bbe3141ebf5acdae6cb885f2b7">AP_WheelRateControl::get_rate_controlled_throttle</a></div><div class="ttdeci">float get_rate_controlled_throttle(uint8_t instance, float desired_rate_pct, float dt)</div><div class="ttdef"><b>Definition</b> <a href="AP__WheelRateControl_8cpp_source.html#l00231">AP_WheelRateControl.cpp:231</a></div></div>
<div class="ttc" id="aclassAP__WheelRateControl_html_aab84fcd466e5a86567e0e628092f2fc1"><div class="ttname"><a href="classAP__WheelRateControl.html#aab84fcd466e5a86567e0e628092f2fc1">AP_WheelRateControl::enabled</a></div><div class="ttdeci">bool enabled(uint8_t instance)</div><div class="ttdef"><b>Definition</b> <a href="AP__WheelRateControl_8cpp_source.html#l00219">AP_WheelRateControl.cpp:219</a></div></div>
<div class="ttc" id="aclassGCS_html_a2f099d18721b0874af08fde3f6aae6b6"><div class="ttname"><a href="classGCS.html#a2f099d18721b0874af08fde3f6aae6b6">GCS::send_text</a></div><div class="ttdeci">void send_text(MAV_SEVERITY severity, const char *fmt,...) FMT_PRINTF(3</div><div class="ttdef"><b>Definition</b> <a href="GCS_8cpp_source.html#l00080">GCS.cpp:80</a></div></div>
<div class="ttc" id="aclassSRV__Channel_html"><div class="ttname"><a href="classSRV__Channel.html">SRV_Channel</a></div><div class="ttdef"><b>Definition</b> <a href="SRV__Channel_8h_source.html#l00037">SRV_Channel.h:37</a></div></div>
<div class="ttc" id="aclassSRV__Channel_html_a08d12bc5da50b61094e29e72fed64834"><div class="ttname"><a href="classSRV__Channel.html#a08d12bc5da50b61094e29e72fed64834">SRV_Channel::get_reversed</a></div><div class="ttdeci">bool get_reversed(void) const</div><div class="ttdef"><b>Definition</b> <a href="SRV__Channel_8h_source.html#l00226">SRV_Channel.h:226</a></div></div>
<div class="ttc" id="aclassSRV__Channel_html_a86fdf4fa1eaa8f844eccb555359aa129a5441ed3109cdb5a732375bf05a74e111"><div class="ttname"><a href="classSRV__Channel.html#a86fdf4fa1eaa8f844eccb555359aa129a5441ed3109cdb5a732375bf05a74e111">SRV_Channel::Limit::ZERO_PWM</a></div><div class="ttdeci">@ ZERO_PWM</div></div>
<div class="ttc" id="aclassSRV__Channel_html_a86fdf4fa1eaa8f844eccb555359aa129aa32049f307ffa78cf7b4586ac7d98e06"><div class="ttname"><a href="classSRV__Channel.html#a86fdf4fa1eaa8f844eccb555359aa129aa32049f307ffa78cf7b4586ac7d98e06">SRV_Channel::Limit::TRIM</a></div><div class="ttdeci">@ TRIM</div></div>
<div class="ttc" id="aclassSRV__Channel_html_a9ca1754fc905dddeebec41568a475d68"><div class="ttname"><a href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68">SRV_Channel::Aux_servo_function_t</a></div><div class="ttdeci">Aux_servo_function_t</div><div class="ttdef"><b>Definition</b> <a href="SRV__Channel_8h_source.html#l00046">SRV_Channel.h:47</a></div></div>
<div class="ttc" id="aclassSRV__Channel_html_a9ca1754fc905dddeebec41568a475d68a09b6db431dcbb99e23883eb7c4d51df2"><div class="ttname"><a href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a09b6db431dcbb99e23883eb7c4d51df2">SRV_Channel::k_motor2</a></div><div class="ttdeci">@ k_motor2</div><div class="ttdef"><b>Definition</b> <a href="SRV__Channel_8h_source.html#l00083">SRV_Channel.h:83</a></div></div>
<div class="ttc" id="aclassSRV__Channel_html_a9ca1754fc905dddeebec41568a475d68a17b07ea85c29e2b07e8ab73568cf4fd2"><div class="ttname"><a href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a17b07ea85c29e2b07e8ab73568cf4fd2">SRV_Channel::k_steering</a></div><div class="ttdeci">@ k_steering</div><div class="ttdoc">ground steering, used to separate from rudder</div><div class="ttdef"><b>Definition</b> <a href="SRV__Channel_8h_source.html#l00075">SRV_Channel.h:75</a></div></div>
<div class="ttc" id="aclassSRV__Channel_html_a9ca1754fc905dddeebec41568a475d68a2840d80d2769326d143edbf53834d269"><div class="ttname"><a href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a2840d80d2769326d143edbf53834d269">SRV_Channel::k_mast_rotation</a></div><div class="ttdeci">@ k_mast_rotation</div><div class="ttdef"><b>Definition</b> <a href="SRV__Channel_8h_source.html#l00172">SRV_Channel.h:172</a></div></div>
<div class="ttc" id="aclassSRV__Channel_html_a9ca1754fc905dddeebec41568a475d68a2b2f8365b3776f0a588082805cd9acbe"><div class="ttname"><a href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a2b2f8365b3776f0a588082805cd9acbe">SRV_Channel::k_throttle</a></div><div class="ttdeci">@ k_throttle</div><div class="ttdef"><b>Definition</b> <a href="SRV__Channel_8h_source.html#l00114">SRV_Channel.h:114</a></div></div>
<div class="ttc" id="aclassSRV__Channel_html_a9ca1754fc905dddeebec41568a475d68a323602c02b20f75a236c749e83dcb3c3"><div class="ttname"><a href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a323602c02b20f75a236c749e83dcb3c3">SRV_Channel::k_motor4</a></div><div class="ttdeci">@ k_motor4</div><div class="ttdef"><b>Definition</b> <a href="SRV__Channel_8h_source.html#l00085">SRV_Channel.h:85</a></div></div>
<div class="ttc" id="aclassSRV__Channel_html_a9ca1754fc905dddeebec41568a475d68a40e3244188d87ac960a949a64096d2b4"><div class="ttname"><a href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a40e3244188d87ac960a949a64096d2b4">SRV_Channel::k_scripting1</a></div><div class="ttdeci">@ k_scripting1</div><div class="ttdoc">Scripting related outputs.</div><div class="ttdef"><b>Definition</b> <a href="SRV__Channel_8h_source.html#l00138">SRV_Channel.h:138</a></div></div>
<div class="ttc" id="aclassSRV__Channel_html_a9ca1754fc905dddeebec41568a475d68a44f85b5c346aea6379642a4970f0a0a2"><div class="ttname"><a href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a44f85b5c346aea6379642a4970f0a0a2">SRV_Channel::k_throttleLeft</a></div><div class="ttdeci">@ k_throttleLeft</div><div class="ttdef"><b>Definition</b> <a href="SRV__Channel_8h_source.html#l00117">SRV_Channel.h:117</a></div></div>
<div class="ttc" id="aclassSRV__Channel_html_a9ca1754fc905dddeebec41568a475d68a5ab419baae8c0128be85cf73b068eeef"><div class="ttname"><a href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a5ab419baae8c0128be85cf73b068eeef">SRV_Channel::k_throttleRight</a></div><div class="ttdeci">@ k_throttleRight</div><div class="ttdef"><b>Definition</b> <a href="SRV__Channel_8h_source.html#l00118">SRV_Channel.h:118</a></div></div>
<div class="ttc" id="aclassSRV__Channel_html_a9ca1754fc905dddeebec41568a475d68a74936c58237562ed4619d556fa89f46f"><div class="ttname"><a href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a74936c58237562ed4619d556fa89f46f">SRV_Channel::k_motor1</a></div><div class="ttdeci">@ k_motor1</div><div class="ttdoc">these allow remapping of copter motors</div><div class="ttdef"><b>Definition</b> <a href="SRV__Channel_8h_source.html#l00082">SRV_Channel.h:82</a></div></div>
<div class="ttc" id="aclassSRV__Channel_html_a9ca1754fc905dddeebec41568a475d68a82f89fbb32946473c1cef4433c0e0218"><div class="ttname"><a href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68a82f89fbb32946473c1cef4433c0e0218">SRV_Channel::k_wingsail_elevator</a></div><div class="ttdeci">@ k_wingsail_elevator</div><div class="ttdef"><b>Definition</b> <a href="SRV__Channel_8h_source.html#l00163">SRV_Channel.h:163</a></div></div>
<div class="ttc" id="aclassSRV__Channel_html_a9ca1754fc905dddeebec41568a475d68aafba4604bc5488854e78ac238fb859b6"><div class="ttname"><a href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68aafba4604bc5488854e78ac238fb859b6">SRV_Channel::k_motor3</a></div><div class="ttdeci">@ k_motor3</div><div class="ttdef"><b>Definition</b> <a href="SRV__Channel_8h_source.html#l00084">SRV_Channel.h:84</a></div></div>
<div class="ttc" id="aclassSRV__Channel_html_a9ca1754fc905dddeebec41568a475d68ae5af5177edb37a7244e0be6c9473efe5"><div class="ttname"><a href="classSRV__Channel.html#a9ca1754fc905dddeebec41568a475d68ae5af5177edb37a7244e0be6c9473efe5">SRV_Channel::k_mainsail_sheet</a></div><div class="ttdeci">@ k_mainsail_sheet</div><div class="ttdoc">Main Sail control via sheet.</div><div class="ttdef"><b>Definition</b> <a href="SRV__Channel_8h_source.html#l00133">SRV_Channel.h:133</a></div></div>
<div class="ttc" id="aclassSRV__Channels_html_a06cf1d6d4bd8b1971c333184bb4bcb55"><div class="ttname"><a href="classSRV__Channels.html#a06cf1d6d4bd8b1971c333184bb4bcb55">SRV_Channels::set_output_scaled</a></div><div class="ttdeci">static void set_output_scaled(SRV_Channel::Aux_servo_function_t function, float value)</div><div class="ttdef"><b>Definition</b> <a href="SRV__Channel__aux_8cpp_source.html#l00592">SRV_Channel_aux.cpp:592</a></div></div>
<div class="ttc" id="aclassSRV__Channels_html_a2b72ba29ad254568159a1f6951ee9013"><div class="ttname"><a href="classSRV__Channels.html#a2b72ba29ad254568159a1f6951ee9013">SRV_Channels::output_ch_all</a></div><div class="ttdeci">static void output_ch_all(void)</div><div class="ttdef"><b>Definition</b> <a href="SRV__Channel__aux_8cpp_source.html#l00107">SRV_Channel_aux.cpp:107</a></div></div>
<div class="ttc" id="aclassSRV__Channels_html_a378e0022237c196e6107c9e79f340285"><div class="ttname"><a href="classSRV__Channels.html#a378e0022237c196e6107c9e79f340285">SRV_Channels::function_assigned</a></div><div class="ttdeci">static bool function_assigned(SRV_Channel::Aux_servo_function_t function)</div><div class="ttdef"><b>Definition</b> <a href="SRV__Channel__aux_8cpp_source.html#l00503">SRV_Channel_aux.cpp:503</a></div></div>
<div class="ttc" id="aclassSRV__Channels_html_a3d06352d58d90ae7934ef500505b937f"><div class="ttname"><a href="classSRV__Channels.html#a3d06352d58d90ae7934ef500505b937f">SRV_Channels::push</a></div><div class="ttdeci">static void push()</div><div class="ttdef"><b>Definition</b> <a href="SRV__Channels_8cpp_source.html#l00514">SRV_Channels.cpp:514</a></div></div>
<div class="ttc" id="aclassSRV__Channels_html_a6bdc435846b87498670af6018e094f64"><div class="ttname"><a href="classSRV__Channels.html#a6bdc435846b87498670af6018e094f64">SRV_Channels::cork</a></div><div class="ttdeci">static void cork()</div><div class="ttdef"><b>Definition</b> <a href="SRV__Channels_8cpp_source.html#l00506">SRV_Channels.cpp:506</a></div></div>
<div class="ttc" id="aclassSRV__Channels_html_a6ec155ae75e3d22a0de00e21e5b330a9"><div class="ttname"><a href="classSRV__Channels.html#a6ec155ae75e3d22a0de00e21e5b330a9">SRV_Channels::set_output_pwm</a></div><div class="ttdeci">static void set_output_pwm(SRV_Channel::Aux_servo_function_t function, uint16_t value)</div><div class="ttdef"><b>Definition</b> <a href="SRV__Channel__aux_8cpp_source.html#l00338">SRV_Channel_aux.cpp:338</a></div></div>
<div class="ttc" id="aclassSRV__Channels_html_a7522c0412b2174273d656caec3c55317"><div class="ttname"><a href="classSRV__Channels.html#a7522c0412b2174273d656caec3c55317">SRV_Channels::set_angle</a></div><div class="ttdeci">static void set_angle(SRV_Channel::Aux_servo_function_t function, uint16_t angle)</div><div class="ttdef"><b>Definition</b> <a href="SRV__Channel__aux_8cpp_source.html#l00808">SRV_Channel_aux.cpp:808</a></div></div>
<div class="ttc" id="aclassSRV__Channels_html_a8a1fa528af872fbd9070367dbd977484"><div class="ttname"><a href="classSRV__Channels.html#a8a1fa528af872fbd9070367dbd977484">SRV_Channels::set_trim_to_min_for</a></div><div class="ttdeci">static void set_trim_to_min_for(SRV_Channel::Aux_servo_function_t function, bool ignore_reversed=false)</div><div class="ttdef"><b>Definition</b> <a href="SRV__Channel__aux_8cpp_source.html#l00653">SRV_Channel_aux.cpp:653</a></div></div>
<div class="ttc" id="aclassSRV__Channels_html_a97577ca02c12e3b851cd5d563d32b640"><div class="ttname"><a href="classSRV__Channels.html#a97577ca02c12e3b851cd5d563d32b640">SRV_Channels::set_aux_channel_default</a></div><div class="ttdeci">static bool set_aux_channel_default(SRV_Channel::Aux_servo_function_t function, uint8_t channel)</div><div class="ttdef"><b>Definition</b> <a href="SRV__Channel__aux_8cpp_source.html#l00540">SRV_Channel_aux.cpp:540</a></div></div>
<div class="ttc" id="aclassSRV__Channels_html_a9afbece0e8571daa8d682e287f24191f"><div class="ttname"><a href="classSRV__Channels.html#a9afbece0e8571daa8d682e287f24191f">SRV_Channels::set_failsafe_limit</a></div><div class="ttdeci">static void set_failsafe_limit(SRV_Channel::Aux_servo_function_t function, SRV_Channel::Limit limit)</div><div class="ttdef"><b>Definition</b> <a href="SRV__Channel__aux_8cpp_source.html#l00457">SRV_Channel_aux.cpp:457</a></div></div>
<div class="ttc" id="aclassSRV__Channels_html_aa2e6bde03389f5e2946d27393e86a10b"><div class="ttname"><a href="classSRV__Channels.html#aa2e6bde03389f5e2946d27393e86a10b">SRV_Channels::get_dshot_esc_type</a></div><div class="ttdeci">static AP_HAL::RCOutput::DshotEscType get_dshot_esc_type()</div><div class="ttdef"><b>Definition</b> <a href="SRV__Channel_8h_source.html#l00510">SRV_Channel.h:510</a></div></div>
<div class="ttc" id="aclassSRV__Channels_html_aa8ce392569ac9b773e5edd27bd3c6650"><div class="ttname"><a href="classSRV__Channels.html#aa8ce392569ac9b773e5edd27bd3c6650">SRV_Channels::find_channel</a></div><div class="ttdeci">static bool find_channel(SRV_Channel::Aux_servo_function_t function, uint8_t &amp;chan)</div><div class="ttdef"><b>Definition</b> <a href="SRV__Channel__aux_8cpp_source.html#l00566">SRV_Channel_aux.cpp:566</a></div></div>
<div class="ttc" id="aclassSRV__Channels_html_abb96588c0eee11dfc494281777730c8b"><div class="ttname"><a href="classSRV__Channels.html#abb96588c0eee11dfc494281777730c8b">SRV_Channels::get_channel_for</a></div><div class="ttdeci">static SRV_Channel * get_channel_for(SRV_Channel::Aux_servo_function_t function)</div><div class="ttdef"><b>Definition</b> <a href="SRV__Channel__aux_8cpp_source.html#l00583">SRV_Channel_aux.cpp:583</a></div></div>
<div class="ttc" id="aclassSRV__Channels_html_acab9e1aba9fcbde6e598169af5b3181f"><div class="ttname"><a href="classSRV__Channels.html#acab9e1aba9fcbde6e598169af5b3181f">SRV_Channels::get_motor_function</a></div><div class="ttdeci">static SRV_Channel::Aux_servo_function_t get_motor_function(uint8_t channel)</div><div class="ttdef"><b>Definition</b> <a href="SRV__Channel_8h_source.html#l00528">SRV_Channel.h:528</a></div></div>
<div class="ttc" id="aclassSRV__Channels_html_acdb0bd5d2defc4c7bcb51137f15e289d"><div class="ttname"><a href="classSRV__Channels.html#acdb0bd5d2defc4c7bcb51137f15e289d">SRV_Channels::get_output_channel_mask</a></div><div class="ttdeci">static uint32_t get_output_channel_mask(SRV_Channel::Aux_servo_function_t function)</div><div class="ttdef"><b>Definition</b> <a href="SRV__Channel__aux_8cpp_source.html#l00630">SRV_Channel_aux.cpp:630</a></div></div>
<div class="ttc" id="aclassSRV__Channels_html_adba039e2df3bb2c744f8b8590581827f"><div class="ttname"><a href="classSRV__Channels.html#adba039e2df3bb2c744f8b8590581827f">SRV_Channels::set_range</a></div><div class="ttdeci">static void set_range(SRV_Channel::Aux_servo_function_t function, uint16_t range)</div><div class="ttdef"><b>Definition</b> <a href="SRV__Channel__aux_8cpp_source.html#l00818">SRV_Channel_aux.cpp:818</a></div></div>
<div class="ttc" id="aclassSRV__Channels_html_ade6632e078eb500dfab7910b28513ade"><div class="ttname"><a href="classSRV__Channels.html#ade6632e078eb500dfab7910b28513ade">SRV_Channels::calc_pwm</a></div><div class="ttdeci">static void calc_pwm(void)</div><div class="ttdef"><b>Definition</b> <a href="SRV__Channels_8cpp_source.html#l00441">SRV_Channels.cpp:441</a></div></div>
<div class="ttc" id="aclassSRV__Channels_html_aff9ab18c996b319de867b4e87b75d4e5"><div class="ttname"><a href="classSRV__Channels.html#aff9ab18c996b319de867b4e87b75d4e5">SRV_Channels::set_output_limit</a></div><div class="ttdeci">static void set_output_limit(SRV_Channel::Aux_servo_function_t function, SRV_Channel::Limit limit)</div><div class="ttdef"><b>Definition</b> <a href="SRV__Channel__aux_8cpp_source.html#l00475">SRV_Channel_aux.cpp:475</a></div></div>
<div class="ttc" id="aexamples_2AnalogIn_2AnalogIn_8cpp_html_a130f3ebe4c1bb6993e1094760227ad6a"><div class="ttname"><a href="examples_2AnalogIn_2AnalogIn_8cpp.html#a130f3ebe4c1bb6993e1094760227ad6a">chan</a></div><div class="ttdeci">AP_HAL::AnalogSource * chan</div><div class="ttdef"><b>Definition</b> <a href="examples_2AnalogIn_2AnalogIn_8cpp_source.html#l00025">AnalogIn.cpp:25</a></div></div>
<div class="ttc" id="amonocypher_8cpp_html_afa99ec4acc4ecb2dc3c2d05da15d0e3f"><div class="ttname"><a href="monocypher_8cpp.html#afa99ec4acc4ecb2dc3c2d05da15d0e3f">MAX</a></div><div class="ttdeci">#define MAX(a, b)</div><div class="ttdef"><b>Definition</b> <a href="monocypher_8cpp_source.html#l00072">monocypher.cpp:72</a></div></div>
<div class="ttc" id="anamespaceAP_html"><div class="ttname"><a href="namespaceAP.html">AP</a></div><div class="ttdef"><b>Definition</b> <a href="AC__Avoid_8cpp_source.html#l01481">AC_Avoid.cpp:1481</a></div></div>
<div class="ttc" id="anamespaceAP_html_a730acdb902fce56b0e171368b2d2036b"><div class="ttname"><a href="namespaceAP.html#a730acdb902fce56b0e171368b2d2036b">AP::relay</a></div><div class="ttdeci">AP_Relay * relay()</div><div class="ttdef"><b>Definition</b> <a href="AP__Relay_8cpp_source.html#l00684">AP_Relay.cpp:684</a></div></div>
<div class="ttc" id="anamespaceAP_html_af1e55b185acfcda5da3b5fcd98aaf22e"><div class="ttname"><a href="namespaceAP.html#af1e55b185acfcda5da3b5fcd98aaf22e">AP::motors_ugv</a></div><div class="ttdeci">AP_MotorsUGV * motors_ugv()</div><div class="ttdef"><b>Definition</b> <a href="#l01165">AP_MotorsUGV.cpp:1165</a></div></div>
<div class="ttc" id="astructAP__MotorsUGV_1_1AP__MotorsUGV__limit_html_a1a4e8eb4ca5a5cbb9805805b787422a8"><div class="ttname"><a href="structAP__MotorsUGV_1_1AP__MotorsUGV__limit.html#a1a4e8eb4ca5a5cbb9805805b787422a8">AP_MotorsUGV::AP_MotorsUGV_limit::throttle_lower</a></div><div class="ttdeci">uint8_t throttle_lower</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00124">AP_MotorsUGV.h:124</a></div></div>
<div class="ttc" id="astructAP__MotorsUGV_1_1AP__MotorsUGV__limit_html_a36d067b02d9d960d439ef1ab40dcc812"><div class="ttname"><a href="structAP__MotorsUGV_1_1AP__MotorsUGV__limit.html#a36d067b02d9d960d439ef1ab40dcc812">AP_MotorsUGV::AP_MotorsUGV_limit::throttle_upper</a></div><div class="ttdeci">uint8_t throttle_upper</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00125">AP_MotorsUGV.h:125</a></div></div>
<div class="ttc" id="astructAP__MotorsUGV_1_1AP__MotorsUGV__limit_html_a62dd8a7d50dc33039bf2aef718829007"><div class="ttname"><a href="structAP__MotorsUGV_1_1AP__MotorsUGV__limit.html#a62dd8a7d50dc33039bf2aef718829007">AP_MotorsUGV::AP_MotorsUGV_limit::steer_right</a></div><div class="ttdeci">uint8_t steer_right</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00123">AP_MotorsUGV.h:123</a></div></div>
<div class="ttc" id="astructAP__MotorsUGV_1_1AP__MotorsUGV__limit_html_ac4a751ead8632497191684c0de727331"><div class="ttname"><a href="structAP__MotorsUGV_1_1AP__MotorsUGV__limit.html#ac4a751ead8632497191684c0de727331">AP_MotorsUGV::AP_MotorsUGV_limit::steer_left</a></div><div class="ttdeci">uint8_t steer_left</div><div class="ttdef"><b>Definition</b> <a href="AP__MotorsUGV_8h_source.html#l00122">AP_MotorsUGV.h:122</a></div></div>
<div class="ttc" id="astructAP__Param_1_1GroupInfo_html"><div class="ttname"><a href="structAP__Param_1_1GroupInfo.html">AP_Param::GroupInfo</a></div><div class="ttdef"><b>Definition</b> <a href="AP__Param_8h_source.html#l00199">AP_Param.h:199</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Mar 22 2024 16:14:16 for APM:Libraries by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
