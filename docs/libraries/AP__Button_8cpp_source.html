<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>APM:Libraries: libraries/AP_Button/AP_Button.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">APM:Libraries
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_bc0718b08fb2015b8e59c47b2805f60c.html">libraries</a></li><li class="navelem"><a class="el" href="dir_91b224ac0dee0efca19fd38a700287fa.html">AP_Button</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle"><div class="title">AP_Button.cpp</div></div>
</div><!--header-->
<div class="contents">
<a href="AP__Button_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">/*</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment">   This program is free software: you can redistribute it and/or modify</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment">   it under the terms of the GNU General Public License as published by</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="comment">   the Free Software Foundation, either version 3 of the License, or</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="comment">   (at your option) any later version.</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="comment"></span> </div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="comment">   This program is distributed in the hope that it will be useful,</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="comment">   but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="comment">   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="comment">   GNU General Public License for more details.</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="comment"></span> </div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="comment">   You should have received a copy of the GNU General Public License</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="comment">   along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="comment"> */</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span> </div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span> </div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="preprocessor">#include &quot;<a class="code" href="AP__Button_8h.html">AP_Button.h</a>&quot;</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span> </div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="preprocessor">#if HAL_BUTTON_ENABLED</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span> </div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span><span class="preprocessor">#include &lt;<a class="code" href="GCS__MAVLink_8h.html">GCS_MAVLink/GCS_MAVLink.h</a>&gt;</span></div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span><span class="preprocessor">#include &lt;<a class="code" href="GCS_8h.html">GCS_MAVLink/GCS.h</a>&gt;</span></div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span><span class="preprocessor">#include &lt;<a class="code" href="RC__Channel_8h.html">RC_Channel/RC_Channel.h</a>&gt;</span></div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span> </div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span><span class="comment">// very crude debounce method</span></div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno"><a class="line" href="AP__Button_8cpp.html#add56dedbc09f82766e39588e01978e7d">   26</a></span><span class="preprocessor">#define DEBOUNCE_MS 50</span></div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span> </div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span><span class="keyword">extern</span> <span class="keyword">const</span> <a class="code hl_class" href="classAP__HAL_1_1HAL.html">AP_HAL::HAL</a>&amp; <a class="code hl_variable" href="AP__Button_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>;</div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span> </div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span><a class="code hl_class" href="classAP__Button.html">AP_Button</a> *<a class="code hl_variable" href="classAP__Button.html#a277d67ea2e6293d121a3a9cf0d289598">AP_Button::_singleton</a>;</div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span> </div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span><span class="keyword">const</span> <a class="code hl_struct" href="structAP__Param_1_1GroupInfo.html">AP_Param::GroupInfo</a> <a class="code hl_variable" href="classAP__Button.html#a8d9b83d1543cc6c670028ea8e9f78f38">AP_Button::var_info</a>[] = {</div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span> </div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span>    <span class="comment">// @Param: ENABLE</span></div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span>    <span class="comment">// @DisplayName: Enable button reporting</span></div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span>    <span class="comment">// @Description: This enables the button checking module. When this is disabled the parameters for setting button inputs are not visible</span></div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span>    <span class="comment">// @Values: 0:Disabled, 1:Enabled</span></div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span>    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span>    <a class="code hl_define" href="AP__Param_8h.html#ac24e2eb16c2194e975d27e47ddcb7f1c">AP_GROUPINFO_FLAGS</a>(<span class="stringliteral">&quot;ENABLE&quot;</span>, 0, <a class="code hl_class" href="classAP__Button.html">AP_Button</a>, enable, 0, <a class="code hl_define" href="AP__Param_8h.html#ae25c1c7495435989f8be5781c86be078">AP_PARAM_FLAG_ENABLE</a>),</div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span> </div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span>    <span class="comment">// @Param: PIN1</span></div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span>    <span class="comment">// @DisplayName: First button Pin</span></div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span>    <span class="comment">// @Description: Digital pin number for first button input.  Some common values are given, but see the Wiki&#39;s &quot;GPIOs&quot; page for how to determine the pin number for a given autopilot.</span></div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span>    <span class="comment">// @Values: -1:Disabled,50:AUXOUT1,51:AUXOUT2,52:AUXOUT3,53:AUXOUT4,54:AUXOUT5,55:AUXOUT6</span></div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;PIN1&quot;</span>,  1, <a class="code hl_class" href="classAP__Button.html">AP_Button</a>, <a class="code hl_variable" href="examples_2AnalogIn_2AnalogIn_8cpp.html#abe4194b4dba3de3d9a7e7842bd6fc8ac">pin</a>[0], -1),</div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span> </div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span>    <span class="comment">// @Param: PIN2</span></div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span>    <span class="comment">// @DisplayName: Second button Pin</span></div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span>    <span class="comment">// @Description: Digital pin number for second button input.  Some common values are given, but see the Wiki&#39;s &quot;GPIOs&quot; page for how to determine the pin number for a given autopilot.</span></div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span>    <span class="comment">// @Values: -1:Disabled,50:AUXOUT1,51:AUXOUT2,52:AUXOUT3,53:AUXOUT4,54:AUXOUT5,55:AUXOUT6</span></div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;PIN2&quot;</span>,  2, <a class="code hl_class" href="classAP__Button.html">AP_Button</a>, <a class="code hl_variable" href="examples_2AnalogIn_2AnalogIn_8cpp.html#abe4194b4dba3de3d9a7e7842bd6fc8ac">pin</a>[1], -1),</div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span> </div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span>    <span class="comment">// @Param: PIN3</span></div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span>    <span class="comment">// @DisplayName: Third button Pin</span></div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>    <span class="comment">// @Description: Digital pin number for third button input.  Some common values are given, but see the Wiki&#39;s &quot;GPIOs&quot; page for how to determine the pin number for a given autopilot.</span></div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span>    <span class="comment">// @Values: -1:Disabled,50:AUXOUT1,51:AUXOUT2,52:AUXOUT3,53:AUXOUT4,54:AUXOUT5,55:AUXOUT6</span></div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;PIN3&quot;</span>,  3, <a class="code hl_class" href="classAP__Button.html">AP_Button</a>, <a class="code hl_variable" href="examples_2AnalogIn_2AnalogIn_8cpp.html#abe4194b4dba3de3d9a7e7842bd6fc8ac">pin</a>[2], -1),</div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span> </div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span>    <span class="comment">// @Param: PIN4</span></div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span>    <span class="comment">// @DisplayName: Fourth button Pin</span></div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>    <span class="comment">// @Description: Digital pin number for fourth button input. Some common values are given, but see the Wiki&#39;s &quot;GPIOs&quot; page for how to determine the pin number for a given autopilot.</span></div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span>    <span class="comment">// @Values: -1:Disabled,50:AUXOUT1,51:AUXOUT2,52:AUXOUT3,53:AUXOUT4,54:AUXOUT5,55:AUXOUT6</span></div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;PIN4&quot;</span>,  4, <a class="code hl_class" href="classAP__Button.html">AP_Button</a>, <a class="code hl_variable" href="examples_2AnalogIn_2AnalogIn_8cpp.html#abe4194b4dba3de3d9a7e7842bd6fc8ac">pin</a>[3], -1),</div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span> </div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>    <span class="comment">// @Param: REPORT_SEND</span></div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span>    <span class="comment">// @DisplayName: Report send time</span></div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>    <span class="comment">// @Description: The duration in seconds that a BUTTON_CHANGE report is repeatedly sent to the GCS regarding a button changing state. Note that the BUTTON_CHANGE message is MAVLink2 only.</span></div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>    <span class="comment">// @Range: 0 3600</span></div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;REPORT_SEND&quot;</span>, 5, <a class="code hl_class" href="classAP__Button.html">AP_Button</a>, report_send_time, 10),</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span> </div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>    <span class="comment">// @Param: OPTIONS1</span></div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>    <span class="comment">// @DisplayName: Button Pin 1 Options</span></div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>    <span class="comment">// @Description: Options for Pin 1. PWM input detects PWM above or below 1800/1200us instead of logic level. If PWM is not detected or is less than 800us or above 2200us the button will interpreted as low. Invert changes HIGH state to be logic low voltage on pin, or below 1200us, if PWM input.</span></div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>    <span class="comment">// @Bitmask: 0:PWM Input,1:InvertInput</span></div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;OPTIONS1&quot;</span>,  6, <a class="code hl_class" href="classAP__Button.html">AP_Button</a>, options[0], 0),</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span> </div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>    <span class="comment">// @Param: OPTIONS2</span></div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>    <span class="comment">// @DisplayName: Button Pin 2 Options</span></div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>    <span class="comment">// @Description: Options for Pin 2. PWM input detects PWM above or below 1800/1200us instead of logic level. If PWM is not detected or is less than 800us or above 2200us the button will interpreted as low. Invert changes HIGH state to be logic low voltage on pin, or below 1200us, if PWM input.</span></div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>    <span class="comment">// @Bitmask: 0:PWM Input,1:InvertInput</span></div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;OPTIONS2&quot;</span>,  7, <a class="code hl_class" href="classAP__Button.html">AP_Button</a>, options[1], 0),</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span> </div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>    <span class="comment">// @Param: OPTIONS3</span></div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>    <span class="comment">// @DisplayName: Button Pin 3 Options</span></div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>    <span class="comment">// @Description: Options for Pin 3. PWM input detects PWM above or below 1800/1200us instead of logic level. If PWM is not detected or is less than 800us or above 2200us the button will interpreted as low. Invert changes HIGH state to be logic low voltage on pin, or below 1200us, if PWM input.</span></div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>    <span class="comment">// @Bitmask: 0:PWM Input,1:InvertInput</span></div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;OPTIONS3&quot;</span>,  8, <a class="code hl_class" href="classAP__Button.html">AP_Button</a>, options[2], 0),</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span> </div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>    <span class="comment">// @Param: OPTIONS4</span></div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>    <span class="comment">// @DisplayName: Button Pin 4 Options</span></div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>    <span class="comment">// @Description: Options for Pin 4. PWM input detects PWM above or below 1800/1200us instead of logic level. If PWM is not detected or is less than 800us or above 2200us the button will interpreted as low. Invert changes HIGH state to be logic low voltage on pin, or below 1200us, if PWM input.</span></div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>    <span class="comment">// @Bitmask: 0:PWM Input,1:InvertInput</span></div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;OPTIONS4&quot;</span>,  9, <a class="code hl_class" href="classAP__Button.html">AP_Button</a>, options[3], 0),</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span> </div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>    <span class="comment">// @Param: FUNC1</span></div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>    <span class="comment">// @CopyFieldsFrom: RC1_OPTION</span></div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span>    <span class="comment">// @DisplayName: Button Pin 1 RC Channel function</span></div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>    <span class="comment">// @Description: Auxiliary RC Options function executed on pin change</span></div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>    <span class="comment">// @User: Standard</span></div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;FUNC1&quot;</span>,  10, <a class="code hl_class" href="classAP__Button.html">AP_Button</a>, pin_func[0], (uint16_t)<a class="code hl_enumvalue" href="classRC__Channel.html#ae249c352997284fd0d29bf67adf7835aacd6102c4e0e339658526415ee06ad67d">RC_Channel::AUX_FUNC::DO_NOTHING</a>),</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span> </div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>    <span class="comment">// @Param: FUNC2</span></div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>    <span class="comment">// @CopyFieldsFrom: BTN_FUNC1</span></div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>    <span class="comment">// @DisplayName: Button Pin 2 RC Channel function</span></div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;FUNC2&quot;</span>,  11, <a class="code hl_class" href="classAP__Button.html">AP_Button</a>, pin_func[1], (uint16_t)<a class="code hl_enumvalue" href="classRC__Channel.html#ae249c352997284fd0d29bf67adf7835aacd6102c4e0e339658526415ee06ad67d">RC_Channel::AUX_FUNC::DO_NOTHING</a>),</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span> </div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>    <span class="comment">// @Param: FUNC3</span></div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>    <span class="comment">// @CopyFieldsFrom: BTN_FUNC1</span></div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>    <span class="comment">// @DisplayName: Button Pin 3 RC Channel function</span></div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;FUNC3&quot;</span>,  12, <a class="code hl_class" href="classAP__Button.html">AP_Button</a>, pin_func[2], (uint16_t)<a class="code hl_enumvalue" href="classRC__Channel.html#ae249c352997284fd0d29bf67adf7835aacd6102c4e0e339658526415ee06ad67d">RC_Channel::AUX_FUNC::DO_NOTHING</a>),</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span> </div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>    <span class="comment">// @Param: FUNC4</span></div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>    <span class="comment">// @CopyFieldsFrom: BTN_FUNC1</span></div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>    <span class="comment">// @DisplayName: Button Pin 4 RC Channel function</span></div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>    <a class="code hl_define" href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a>(<span class="stringliteral">&quot;FUNC4&quot;</span>,  13, <a class="code hl_class" href="classAP__Button.html">AP_Button</a>, pin_func[3], (uint16_t)<a class="code hl_enumvalue" href="classRC__Channel.html#ae249c352997284fd0d29bf67adf7835aacd6102c4e0e339658526415ee06ad67d">RC_Channel::AUX_FUNC::DO_NOTHING</a>),</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span> </div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>    <a class="code hl_define" href="AP__Param_8h.html#a0f9acb038a5283b964b862aea8cc5051">AP_GROUPEND</a>    </div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>};</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span> </div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span> </div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span><span class="comment">// constructor</span></div>
<div class="foldopen" id="foldopen00130" data-start="{" data-end="}">
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno"><a class="line" href="classAP__Button.html#ab83197dc073a6c5c2fd063b3e2021344">  130</a></span><a class="code hl_function" href="classAP__Button.html#ab83197dc073a6c5c2fd063b3e2021344">AP_Button::AP_Button</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>{</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>    <a class="code hl_function" href="classAP__Param.html#a5f6dcfce1c0a79cf5bd81283e22f3201">AP_Param::setup_object_defaults</a>(<span class="keyword">this</span>, var_info);</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span> </div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__Button.html#a277d67ea2e6293d121a3a9cf0d289598">_singleton</a> != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>        <a class="code hl_function" href="namespaceAP__HAL.html#a52edeef7d5ffaa365e1229b87c170307">AP_HAL::panic</a>(<span class="stringliteral">&quot;AP_Button must be singleton&quot;</span>);</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>    }</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>    <a class="code hl_variable" href="classAP__Button.html#a277d67ea2e6293d121a3a9cf0d289598">_singleton</a> = <span class="keyword">this</span>;</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>}</div>
</div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span> </div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span><span class="comment">/*</span></div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span><span class="comment">  update and report, called from main loop</span></div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span><span class="comment"> */</span></div>
<div class="foldopen" id="foldopen00143" data-start="{" data-end="}">
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno"><a class="line" href="classAP__Button.html#aca0e09611ac7454783d703c75d5df288">  143</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classAP__Button.html#aca0e09611ac7454783d703c75d5df288">AP_Button::update</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>{</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classAP__Button.html#aa506e3d2ae3d229f2c696ca680998440">enable</a>) {</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>    }</div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span> </div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>    <span class="comment">// call setup pins at update rate (5Hz) to allow for runtime parameter change of pins</span></div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>    <a class="code hl_function" href="classAP__Button.html#a714d09b9b894c0c776e9e77aef46fa7b">setup_pins</a>();</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span> </div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classAP__Button.html#ac7dfbc9cfe227aed73e2e5b99e3b914c">initialised</a>) {</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>        <a class="code hl_variable" href="classAP__Button.html#ac7dfbc9cfe227aed73e2e5b99e3b914c">initialised</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span> </div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>        <span class="comment">// get initial mask</span></div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>        <a class="code hl_variable" href="classAP__Button.html#ad3be2491c92117cf2a722c41c07713a5">last_mask</a> = <a class="code hl_function" href="classAP__Button.html#aba35712bc3a265fab26d9a35823537ac">get_mask</a>();</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>        <a class="code hl_variable" href="classAP__Button.html#a2fb7e2ac4d800702f3be91f3832fb7b7">debounce_mask</a> = <a class="code hl_variable" href="classAP__Button.html#ad3be2491c92117cf2a722c41c07713a5">last_mask</a>;</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span> </div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>        <span class="comment">// register 1kHz timer callback</span></div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>        <a class="code hl_variable" href="AC__AttitudeControl_8cpp.html#a240c1a4ae2a70d1855f91e4a0b1ac938">hal</a>.<a class="code hl_variable" href="classAP__HAL_1_1HAL.html#a94ab41309b1ff10b8b862b826e59c882">scheduler</a>-&gt;<a class="code hl_function" href="classAP__HAL_1_1Scheduler.html#ac2c4230957d5dbd3c2fd104af2794b4f">register_timer_process</a>(<a class="code hl_define" href="functor_8h.html#a00e5874203cecc310017f9166f2c0e36">FUNCTOR_BIND_MEMBER</a>(&amp;<a class="code hl_function" href="classAP__Button.html#a7c9719c38c11ea25e67bb9afc9dae4ea">AP_Button::timer_update</a>, <span class="keywordtype">void</span>));        </div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>    }</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span> </div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>    <span class="comment">// act on any changes in state</span></div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>    {</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>        <a class="code hl_define" href="AP__HAL_2Semaphores_8h.html#a819dd9ac6de800cdf1014b0a922b67d4">WITH_SEMAPHORE</a>(<a class="code hl_variable" href="classAP__Button.html#a8b39cec00e3a47efd7803eaa26847835">last_debounced_change_ms_sem</a>);</div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__Button.html#ae4727d7ca4cc42a628b538f3586a725e">last_debounced_change_ms</a> &gt; <a class="code hl_variable" href="classAP__Button.html#a4bc4334eb10be382036dff124b7d6f36">last_debounce_ms</a>) {</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>            <a class="code hl_variable" href="classAP__Button.html#a4bc4334eb10be382036dff124b7d6f36">last_debounce_ms</a> = <a class="code hl_variable" href="classAP__Button.html#ae4727d7ca4cc42a628b538f3586a725e">last_debounced_change_ms</a>;</div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>        }</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>    }</div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span> </div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>    <span class="comment">// update the PWM state:</span></div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>    uint8_t new_pwm_state = <a class="code hl_variable" href="classAP__Button.html#ad37fbb99992ad5a6f718c6476370f315">pwm_state</a>;</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>    <span class="keywordflow">for</span> (uint8_t i=0; i&lt;<a class="code hl_define" href="AP__Button_8h.html#ad0109b7853df07a8d87d7d51d8f5890a">AP_BUTTON_NUM_PINS</a>; i++) {</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>        <span class="keyword">const</span> uint8_t mask = (1U &lt;&lt; i);</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="classAP__Button.html#a09d1c93bd87f5d2fbfc99023e607c848">is_pwm_input</a>(i)) {</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>            <span class="comment">// not a PWM input</span></div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>            new_pwm_state &amp;= ~mask;</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>        }</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>        <span class="keyword">const</span> uint16_t pwm_us = <a class="code hl_variable" href="classAP__Button.html#a68dc9c2ebbcc14d5970f50fb039582c3">pwm_pin_source</a>[i].<a class="code hl_function" href="classAP__HAL_1_1PWMSource.html#afe178e6a47469b92a8795064054d8448">get_pwm_us</a>();</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>        <span class="keywordflow">if</span> (pwm_us &lt; RC_Channel::RC_MIN_LIMIT_PWM || pwm_us &gt; <a class="code hl_variable" href="classRC__Channel.html#a554554956b49e356bdabbf1284ebce1d">RC_Channel::RC_MAX_LIMIT_PWM</a>) {</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>            <span class="comment">// invalid pulse width, trigger low</span></div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__Button.html#ad37fbb99992ad5a6f718c6476370f315">pwm_state</a> &amp; mask) {</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>                new_pwm_state &amp;= ~mask;</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>            }</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>        }</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>        <span class="comment">// these values are the same as used in RC_Channel:</span></div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__Button.html#ad37fbb99992ad5a6f718c6476370f315">pwm_state</a> &amp; mask) {</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>            <span class="comment">// currently asserted; check to see if we should de-assert</span></div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>            <span class="keywordflow">if</span> (pwm_us &lt; <a class="code hl_variable" href="classRC__Channel.html#a373da62ddc6d235ad4e54a7f0868e169">RC_Channel::AUX_SWITCH_PWM_TRIGGER_LOW</a>) {</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>                new_pwm_state &amp;= ~mask;</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>            }</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>            <span class="comment">// currently not asserted; check to see if we should assert</span></div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>            <span class="keywordflow">if</span> (pwm_us &gt; <a class="code hl_variable" href="classRC__Channel.html#af006101c87e3f53b6759bd42b65ae7d1">RC_Channel::AUX_SWITCH_PWM_TRIGGER_HIGH</a>) {</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>                new_pwm_state |= mask;</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>            }</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span>        }</div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>    }</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>    <span class="keyword">const</span> uint64_t now_ms = <a class="code hl_function" href="namespaceAP__HAL.html#a59336c5fceaf28a76d1df1581a87a25d">AP_HAL::millis64</a>();</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>    <span class="keywordflow">if</span> (new_pwm_state != <a class="code hl_variable" href="classAP__Button.html#ad37fbb99992ad5a6f718c6476370f315">pwm_state</a>) {</div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>        <span class="keywordflow">if</span> (new_pwm_state != <a class="code hl_variable" href="classAP__Button.html#a8780d4eee2231edeeafffad4cb32bc19">tentative_pwm_state</a>) {</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>            <a class="code hl_variable" href="classAP__Button.html#a8780d4eee2231edeeafffad4cb32bc19">tentative_pwm_state</a> = new_pwm_state;</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>            <a class="code hl_variable" href="classAP__Button.html#a40cbc8c90a43c55127ba20ee278395b1">pwm_start_debounce_ms</a> = now_ms;</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (now_ms - <a class="code hl_variable" href="classAP__Button.html#a40cbc8c90a43c55127ba20ee278395b1">pwm_start_debounce_ms</a> &gt; <a class="code hl_define" href="AP__Button_8cpp.html#add56dedbc09f82766e39588e01978e7d">DEBOUNCE_MS</a>) {</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>            <a class="code hl_variable" href="classAP__Button.html#ad37fbb99992ad5a6f718c6476370f315">pwm_state</a> = new_pwm_state;</div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>            <a class="code hl_variable" href="classAP__Button.html#a4bc4334eb10be382036dff124b7d6f36">last_debounce_ms</a> = now_ms;</div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>        }</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span>        <a class="code hl_variable" href="classAP__Button.html#a8780d4eee2231edeeafffad4cb32bc19">tentative_pwm_state</a> = <a class="code hl_variable" href="classAP__Button.html#ad37fbb99992ad5a6f718c6476370f315">pwm_state</a>;</div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>        <a class="code hl_variable" href="classAP__Button.html#a40cbc8c90a43c55127ba20ee278395b1">pwm_start_debounce_ms</a> = now_ms;</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>    }</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span> </div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span><span class="preprocessor">#if HAL_GCS_ENABLED</span></div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__Button.html#a4bc4334eb10be382036dff124b7d6f36">last_debounce_ms</a> != 0 &amp;&amp;</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>        (<a class="code hl_function" href="namespaceAP__HAL.html#a77dffbb18891996280308e21316ec186">AP_HAL::millis</a>() - <a class="code hl_variable" href="classAP__Button.html#a8ebd1cc78418957070efc635b4a707a6">last_report_ms</a>) &gt; <a class="code hl_define" href="AP__Button_8h.html#a6e8c174e2d8ae8673fa651bd267fe4fe">AP_BUTTON_REPORT_PERIOD_MS</a> &amp;&amp;</div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>        (<a class="code hl_function" href="namespaceAP__HAL.html#a59336c5fceaf28a76d1df1581a87a25d">AP_HAL::millis64</a>() - <a class="code hl_variable" href="classAP__Button.html#a4bc4334eb10be382036dff124b7d6f36">last_debounce_ms</a>) &lt; <a class="code hl_variable" href="classAP__Button.html#acc0e040b4d76f4e7f6b4d345cb0ae78b">report_send_time</a>*1000ULL) {</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>        <span class="comment">// send a change report</span></div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>        <a class="code hl_variable" href="classAP__Button.html#a8ebd1cc78418957070efc635b4a707a6">last_report_ms</a> = <a class="code hl_function" href="namespaceAP__HAL.html#a77dffbb18891996280308e21316ec186">AP_HAL::millis</a>();</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span> </div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>        <span class="comment">// send a report to GCS</span></div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>        <a class="code hl_function" href="classAP__Button.html#a4b7ab2d0e2439b7c9cecbbde0db85410">send_report</a>();</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>    }</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span> </div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classAP__Button.html#a93122185e3d0f26f407e41b1adbea836">aux_functions_initialised</a>) {</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>        <a class="code hl_function" href="classAP__Button.html#a62288ab93c5e64a4089d324737a52646">run_aux_functions</a>(<span class="keyword">true</span>);</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>        <a class="code hl_variable" href="classAP__Button.html#a93122185e3d0f26f407e41b1adbea836">aux_functions_initialised</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>    }</div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span> </div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__Button.html#a4bc4334eb10be382036dff124b7d6f36">last_debounce_ms</a> != 0 &amp;&amp;</div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>        <a class="code hl_variable" href="classAP__Button.html#a4bc4334eb10be382036dff124b7d6f36">last_debounce_ms</a> != <a class="code hl_variable" href="classAP__Button.html#a3a6b0762c9834a36540b262b90de8f00">last_action_time_ms</a>) {</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>        <a class="code hl_variable" href="classAP__Button.html#a3a6b0762c9834a36540b262b90de8f00">last_action_time_ms</a> = <a class="code hl_variable" href="classAP__Button.html#a4bc4334eb10be382036dff124b7d6f36">last_debounce_ms</a>;</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>        <a class="code hl_function" href="classAP__Button.html#a62288ab93c5e64a4089d324737a52646">run_aux_functions</a>(<span class="keyword">false</span>);</div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>    }</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>}</div>
</div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span> </div>
<div class="foldopen" id="foldopen00239" data-start="{" data-end="}">
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno"><a class="line" href="classAP__Button.html#a62288ab93c5e64a4089d324737a52646">  239</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classAP__Button.html#a62288ab93c5e64a4089d324737a52646">AP_Button::run_aux_functions</a>(<span class="keywordtype">bool</span> force)</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>{</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>    <a class="code hl_class" href="classRC__Channel.html">RC_Channel</a> *rc_channel = <a class="code hl_function" href="RC__Channel_8h.html#abe35aea6177a1cdf87a22af5c263bb89">rc</a>().<a class="code hl_function" href="classRC__Channels.html#a3736f2167041c3930941f66c73ec7d1d">channel</a>(1);</div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span>    <span class="keywordflow">if</span> (rc_channel == <span class="keyword">nullptr</span>) {</div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>    }</div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span> </div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>    <span class="keywordflow">for</span> (uint8_t i=0; i&lt;<a class="code hl_define" href="AP__Button_8h.html#ad0109b7853df07a8d87d7d51d8f5890a">AP_BUTTON_NUM_PINS</a>; i++) {</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>        <span class="keyword">const</span> <a class="code hl_enumeration" href="classRC__Channel.html#ae249c352997284fd0d29bf67adf7835a">RC_Channel::AUX_FUNC</a> func = <a class="code hl_enumeration" href="classRC__Channel.html#ae249c352997284fd0d29bf67adf7835a">RC_Channel::AUX_FUNC</a>(<a class="code hl_variable" href="classAP__Button.html#a7463f0c63ff8bd82d53b15613e631eef">pin_func</a>[i].get());</div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>        <span class="keywordflow">if</span> (func == <a class="code hl_enumvalue" href="classRC__Channel.html#ae249c352997284fd0d29bf67adf7835aacd6102c4e0e339658526415ee06ad67d">RC_Channel::AUX_FUNC::DO_NOTHING</a>) {</div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>        }</div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>        <span class="keyword">const</span> uint8_t value_mask = (1U&lt;&lt;i);</div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>        <span class="keywordtype">bool</span> <a class="code hl_typedef" href="AP__JSON_8cpp.html#a37700c57263ada4716d7dbbc43089a24">value</a>;</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="classAP__Button.html#a09d1c93bd87f5d2fbfc99023e607c848">is_pwm_input</a>(i)) {</div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span>            <a class="code hl_class" href="classAP__JSON_1_1value.html">value</a> = (<a class="code hl_variable" href="classAP__Button.html#ad37fbb99992ad5a6f718c6476370f315">pwm_state</a> &amp; value_mask) != 0;</div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>            <a class="code hl_class" href="classAP__JSON_1_1value.html">value</a> = (<a class="code hl_variable" href="classAP__Button.html#a2fb7e2ac4d800702f3be91f3832fb7b7">debounce_mask</a> &amp; value_mask) != 0;</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>        }</div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="classAP__Button.html#a4a27af3c747814efee5e27dca5703bfd">is_input_inverted</a>(i)) {</div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>            <a class="code hl_class" href="classAP__JSON_1_1value.html">value</a> = !<a class="code hl_typedef" href="AP__JSON_8cpp.html#a37700c57263ada4716d7dbbc43089a24">value</a>;</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>        }</div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>        <span class="keyword">const</span> <span class="keywordtype">bool</span> actioned = ((<a class="code hl_variable" href="classAP__Button.html#a5802bc0e10cc47522495ae255d760489">state_actioned_mask</a> &amp; value_mask) != 0);</div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>        <span class="keywordflow">if</span> (!force &amp;&amp; <a class="code hl_class" href="classAP__JSON_1_1value.html">value</a> == actioned) {</div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>            <span class="comment">// no change on this pin</span></div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>        }</div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>        <span class="comment">// mark action as done:</span></div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>        <span class="keywordflow">if</span> (<a class="code hl_class" href="classAP__JSON_1_1value.html">value</a>) {</div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>            <a class="code hl_variable" href="classAP__Button.html#a5802bc0e10cc47522495ae255d760489">state_actioned_mask</a> |= value_mask;</div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>            <a class="code hl_variable" href="classAP__Button.html#a5802bc0e10cc47522495ae255d760489">state_actioned_mask</a> &amp;= ~value_mask;</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>        }</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span> </div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>        <span class="keyword">const</span> <a class="code hl_enumeration" href="classRC__Channel.html#a2006134fd195519c0616e23b9f90bb46">RC_Channel::AuxSwitchPos</a> pos = <a class="code hl_class" href="classAP__JSON_1_1value.html">value</a> ? <a class="code hl_enumvalue" href="classRC__Channel.html#a2006134fd195519c0616e23b9f90bb46ab89de3b4b81c4facfac906edf29aec8c">RC_Channel::AuxSwitchPos::HIGH</a> : <a class="code hl_enumvalue" href="classRC__Channel.html#a2006134fd195519c0616e23b9f90bb46a41bc94cbd8eebea13ce0491b2ac11b88">RC_Channel::AuxSwitchPos::LOW</a>;</div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>        <span class="comment">// I wonder if we can do better here:</span></div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span><span class="preprocessor">#if AP_RC_CHANNEL_AUX_FUNCTION_STRINGS_ENABLED</span></div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>        <span class="keyword">const</span> <span class="keywordtype">char</span> *str = rc_channel-&gt;<a class="code hl_function" href="classRC__Channel.html#ab381bbbbb335eb84e3f0dbc1da6b9741">string_for_aux_function</a>(func);</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>        <span class="keywordflow">if</span> (str != <span class="keyword">nullptr</span>) {</div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>            <a class="code hl_define" href="GCS_8h.html#a266bfe8eda675e1092f045e93932b4a6">GCS_SEND_TEXT</a>(MAV_SEVERITY_INFO, <span class="stringliteral">&quot;Button %i: executing (%s %s)&quot;</span>, i+1, str, rc_channel-&gt;<a class="code hl_function" href="classRC__Channel.html#a8b590609d99a9c43274faeabfae10336">string_for_aux_pos</a>(pos));</div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>        }</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span>        rc_channel-&gt;<a class="code hl_function" href="classRC__Channel.html#a466a63bf0f7aadea5619bef7da61e885">run_aux_function</a>(func, pos, <a class="code hl_enumvalue" href="classRC__Channel.html#af8929cb25282aa44a15c5eac57398bd9a57b35198356d373bcd2a6e08abcb3795">RC_Channel::AuxFuncTriggerSource::BUTTON</a>);</div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>    }</div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span>}</div>
</div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span> </div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span><span class="comment">// get state of a button</span></div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span><span class="comment">// used by scripting</span></div>
<div class="foldopen" id="foldopen00287" data-start="{" data-end="}">
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno"><a class="line" href="classAP__Button.html#a5f78506ce7bd4f92b9bdfcc89069a524">  287</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classAP__Button.html#a5f78506ce7bd4f92b9bdfcc89069a524">AP_Button::get_button_state</a>(uint8_t number)</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span>{</div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>    <span class="comment">// pins params are 1 indexed not zero</span></div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>    <span class="keywordflow">if</span> (number == 0 || number &gt; <a class="code hl_define" href="AP__Button_8h.html#ad0109b7853df07a8d87d7d51d8f5890a">AP_BUTTON_NUM_PINS</a>) {</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>    }</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span> </div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="classAP__Button.html#a09d1c93bd87f5d2fbfc99023e607c848">is_pwm_input</a>(number-1)) {</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>        <span class="keywordflow">return</span> (<a class="code hl_variable" href="classAP__Button.html#ad37fbb99992ad5a6f718c6476370f315">pwm_state</a> &amp; (1U&lt;&lt;(number-1)));</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>    }</div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span> </div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>    <span class="keywordflow">return</span> ( ((1 &lt;&lt; (number - 1)) &amp; <a class="code hl_variable" href="classAP__Button.html#a2fb7e2ac4d800702f3be91f3832fb7b7">debounce_mask</a>) != 0);</div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>};</div>
</div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span> </div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span><span class="comment">/*</span></div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span><span class="comment">  get current mask</span></div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span><span class="comment"> */</span></div>
<div class="foldopen" id="foldopen00304" data-start="{" data-end="}">
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno"><a class="line" href="classAP__Button.html#aba35712bc3a265fab26d9a35823537ac">  304</a></span>uint8_t <a class="code hl_function" href="classAP__Button.html#aba35712bc3a265fab26d9a35823537ac">AP_Button::get_mask</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>{</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>    uint8_t mask = 0;</div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>    <span class="keywordflow">for</span> (uint8_t i=0; i&lt;<a class="code hl_define" href="AP__Button_8h.html#ad0109b7853df07a8d87d7d51d8f5890a">AP_BUTTON_NUM_PINS</a>; i++) {</div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__Button.html#aa568940df3d7e0e7470cd9acef0e5390">pin</a>[i] == -1) {</div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>        }</div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="classAP__Button.html#a09d1c93bd87f5d2fbfc99023e607c848">is_pwm_input</a>(i)) {</div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>        }</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>        mask |= <a class="code hl_variable" href="AC__AttitudeControl_8cpp.html#a240c1a4ae2a70d1855f91e4a0b1ac938">hal</a>.<a class="code hl_variable" href="classAP__HAL_1_1HAL.html#a13ed800ad745085097f4d6dce9070eb0">gpio</a>-&gt;<a class="code hl_function" href="classAP__HAL_1_1GPIO.html#a453e2829832c783a5337849218390efc">read</a>(<a class="code hl_variable" href="classAP__Button.html#aa568940df3d7e0e7470cd9acef0e5390">pin</a>[i]) &lt;&lt; i;</div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>    }</div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span> </div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>    <span class="keywordflow">return</span> mask;</div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>}</div>
</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span> </div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span><span class="comment">/*</span></div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span><span class="comment">  called at 1kHz to check for button state change</span></div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span><span class="comment"> */</span></div>
<div class="foldopen" id="foldopen00323" data-start="{" data-end="}">
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno"><a class="line" href="classAP__Button.html#a7c9719c38c11ea25e67bb9afc9dae4ea">  323</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classAP__Button.html#a7c9719c38c11ea25e67bb9afc9dae4ea">AP_Button::timer_update</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>{</div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classAP__Button.html#aa506e3d2ae3d229f2c696ca680998440">enable</a>) {</div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>    }</div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>    uint8_t mask = <a class="code hl_function" href="classAP__Button.html#aba35712bc3a265fab26d9a35823537ac">get_mask</a>();</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>    uint64_t now = <a class="code hl_function" href="namespaceAP__HAL.html#a59336c5fceaf28a76d1df1581a87a25d">AP_HAL::millis64</a>();</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>    <span class="keywordflow">if</span> (mask != <a class="code hl_variable" href="classAP__Button.html#ad3be2491c92117cf2a722c41c07713a5">last_mask</a>) {</div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>        <a class="code hl_variable" href="classAP__Button.html#ad3be2491c92117cf2a722c41c07713a5">last_mask</a> = mask;</div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>        <a class="code hl_variable" href="classAP__Button.html#a04bc6bfe8c1eaaf7357d997700ae6ab6">last_change_time_ms</a> = now;</div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>    }</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__Button.html#a2fb7e2ac4d800702f3be91f3832fb7b7">debounce_mask</a> != <a class="code hl_variable" href="classAP__Button.html#ad3be2491c92117cf2a722c41c07713a5">last_mask</a> &amp;&amp;</div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span>        (now - <a class="code hl_variable" href="classAP__Button.html#a04bc6bfe8c1eaaf7357d997700ae6ab6">last_change_time_ms</a>) &gt; <a class="code hl_define" href="AP__Button_8cpp.html#add56dedbc09f82766e39588e01978e7d">DEBOUNCE_MS</a>) {</div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>        <span class="comment">// crude de-bouncing, debounces all buttons as one, not individually</span></div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>        <a class="code hl_variable" href="classAP__Button.html#a2fb7e2ac4d800702f3be91f3832fb7b7">debounce_mask</a> = <a class="code hl_variable" href="classAP__Button.html#ad3be2491c92117cf2a722c41c07713a5">last_mask</a>;</div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>        <a class="code hl_define" href="AP__HAL_2Semaphores_8h.html#a819dd9ac6de800cdf1014b0a922b67d4">WITH_SEMAPHORE</a>(<a class="code hl_variable" href="classAP__Button.html#a8b39cec00e3a47efd7803eaa26847835">last_debounced_change_ms_sem</a>);</div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>        <a class="code hl_variable" href="classAP__Button.html#ae4727d7ca4cc42a628b538f3586a725e">last_debounced_change_ms</a> = now;</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>    }</div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>}</div>
</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span> </div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span><span class="preprocessor">#if HAL_GCS_ENABLED</span></div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span><span class="comment">/*</span></div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span><span class="comment">  send a BUTTON_CHANGE report to the GCS</span></div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span><span class="comment"> */</span></div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span><span class="keywordtype">void</span> <a class="code hl_function" href="classAP__Button.html#a4b7ab2d0e2439b7c9cecbbde0db85410">AP_Button::send_report</a>(<span class="keywordtype">void</span>)<span class="keyword"> const</span></div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span><span class="keyword"></span>{</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>    <span class="keyword">const</span> uint8_t mask = <a class="code hl_variable" href="classAP__Button.html#ad3be2491c92117cf2a722c41c07713a5">last_mask</a> | <a class="code hl_variable" href="classAP__Button.html#ad37fbb99992ad5a6f718c6476370f315">pwm_state</a>;</div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span>    <span class="keyword">const</span> mavlink_button_change_t packet{</div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span>            time_boot_ms: <a class="code hl_function" href="namespaceAP__HAL.html#a77dffbb18891996280308e21316ec186">AP_HAL::millis</a>(),</div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span>            last_change_ms: uint32_t(<a class="code hl_variable" href="classAP__Button.html#a4bc4334eb10be382036dff124b7d6f36">last_debounce_ms</a>),</div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span>            <a class="code hl_variable" href="AP__Scripting_2generator_2src_2main_8c.html#a8d04d02fe8bb190484bba202fee18f5c">state</a>: mask,</div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>    };</div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span>    <a class="code hl_function" href="GCS_8h.html#ab53f292b698f9a6a3f029dfdbd5a43de">gcs</a>().<a class="code hl_function" href="classGCS.html#ad303c099a0fc8035085a95d1d14eec0c">send_to_active_channels</a>(MAVLINK_MSG_ID_BUTTON_CHANGE,</div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>                                  (<span class="keyword">const</span> <span class="keywordtype">char</span> *)&amp;packet);</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>}</div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span> </div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span><span class="comment">/*</span></div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span><span class="comment">  setup the pins as input with pullup. We need pullup to give reliable</span></div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span><span class="comment">  input with a pulldown button</span></div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span><span class="comment"> */</span></div>
<div class="foldopen" id="foldopen00364" data-start="{" data-end="}">
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno"><a class="line" href="classAP__Button.html#a714d09b9b894c0c776e9e77aef46fa7b">  364</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classAP__Button.html#a714d09b9b894c0c776e9e77aef46fa7b">AP_Button::setup_pins</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>{</div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>    <span class="keywordflow">for</span> (uint8_t i=0; i&lt;<a class="code hl_define" href="AP__Button_8h.html#ad0109b7853df07a8d87d7d51d8f5890a">AP_BUTTON_NUM_PINS</a>; i++) {</div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="classAP__Button.html#a09d1c93bd87f5d2fbfc99023e607c848">is_pwm_input</a>(i)) {</div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span>            <a class="code hl_variable" href="classAP__Button.html#a68dc9c2ebbcc14d5970f50fb039582c3">pwm_pin_source</a>[i].<a class="code hl_function" href="classAP__HAL_1_1PWMSource.html#a405caac59c18d0c7223535d07dd0108a">set_pin</a>(<a class="code hl_variable" href="classAP__Button.html#aa568940df3d7e0e7470cd9acef0e5390">pin</a>[i], <span class="stringliteral">&quot;Button&quot;</span>);</div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>        }</div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__Button.html#aa568940df3d7e0e7470cd9acef0e5390">pin</a>[i] == -1) {</div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>        }</div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span> </div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span>        <a class="code hl_variable" href="AC__AttitudeControl_8cpp.html#a240c1a4ae2a70d1855f91e4a0b1ac938">hal</a>.<a class="code hl_variable" href="classAP__HAL_1_1HAL.html#a13ed800ad745085097f4d6dce9070eb0">gpio</a>-&gt;<a class="code hl_function" href="classAP__HAL_1_1GPIO.html#a3dfc60214bd1aa4936d51ca72c045b95">pinMode</a>(<a class="code hl_variable" href="classAP__Button.html#aa568940df3d7e0e7470cd9acef0e5390">pin</a>[i], <a class="code hl_define" href="AP__HAL_2GPIO_8h.html#af4f5e2024972dc555e998dde1bd151bf">HAL_GPIO_INPUT</a>);</div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>        <span class="comment">// setup pullup</span></div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>        <a class="code hl_variable" href="AC__AttitudeControl_8cpp.html#a240c1a4ae2a70d1855f91e4a0b1ac938">hal</a>.<a class="code hl_variable" href="classAP__HAL_1_1HAL.html#a13ed800ad745085097f4d6dce9070eb0">gpio</a>-&gt;<a class="code hl_function" href="classAP__HAL_1_1GPIO.html#a2b0664bdab1876e3b0bbcd9064eec88e">write</a>(<a class="code hl_variable" href="classAP__Button.html#aa568940df3d7e0e7470cd9acef0e5390">pin</a>[i], 1);</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>    }</div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>}</div>
</div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span> </div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span><span class="comment">// check settings are valid</span></div>
<div class="foldopen" id="foldopen00382" data-start="{" data-end="}">
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno"><a class="line" href="classAP__Button.html#a3f089aaf249725a51a5d5a6b7a375798">  382</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classAP__Button.html#a3f089aaf249725a51a5d5a6b7a375798">AP_Button::arming_checks</a>(<span class="keywordtype">size_t</span> <a class="code hl_variable" href="UART__chargen_8cpp.html#a892366b22e8ea42d95e49308022eef4d">buflen</a>, <span class="keywordtype">char</span> *<a class="code hl_variable" href="UART__chargen_8cpp.html#a8a45ba1322f5f38149f9bb899b09a1f4">buffer</a>)<span class="keyword"> const</span></div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span><span class="keyword"></span>{</div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classAP__Button.html#aa506e3d2ae3d229f2c696ca680998440">enable</a>) {</div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span>    }</div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span>    <span class="keywordflow">for</span> (uint8_t i=0; i&lt;<a class="code hl_define" href="AP__Button_8h.html#ad0109b7853df07a8d87d7d51d8f5890a">AP_BUTTON_NUM_PINS</a>; i++) {</div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="classAP__Button.html#aa568940df3d7e0e7470cd9acef0e5390">pin</a>[i] != -1 &amp;&amp; !<a class="code hl_variable" href="AC__AttitudeControl_8cpp.html#a240c1a4ae2a70d1855f91e4a0b1ac938">hal</a>.<a class="code hl_variable" href="classAP__HAL_1_1HAL.html#a13ed800ad745085097f4d6dce9070eb0">gpio</a>-&gt;<a class="code hl_function" href="classAP__HAL_1_1GPIO.html#a04f032e6576ed089a36a476433227d2e">valid_pin</a>(<a class="code hl_variable" href="classAP__Button.html#aa568940df3d7e0e7470cd9acef0e5390">pin</a>[i])) {</div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span>            uint8_t servo_ch;</div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="AC__AttitudeControl_8cpp.html#a240c1a4ae2a70d1855f91e4a0b1ac938">hal</a>.<a class="code hl_variable" href="classAP__HAL_1_1HAL.html#a13ed800ad745085097f4d6dce9070eb0">gpio</a>-&gt;<a class="code hl_function" href="classAP__HAL_1_1GPIO.html#ac96768bd72c863c3f850968f4a26b4e8">pin_to_servo_channel</a>(<a class="code hl_variable" href="classAP__Button.html#aa568940df3d7e0e7470cd9acef0e5390">pin</a>[i], servo_ch)) {</div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span>                <a class="code hl_variable" href="AC__AttitudeControl_8cpp.html#a240c1a4ae2a70d1855f91e4a0b1ac938">hal</a>.<a class="code hl_variable" href="classAP__HAL_1_1HAL.html#a9337a60383f4264fa96a20dbe43a4e2e">util</a>-&gt;<a class="code hl_function" href="classAP__HAL_1_1Util.html#afaedff8102d9ae2fbc398d2099e30cf6">snprintf</a>(<a class="code hl_variable" href="UART__chargen_8cpp.html#a8a45ba1322f5f38149f9bb899b09a1f4">buffer</a>, <a class="code hl_variable" href="UART__chargen_8cpp.html#a892366b22e8ea42d95e49308022eef4d">buflen</a>, <span class="stringliteral">&quot;BTN_PIN%u=%d, set SERVO%u_FUNCTION=-1&quot;</span>, <span class="keywordtype">unsigned</span>(i + 1), <span class="keywordtype">int</span>(<a class="code hl_variable" href="classAP__Button.html#aa568940df3d7e0e7470cd9acef0e5390">pin</a>[i].get()), <span class="keywordtype">unsigned</span>(servo_ch+1));</div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span>                <a class="code hl_variable" href="AC__AttitudeControl_8cpp.html#a240c1a4ae2a70d1855f91e4a0b1ac938">hal</a>.<a class="code hl_variable" href="classAP__HAL_1_1HAL.html#a9337a60383f4264fa96a20dbe43a4e2e">util</a>-&gt;<a class="code hl_function" href="classAP__HAL_1_1Util.html#afaedff8102d9ae2fbc398d2099e30cf6">snprintf</a>(<a class="code hl_variable" href="UART__chargen_8cpp.html#a8a45ba1322f5f38149f9bb899b09a1f4">buffer</a>, <a class="code hl_variable" href="UART__chargen_8cpp.html#a892366b22e8ea42d95e49308022eef4d">buflen</a>, <span class="stringliteral">&quot;BTN_PIN%u=%d invalid&quot;</span>, <span class="keywordtype">unsigned</span>(i + 1), <span class="keywordtype">int</span>(<a class="code hl_variable" href="classAP__Button.html#aa568940df3d7e0e7470cd9acef0e5390">pin</a>[i].get()));</div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span>            }</div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span>        }</div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span>    }</div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span>}</div>
</div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span> </div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span><span class="keyword">namespace </span><a class="code hl_namespace" href="namespaceAP.html">AP</a> {</div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span> </div>
<div class="foldopen" id="foldopen00403" data-start="{" data-end="}">
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno"><a class="line" href="namespaceAP.html#ae9fe2cf34548960a27ef6559ad91f3b2">  403</a></span><a class="code hl_class" href="classAP__Button.html">AP_Button</a> &amp;<a class="code hl_function" href="namespaceAP.html#ae9fe2cf34548960a27ef6559ad91f3b2">button</a>()</div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span>{</div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span>    <span class="keywordflow">return</span> *<a class="code hl_function" href="classAP__Button.html#a4a8c6f8fa99eb76568218c96805de471">AP_Button::get_singleton</a>();</div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span>}</div>
</div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span> </div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span>}</div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span> </div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span><span class="preprocessor">#endif</span></div>
<div class="ttc" id="aAC__AttitudeControl_8cpp_html_a240c1a4ae2a70d1855f91e4a0b1ac938"><div class="ttname"><a href="AC__AttitudeControl_8cpp.html#a240c1a4ae2a70d1855f91e4a0b1ac938">hal</a></div><div class="ttdeci">const AP_HAL::HAL &amp; hal</div><div class="ttdef"><b>Definition</b> <a href="AP__Compass__AK09916_8cpp_source.html#l00059">AP_Compass_AK09916.cpp:59</a></div></div>
<div class="ttc" id="aAP__Button_8cpp_html_add56dedbc09f82766e39588e01978e7d"><div class="ttname"><a href="AP__Button_8cpp.html#add56dedbc09f82766e39588e01978e7d">DEBOUNCE_MS</a></div><div class="ttdeci">#define DEBOUNCE_MS</div><div class="ttdef"><b>Definition</b> <a href="#l00026">AP_Button.cpp:26</a></div></div>
<div class="ttc" id="aAP__Button_8cpp_html_ae08c3ca4ba26b63cda0bb3e3c6c02785"><div class="ttname"><a href="AP__Button_8cpp.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a></div><div class="ttdeci">const AP_HAL::HAL &amp; hal</div><div class="ttdef"><b>Definition</b> <a href="AC__PID__test_8cpp_source.html#l00021">AC_PID_test.cpp:21</a></div></div>
<div class="ttc" id="aAP__Button_8h_html"><div class="ttname"><a href="AP__Button_8h.html">AP_Button.h</a></div></div>
<div class="ttc" id="aAP__Button_8h_html_a6e8c174e2d8ae8673fa651bd267fe4fe"><div class="ttname"><a href="AP__Button_8h.html#a6e8c174e2d8ae8673fa651bd267fe4fe">AP_BUTTON_REPORT_PERIOD_MS</a></div><div class="ttdeci">#define AP_BUTTON_REPORT_PERIOD_MS</div><div class="ttdef"><b>Definition</b> <a href="AP__Button_8h_source.html#l00032">AP_Button.h:32</a></div></div>
<div class="ttc" id="aAP__Button_8h_html_ad0109b7853df07a8d87d7d51d8f5890a"><div class="ttname"><a href="AP__Button_8h.html#ad0109b7853df07a8d87d7d51d8f5890a">AP_BUTTON_NUM_PINS</a></div><div class="ttdeci">#define AP_BUTTON_NUM_PINS</div><div class="ttdef"><b>Definition</b> <a href="AP__Button_8h_source.html#l00029">AP_Button.h:29</a></div></div>
<div class="ttc" id="aAP__HAL_2GPIO_8h_html_af4f5e2024972dc555e998dde1bd151bf"><div class="ttname"><a href="AP__HAL_2GPIO_8h.html#af4f5e2024972dc555e998dde1bd151bf">HAL_GPIO_INPUT</a></div><div class="ttdeci">#define HAL_GPIO_INPUT</div><div class="ttdef"><b>Definition</b> <a href="AP__HAL_2GPIO_8h_source.html#l00007">GPIO.h:7</a></div></div>
<div class="ttc" id="aAP__HAL_2Semaphores_8h_html_a819dd9ac6de800cdf1014b0a922b67d4"><div class="ttname"><a href="AP__HAL_2Semaphores_8h.html#a819dd9ac6de800cdf1014b0a922b67d4">WITH_SEMAPHORE</a></div><div class="ttdeci">#define WITH_SEMAPHORE(sem)</div><div class="ttdef"><b>Definition</b> <a href="AP__HAL_2Semaphores_8h_source.html#l00054">Semaphores.h:54</a></div></div>
<div class="ttc" id="aAP__JSON_8cpp_html_a37700c57263ada4716d7dbbc43089a24"><div class="ttname"><a href="AP__JSON_8cpp.html#a37700c57263ada4716d7dbbc43089a24">value</a></div><div class="ttdeci">AP_JSON::value value</div><div class="ttdef"><b>Definition</b> <a href="AP__JSON_8cpp_source.html#l00110">AP_JSON.cpp:110</a></div></div>
<div class="ttc" id="aAP__Param_8h_html_a0f9acb038a5283b964b862aea8cc5051"><div class="ttname"><a href="AP__Param_8h.html#a0f9acb038a5283b964b862aea8cc5051">AP_GROUPEND</a></div><div class="ttdeci">#define AP_GROUPEND</div><div class="ttdef"><b>Definition</b> <a href="AP__Param_8h_source.html#l00163">AP_Param.h:163</a></div></div>
<div class="ttc" id="aAP__Param_8h_html_a78a408c84f2a1bafde256ac650142e4d"><div class="ttname"><a href="AP__Param_8h.html#a78a408c84f2a1bafde256ac650142e4d">AP_GROUPINFO</a></div><div class="ttdeci">#define AP_GROUPINFO(name, idx, clazz, element, def)</div><div class="ttdef"><b>Definition</b> <a href="AP__Param_8h_source.html#l00145">AP_Param.h:145</a></div></div>
<div class="ttc" id="aAP__Param_8h_html_ac24e2eb16c2194e975d27e47ddcb7f1c"><div class="ttname"><a href="AP__Param_8h.html#ac24e2eb16c2194e975d27e47ddcb7f1c">AP_GROUPINFO_FLAGS</a></div><div class="ttdeci">#define AP_GROUPINFO_FLAGS(name, idx, clazz, element, def, flags)</div><div class="ttdef"><b>Definition</b> <a href="AP__Param_8h_source.html#l00133">AP_Param.h:133</a></div></div>
<div class="ttc" id="aAP__Param_8h_html_ae25c1c7495435989f8be5781c86be078"><div class="ttname"><a href="AP__Param_8h.html#ae25c1c7495435989f8be5781c86be078">AP_PARAM_FLAG_ENABLE</a></div><div class="ttdeci">#define AP_PARAM_FLAG_ENABLE</div><div class="ttdef"><b>Definition</b> <a href="AP__Param_8h_source.html#l00087">AP_Param.h:87</a></div></div>
<div class="ttc" id="aAP__Scripting_2generator_2src_2main_8c_html_a8d04d02fe8bb190484bba202fee18f5c"><div class="ttname"><a href="AP__Scripting_2generator_2src_2main_8c.html#a8d04d02fe8bb190484bba202fee18f5c">state</a></div><div class="ttdeci">static struct generator_state state</div><div class="ttdef"><b>Definition</b> <a href="AP__Scripting_2generator_2src_2main_8c_source.html#l00087">main.c:87</a></div></div>
<div class="ttc" id="aGCS_8h_html"><div class="ttname"><a href="GCS_8h.html">GCS.h</a></div><div class="ttdoc">Interface definition for the various Ground Control System.</div></div>
<div class="ttc" id="aGCS_8h_html_a266bfe8eda675e1092f045e93932b4a6"><div class="ttname"><a href="GCS_8h.html#a266bfe8eda675e1092f045e93932b4a6">GCS_SEND_TEXT</a></div><div class="ttdeci">#define GCS_SEND_TEXT(severity, format, args...)</div><div class="ttdef"><b>Definition</b> <a href="GCS_8h_source.html#l01349">GCS.h:1349</a></div></div>
<div class="ttc" id="aGCS_8h_html_ab53f292b698f9a6a3f029dfdbd5a43de"><div class="ttname"><a href="GCS_8h.html#ab53f292b698f9a6a3f029dfdbd5a43de">gcs</a></div><div class="ttdeci">GCS &amp; gcs()</div><div class="ttdef"><b>Definition</b> <a href="GCS__Common_8cpp_source.html#l06846">GCS_Common.cpp:6846</a></div></div>
<div class="ttc" id="aGCS__MAVLink_8h_html"><div class="ttname"><a href="GCS__MAVLink_8h.html">GCS_MAVLink.h</a></div><div class="ttdoc">One size fits all header for MAVLink integration.</div></div>
<div class="ttc" id="aRC__Channel_8h_html"><div class="ttname"><a href="RC__Channel_8h.html">RC_Channel.h</a></div><div class="ttdoc">RC_Channel manager, with EEPROM-backed storage of constants.</div></div>
<div class="ttc" id="aRC__Channel_8h_html_abe35aea6177a1cdf87a22af5c263bb89"><div class="ttname"><a href="RC__Channel_8h.html#abe35aea6177a1cdf87a22af5c263bb89">rc</a></div><div class="ttdeci">RC_Channels &amp; rc()</div><div class="ttdef"><b>Definition</b> <a href="RC__Channels_8cpp_source.html#l00314">RC_Channels.cpp:314</a></div></div>
<div class="ttc" id="aUART__chargen_8cpp_html_a892366b22e8ea42d95e49308022eef4d"><div class="ttname"><a href="UART__chargen_8cpp.html#a892366b22e8ea42d95e49308022eef4d">buflen</a></div><div class="ttdeci">uint16_t buflen</div><div class="ttdef"><b>Definition</b> <a href="UART__chargen_8cpp_source.html#l00037">UART_chargen.cpp:37</a></div></div>
<div class="ttc" id="aUART__chargen_8cpp_html_a8a45ba1322f5f38149f9bb899b09a1f4"><div class="ttname"><a href="UART__chargen_8cpp.html#a8a45ba1322f5f38149f9bb899b09a1f4">buffer</a></div><div class="ttdeci">uint8_t buffer[16384]</div><div class="ttdef"><b>Definition</b> <a href="UART__chargen_8cpp_source.html#l00036">UART_chargen.cpp:36</a></div></div>
<div class="ttc" id="aclassAP__Button_html"><div class="ttname"><a href="classAP__Button.html">AP_Button</a></div><div class="ttdef"><b>Definition</b> <a href="AP__Button_8h_source.html#l00034">AP_Button.h:34</a></div></div>
<div class="ttc" id="aclassAP__Button_html_a04bc6bfe8c1eaaf7357d997700ae6ab6"><div class="ttname"><a href="classAP__Button.html#a04bc6bfe8c1eaaf7357d997700ae6ab6">AP_Button::last_change_time_ms</a></div><div class="ttdeci">uint64_t last_change_time_ms</div><div class="ttdef"><b>Definition</b> <a href="AP__Button_8h_source.html#l00105">AP_Button.h:105</a></div></div>
<div class="ttc" id="aclassAP__Button_html_a09d1c93bd87f5d2fbfc99023e607c848"><div class="ttname"><a href="classAP__Button.html#a09d1c93bd87f5d2fbfc99023e607c848">AP_Button::is_pwm_input</a></div><div class="ttdeci">bool is_pwm_input(uint8_t n) const</div><div class="ttdef"><b>Definition</b> <a href="AP__Button_8h_source.html#l00066">AP_Button.h:66</a></div></div>
<div class="ttc" id="aclassAP__Button_html_a277d67ea2e6293d121a3a9cf0d289598"><div class="ttname"><a href="classAP__Button.html#a277d67ea2e6293d121a3a9cf0d289598">AP_Button::_singleton</a></div><div class="ttdeci">static AP_Button * _singleton</div><div class="ttdef"><b>Definition</b> <a href="AP__Button_8h_source.html#l00060">AP_Button.h:60</a></div></div>
<div class="ttc" id="aclassAP__Button_html_a2fb7e2ac4d800702f3be91f3832fb7b7"><div class="ttname"><a href="classAP__Button.html#a2fb7e2ac4d800702f3be91f3832fb7b7">AP_Button::debounce_mask</a></div><div class="ttdeci">uint8_t debounce_mask</div><div class="ttdef"><b>Definition</b> <a href="AP__Button_8h_source.html#l00082">AP_Button.h:82</a></div></div>
<div class="ttc" id="aclassAP__Button_html_a3a6b0762c9834a36540b262b90de8f00"><div class="ttname"><a href="classAP__Button.html#a3a6b0762c9834a36540b262b90de8f00">AP_Button::last_action_time_ms</a></div><div class="ttdeci">uint64_t last_action_time_ms</div><div class="ttdef"><b>Definition</b> <a href="AP__Button_8h_source.html#l00108">AP_Button.h:108</a></div></div>
<div class="ttc" id="aclassAP__Button_html_a3f089aaf249725a51a5d5a6b7a375798"><div class="ttname"><a href="classAP__Button.html#a3f089aaf249725a51a5d5a6b7a375798">AP_Button::arming_checks</a></div><div class="ttdeci">bool arming_checks(size_t buflen, char *buffer) const</div><div class="ttdef"><b>Definition</b> <a href="#l00382">AP_Button.cpp:382</a></div></div>
<div class="ttc" id="aclassAP__Button_html_a40cbc8c90a43c55127ba20ee278395b1"><div class="ttname"><a href="classAP__Button.html#a40cbc8c90a43c55127ba20ee278395b1">AP_Button::pwm_start_debounce_ms</a></div><div class="ttdeci">uint64_t pwm_start_debounce_ms</div><div class="ttdef"><b>Definition</b> <a href="AP__Button_8h_source.html#l00087">AP_Button.h:87</a></div></div>
<div class="ttc" id="aclassAP__Button_html_a4a27af3c747814efee5e27dca5703bfd"><div class="ttname"><a href="classAP__Button.html#a4a27af3c747814efee5e27dca5703bfd">AP_Button::is_input_inverted</a></div><div class="ttdeci">bool is_input_inverted(uint8_t n) const</div><div class="ttdef"><b>Definition</b> <a href="AP__Button_8h_source.html#l00069">AP_Button.h:69</a></div></div>
<div class="ttc" id="aclassAP__Button_html_a4a8c6f8fa99eb76568218c96805de471"><div class="ttname"><a href="classAP__Button.html#a4a8c6f8fa99eb76568218c96805de471">AP_Button::get_singleton</a></div><div class="ttdeci">static AP_Button * get_singleton(void)</div><div class="ttdef"><b>Definition</b> <a href="AP__Button_8h_source.html#l00047">AP_Button.h:47</a></div></div>
<div class="ttc" id="aclassAP__Button_html_a4b7ab2d0e2439b7c9cecbbde0db85410"><div class="ttname"><a href="classAP__Button.html#a4b7ab2d0e2439b7c9cecbbde0db85410">AP_Button::send_report</a></div><div class="ttdeci">void send_report(void) const</div></div>
<div class="ttc" id="aclassAP__Button_html_a4bc4334eb10be382036dff124b7d6f36"><div class="ttname"><a href="classAP__Button.html#a4bc4334eb10be382036dff124b7d6f36">AP_Button::last_debounce_ms</a></div><div class="ttdeci">uint64_t last_debounce_ms</div><div class="ttdef"><b>Definition</b> <a href="AP__Button_8h_source.html#l00102">AP_Button.h:102</a></div></div>
<div class="ttc" id="aclassAP__Button_html_a5802bc0e10cc47522495ae255d760489"><div class="ttname"><a href="classAP__Button.html#a5802bc0e10cc47522495ae255d760489">AP_Button::state_actioned_mask</a></div><div class="ttdeci">uint8_t state_actioned_mask</div><div class="ttdef"><b>Definition</b> <a href="AP__Button_8h_source.html#l00090">AP_Button.h:90</a></div></div>
<div class="ttc" id="aclassAP__Button_html_a5f78506ce7bd4f92b9bdfcc89069a524"><div class="ttname"><a href="classAP__Button.html#a5f78506ce7bd4f92b9bdfcc89069a524">AP_Button::get_button_state</a></div><div class="ttdeci">bool get_button_state(uint8_t number)</div><div class="ttdef"><b>Definition</b> <a href="#l00287">AP_Button.cpp:287</a></div></div>
<div class="ttc" id="aclassAP__Button_html_a62288ab93c5e64a4089d324737a52646"><div class="ttname"><a href="classAP__Button.html#a62288ab93c5e64a4089d324737a52646">AP_Button::run_aux_functions</a></div><div class="ttdeci">void run_aux_functions(bool force)</div><div class="ttdef"><b>Definition</b> <a href="#l00239">AP_Button.cpp:239</a></div></div>
<div class="ttc" id="aclassAP__Button_html_a68dc9c2ebbcc14d5970f50fb039582c3"><div class="ttname"><a href="classAP__Button.html#a68dc9c2ebbcc14d5970f50fb039582c3">AP_Button::pwm_pin_source</a></div><div class="ttdeci">AP_HAL::PWMSource pwm_pin_source[AP_BUTTON_NUM_PINS]</div><div class="ttdef"><b>Definition</b> <a href="AP__Button_8h_source.html#l00093">AP_Button.h:93</a></div></div>
<div class="ttc" id="aclassAP__Button_html_a714d09b9b894c0c776e9e77aef46fa7b"><div class="ttname"><a href="classAP__Button.html#a714d09b9b894c0c776e9e77aef46fa7b">AP_Button::setup_pins</a></div><div class="ttdeci">void setup_pins()</div><div class="ttdef"><b>Definition</b> <a href="#l00364">AP_Button.cpp:364</a></div></div>
<div class="ttc" id="aclassAP__Button_html_a7463f0c63ff8bd82d53b15613e631eef"><div class="ttname"><a href="classAP__Button.html#a7463f0c63ff8bd82d53b15613e631eef">AP_Button::pin_func</a></div><div class="ttdeci">AP_Int16 pin_func[AP_BUTTON_NUM_PINS]</div><div class="ttdef"><b>Definition</b> <a href="AP__Button_8h_source.html#l00073">AP_Button.h:73</a></div></div>
<div class="ttc" id="aclassAP__Button_html_a7c9719c38c11ea25e67bb9afc9dae4ea"><div class="ttname"><a href="classAP__Button.html#a7c9719c38c11ea25e67bb9afc9dae4ea">AP_Button::timer_update</a></div><div class="ttdeci">void timer_update(void)</div><div class="ttdef"><b>Definition</b> <a href="#l00323">AP_Button.cpp:323</a></div></div>
<div class="ttc" id="aclassAP__Button_html_a8780d4eee2231edeeafffad4cb32bc19"><div class="ttname"><a href="classAP__Button.html#a8780d4eee2231edeeafffad4cb32bc19">AP_Button::tentative_pwm_state</a></div><div class="ttdeci">uint8_t tentative_pwm_state</div><div class="ttdef"><b>Definition</b> <a href="AP__Button_8h_source.html#l00086">AP_Button.h:86</a></div></div>
<div class="ttc" id="aclassAP__Button_html_a8b39cec00e3a47efd7803eaa26847835"><div class="ttname"><a href="classAP__Button.html#a8b39cec00e3a47efd7803eaa26847835">AP_Button::last_debounced_change_ms_sem</a></div><div class="ttdeci">HAL_Semaphore last_debounced_change_ms_sem</div><div class="ttdef"><b>Definition</b> <a href="AP__Button_8h_source.html#l00096">AP_Button.h:96</a></div></div>
<div class="ttc" id="aclassAP__Button_html_a8d9b83d1543cc6c670028ea8e9f78f38"><div class="ttname"><a href="classAP__Button.html#a8d9b83d1543cc6c670028ea8e9f78f38">AP_Button::var_info</a></div><div class="ttdeci">static const struct AP_Param::GroupInfo var_info[]</div><div class="ttdef"><b>Definition</b> <a href="AP__Button_8h_source.html#l00032">AP_Button.h:32</a></div></div>
<div class="ttc" id="aclassAP__Button_html_a8ebd1cc78418957070efc635b4a707a6"><div class="ttname"><a href="classAP__Button.html#a8ebd1cc78418957070efc635b4a707a6">AP_Button::last_report_ms</a></div><div class="ttdeci">uint32_t last_report_ms</div><div class="ttdef"><b>Definition</b> <a href="AP__Button_8h_source.html#l00116">AP_Button.h:116</a></div></div>
<div class="ttc" id="aclassAP__Button_html_a93122185e3d0f26f407e41b1adbea836"><div class="ttname"><a href="classAP__Button.html#a93122185e3d0f26f407e41b1adbea836">AP_Button::aux_functions_initialised</a></div><div class="ttdeci">bool aux_functions_initialised</div><div class="ttdef"><b>Definition</b> <a href="AP__Button_8h_source.html#l00111">AP_Button.h:111</a></div></div>
<div class="ttc" id="aclassAP__Button_html_aa506e3d2ae3d229f2c696ca680998440"><div class="ttname"><a href="classAP__Button.html#aa506e3d2ae3d229f2c696ca680998440">AP_Button::enable</a></div><div class="ttdeci">AP_Int8 enable</div><div class="ttdef"><b>Definition</b> <a href="AP__Button_8h_source.html#l00062">AP_Button.h:62</a></div></div>
<div class="ttc" id="aclassAP__Button_html_aa568940df3d7e0e7470cd9acef0e5390"><div class="ttname"><a href="classAP__Button.html#aa568940df3d7e0e7470cd9acef0e5390">AP_Button::pin</a></div><div class="ttdeci">AP_Int8 pin[AP_BUTTON_NUM_PINS]</div><div class="ttdef"><b>Definition</b> <a href="AP__Button_8h_source.html#l00063">AP_Button.h:63</a></div></div>
<div class="ttc" id="aclassAP__Button_html_ab83197dc073a6c5c2fd063b3e2021344"><div class="ttname"><a href="classAP__Button.html#ab83197dc073a6c5c2fd063b3e2021344">AP_Button::AP_Button</a></div><div class="ttdeci">AP_Button(void)</div><div class="ttdef"><b>Definition</b> <a href="#l00130">AP_Button.cpp:130</a></div></div>
<div class="ttc" id="aclassAP__Button_html_aba35712bc3a265fab26d9a35823537ac"><div class="ttname"><a href="classAP__Button.html#aba35712bc3a265fab26d9a35823537ac">AP_Button::get_mask</a></div><div class="ttdeci">uint8_t get_mask(void)</div><div class="ttdef"><b>Definition</b> <a href="#l00304">AP_Button.cpp:304</a></div></div>
<div class="ttc" id="aclassAP__Button_html_ac7dfbc9cfe227aed73e2e5b99e3b914c"><div class="ttname"><a href="classAP__Button.html#ac7dfbc9cfe227aed73e2e5b99e3b914c">AP_Button::initialised</a></div><div class="ttdeci">bool initialised</div><div class="ttdef"><b>Definition</b> <a href="AP__Button_8h_source.html#l00119">AP_Button.h:119</a></div></div>
<div class="ttc" id="aclassAP__Button_html_aca0e09611ac7454783d703c75d5df288"><div class="ttname"><a href="classAP__Button.html#aca0e09611ac7454783d703c75d5df288">AP_Button::update</a></div><div class="ttdeci">void update(void)</div><div class="ttdef"><b>Definition</b> <a href="#l00143">AP_Button.cpp:143</a></div></div>
<div class="ttc" id="aclassAP__Button_html_acc0e040b4d76f4e7f6b4d345cb0ae78b"><div class="ttname"><a href="classAP__Button.html#acc0e040b4d76f4e7f6b4d345cb0ae78b">AP_Button::report_send_time</a></div><div class="ttdeci">AP_Int16 report_send_time</div><div class="ttdef"><b>Definition</b> <a href="AP__Button_8h_source.html#l00076">AP_Button.h:76</a></div></div>
<div class="ttc" id="aclassAP__Button_html_ad37fbb99992ad5a6f718c6476370f315"><div class="ttname"><a href="classAP__Button.html#ad37fbb99992ad5a6f718c6476370f315">AP_Button::pwm_state</a></div><div class="ttdeci">uint8_t pwm_state</div><div class="ttdef"><b>Definition</b> <a href="AP__Button_8h_source.html#l00085">AP_Button.h:85</a></div></div>
<div class="ttc" id="aclassAP__Button_html_ad3be2491c92117cf2a722c41c07713a5"><div class="ttname"><a href="classAP__Button.html#ad3be2491c92117cf2a722c41c07713a5">AP_Button::last_mask</a></div><div class="ttdeci">uint8_t last_mask</div><div class="ttdef"><b>Definition</b> <a href="AP__Button_8h_source.html#l00079">AP_Button.h:79</a></div></div>
<div class="ttc" id="aclassAP__Button_html_ae4727d7ca4cc42a628b538f3586a725e"><div class="ttname"><a href="classAP__Button.html#ae4727d7ca4cc42a628b538f3586a725e">AP_Button::last_debounced_change_ms</a></div><div class="ttdeci">uint64_t last_debounced_change_ms</div><div class="ttdef"><b>Definition</b> <a href="AP__Button_8h_source.html#l00098">AP_Button.h:98</a></div></div>
<div class="ttc" id="aclassAP__HAL_1_1GPIO_html_a04f032e6576ed089a36a476433227d2e"><div class="ttname"><a href="classAP__HAL_1_1GPIO.html#a04f032e6576ed089a36a476433227d2e">AP_HAL::GPIO::valid_pin</a></div><div class="ttdeci">virtual bool valid_pin(uint8_t pin) const</div><div class="ttdef"><b>Definition</b> <a href="AP__HAL_2GPIO_8h_source.html#l00059">GPIO.h:59</a></div></div>
<div class="ttc" id="aclassAP__HAL_1_1GPIO_html_a2b0664bdab1876e3b0bbcd9064eec88e"><div class="ttname"><a href="classAP__HAL_1_1GPIO.html#a2b0664bdab1876e3b0bbcd9064eec88e">AP_HAL::GPIO::write</a></div><div class="ttdeci">virtual void write(uint8_t pin, uint8_t value)=0</div></div>
<div class="ttc" id="aclassAP__HAL_1_1GPIO_html_a3dfc60214bd1aa4936d51ca72c045b95"><div class="ttname"><a href="classAP__HAL_1_1GPIO.html#a3dfc60214bd1aa4936d51ca72c045b95">AP_HAL::GPIO::pinMode</a></div><div class="ttdeci">virtual void pinMode(uint8_t pin, uint8_t output)=0</div></div>
<div class="ttc" id="aclassAP__HAL_1_1GPIO_html_a453e2829832c783a5337849218390efc"><div class="ttname"><a href="classAP__HAL_1_1GPIO.html#a453e2829832c783a5337849218390efc">AP_HAL::GPIO::read</a></div><div class="ttdeci">virtual uint8_t read(uint8_t pin)=0</div></div>
<div class="ttc" id="aclassAP__HAL_1_1GPIO_html_ac96768bd72c863c3f850968f4a26b4e8"><div class="ttname"><a href="classAP__HAL_1_1GPIO.html#ac96768bd72c863c3f850968f4a26b4e8">AP_HAL::GPIO::pin_to_servo_channel</a></div><div class="ttdeci">virtual bool pin_to_servo_channel(uint8_t pin, uint8_t &amp;servo_ch) const</div><div class="ttdef"><b>Definition</b> <a href="AP__HAL_2GPIO_8h_source.html#l00063">GPIO.h:63</a></div></div>
<div class="ttc" id="aclassAP__HAL_1_1HAL_html"><div class="ttname"><a href="classAP__HAL_1_1HAL.html">AP_HAL::HAL</a></div><div class="ttdef"><b>Definition</b> <a href="HAL_8h_source.html#l00021">HAL.h:21</a></div></div>
<div class="ttc" id="aclassAP__HAL_1_1HAL_html_a13ed800ad745085097f4d6dce9070eb0"><div class="ttname"><a href="classAP__HAL_1_1HAL.html#a13ed800ad745085097f4d6dce9070eb0">AP_HAL::HAL::gpio</a></div><div class="ttdeci">AP_HAL::GPIO * gpio</div><div class="ttdef"><b>Definition</b> <a href="HAL_8h_source.html#l00127">HAL.h:127</a></div></div>
<div class="ttc" id="aclassAP__HAL_1_1HAL_html_a9337a60383f4264fa96a20dbe43a4e2e"><div class="ttname"><a href="classAP__HAL_1_1HAL.html#a9337a60383f4264fa96a20dbe43a4e2e">AP_HAL::HAL::util</a></div><div class="ttdeci">AP_HAL::Util * util</div><div class="ttdef"><b>Definition</b> <a href="HAL_8h_source.html#l00131">HAL.h:131</a></div></div>
<div class="ttc" id="aclassAP__HAL_1_1HAL_html_a94ab41309b1ff10b8b862b826e59c882"><div class="ttname"><a href="classAP__HAL_1_1HAL.html#a94ab41309b1ff10b8b862b826e59c882">AP_HAL::HAL::scheduler</a></div><div class="ttdeci">AP_HAL::Scheduler * scheduler</div><div class="ttdef"><b>Definition</b> <a href="HAL_8h_source.html#l00130">HAL.h:130</a></div></div>
<div class="ttc" id="aclassAP__HAL_1_1PWMSource_html_a405caac59c18d0c7223535d07dd0108a"><div class="ttname"><a href="classAP__HAL_1_1PWMSource.html#a405caac59c18d0c7223535d07dd0108a">AP_HAL::PWMSource::set_pin</a></div><div class="ttdeci">bool set_pin(int16_t new_pin, const char *subsystem)</div><div class="ttdef"><b>Definition</b> <a href="AP__HAL_2GPIO_8cpp_source.html#l00018">GPIO.cpp:18</a></div></div>
<div class="ttc" id="aclassAP__HAL_1_1PWMSource_html_afe178e6a47469b92a8795064054d8448"><div class="ttname"><a href="classAP__HAL_1_1PWMSource.html#afe178e6a47469b92a8795064054d8448">AP_HAL::PWMSource::get_pwm_us</a></div><div class="ttdeci">uint16_t get_pwm_us()</div><div class="ttdef"><b>Definition</b> <a href="AP__HAL_2GPIO_8cpp_source.html#l00088">GPIO.cpp:88</a></div></div>
<div class="ttc" id="aclassAP__HAL_1_1Scheduler_html_ac2c4230957d5dbd3c2fd104af2794b4f"><div class="ttname"><a href="classAP__HAL_1_1Scheduler.html#ac2c4230957d5dbd3c2fd104af2794b4f">AP_HAL::Scheduler::register_timer_process</a></div><div class="ttdeci">virtual void register_timer_process(AP_HAL::MemberProc)=0</div></div>
<div class="ttc" id="aclassAP__HAL_1_1Util_html_afaedff8102d9ae2fbc398d2099e30cf6"><div class="ttname"><a href="classAP__HAL_1_1Util.html#afaedff8102d9ae2fbc398d2099e30cf6">AP_HAL::Util::snprintf</a></div><div class="ttdeci">int snprintf(char *str, size_t size, const char *format,...) FMT_PRINTF(4</div><div class="ttdef"><b>Definition</b> <a href="AP__HAL_2Util_8cpp_source.html#l00044">Util.cpp:44</a></div></div>
<div class="ttc" id="aclassAP__JSON_1_1value_html"><div class="ttname"><a href="classAP__JSON_1_1value.html">AP_JSON::value</a></div><div class="ttdef"><b>Definition</b> <a href="AP__JSON_8h_source.html#l00023">AP_JSON.h:24</a></div></div>
<div class="ttc" id="aclassAP__Param_html_a5f6dcfce1c0a79cf5bd81283e22f3201"><div class="ttname"><a href="classAP__Param.html#a5f6dcfce1c0a79cf5bd81283e22f3201">AP_Param::setup_object_defaults</a></div><div class="ttdeci">static void setup_object_defaults(const void *object_pointer, const struct GroupInfo *group_info)</div><div class="ttdef"><b>Definition</b> <a href="main_8cpp_source.html#l00010">main.cpp:10</a></div></div>
<div class="ttc" id="aclassGCS_html_ad303c099a0fc8035085a95d1d14eec0c"><div class="ttname"><a href="classGCS.html#ad303c099a0fc8035085a95d1d14eec0c">GCS::send_to_active_channels</a></div><div class="ttdeci">void send_to_active_channels(uint32_t msgid, const char *pkt)</div><div class="ttdef"><b>Definition</b> <a href="GCS_8cpp_source.html#l00088">GCS.cpp:88</a></div></div>
<div class="ttc" id="aclassRC__Channel_html"><div class="ttname"><a href="classRC__Channel.html">RC_Channel</a></div><div class="ttdoc">Object managing one RC channel.</div><div class="ttdef"><b>Definition</b> <a href="RC__Channel_8h_source.html#l00018">RC_Channel.h:18</a></div></div>
<div class="ttc" id="aclassRC__Channel_html_a2006134fd195519c0616e23b9f90bb46"><div class="ttname"><a href="classRC__Channel.html#a2006134fd195519c0616e23b9f90bb46">RC_Channel::AuxSwitchPos</a></div><div class="ttdeci">AuxSwitchPos</div><div class="ttdef"><b>Definition</b> <a href="RC__Channel_8h_source.html#l00290">RC_Channel.h:290</a></div></div>
<div class="ttc" id="aclassRC__Channel_html_a2006134fd195519c0616e23b9f90bb46a41bc94cbd8eebea13ce0491b2ac11b88"><div class="ttname"><a href="classRC__Channel.html#a2006134fd195519c0616e23b9f90bb46a41bc94cbd8eebea13ce0491b2ac11b88">RC_Channel::AuxSwitchPos::LOW</a></div><div class="ttdeci">@ LOW</div></div>
<div class="ttc" id="aclassRC__Channel_html_a2006134fd195519c0616e23b9f90bb46ab89de3b4b81c4facfac906edf29aec8c"><div class="ttname"><a href="classRC__Channel.html#a2006134fd195519c0616e23b9f90bb46ab89de3b4b81c4facfac906edf29aec8c">RC_Channel::AuxSwitchPos::HIGH</a></div><div class="ttdeci">@ HIGH</div></div>
<div class="ttc" id="aclassRC__Channel_html_a373da62ddc6d235ad4e54a7f0868e169"><div class="ttname"><a href="classRC__Channel.html#a373da62ddc6d235ad4e54a7f0868e169">RC_Channel::AUX_SWITCH_PWM_TRIGGER_LOW</a></div><div class="ttdeci">static const uint16_t AUX_SWITCH_PWM_TRIGGER_LOW</div><div class="ttdef"><b>Definition</b> <a href="RC__Channel_8h_source.html#l00327">RC_Channel.h:327</a></div></div>
<div class="ttc" id="aclassRC__Channel_html_a466a63bf0f7aadea5619bef7da61e885"><div class="ttname"><a href="classRC__Channel.html#a466a63bf0f7aadea5619bef7da61e885">RC_Channel::run_aux_function</a></div><div class="ttdeci">bool run_aux_function(AUX_FUNC ch_option, AuxSwitchPos pos, AuxFuncTriggerSource source)</div><div class="ttdef"><b>Definition</b> <a href="RC__Channel_8cpp_source.html#l01213">RC_Channel.cpp:1213</a></div></div>
<div class="ttc" id="aclassRC__Channel_html_a554554956b49e356bdabbf1284ebce1d"><div class="ttname"><a href="classRC__Channel.html#a554554956b49e356bdabbf1284ebce1d">RC_Channel::RC_MAX_LIMIT_PWM</a></div><div class="ttdeci">static const uint16_t RC_MAX_LIMIT_PWM</div><div class="ttdef"><b>Definition</b> <a href="RC__Channel_8h_source.html#l00317">RC_Channel.h:317</a></div></div>
<div class="ttc" id="aclassRC__Channel_html_a8b590609d99a9c43274faeabfae10336"><div class="ttname"><a href="classRC__Channel.html#a8b590609d99a9c43274faeabfae10336">RC_Channel::string_for_aux_pos</a></div><div class="ttdeci">const char * string_for_aux_pos(AuxSwitchPos pos) const</div><div class="ttdef"><b>Definition</b> <a href="RC__Channel_8cpp_source.html#l00787">RC_Channel.cpp:787</a></div></div>
<div class="ttc" id="aclassRC__Channel_html_ab381bbbbb335eb84e3f0dbc1da6b9741"><div class="ttname"><a href="classRC__Channel.html#ab381bbbbb335eb84e3f0dbc1da6b9741">RC_Channel::string_for_aux_function</a></div><div class="ttdeci">const char * string_for_aux_function(AUX_FUNC function) const</div><div class="ttdef"><b>Definition</b> <a href="RC__Channel_8cpp_source.html#l00776">RC_Channel.cpp:776</a></div></div>
<div class="ttc" id="aclassRC__Channel_html_ae249c352997284fd0d29bf67adf7835a"><div class="ttname"><a href="classRC__Channel.html#ae249c352997284fd0d29bf67adf7835a">RC_Channel::AUX_FUNC</a></div><div class="ttdeci">AUX_FUNC</div><div class="ttdef"><b>Definition</b> <a href="RC__Channel_8h_source.html#l00107">RC_Channel.h:107</a></div></div>
<div class="ttc" id="aclassRC__Channel_html_ae249c352997284fd0d29bf67adf7835aacd6102c4e0e339658526415ee06ad67d"><div class="ttname"><a href="classRC__Channel.html#ae249c352997284fd0d29bf67adf7835aacd6102c4e0e339658526415ee06ad67d">RC_Channel::AUX_FUNC::DO_NOTHING</a></div><div class="ttdeci">@ DO_NOTHING</div></div>
<div class="ttc" id="aclassRC__Channel_html_af006101c87e3f53b6759bd42b65ae7d1"><div class="ttname"><a href="classRC__Channel.html#af006101c87e3f53b6759bd42b65ae7d1">RC_Channel::AUX_SWITCH_PWM_TRIGGER_HIGH</a></div><div class="ttdeci">static const uint16_t AUX_SWITCH_PWM_TRIGGER_HIGH</div><div class="ttdef"><b>Definition</b> <a href="RC__Channel_8h_source.html#l00325">RC_Channel.h:325</a></div></div>
<div class="ttc" id="aclassRC__Channel_html_af8929cb25282aa44a15c5eac57398bd9a57b35198356d373bcd2a6e08abcb3795"><div class="ttname"><a href="classRC__Channel.html#af8929cb25282aa44a15c5eac57398bd9a57b35198356d373bcd2a6e08abcb3795">RC_Channel::AuxFuncTriggerSource::BUTTON</a></div><div class="ttdeci">@ BUTTON</div></div>
<div class="ttc" id="aclassRC__Channels_html_a3736f2167041c3930941f66c73ec7d1d"><div class="ttname"><a href="classRC__Channels.html#a3736f2167041c3930941f66c73ec7d1d">RC_Channels::channel</a></div><div class="ttdeci">virtual RC_Channel * channel(uint8_t chan)=0</div></div>
<div class="ttc" id="aexamples_2AnalogIn_2AnalogIn_8cpp_html_abe4194b4dba3de3d9a7e7842bd6fc8ac"><div class="ttname"><a href="examples_2AnalogIn_2AnalogIn_8cpp.html#abe4194b4dba3de3d9a7e7842bd6fc8ac">pin</a></div><div class="ttdeci">static int8_t pin</div><div class="ttdef"><b>Definition</b> <a href="examples_2AnalogIn_2AnalogIn_8cpp_source.html#l00033">AnalogIn.cpp:33</a></div></div>
<div class="ttc" id="afunctor_8h_html_a00e5874203cecc310017f9166f2c0e36"><div class="ttname"><a href="functor_8h.html#a00e5874203cecc310017f9166f2c0e36">FUNCTOR_BIND_MEMBER</a></div><div class="ttdeci">#define FUNCTOR_BIND_MEMBER(func, rettype,...)</div><div class="ttdef"><b>Definition</b> <a href="functor_8h_source.html#l00031">functor.h:31</a></div></div>
<div class="ttc" id="anamespaceAP__HAL_html_a52edeef7d5ffaa365e1229b87c170307"><div class="ttname"><a href="namespaceAP__HAL.html#a52edeef7d5ffaa365e1229b87c170307">AP_HAL::panic</a></div><div class="ttdeci">void panic(const char *errormsg,...) FMT_PRINTF(1</div><div class="ttdef"><b>Definition</b> <a href="AP__HAL__ChibiOS_2system_8cpp_source.html#l00327">system.cpp:327</a></div></div>
<div class="ttc" id="anamespaceAP__HAL_html_a59336c5fceaf28a76d1df1581a87a25d"><div class="ttname"><a href="namespaceAP__HAL.html#a59336c5fceaf28a76d1df1581a87a25d">AP_HAL::millis64</a></div><div class="ttdeci">uint64_t millis64()</div><div class="ttdef"><b>Definition</b> <a href="AP__HAL__ChibiOS_2system_8cpp_source.html#l00392">system.cpp:392</a></div></div>
<div class="ttc" id="anamespaceAP__HAL_html_a77dffbb18891996280308e21316ec186"><div class="ttname"><a href="namespaceAP__HAL.html#a77dffbb18891996280308e21316ec186">AP_HAL::millis</a></div><div class="ttdeci">uint32_t millis()</div><div class="ttdef"><b>Definition</b> <a href="AP__HAL__ChibiOS_2system_8cpp_source.html#l00377">system.cpp:377</a></div></div>
<div class="ttc" id="anamespaceAP_html"><div class="ttname"><a href="namespaceAP.html">AP</a></div><div class="ttdef"><b>Definition</b> <a href="AC__Avoid_8cpp_source.html#l01481">AC_Avoid.cpp:1481</a></div></div>
<div class="ttc" id="anamespaceAP_html_ae9fe2cf34548960a27ef6559ad91f3b2"><div class="ttname"><a href="namespaceAP.html#ae9fe2cf34548960a27ef6559ad91f3b2">AP::button</a></div><div class="ttdeci">AP_Button &amp; button()</div><div class="ttdef"><b>Definition</b> <a href="#l00403">AP_Button.cpp:403</a></div></div>
<div class="ttc" id="astructAP__Param_1_1GroupInfo_html"><div class="ttname"><a href="structAP__Param_1_1GroupInfo.html">AP_Param::GroupInfo</a></div><div class="ttdef"><b>Definition</b> <a href="AP__Param_8h_source.html#l00199">AP_Param.h:199</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Mar 22 2024 16:14:13 for APM:Libraries by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
